"use strict";(self.webpackChunkestudiajoven=self.webpackChunkestudiajoven||[]).push([[179],{2011:(Et,Me,L)=>{L.d(Me,{Dh:()=>me,GT:()=>ce,cc:()=>Be,hO:()=>Ye,on:()=>z,pX:()=>ue,xv:()=>be});var l=L(4650),G=L(127),x=L(5813);Et=L.hmd(Et);const ae=["ngOnDestroy"],ue=(Le,Oe,He,Ve={})=>new Proxy(Le,{get:(ke,Pe)=>He.runOutsideAngular(()=>{var et;if(Le[Pe])return!(null===(et=Ve?.spy)||void 0===et)&&et.get&&Ve.spy.get(Pe,Le[Pe]),Le[Pe];if(ae.indexOf(Pe)>-1)return()=>{};const ie=Oe.toPromise().then(pe=>{const Ce=pe&&pe[Pe];return"function"==typeof Ce?Ce.bind(pe):Ce&&Ce.then?Ce.then(nt=>He.run(()=>nt)):He.run(()=>Ce)});return new Proxy(()=>{},{get:(pe,Ce)=>ie[Ce],apply:(pe,Ce,nt)=>ie.then(ze=>{var kt;const lt=ze&&ze(...nt);return!(null===(kt=Ve?.spy)||void 0===kt)&&kt.apply&&Ve.spy.apply(Pe,nt,lt),lt})})})}),ce=(Le,Oe)=>{Oe.forEach(He=>{Object.getOwnPropertyNames(He.prototype||He).forEach(Ve=>{Object.defineProperty(Le.prototype,Ve,Object.getOwnPropertyDescriptor(He.prototype||He,Ve))})})};class Ie{constructor(Oe){return Oe}}const me=new l.OlP("angularfire2.app.options"),be=new l.OlP("angularfire2.app.name");function z(Le,Oe,He){const ke="object"==typeof He&&He||{};ke.name=ke.name||"string"==typeof He&&He||"[DEFAULT]";const et=G.Z.apps.filter(ie=>ie&&ie.name===ke.name)[0]||Oe.runOutsideAngular(()=>G.Z.initializeApp(Le,ke));try{JSON.stringify(Le)!==JSON.stringify(et.options)&&H("error",`${et.name} Firebase App already initialized with different options${Et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ie(et)}const H=(Le,...Oe)=>{(0,l.X6Q)()&&typeof console<"u"&&console[Le](...Oe)},ee={provide:Ie,useFactory:z,deps:[me,l.R0b,[new l.FiY,be]]};let Ye=(()=>{class Le{constructor(He){G.Z.registerVersion("angularfire",x.q4.full,"core"),G.Z.registerVersion("angularfire",x.q4.full,"app-compat"),G.Z.registerVersion("angular",l.q4F.full,He.toString())}static initializeApp(He,Ve){return{ngModule:Le,providers:[{provide:me,useValue:He},{provide:be,useValue:Ve}]}}}return Le.\u0275fac=function(He){return new(He||Le)(l.LFG(l.Lbi))},Le.\u0275mod=l.oAB({type:Le}),Le.\u0275inj=l.cJS({providers:[ee]}),Le})();function Be(Le,Oe,He,Ve,ke){const[,Pe,et]=globalThis.\u0275AngularfireInstanceCache.find(ie=>ie[0]===Le)||[];if(Pe)return function Xe(Le,Oe){try{return Le.toString()===Oe.toString()}catch{return Le===Oe}}(ke,et)||(Ee("error",`${Oe} was already initialized on the ${He} Firebase App with different settings.${yt?" You may need to reload as Firebase is not HMR aware.":""}`),Ee("warn",{is:ke,was:et})),Pe;{const ie=Ve();return globalThis.\u0275AngularfireInstanceCache.push([Le,ie,ke]),ie}}const yt=!!Et.hot,Ee=(Le,...Oe)=>{(0,l.X6Q)()&&typeof console<"u"&&console[Le](...Oe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Et,Me,L)=>{L.d(Me,{q4:()=>eh,iC:()=>Cc,fc:()=>nh,HU:()=>ar,vb:()=>Qt,JM:()=>Xf});var l=L(4650),G=L(5867),x=L(5861),ae=L(9681),ue=L(2090),ce=L(4859),Ie=L(1877),me=L(8766);const be="@firebase/installations",z="0.5.12",H=1e4,ee=`w:${z}`,Ye="FIS_v2",Be="https://firebaseinstallations.googleapis.com/v1",Xe=36e5,Oe=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function He(T){return T instanceof ue.ZR&&T.code.includes("request-failed")}function Ve({projectId:T}){return`${Be}/projects/${T}/installations`}function ke(T){return{token:T.token,requestStatus:2,expiresIn:ze(T.expiresIn),creationTime:Date.now()}}function Pe(T,C){return et.apply(this,arguments)}function et(){return(et=(0,x.Z)(function*(T,C){const V=(yield C.json()).error;return Oe.create("request-failed",{requestName:T,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function ie({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function Ce(T){return nt.apply(this,arguments)}function nt(){return(nt=(0,x.Z)(function*(T){const C=yield T();return C.status>=500&&C.status<600?T():C})).apply(this,arguments)}function ze(T){return Number(T.replace("s","000"))}function he(){return(he=(0,x.Z)(function*({appConfig:T,heartbeatServiceProvider:C},{fid:O}){const V=Ve(T),X=ie(T),fe=C.getImmediate({optional:!0});if(fe){const Wt=yield fe.getHeartbeatsHeader();Wt&&X.append("x-firebase-client",Wt)}const ot={method:"POST",headers:X,body:JSON.stringify({fid:O,authVersion:Ye,appId:T.appId,sdkVersion:ee})},Nt=yield Ce(()=>fetch(V,ot));if(Nt.ok){const Wt=yield Nt.json();return{fid:Wt.fid||O,registrationStatus:2,refreshToken:Wt.refreshToken,authToken:ke(Wt.authToken)}}throw yield Pe("Create Installation",Nt)})).apply(this,arguments)}function ve(T){return new Promise(C=>{setTimeout(C,T)})}const Ue=/^[cdef][\w-]{21}$/,qe="";function We(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const O=function ft(T){return function Te(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return Ue.test(O)?O:qe}catch{return qe}}function ct(T){return`${T.appName}!${T.appId}`}const En=new Map;function Rt(T,C){const O=ct(T);ln(O,C),function Jn(T,C){const O=function un(){return!On&&"BroadcastChannel"in self&&(On=new BroadcastChannel("[Firebase] FID Change"),On.onmessage=T=>{ln(T.data.key,T.data.fid)}),On}();O&&O.postMessage({key:T,fid:C}),function cr(){0===En.size&&On&&(On.close(),On=null)}()}(O,C)}function ln(T,C){const O=En.get(T);if(O)for(const V of O)V(C)}let On=null;const yr="firebase-installations-database",Li=1,zn="firebase-installations-store";let se=null;function ne(){return se||(se=(0,me.X3)(yr,Li,{upgrade:(T,C)=>{0===C&&T.createObjectStore(zn)}})),se}function de(T,C){return Re.apply(this,arguments)}function Re(){return(Re=(0,x.Z)(function*(T,C){const O=ct(T),X=(yield ne()).transaction(zn,"readwrite"),fe=X.objectStore(zn),we=yield fe.get(O);return yield fe.put(C,O),yield X.done,(!we||we.fid!==C.fid)&&Rt(T,C.fid),C})).apply(this,arguments)}function _e(T){return it.apply(this,arguments)}function it(){return(it=(0,x.Z)(function*(T){const C=ct(T),V=(yield ne()).transaction(zn,"readwrite");yield V.objectStore(zn).delete(C),yield V.done})).apply(this,arguments)}function cn(T,C){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,x.Z)(function*(T,C){const O=ct(T),X=(yield ne()).transaction(zn,"readwrite"),fe=X.objectStore(zn),we=yield fe.get(O),ot=C(we);return void 0===ot?yield fe.delete(O):yield fe.put(ot,O),yield X.done,ot&&(!we||we.fid!==ot.fid)&&Rt(T,ot.fid),ot})).apply(this,arguments)}function Ut(T){return vn.apply(this,arguments)}function vn(){return vn=(0,x.Z)(function*(T){let C;const O=yield cn(T.appConfig,V=>{const X=function Mt(T){return Gn(T||{fid:We(),registrationStatus:0})}(V),fe=function wt(T,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Oe.create("app-offline"))};const O={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},V=function xt(T,C){return Mn.apply(this,arguments)}(T,O);return{installationEntry:O,registrationPromise:V}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:bn(T)}:{installationEntry:C}}(T,X);return C=fe.registrationPromise,fe.installationEntry});return O.fid===qe?{installationEntry:yield C}:{installationEntry:O,registrationPromise:C}}),vn.apply(this,arguments)}function Mn(){return Mn=(0,x.Z)(function*(T,C){try{const O=yield function lt(T,C){return he.apply(this,arguments)}(T,C);return de(T.appConfig,O)}catch(O){throw He(O)&&409===O.customData.serverCode?yield _e(T.appConfig):yield de(T.appConfig,{fid:C.fid,registrationStatus:0}),O}}),Mn.apply(this,arguments)}function bn(T){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,x.Z)(function*(T){let C=yield fn(T.appConfig);for(;1===C.registrationStatus;)yield ve(100),C=yield fn(T.appConfig);if(0===C.registrationStatus){const{installationEntry:O,registrationPromise:V}=yield Ut(T);return V||O}return C})).apply(this,arguments)}function fn(T){return cn(T,C=>{if(!C)throw Oe.create("installation-not-found");return Gn(C)})}function Gn(T){return function fi(T){return 1===T.registrationStatus&&T.registrationTime+H<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function pi(){return(pi=(0,x.Z)(function*({appConfig:T,heartbeatServiceProvider:C},O){const V=function tn(T,{fid:C}){return`${Ve(T)}/${C}/authTokens:generate`}(T,O),X=function pe(T,{refreshToken:C}){const O=ie(T);return O.append("Authorization",function kt(T){return`${Ye} ${T}`}(C)),O}(T,O),fe=C.getImmediate({optional:!0});if(fe){const Wt=yield fe.getHeartbeatsHeader();Wt&&X.append("x-firebase-client",Wt)}const ot={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:ee,appId:T.appId}})},Nt=yield Ce(()=>fetch(V,ot));if(Nt.ok)return ke(yield Nt.json());throw yield Pe("Generate Auth Token",Nt)})).apply(this,arguments)}function Q(T){return $.apply(this,arguments)}function $(){return $=(0,x.Z)(function*(T,C=!1){let O;const V=yield cn(T.appConfig,fe=>{if(!Ot(fe))throw Oe.create("not-registered");const we=fe.authToken;if(!C&&function Dn(T){return 2===T.requestStatus&&!function In(T){const C=Date.now();return C<T.creationTime||T.creationTime+T.expiresIn<C+Xe}(T)}(we))return fe;if(1===we.requestStatus)return O=function U(T,C){return q.apply(this,arguments)}(T,C),fe;{if(!navigator.onLine)throw Oe.create("app-offline");const ot=function Dr(T){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:C})}(fe);return O=function Fe(T,C){return rt.apply(this,arguments)}(T,ot),ot}});return O?yield O:V.authToken}),$.apply(this,arguments)}function q(){return(q=(0,x.Z)(function*(T,C){let O=yield Z(T.appConfig);for(;1===O.authToken.requestStatus;)yield ve(100),O=yield Z(T.appConfig);const V=O.authToken;return 0===V.requestStatus?Q(T,C):V})).apply(this,arguments)}function Z(T){return cn(T,C=>{if(!Ot(C))throw Oe.create("not-registered");return function re(T){return 1===T.requestStatus&&T.requestTime+H<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function rt(){return rt=(0,x.Z)(function*(T,C){try{const O=yield function zt(T,C){return pi.apply(this,arguments)}(T,C),V=Object.assign(Object.assign({},C),{authToken:O});return yield de(T.appConfig,V),O}catch(O){if(!He(O)||401!==O.customData.serverCode&&404!==O.customData.serverCode){const V=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield de(T.appConfig,V)}else yield _e(T.appConfig);throw O}}),rt.apply(this,arguments)}function Ot(T){return void 0!==T&&2===T.registrationStatus}function W(){return(W=(0,x.Z)(function*(T){const C=T,{installationEntry:O,registrationPromise:V}=yield Ut(C);return V?V.catch(console.error):Q(C).catch(console.error),O.fid})).apply(this,arguments)}function je(){return je=(0,x.Z)(function*(T,C=!1){const O=T;return yield function Vt(T){return qt.apply(this,arguments)}(O),(yield Q(O,C)).token}),je.apply(this,arguments)}function qt(){return(qt=(0,x.Z)(function*(T){const{registrationPromise:C}=yield Ut(T);C&&(yield C)})).apply(this,arguments)}function nc(T){return Oe.create("missing-app-config-values",{valueName:T})}const ql="installations",Ba=T=>{const C=T.getProvider("app").getImmediate(),O=function zl(T){if(!T||!T.options)throw nc("App Configuration");if(!T.name)throw nc("App Name");const C=["projectId","apiKey","appId"];for(const O of C)if(!T.options[O])throw nc(O);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(C);return{app:C,appConfig:O,heartbeatServiceProvider:(0,ae._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Rd=T=>{const C=T.getProvider("app").getImmediate(),O=(0,ae._getProvider)(C,ql).getImmediate();return{getId:()=>function K(T){return W.apply(this,arguments)}(O),getToken:X=>function Se(T){return je.apply(this,arguments)}(O,X)}};(function rc(){(0,ae._registerComponent)(new ce.wA(ql,Ba,"PUBLIC")),(0,ae._registerComponent)(new ce.wA("installations-internal",Rd,"PRIVATE"))})(),(0,ae.registerVersion)(be,z),(0,ae.registerVersion)(be,z,"esm2017");const _n="@firebase/remote-config",$r=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ao{constructor(C,O,V,X){this.client=C,this.storage=O,this.storageCache=V,this.logger=X}isCachedDataFresh(C,O){if(!O)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-O,X=V<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${X}.`),X}fetch(C){var O=this;return(0,x.Z)(function*(){const[V,X]=yield Promise.all([O.storage.getLastSuccessfulFetchTimestampMillis(),O.storage.getLastSuccessfulFetchResponse()]);if(X&&O.isCachedDataFresh(C.cacheMaxAgeMillis,V))return X;C.eTag=X&&X.eTag;const fe=yield O.client.fetch(C),we=[O.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===fe.status&&we.push(O.storage.setLastSuccessfulFetchResponse(fe)),yield Promise.all(we),fe})()}}function bs(T=navigator){return T.languages&&T.languages[0]||T.language}class Ir{constructor(C,O,V,X,fe,we){this.firebaseInstallations=C,this.sdkVersion=O,this.namespace=V,this.projectId=X,this.apiKey=fe,this.appId=we}fetch(C){var O=this;return(0,x.Z)(function*(){var V,X,fe;const[we,ot]=yield Promise.all([O.firebaseInstallations.getId(),O.firebaseInstallations.getToken()]),Wt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${O.projectId}/namespaces/${O.namespace}:fetch?key=${O.apiKey}`,Gt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},It={sdk_version:O.sdkVersion,app_instance_id:we,app_instance_id_token:ot,app_id:O.appId,language_code:bs()},qr={method:"POST",headers:Gt,body:JSON.stringify(It)},Pr=fetch(Wt,qr),Kr=new Promise((ss,Ln)=>{C.signal.addEventListener(()=>{const va=new Error("The operation was aborted.");va.name="AbortError",Ln(va)})});let $o;try{yield Promise.race([Pr,Kr]),$o=yield Pr}catch(ss){let Ln="fetch-client-network";throw"AbortError"===(null===(V=ss)||void 0===V?void 0:V.name)&&(Ln="fetch-timeout"),$r.create(Ln,{originalErrorMessage:null===(X=ss)||void 0===X?void 0:X.message})}let hl=$o.status;const is=$o.headers.get("ETag")||void 0;let $s,yi;if(200===$o.status){let ss;try{ss=yield $o.json()}catch(Ln){throw $r.create("fetch-client-parse",{originalErrorMessage:null===(fe=Ln)||void 0===fe?void 0:fe.message})}$s=ss.entries,yi=ss.state}if("INSTANCE_STATE_UNSPECIFIED"===yi?hl=500:"NO_CHANGE"===yi?hl=304:("NO_TEMPLATE"===yi||"EMPTY_CONFIG"===yi)&&($s={}),304!==hl&&200!==hl)throw $r.create("fetch-status",{httpStatus:hl});return{status:hl,eTag:is,config:$s}})()}}class $t{constructor(C,O){this.client=C,this.storage=O}fetch(C){var O=this;return(0,x.Z)(function*(){const V=(yield O.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return O.attemptFetch(C,V)})()}attemptFetch(C,{throttleEndTimeMillis:O,backoffCount:V}){var X=this;return(0,x.Z)(function*(){yield function Wr(T,C){return new Promise((O,V)=>{const X=Math.max(C-Date.now(),0),fe=setTimeout(O,X);T.addEventListener(()=>{clearTimeout(fe),V($r.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,O);try{const fe=yield X.client.fetch(C);return yield X.storage.deleteThrottleMetadata(),fe}catch(fe){if(!function xf(T){if(!(T instanceof ue.ZR&&T.customData))return!1;const C=Number(T.customData.httpStatus);return 429===C||500===C||503===C||504===C}(fe))throw fe;const we={throttleEndTimeMillis:Date.now()+(0,ue.$s)(V),backoffCount:V+1};return yield X.storage.setThrottleMetadata(we),X.attemptFetch(C,we)}})()}}class Od{constructor(C,O,V,X,fe){this.app=C,this._client=O,this._storageCache=V,this._storage=X,this._logger=fe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Bs(T,C){var O;const V=T.target.error||void 0;return $r.create(C,{originalErrorMessage:V&&(null===(O=V)||void 0===O?void 0:O.message)})}const ws="app_namespace_store";class si{constructor(C,O,V,X=function wm(){return new Promise((T,C)=>{var O;try{const V=indexedDB.open("firebase_remote_config",1);V.onerror=X=>{C(Bs(X,"storage-open"))},V.onsuccess=X=>{T(X.target.result)},V.onupgradeneeded=X=>{0===X.oldVersion&&X.target.result.createObjectStore(ws,{keyPath:"compositeKey"})}}catch(V){C($r.create("storage-open",{originalErrorMessage:null===(O=V)||void 0===O?void 0:O.message}))}})}()){this.appId=C,this.appName=O,this.namespace=V,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var O=this;return(0,x.Z)(function*(){const V=yield O.openDbPromise;return new Promise((X,fe)=>{var we;const Nt=V.transaction([ws],"readonly").objectStore(ws),Wt=O.createCompositeKey(C);try{const Gt=Nt.get(Wt);Gt.onerror=It=>{fe(Bs(It,"storage-get"))},Gt.onsuccess=It=>{const qr=It.target.result;X(qr?qr.value:void 0)}}catch(Gt){fe($r.create("storage-get",{originalErrorMessage:null===(we=Gt)||void 0===we?void 0:we.message}))}})})()}set(C,O){var V=this;return(0,x.Z)(function*(){const X=yield V.openDbPromise;return new Promise((fe,we)=>{var ot;const Wt=X.transaction([ws],"readwrite").objectStore(ws),Gt=V.createCompositeKey(C);try{const It=Wt.put({compositeKey:Gt,value:O});It.onerror=qr=>{we(Bs(qr,"storage-set"))},It.onsuccess=()=>{fe()}}catch(It){we($r.create("storage-set",{originalErrorMessage:null===(ot=It)||void 0===ot?void 0:ot.message}))}})})()}delete(C){var O=this;return(0,x.Z)(function*(){const V=yield O.openDbPromise;return new Promise((X,fe)=>{var we;const Nt=V.transaction([ws],"readwrite").objectStore(ws),Wt=O.createCompositeKey(C);try{const Gt=Nt.delete(Wt);Gt.onerror=It=>{fe(Bs(It,"storage-delete"))},Gt.onsuccess=()=>{X()}}catch(Gt){fe($r.create("storage-delete",{originalErrorMessage:null===(we=Gt)||void 0===we?void 0:we.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class Or{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,x.Z)(function*(){const O=C.storage.getLastFetchStatus(),V=C.storage.getLastSuccessfulFetchTimestampMillis(),X=C.storage.getActiveConfig(),fe=yield O;fe&&(C.lastFetchStatus=fe);const we=yield V;we&&(C.lastSuccessfulFetchTimestampMillis=we);const ot=yield X;ot&&(C.activeConfig=ot)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Ds(){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,x.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}!function oc(){(0,ae._registerComponent)(new ce.wA("remote-config",function T(C,{instanceIdentifier:O}){const V=C.getProvider("app").getImmediate(),X=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw $r.create("registration-window");if(!(0,ue.hl)())throw $r.create("indexed-db-unavailable");const{projectId:fe,apiKey:we,appId:ot}=V.options;if(!fe)throw $r.create("registration-project-id");if(!we)throw $r.create("registration-api-key");if(!ot)throw $r.create("registration-app-id");const Nt=new si(ot,V.name,O=O||"firebase"),Wt=new Or(Nt),Gt=new Ie.Yd(_n);Gt.logLevel=Ie.in.ERROR;const It=new Ir(X,ae.SDK_VERSION,O,fe,we,ot),qr=new $t(It,Nt),Pr=new ao(qr,Nt,Wt,Gt),Kr=new Od(V,Pr,Wt,Nt,Gt);return function Ls(T){const C=(0,ue.m9)(T);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Kr),Kr},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(_n,"0.3.11"),(0,ae.registerVersion)(_n,"0.3.11","esm2017")}();const uo="/firebase-messaging-sw.js",sa="/firebase-cloud-messaging-push-scope",oa="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Em="https://fcmregistrations.googleapis.com/v1",Md="google.c.a.c_id",Dm="google.c.a.c_l",kf="google.c.a.ts",ja="google.c.a.e";var Is=(()=>{return(T=Is||(Is={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",Is;var T})();function Ro(T){const C=new Uint8Array(T);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Im(T){const O=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(O),X=new Uint8Array(V.length);for(let fe=0;fe<V.length;++fe)X[fe]=V.charCodeAt(fe);return X}const Yl="fcm_token_details_db",Ui=5,xd="fcm_token_object_Store";function aa(){return aa=(0,x.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(fe=>fe.name).includes(Yl))return null;let C=null;return(yield(0,me.X3)(Yl,Ui,{upgrade:(V=(0,x.Z)(function*(X,fe,we,ot){var Nt;if(fe<2||!X.objectStoreNames.contains(xd))return;const Wt=ot.objectStore(xd),Gt=yield Wt.index("fcmSenderId").get(T);if(yield Wt.clear(),Gt)if(2===fe){const It=Gt;if(!It.auth||!It.p256dh||!It.endpoint)return;C={token:It.fcmToken,createTime:null!==(Nt=It.createTime)&&void 0!==Nt?Nt:Date.now(),subscriptionOptions:{auth:It.auth,p256dh:It.p256dh,endpoint:It.endpoint,swScope:It.swScope,vapidKey:"string"==typeof It.vapidKey?It.vapidKey:Ro(It.vapidKey)}}}else if(3===fe){const It=Gt;C={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:Ro(It.auth),p256dh:Ro(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:Ro(It.vapidKey)}}}else if(4===fe){const It=Gt;C={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:Ro(It.auth),p256dh:Ro(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:Ro(It.vapidKey)}}}}),function(fe,we,ot,Nt){return V.apply(this,arguments)})})).close(),yield(0,me.Lj)(Yl),yield(0,me.Lj)("fcm_vapid_details_db"),yield(0,me.Lj)("undefined"),function ac(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:C}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}(C)?C:null;var V}),aa.apply(this,arguments)}const Pd="firebase-messaging-database",Tm=1,Vi="firebase-messaging-store";let Jl=null;function Oo(){return Jl||(Jl=(0,me.X3)(Pd,Tm,{upgrade:(T,C)=>{0===C&&T.createObjectStore(Vi)}})),Jl}function Ha(T){return Mo.apply(this,arguments)}function Mo(){return Mo=(0,x.Z)(function*(T){const C=Us(T),V=yield(yield Oo()).transaction(Vi).objectStore(Vi).get(C);if(V)return V;{const X=yield function kd(T){return aa.apply(this,arguments)}(T.appConfig.senderId);if(X)return yield $a(T,X),X}}),Mo.apply(this,arguments)}function $a(T,C){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,x.Z)(function*(T,C){const O=Us(T),X=(yield Oo()).transaction(Vi,"readwrite");return yield X.objectStore(Vi).put(C,O),yield X.done,C})).apply(this,arguments)}function lc(){return(lc=(0,x.Z)(function*(T){const C=Us(T),V=(yield Oo()).transaction(Vi,"readwrite");yield V.objectStore(Vi).delete(C),yield V.done})).apply(this,arguments)}function Us({appConfig:T}){return T.appId}const Tn=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function cc(T,C){return la.apply(this,arguments)}function la(){return(la=(0,x.Z)(function*(T,C){var O;const V=yield za(T),X=xr(C),fe={method:"POST",headers:V,body:JSON.stringify(X)};let we;try{we=yield(yield fetch(dc(T.appConfig),fe)).json()}catch(ot){throw Tn.create("token-subscribe-failed",{errorInfo:null===(O=ot)||void 0===O?void 0:O.toString()})}if(we.error)throw Tn.create("token-subscribe-failed",{errorInfo:we.error.message});if(!we.token)throw Tn.create("token-subscribe-no-token");return we.token})).apply(this,arguments)}function Wa(){return(Wa=(0,x.Z)(function*(T,C){var O;const V=yield za(T),X=xr(C.subscriptionOptions),fe={method:"PATCH",headers:V,body:JSON.stringify(X)};let we;try{we=yield(yield fetch(`${dc(T.appConfig)}/${C.token}`,fe)).json()}catch(ot){throw Tn.create("token-update-failed",{errorInfo:null===(O=ot)||void 0===O?void 0:O.toString()})}if(we.error)throw Tn.create("token-update-failed",{errorInfo:we.error.message});if(!we.token)throw Tn.create("token-update-no-token");return we.token})).apply(this,arguments)}function co(T,C){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,x.Z)(function*(T,C){var O;const X={method:"DELETE",headers:yield za(T)};try{const we=yield(yield fetch(`${dc(T.appConfig)}/${C}`,X)).json();if(we.error)throw Tn.create("token-unsubscribe-failed",{errorInfo:we.error.message})}catch(fe){throw Tn.create("token-unsubscribe-failed",{errorInfo:null===(O=fe)||void 0===O?void 0:O.toString()})}})).apply(this,arguments)}function dc({projectId:T}){return`${Em}/projects/${T}/registrations`}function za(T){return ns.apply(this,arguments)}function ns(){return(ns=(0,x.Z)(function*({appConfig:T,installations:C}){const O=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${O}`})})).apply(this,arguments)}function xr({p256dh:T,auth:C,endpoint:O,vapidKey:V}){const X={web:{endpoint:O,auth:C,p256dh:T}};return V!==oa&&(X.web.applicationPubKey=V),X}const eu=6048e5;function nu(){return nu=(0,x.Z)(function*(T){const C=yield function Ff(T,C){return qa.apply(this,arguments)}(T.swRegistration,T.vapidKey),O={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:C.endpoint,auth:Ro(C.getKey("auth")),p256dh:Ro(C.getKey("p256dh"))},V=yield Ha(T.firebaseDependencies);if(V){if(function Lf(T,C){return C.vapidKey===T.vapidKey&&C.endpoint===T.endpoint&&C.auth===T.auth&&C.p256dh===T.p256dh}(V.subscriptionOptions,O))return Date.now()>=V.createTime+eu?function hc(T,C){return Bt.apply(this,arguments)}(T,{token:V.token,createTime:Date.now(),subscriptionOptions:O}):V.token;try{yield co(T.firebaseDependencies,V.token)}catch(X){console.warn(X)}return fc(T.firebaseDependencies,O)}return fc(T.firebaseDependencies,O)}),nu.apply(this,arguments)}function ua(){return ua=(0,x.Z)(function*(T){const C=yield Ha(T.firebaseDependencies);C&&(yield co(T.firebaseDependencies,C.token),yield function Xl(T){return lc.apply(this,arguments)}(T.firebaseDependencies));const O=yield T.swRegistration.pushManager.getSubscription();return!O||O.unsubscribe()}),ua.apply(this,arguments)}function Bt(){return Bt=(0,x.Z)(function*(T,C){try{const O=yield function ir(T,C){return Wa.apply(this,arguments)}(T.firebaseDependencies,C),V=Object.assign(Object.assign({},C),{token:O,createTime:Date.now()});return yield $a(T.firebaseDependencies,V),O}catch(O){throw yield function Vs(T){return ua.apply(this,arguments)}(T),O}}),Bt.apply(this,arguments)}function fc(T,C){return ru.apply(this,arguments)}function ru(){return(ru=(0,x.Z)(function*(T,C){const V={token:yield cc(T,C),createTime:Date.now(),subscriptionOptions:C};return yield $a(T,V),V.token})).apply(this,arguments)}function qa(){return(qa=(0,x.Z)(function*(T,C){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Im(C)})})).apply(this,arguments)}function iu(T){const C={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function Bf(T,C){if(!C.notification)return;T.notification={};const O=C.notification.title;O&&(T.notification.title=O);const V=C.notification.body;V&&(T.notification.body=V);const X=C.notification.image;X&&(T.notification.image=X)}(C,T),function sr(T,C){C.data&&(T.data=C.data)}(C,T),function Ge(T,C){var O,V,X,fe,we;if(!(C.fcmOptions||null!==(O=C.notification)&&void 0!==O&&O.click_action))return;T.fcmOptions={};const ot=null!==(X=null===(V=C.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==X?X:null===(fe=C.notification)||void 0===fe?void 0:fe.click_action;ot&&(T.fcmOptions.link=ot);const Nt=null===(we=C.fcmOptions)||void 0===we?void 0:we.analytics_label;Nt&&(T.fcmOptions.analyticsLabel=Nt)}(C,T),C}function Fd(T,C){const O=[];for(let V=0;V<T.length;V++)O.push(T.charAt(V)),V<C.length&&O.push(C.charAt(V));return O.join("")}function Tr(T){return Tn.create("missing-app-config-values",{valueName:T})}Fd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Fd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class gc{constructor(C,O,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function pc(T){if(!T||!T.options)throw Tr("App Configuration Object");if(!T.name)throw Tr("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:O}=T;for(const V of C)if(!O[V])throw Tr(V);return{appName:T.name,projectId:O.projectId,apiKey:O.apiKey,appId:O.appId,senderId:O.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:X,installations:O,analyticsProvider:V}}_delete(){return Promise.resolve()}}function ca(T){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,x.Z)(function*(T){var C;try{T.swRegistration=yield navigator.serviceWorker.register(uo,{scope:sa}),T.swRegistration.update().catch(()=>{})}catch(O){throw Tn.create("failed-service-worker-registration",{browserErrorMessage:null===(C=O)||void 0===C?void 0:C.message})}})).apply(this,arguments)}function da(){return(da=(0,x.Z)(function*(T,C){if(!C&&!T.swRegistration&&(yield ca(T)),C||!T.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Tn.create("invalid-sw-registration");T.swRegistration=C}})).apply(this,arguments)}function su(){return(su=(0,x.Z)(function*(T,C){C?T.vapidKey=C:T.vapidKey||(T.vapidKey=oa)})).apply(this,arguments)}function or(){return or=(0,x.Z)(function*(T,C){if(!navigator)throw Tn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Tn.create("permission-blocked");return yield function Bd(T,C){return su.apply(this,arguments)}(T,C?.vapidKey),yield function Ld(T,C){return da.apply(this,arguments)}(T,C?.serviceWorkerRegistration),function tu(T){return nu.apply(this,arguments)}(T)}),or.apply(this,arguments)}function Ka(){return(Ka=(0,x.Z)(function*(T,C,O){const V=function Za(T){switch(T){case Is.NOTIFICATION_CLICKED:return"notification_open";case Is.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(C);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:O[Md],message_name:O[Dm],message_time:O[kf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ya(){return Ya=(0,x.Z)(function*(T,C){const O=C.data;if(!O.isFirebaseMessaging)return;T.onMessageHandler&&O.messageType===Is.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(iu(O)):T.onMessageHandler.next(iu(O)));const V=O.data;(function pn(T){return"object"==typeof T&&!!T&&Md in T})(V)&&"1"===V[ja]&&(yield function Ci(T,C,O){return Ka.apply(this,arguments)}(T,O.messageType,V))}),Ya.apply(this,arguments)}const ou="@firebase/messaging",ha=T=>{const C=new gc(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",O=>function Ts(T,C){return Ya.apply(this,arguments)}(C,O)),C},Ja=T=>{const C=T.getProvider("messaging").getImmediate();return{getToken:V=>function mc(T,C){return or.apply(this,arguments)}(C,V)}};function Vd(){return au.apply(this,arguments)}function au(){return(au=(0,x.Z)(function*(){try{yield(0,ue.eu)()}catch{return!1}return typeof window<"u"&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ud(){(0,ae._registerComponent)(new ce.wA("messaging",ha,"PUBLIC")),(0,ae._registerComponent)(new ce.wA("messaging-internal",Ja,"PRIVATE")),(0,ae.registerVersion)(ou,"0.9.16"),(0,ae.registerVersion)(ou,"0.9.16","esm2017")}();const jd="analytics",Sm="firebase_id",kr="origin",Gi=6e4,jn="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",jf="https://www.googletagmanager.com/gtag/js",zr=new Ie.Yd("@firebase/analytics");function Hf(T){return Promise.all(T.map(C=>C.catch(O=>O)))}function Qa(){return(Qa=(0,x.Z)(function*(T,C,O,V,X,fe){const we=V[X];try{if(we)yield C[we];else{const Nt=(yield Hf(O)).find(Wt=>Wt.measurementId===X);Nt&&(yield C[Nt.appId])}}catch(ot){zr.error(ot)}T("config",X,fe)})).apply(this,arguments)}function xo(){return(xo=(0,x.Z)(function*(T,C,O,V,X){try{let fe=[];if(X&&X.send_to){let we=X.send_to;Array.isArray(we)||(we=[we]);const ot=yield Hf(O);for(const Nt of we){const Wt=ot.find(It=>It.measurementId===Nt),Gt=Wt&&C[Wt.appId];if(!Gt){fe=[];break}fe.push(Gt)}}0===fe.length&&(fe=Object.values(C)),yield Promise.all(fe),T("event",V,X||{})}catch(fe){zr.error(fe)}})).apply(this,arguments)}const Cr=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Wf=30,zf=new class yc{constructor(C={},O=1e3){this.throttleMetadata=C,this.intervalMillis=O}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,O){this.throttleMetadata[C]=O}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function el(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function qn(){return(qn=(0,x.Z)(function*(T){var C;const{appId:O,apiKey:V}=T,X={method:"GET",headers:el(V)},fe=jn.replace("{app-id}",O),we=yield fetch(fe,X);if(200!==we.status&&304!==we.status){let ot="";try{const Nt=yield we.json();null!==(C=Nt.error)&&void 0!==C&&C.message&&(ot=Nt.error.message)}catch{}throw Cr.create("config-fetch-failed",{httpStatus:we.status,responseMessage:ot})}return we.json()})).apply(this,arguments)}function fo(){return(fo=(0,x.Z)(function*(T,C=zf,O){const{appId:V,apiKey:X,measurementId:fe}=T.options;if(!V)throw Cr.create("no-app-id");if(!X){if(fe)return{measurementId:fe,appId:V};throw Cr.create("no-api-key")}const we=C.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ot=new uu;return setTimeout((0,x.Z)(function*(){ot.abort()}),void 0!==O?O:Gi),ko({appId:V,apiKey:X,measurementId:fe},we,ot,C)})).apply(this,arguments)}function ko(T,C,O){return po.apply(this,arguments)}function po(){return po=(0,x.Z)(function*(T,{throttleEndTimeMillis:C,backoffCount:O},V,X=zf){var fe,we;const{appId:ot,measurementId:Nt}=T;try{yield function Po(T,C){return new Promise((O,V)=>{const X=Math.max(C-Date.now(),0),fe=setTimeout(O,X);T.addEventListener(()=>{clearTimeout(fe),V(Cr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(V,C)}catch(Wt){if(Nt)return zr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Nt} provided in the "measurementId" field in the local Firebase config. [${null===(fe=Wt)||void 0===fe?void 0:fe.message}]`),{appId:ot,measurementId:Nt};throw Wt}try{const Wt=yield function lu(T){return qn.apply(this,arguments)}(T);return X.deleteThrottleMetadata(ot),Wt}catch(Wt){const Gt=Wt;if(!function vc(T){if(!(T instanceof ue.ZR&&T.customData))return!1;const C=Number(T.customData.httpStatus);return 429===C||500===C||503===C||504===C}(Gt)){if(X.deleteThrottleMetadata(ot),Nt)return zr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Nt} provided in the "measurementId" field in the local Firebase config. [${Gt?.message}]`),{appId:ot,measurementId:Nt};throw Wt}const It=503===Number(null===(we=Gt?.customData)||void 0===we?void 0:we.httpStatus)?(0,ue.$s)(O,X.intervalMillis,Wf):(0,ue.$s)(O,X.intervalMillis),qr={throttleEndTimeMillis:Date.now()+It,backoffCount:O+1};return X.setThrottleMetadata(ot,qr),zr.debug(`Calling attemptFetch again in ${It} millis`),ko(T,qr,V,X)}}),po.apply(this,arguments)}class uu{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let ga,mo;function Fo(){return(Fo=(0,x.Z)(function*(T,C,O,V,X){if(X&&X.global)T("event",O,V);else{const fe=yield C;T("event",O,Object.assign(Object.assign({},V),{send_to:fe}))}})).apply(this,arguments)}function Uo(){return(Uo=(0,x.Z)(function*(){var T;if(!(0,ue.hl)())return zr.warn(Cr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(C){return zr.warn(Cr.create("indexeddb-unavailable",{errorInfo:null===(T=C)||void 0===T?void 0:T.toString()}).message),!1}return!0})).apply(this,arguments)}function rl(){return rl=(0,x.Z)(function*(T,C,O,V,X,fe,we){var ot;const Nt=function qf(T){return fo.apply(this,arguments)}(T);Nt.then(Pr=>{O[Pr.measurementId]=Pr.appId,T.options.measurementId&&Pr.measurementId!==T.options.measurementId&&zr.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${Pr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Pr=>zr.error(Pr)),C.push(Nt);const Wt=function hu(){return Uo.apply(this,arguments)}().then(Pr=>{if(Pr)return V.getId()}),[Gt,It]=yield Promise.all([Nt,Wt]);(function $f(){const T=window.document.getElementsByTagName("script");for(const C of Object.values(T))if(C.src&&C.src.includes(jf))return C;return null})()||function Am(T,C){const O=document.createElement("script");O.src=`${jf}?l=${T}&id=${C}`,O.async=!0,document.head.appendChild(O)}(fe,Gt.measurementId),mo&&(X("consent","default",mo),function nl(T){mo=T}(void 0)),X("js",new Date);const qr=null!==(ot=we?.config)&&void 0!==ot?ot:{};return qr[kr]="firebase",qr.update=!0,null!=It&&(qr[Sm]=It),X("config",Gt.measurementId,qr),ga&&(X("set",ga),function bc(T){ga=T}(void 0)),Gt.measurementId}),rl.apply(this,arguments)}class zd{constructor(C){this.app=C}_delete(){return delete Hi[this.app.options.appId],Promise.resolve()}}let Hi={},wc=[];const il={};let Ec,$i,Vo="dataLayer",Go="gtag",fu=!1;function ol(T,C,O){!function Zf(){const T=[];if((0,ue.ru)()&&T.push("This is a browser extension environment."),(0,ue.zI)()||T.push("Cookies are not available."),T.length>0){const C=T.map((V,X)=>`(${X+1}) ${V}`).join(" "),O=Cr.create("invalid-analytics-context",{errorInfo:C});zr.warn(O.message)}}();const V=T.options.appId;if(!V)throw Cr.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw Cr.create("no-api-key");zr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Hi[V])throw Cr.create("already-exists",{id:V});if(!fu){!function Hd(T){let C=[];Array.isArray(window[T])?C=window[T]:window[T]=C}(Vo);const{wrappedGtag:fe,gtagCore:we}=function pa(T,C,O,V,X){let fe=function(...we){window[V].push(arguments)};return window[X]&&"function"==typeof window[X]&&(fe=window[X]),window[X]=function Xa(T,C,O,V){function fe(){return fe=(0,x.Z)(function*(we,ot,Nt){try{"event"===we?yield function fa(T,C,O,V,X){return xo.apply(this,arguments)}(T,C,O,ot,Nt):"config"===we?yield function $d(T,C,O,V,X,fe){return Qa.apply(this,arguments)}(T,C,O,V,ot,Nt):"consent"===we?T("consent","update",Nt):T("set",ot)}catch(Wt){zr.error(Wt)}}),fe.apply(this,arguments)}return function X(we,ot,Nt){return fe.apply(this,arguments)}}(fe,T,C,O),{gtagCore:fe,wrappedGtag:window[X]}}(Hi,wc,il,Vo,Go);$i=fe,Ec=we,fu=!0}return Hi[V]=function Kf(T,C,O,V,X,fe,we){return rl.apply(this,arguments)}(T,wc,il,C,Ec,Vo,O),new zd(T)}function Dc(){return ma.apply(this,arguments)}function ma(){return(ma=(0,x.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}const rs="@firebase/analytics";!function Yd(){(0,ae._registerComponent)(new ce.wA(jd,(C,{options:O})=>ol(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),O),"PUBLIC")),(0,ae._registerComponent)(new ce.wA("analytics-internal",function T(C){try{const O=C.getProvider(jd).getImmediate();return{logEvent:(V,X,fe)=>function js(T,C,O,V){T=(0,ue.m9)(T),function cu(T,C,O,V,X){return Fo.apply(this,arguments)}($i,Hi[T.app.options.appId],C,O,V).catch(X=>zr.error(X))}(O,V,X,fe)}}catch(O){throw Cr.create("interop-component-reg-failed",{reason:O})}},"PRIVATE")),(0,ae.registerVersion)(rs,"0.8.0"),(0,ae.registerVersion)(rs,"0.8.0","esm2017")}();var Jd=L(4408),Qd=L(7565);const ov=new class Yf extends Qd.v{}(class Ic extends Jd.o{constructor(C,O){super(C,O),this.scheduler=C,this.work=O}schedule(C,O=0){return O>0?super.schedule(C,O):(this.delay=O,this.state=C,this.scheduler.flush(this),this)}execute(C,O){return O>0||this.closed?super.execute(C,O):this._execute(C,O)}requestAsyncId(C,O,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(C,O,V):(C.flush(this),0)}});var pu=L(4986),cl=L(8505),Xd=L(5363),Sr=L(9468);const eh=new l.GfV("7.5.0"),jo="__angularfire_symbol__analyticsIsSupportedValue",gu="__angularfire_symbol__analyticsIsSupported",_i="__angularfire_symbol__remoteConfigIsSupportedValue",_o="__angularfire_symbol__remoteConfigIsSupported",Tc="__angularfire_symbol__messagingIsSupportedValue",Ho="__angularfire_symbol__messagingIsSupported";function Xf(T,C,O){if(C){if(1===C.length)return C[0];const fe=C.filter(we=>we.app===O);if(1===fe.length)return fe[0]}return O.container.getProvider(T).getImmediate({optional:!0})}globalThis[gu]||(globalThis[gu]=Dc().then(T=>globalThis[jo]=T).catch(()=>globalThis[jo]=!1)),globalThis[Ho]||(globalThis[Ho]=Vd().then(T=>globalThis[Tc]=T).catch(()=>globalThis[Tc]=!1)),globalThis[_o]||(globalThis[_o]=Ds().then(T=>globalThis[_i]=T).catch(()=>globalThis[_i]=!1));const Qt=(T,C)=>{const O=C?[C]:(0,G.C6)(),V=[];return O.forEach(X=>{X.container.getProvider(T).instances.forEach(we=>{V.includes(we)||V.push(we)})}),V};function vr(){}class _t{constructor(C,O=ov){this.zone=C,this.delegate=O}now(){return this.delegate.now()}schedule(C,O,V){const X=this.zone;return this.delegate.schedule(function(we){X.runGuarded(()=>{C.apply(this,[we])})},O,V)}}class Hn{constructor(C){this.zone=C,this.task=null}call(C,O){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vr,{},vr,vr)),O.pipe((0,cl.b)({next:V,complete:V,error:V})).subscribe(C).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ar=(()=>{class T{constructor(O){this.ngZone=O,this.outsideAngular=O.runOutsideAngular(()=>new _t(Zone.current)),this.insideAngular=O.run(()=>new _t(Zone.current,pu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(O){return new(O||T)(l.LFG(l.R0b))},T.\u0275prov=l.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function Hs(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function nh(T){return T.pipe((0,Xd.Q)(Hs().outsideAngular))}function Cc(T){return Hs(),function Sc(T){return function(O){return(O=O.lift(new Hn(T.ngZone))).pipe((0,Sr.R)(T.outsideAngular),(0,Xd.Q)(T.insideAngular))}}(Hs())(T)}},6457:(Et,Me,L)=>{L.d(Me,{$:()=>dc,A:()=>H,B:()=>Be,G:()=>Rd,H:()=>Ii,J:()=>$t,L:()=>Dn,M:()=>Ga,N:()=>Em,P:()=>pu,Q:()=>Md,R:()=>Rm,T:()=>Dm,U:()=>oa,V:()=>Is,W:()=>Ro,X:()=>kd,Y:()=>uc,Z:()=>cc,_:()=>ir,a:()=>Wd,a0:()=>tu,a1:()=>Vs,a2:()=>hc,a3:()=>fc,a4:()=>Ff,a5:()=>Lf,a6:()=>Bf,a7:()=>sr,a8:()=>pn,a9:()=>Fd,aA:()=>Pr,aB:()=>Nt,aC:()=>nh,aD:()=>Kn,aE:()=>jr,aI:()=>el,aL:()=>ja,aa:()=>ca,ab:()=>Ld,ac:()=>Bd,af:()=>Ci,ag:()=>Za,ah:()=>Ts,ak:()=>Vi,al:()=>_c,an:()=>jf,ao:()=>Qa,ap:()=>nr,aq:()=>Ce,ar:()=>An,as:()=>Vt,at:()=>He,au:()=>op,av:()=>is,aw:()=>Ve,ax:()=>ie,ay:()=>ze,az:()=>In,b:()=>Cr,c:()=>Tc,d:()=>qw,e:()=>_a,f:()=>Sc,g:()=>V,h:()=>T,i:()=>Uo,j:()=>we,k:()=>ap,l:()=>Fn,m:()=>li,o:()=>me,r:()=>Jd,s:()=>Om,u:()=>ov});var l=L(5861),G=L(2090),x=L(9681),ae=L(655),ue=L(1877),ce=L(4859);const me={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},H={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Be=function ee(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Xe=function Ye(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},yt=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Le=new ue.Yd("@firebase/auth");function Oe(b,...m){Le.logLevel<=ue.in.ERROR&&Le.error(`Auth (${x.SDK_VERSION}): ${b}`,...m)}function He(b,...m){throw et(b,...m)}function Ve(b,...m){return et(b,...m)}function ke(b,m,y){const D=Object.assign(Object.assign({},Xe()),{[m]:y});return new G.LL("auth","Firebase",D).create(m,{appName:b.name})}function Pe(b,m,y){if(!(m instanceof y))throw y.name!==m.constructor.name&&He(b,"argument-error"),ke(b,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function et(b,...m){if("string"!=typeof b){const y=m[0],D=[...m.slice(1)];return D[0]&&(D[0].appName=b.name),b._errorFactory.create(y,...D)}return yt.create(b,...m)}function ie(b,m,...y){if(!b)throw et(m,...y)}function pe(b){const m="INTERNAL ASSERTION FAILED: "+b;throw Oe(m),new Error(m)}function Ce(b,m){b||pe(m)}const nt=new Map;function ze(b){Ce(b instanceof Function,"Expected a class definition");let m=nt.get(b);return m?(Ce(m instanceof b,"Instance stored in cache mismatched with class"),m):(m=new b,nt.set(b,m),m)}function he(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function ve(){return"http:"===Te()||"https:"===Te()}function Te(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class We{constructor(m,y){this.shortDelay=m,this.longDelay=y,Ce(y>m,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function Ue(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ve()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ft(b,m){Ce(b.emulator,"Emulator should always be set here");const{url:y}=b.emulator;return m?`${y}${m.startsWith("/")?m.slice(1):m}`:y}class ct{static initialize(m,y,D){this.fetchImpl=m,y&&(this.headersImpl=y),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const En={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Rt=new We(3e4,6e4);function At(b,m){return b.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:b.tenantId}):m}function pt(b,m,y,D){return ln.apply(this,arguments)}function ln(){return(ln=(0,l.Z)(function*(b,m,y,D,R={}){return Jn(b,R,(0,l.Z)(function*(){let F={},Y={};D&&("GET"===m?Y=D:F={body:JSON.stringify(D)});const xe=(0,G.xO)(Object.assign({key:b.config.apiKey},Y)).slice(1),mt=yield b._getAdditionalHeaders();return mt["Content-Type"]="application/json",b.languageCode&&(mt["X-Firebase-Locale"]=b.languageCode),ct.fetch()(yr(b,b.config.apiHost,y,xe),Object.assign({method:m,headers:mt,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function Jn(b,m,y){return On.apply(this,arguments)}function On(){return(On=(0,l.Z)(function*(b,m,y){b._canInitEmulator=!1;const D=Object.assign(Object.assign({},En),m);try{const R=new Li(b),F=yield Promise.race([y(),R.promise]);R.clearNetworkTimeout();const Y=yield F.json();if("needConfirmation"in Y)throw zn(b,"account-exists-with-different-credential",Y);if(F.ok&&!("errorMessage"in Y))return Y;{const xe=F.ok?Y.errorMessage:Y.error.message,[mt,St]=xe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===mt)throw zn(b,"credential-already-in-use",Y);if("EMAIL_EXISTS"===mt)throw zn(b,"email-already-in-use",Y);if("USER_DISABLED"===mt)throw zn(b,"user-disabled",Y);const rn=D[mt]||mt.toLowerCase().replace(/[_\s]+/g,"-");if(St)throw ke(b,rn,St);He(b,rn)}}catch(R){if(R instanceof G.ZR)throw R;He(b,"network-request-failed")}})).apply(this,arguments)}function un(b,m,y,D){return cr.apply(this,arguments)}function cr(){return(cr=(0,l.Z)(function*(b,m,y,D,R={}){const F=yield pt(b,m,y,D,R);return"mfaPendingCredential"in F&&He(b,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function yr(b,m,y,D){const R=`${m}${y}?${D}`;return b.config.emulator?ft(b.config,R):`${b.config.apiScheme}://${R}`}class Li{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((y,D)=>{this.timer=setTimeout(()=>D(Ve(this.auth,"network-request-failed")),Rt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zn(b,m,y){const D={appName:b.name};y.email&&(D.email=y.email),y.phoneNumber&&(D.phoneNumber=y.phoneNumber);const R=Ve(b,m,D);return R.customData._tokenResponse=y,R}function ne(){return(ne=(0,l.Z)(function*(b,m){return pt(b,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Re(){return(Re=(0,l.Z)(function*(b,m){return pt(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function it(){return(it=(0,l.Z)(function*(b,m){return pt(b,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function cn(b){if(b)try{const m=new Date(Number(b));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function vn(){return(vn=(0,l.Z)(function*(b,m=!1){const y=(0,G.m9)(b),D=yield y.getIdToken(m),R=wt(D);ie(R&&R.exp&&R.auth_time&&R.iat,y.auth,"internal-error");const F="object"==typeof R.firebase?R.firebase:void 0,Y=F?.sign_in_provider;return{claims:R,token:D,authTime:cn(Mt(R.auth_time)),issuedAtTime:cn(Mt(R.iat)),expirationTime:cn(Mt(R.exp)),signInProvider:Y||null,signInSecondFactor:F?.sign_in_second_factor||null}})).apply(this,arguments)}function Mt(b){return 1e3*Number(b)}function wt(b){var m;const[y,D,R]=b.split(".");if(void 0===y||void 0===D||void 0===R)return Oe("JWT malformed, contained fewer than 3 sections"),null;try{const F=(0,G.tV)(D);return F?JSON.parse(F):(Oe("Failed to decode base64 JWT payload"),null)}catch(F){return Oe("Caught error parsing JWT payload as JSON",null===(m=F)||void 0===m?void 0:m.toString()),null}}function Mn(b,m){return bn.apply(this,arguments)}function bn(){return(bn=(0,l.Z)(function*(b,m,y=!1){if(y)return m;try{return yield m}catch(D){throw D instanceof G.ZR&&function Vn({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}(D)&&b.auth.currentUser===b&&(yield b.auth.signOut()),D}})).apply(this,arguments)}class fn{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var y;if(m){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const R=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(m=!1){var y=this;if(!this.isRunning)return;const D=this.getInterval(m);this.timerId=setTimeout((0,l.Z)(function*(){yield y.iteration()}),D)}iteration(){var m=this;return(0,l.Z)(function*(){var y;try{yield m.user.getIdToken(!0)}catch(D){return void("auth/network-request-failed"===(null===(y=D)||void 0===y?void 0:y.code)&&m.schedule(!0))}m.schedule()})()}}class Gn{constructor(m,y){this.createdAt=m,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=cn(this.lastLoginAt),this.creationTime=cn(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function fi(b){return zt.apply(this,arguments)}function zt(){return zt=(0,l.Z)(function*(b){var m;const y=b.auth,D=yield b.getIdToken(),R=yield Mn(b,function _e(b,m){return it.apply(this,arguments)}(y,{idToken:D}));ie(R?.users.length,y,"internal-error");const F=R.users[0];b._notifyReloadListener(F);const Y=null!==(m=F.providerUserInfo)&&void 0!==m&&m.length?function $(b){return b.map(m=>{var{providerId:y}=m,D=(0,ae._T)(m,["providerId"]);return{providerId:y,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}(F.providerUserInfo):[],xe=function Q(b,m){return[...b.filter(D=>!m.some(R=>R.providerId===D.providerId)),...m]}(b.providerData,Y),rn=!!b.isAnonymous&&!(b.email&&F.passwordHash||xe?.length),kn={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:xe,metadata:new Gn(F.createdAt,F.lastLoginAt),isAnonymous:rn};Object.assign(b,kn)}),zt.apply(this,arguments)}function tn(){return(tn=(0,l.Z)(function*(b){const m=(0,G.m9)(b);yield fi(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function q(){return(q=(0,l.Z)(function*(b,m){const y=yield Jn(b,{},(0,l.Z)(function*(){const D=(0,G.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:R,apiKey:F}=b.config,Y=yr(b,R,"/v1/token",`key=${F}`),xe=yield b._getAdditionalHeaders();return xe["Content-Type"]="application/x-www-form-urlencoded",ct.fetch()(Y,{method:"POST",headers:xe,body:D})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Z{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){ie(m.idToken,"internal-error"),ie(typeof m.idToken<"u","internal-error"),ie(typeof m.refreshToken<"u","internal-error");const y="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function xt(b){const m=wt(b);return ie(m,"internal-error"),ie(typeof m.exp<"u","internal-error"),ie(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,y)}getToken(m,y=!1){var D=this;return(0,l.Z)(function*(){return ie(!D.accessToken||D.refreshToken,m,"user-token-expired"),y||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(m,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,y){var D=this;return(0,l.Z)(function*(){const{accessToken:R,refreshToken:F,expiresIn:Y}=yield function U(b,m){return q.apply(this,arguments)}(m,y);D.updateTokensAndExpiration(R,F,Number(Y))})()}updateTokensAndExpiration(m,y,D){this.refreshToken=y||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(m,y){const{refreshToken:D,accessToken:R,expirationTime:F}=y,Y=new Z;return D&&(ie("string"==typeof D,"internal-error",{appName:m}),Y.refreshToken=D),R&&(ie("string"==typeof R,"internal-error",{appName:m}),Y.accessToken=R),F&&(ie("number"==typeof F,"internal-error",{appName:m}),Y.expirationTime=F),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new Z,this.toJSON())}_performRefresh(){return pe("not implemented")}}function Fe(b,m){ie("string"==typeof b||typeof b>"u","internal-error",{appName:m})}class rt{constructor(m){var{uid:y,auth:D,stsTokenManager:R}=m,F=(0,ae._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=D,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new Gn(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(m){var y=this;return(0,l.Z)(function*(){const D=yield Mn(y,y.stsTokenManager.getToken(y.auth,m));return ie(D,y.auth,"internal-error"),y.accessToken!==D&&(y.accessToken=D,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),D})()}getIdTokenResult(m){return function Ut(b){return vn.apply(this,arguments)}(this,m)}reload(){return function pi(b){return tn.apply(this,arguments)}(this)}_assign(m){this!==m&&(ie(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(y=>Object.assign({},y)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new rt(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,y=!1){var D=this;return(0,l.Z)(function*(){let R=!1;m.idToken&&m.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(m),R=!0),y&&(yield fi(D)),yield D.auth._persistUserIfCurrent(D),R&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var m=this;return(0,l.Z)(function*(){const y=yield m.getIdToken();return yield Mn(m,function se(b,m){return ne.apply(this,arguments)}(m.auth,{idToken:y})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,y){var D,R,F,Y,xe,mt,St,rn;const kn=null!==(D=y.displayName)&&void 0!==D?D:void 0,qi=null!==(R=y.email)&&void 0!==R?R:void 0,ba=null!==(F=y.phoneNumber)&&void 0!==F?F:void 0,zs=null!==(Y=y.photoURL)&&void 0!==Y?Y:void 0,Eu=null!==(xe=y.tenantId)&&void 0!==xe?xe:void 0,ih=null!==(mt=y._redirectEventId)&&void 0!==mt?mt:void 0,pl=null!==(St=y.createdAt)&&void 0!==St?St:void 0,sh=null!==(rn=y.lastLoginAt)&&void 0!==rn?rn:void 0,{uid:Du,emailVerified:yo,isAnonymous:Nc,providerData:Rc,stsTokenManager:Fm}=y;ie(Du&&Fm,m,"internal-error");const dp=Z.fromJSON(this.name,Fm);ie("string"==typeof Du,m,"internal-error"),Fe(kn,m.name),Fe(qi,m.name),ie("boolean"==typeof yo,m,"internal-error"),ie("boolean"==typeof Nc,m,"internal-error"),Fe(ba,m.name),Fe(zs,m.name),Fe(Eu,m.name),Fe(ih,m.name),Fe(pl,m.name),Fe(sh,m.name);const hp=new rt({uid:Du,auth:m,email:qi,emailVerified:yo,displayName:kn,isAnonymous:Nc,photoURL:zs,phoneNumber:ba,tenantId:Eu,stsTokenManager:dp,createdAt:pl,lastLoginAt:sh});return Rc&&Array.isArray(Rc)&&(hp.providerData=Rc.map(oh=>Object.assign({},oh))),ih&&(hp._redirectEventId=ih),hp}static _fromIdTokenResponse(m,y,D=!1){return(0,l.Z)(function*(){const R=new Z;R.updateFromServerResponse(y);const F=new rt({uid:y.localId,auth:m,stsTokenManager:R,isAnonymous:D});return yield fi(F),F})()}}const Dn=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(y,D){var R=this;return(0,l.Z)(function*(){R.storage[y]=D})()}_get(y){var D=this;return(0,l.Z)(function*(){const R=D.storage[y];return void 0===R?null:R})()}_remove(y){var D=this;return(0,l.Z)(function*(){delete D.storage[y]})()}_addListener(y,D){}_removeListener(y,D){}}return b.type="NONE",b})();function In(b,m,y){return`firebase:${b}:${m}:${y}`}class Dr{constructor(m,y,D){this.persistence=m,this.auth=y,this.userKey=D;const{config:R,name:F}=this.auth;this.fullUserKey=In(this.userKey,R.apiKey,F),this.fullPersistenceKey=In("persistence",R.apiKey,F),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,l.Z)(function*(){const y=yield m.persistence._get(m.fullUserKey);return y?rt._fromJSON(m.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var y=this;return(0,l.Z)(function*(){if(y.persistence===m)return;const D=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=m,D?y.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,y,D="authUser"){return(0,l.Z)(function*(){if(!y.length)return new Dr(ze(Dn),m,D);const R=(yield Promise.all(y.map(function(){var St=(0,l.Z)(function*(rn){if(yield rn._isAvailable())return rn});return function(rn){return St.apply(this,arguments)}}()))).filter(St=>St);let F=R[0]||ze(Dn);const Y=In(D,m.config.apiKey,m.name);let xe=null;for(const St of y)try{const rn=yield St._get(Y);if(rn){const kn=rt._fromJSON(m,rn);St!==F&&(xe=kn),F=St;break}}catch{}const mt=R.filter(St=>St._shouldAllowMigration);return F._shouldAllowMigration&&mt.length?(F=mt[0],xe&&(yield F._set(Y,xe.toJSON())),yield Promise.all(y.map(function(){var St=(0,l.Z)(function*(rn){if(rn!==F)try{yield rn._remove(Y)}catch{}});return function(rn){return St.apply(this,arguments)}}())),new Dr(F,m,D)):new Dr(F,m,D)})()}}function re(b){const m=b.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(je(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(K(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(qt(m))return"Blackberry";if(dn(m))return"Webos";if(W(m))return"Safari";if((m.includes("chrome/")||Se(m))&&!m.includes("edge/"))return"Chrome";if(Vt(m))return"Android";{const D=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===D?.length)return D[1]}return"Other"}function K(b=(0,G.z$)()){return/firefox\//i.test(b)}function W(b=(0,G.z$)()){const m=b.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function Se(b=(0,G.z$)()){return/crios\//i.test(b)}function je(b=(0,G.z$)()){return/iemobile/i.test(b)}function Vt(b=(0,G.z$)()){return/android/i.test(b)}function qt(b=(0,G.z$)()){return/blackberry/i.test(b)}function dn(b=(0,G.z$)()){return/webos/i.test(b)}function An(b=(0,G.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function nr(b=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}function Bi(b=(0,G.z$)()){return An(b)||Vt(b)||dn(b)||qt(b)||/windows phone/i.test(b)||je(b)}function zl(b,m=[]){let y;switch(b){case"Browser":y=re((0,G.z$)());break;case"Worker":y=`${re((0,G.z$)())}-${b}`;break;default:y=b}const D=m.length?m.join(","):"FirebaseCore-web";return`${y}/JsCore/${x.SDK_VERSION}/${D}`}class nc{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,y){const D=F=>new Promise((Y,xe)=>{try{Y(m(F))}catch(mt){xe(mt)}});D.onAbort=y,this.queue.push(D);const R=this.queue.length-1;return()=>{this.queue[R]=()=>Promise.resolve()}}runMiddleware(m){var y=this;return(0,l.Z)(function*(){var D;if(y.auth.currentUser===m)return;const R=[];try{for(const F of y.queue)yield F(m),F.onAbort&&R.push(F.onAbort)}catch(F){R.reverse();for(const Y of R)try{Y()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:null===(D=F)||void 0===D?void 0:D.message})}})()}}class ql{constructor(m,y,D){this.app=m,this.heartbeatServiceProvider=y,this.config=D,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ba(this),this.idTokenSubscription=new Ba(this),this.beforeStateQueue=new nc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=D.sdkClientVersion}_initializeWithPersistence(m,y){var D=this;return y&&(this._popupRedirectResolver=ze(y)),this._initializationPromise=this.queue((0,l.Z)(function*(){var R,F;if(!D._deleted&&(D.persistenceManager=yield Dr.create(D,m),!D._deleted)){if(null!==(R=D._popupRedirectResolver)&&void 0!==R&&R._shouldInitProactively)try{yield D._popupRedirectResolver._initialize(D)}catch{}yield D.initializeCurrentUser(y),D.lastNotifiedUid=(null===(F=D.currentUser)||void 0===F?void 0:F.uid)||null,!D._deleted&&(D._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,l.Z)(function*(){if(m._deleted)return;const y=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||y){if(m.currentUser&&y&&m.currentUser.uid===y.uid)return m._currentUser._assign(y),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(y,!0)}})()}initializeCurrentUser(m){var y=this;return(0,l.Z)(function*(){var D;const R=yield y.assertedPersistence.getCurrentUser();let F=R,Y=!1;if(m&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const xe=null===(D=y.redirectUser)||void 0===D?void 0:D._redirectEventId,mt=F?._redirectEventId,St=yield y.tryRedirectSignIn(m);(!xe||xe===mt)&&St?.user&&(F=St.user,Y=!0)}if(!F)return y.directlySetCurrentUser(null);if(!F._redirectEventId){if(Y)try{yield y.beforeStateQueue.runMiddleware(F)}catch(xe){F=R,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(xe))}return F?y.reloadAndSetCurrentUserOrClear(F):y.directlySetCurrentUser(null)}return ie(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===F._redirectEventId?y.directlySetCurrentUser(F):y.reloadAndSetCurrentUserOrClear(F)})()}tryRedirectSignIn(m){var y=this;return(0,l.Z)(function*(){let D=null;try{D=yield y._popupRedirectResolver._completeRedirectFn(y,m,!0)}catch{yield y._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(m){var y=this;return(0,l.Z)(function*(){var D;try{yield fi(m)}catch(R){if("auth/network-request-failed"!==(null===(D=R)||void 0===D?void 0:D.code))return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function qe(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var m=this;return(0,l.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var y=this;return(0,l.Z)(function*(){const D=m?(0,G.m9)(m):null;return D&&ie(D.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(D&&D._clone(y))})()}_updateCurrentUser(m,y=!1){var D=this;return(0,l.Z)(function*(){if(!D._deleted)return m&&ie(D.tenantId===m.tenantId,D,"tenant-id-mismatch"),y||(yield D.beforeStateQueue.runMiddleware(m)),D.queue((0,l.Z)(function*(){yield D.directlySetCurrentUser(m),D.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,l.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var y=this;return this.queue((0,l.Z)(function*(){yield y.assertedPersistence.setPersistence(ze(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new G.LL("auth","Firebase",m())}onAuthStateChanged(m,y,D){return this.registerStateListener(this.authStateSubscription,m,y,D)}beforeAuthStateChanged(m,y){return this.beforeStateQueue.pushCallback(m,y)}onIdTokenChanged(m,y,D){return this.registerStateListener(this.idTokenSubscription,m,y,D)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,y){var D=this;return(0,l.Z)(function*(){const R=yield D.getOrInitRedirectPersistenceManager(y);return null===m?R.removeCurrentUser():R.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var y=this;return(0,l.Z)(function*(){if(!y.redirectPersistenceManager){const D=m&&ze(m)||y._popupRedirectResolver;ie(D,y,"argument-error"),y.redirectPersistenceManager=yield Dr.create(y,[ze(D._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(m){var y=this;return(0,l.Z)(function*(){var D,R;return y._isInitialized&&(yield y.queue((0,l.Z)(function*(){}))),(null===(D=y._currentUser)||void 0===D?void 0:D._redirectEventId)===m?y._currentUser:(null===(R=y.redirectUser)||void 0===R?void 0:R._redirectEventId)===m?y.redirectUser:null})()}_persistUserIfCurrent(m){var y=this;return(0,l.Z)(function*(){if(m===y.currentUser)return y.queue((0,l.Z)(function*(){return y.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(y=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,y,D,R){if(this._deleted)return()=>{};const F="function"==typeof y?y:y.next.bind(y),Y=this._isInitialized?Promise.resolve():this._initializationPromise;return ie(Y,this,"internal-error"),Y.then(()=>F(this.currentUser)),"function"==typeof y?m.addObserver(y,D,R):m.addObserver(y)}directlySetCurrentUser(m){var y=this;return(0,l.Z)(function*(){y.currentUser&&y.currentUser!==m&&(y._currentUser._stopProactiveRefresh(),m&&y.isProactiveRefreshEnabled&&m._startProactiveRefresh()),y.currentUser=m,m?yield y.assertedPersistence.setCurrentUser(m):yield y.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=zl(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,l.Z)(function*(){var y;const D={"X-Client-Version":m.clientVersion};m.app.options.appId&&(D["X-Firebase-gmpid"]=m.app.options.appId);const R=yield null===(y=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return R&&(D["X-Firebase-Client"]=R),D})()}}function jr(b){return(0,G.m9)(b)}class Ba{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,G.ne)(y=>this.observer=y)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Rd(b,m,y){const D=jr(b);ie(D._canInitEmulator,D,"emulator-config-failed"),ie(/^https?:\/\//.test(m),D,"invalid-emulator-scheme");const R=!!y?.disableWarnings,F=rc(m),{host:Y,port:xe}=function _n(b){const m=rc(b),y=/(\/\/)?([^?#/]+)/.exec(b.substr(m.length));if(!y)return{host:"",port:null};const D=y[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(D);if(R){const F=R[1];return{host:F,port:dr(D.substr(F.length+1))}}{const[F,Y]=D.split(":");return{host:F,port:dr(Y)}}}(m);D.config.emulator={url:`${F}//${Y}${null===xe?"":`:${xe}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:Y,port:xe,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function Hr(){function b(){const m=document.createElement("p"),y=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}function rc(b){const m=b.indexOf(":");return m<0?"":b.substr(0,m+1)}function dr(b){if(!b)return null;const m=Number(b);return isNaN(m)?null:m}class Ii{constructor(m,y){this.providerId=m,this.signInMethod=y}toJSON(){return pe("not implemented")}_getIdTokenResponse(m){return pe("not implemented")}_linkToIdToken(m,y){return pe("not implemented")}_getReauthenticationResolver(m){return pe("not implemented")}}function gi(b,m){return $r.apply(this,arguments)}function $r(){return($r=(0,l.Z)(function*(b,m){return pt(b,"POST","/v1/accounts:resetPassword",At(b,m))})).apply(this,arguments)}function ic(b,m){return so.apply(this,arguments)}function so(){return(so=(0,l.Z)(function*(b,m){return pt(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function gt(){return(gt=(0,l.Z)(function*(b,m){return pt(b,"POST","/v1/accounts:update",At(b,m))})).apply(this,arguments)}function Pn(){return(Pn=(0,l.Z)(function*(b,m){return un(b,"POST","/v1/accounts:signInWithPassword",At(b,m))})).apply(this,arguments)}function mi(b,m){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,l.Z)(function*(b,m){return pt(b,"POST","/v1/accounts:sendOobCode",At(b,m))})).apply(this,arguments)}function Ls(){return(Ls=(0,l.Z)(function*(b,m){return mi(b,m)})).apply(this,arguments)}function Qn(){return(Qn=(0,l.Z)(function*(b,m){return mi(b,m)})).apply(this,arguments)}function Kt(){return(Kt=(0,l.Z)(function*(b,m){return mi(b,m)})).apply(this,arguments)}function oo(){return(oo=(0,l.Z)(function*(b,m){return mi(b,m)})).apply(this,arguments)}function No(){return(No=(0,l.Z)(function*(b,m){return un(b,"POST","/v1/accounts:signInWithEmailLink",At(b,m))})).apply(this,arguments)}function ao(){return(ao=(0,l.Z)(function*(b,m){return un(b,"POST","/v1/accounts:signInWithEmailLink",At(b,m))})).apply(this,arguments)}class bs extends Ii{constructor(m,y,D,R=null){super("password",D),this._email=m,this._password=y,this._tenantId=R}static _fromEmailAndPassword(m,y){return new bs(m,y,"password")}static _fromEmailAndCode(m,y,D=null){return new bs(m,y,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(m){var y=this;return(0,l.Z)(function*(){switch(y.signInMethod){case"password":return function Jt(b,m){return Pn.apply(this,arguments)}(m,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function Ua(b,m){return No.apply(this,arguments)}(m,{email:y._email,oobCode:y._password});default:He(m,"internal-error")}})()}_linkToIdToken(m,y){var D=this;return(0,l.Z)(function*(){switch(D.signInMethod){case"password":return ic(m,{idToken:y,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function ri(b,m){return ao.apply(this,arguments)}(m,{idToken:y,email:D._email,oobCode:D._password});default:He(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function Ir(b,m){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,l.Z)(function*(b,m){return un(b,"POST","/v1/accounts:signInWithIdp",At(b,m))})).apply(this,arguments)}class $t extends Ii{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const y=new $t(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(y.idToken=m.idToken),m.accessToken&&(y.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(y.nonce=m.nonce),m.pendingToken&&(y.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(y.accessToken=m.oauthToken,y.secret=m.oauthTokenSecret):He("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:D,signInMethod:R}=y,F=(0,ae._T)(y,["providerId","signInMethod"]);if(!D||!R)return null;const Y=new $t(D,R);return Y.idToken=F.idToken||void 0,Y.accessToken=F.accessToken||void 0,Y.secret=F.secret,Y.nonce=F.nonce,Y.pendingToken=F.pendingToken||null,Y}_getIdTokenResponse(m){return Ir(m,this.buildRequest())}_linkToIdToken(m,y){const D=this.buildRequest();return D.idToken=y,Ir(m,D)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,Ir(m,y)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),m.postBody=(0,G.xO)(y)}return m}}function Va(){return(Va=(0,l.Z)(function*(b,m){return pt(b,"POST","/v1/accounts:sendVerificationCode",At(b,m))})).apply(this,arguments)}function Bs(){return(Bs=(0,l.Z)(function*(b,m){return un(b,"POST","/v1/accounts:signInWithPhoneNumber",At(b,m))})).apply(this,arguments)}function lo(){return(lo=(0,l.Z)(function*(b,m){const y=yield un(b,"POST","/v1/accounts:signInWithPhoneNumber",At(b,m));if(y.temporaryProof)throw zn(b,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const ii={USER_NOT_FOUND:"user-not-found"};function si(){return(si=(0,l.Z)(function*(b,m){return un(b,"POST","/v1/accounts:signInWithPhoneNumber",At(b,Object.assign(Object.assign({},m),{operation:"REAUTH"})),ii)})).apply(this,arguments)}class Or extends Ii{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,y){return new Or({verificationId:m,verificationCode:y})}static _fromTokenResponse(m,y){return new Or({phoneNumber:m,temporaryProof:y})}_getIdTokenResponse(m){return function Od(b,m){return Bs.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,y){return function ws(b,m){return lo.apply(this,arguments)}(m,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function wm(b,m){return si.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:y,verificationId:D,verificationCode:R}=this.params;return m&&y?{temporaryProof:m,phoneNumber:y}:{sessionInfo:D,code:R}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:y,verificationCode:D,phoneNumber:R,temporaryProof:F}=m;return D||y||R||F?new Or({verificationId:y,verificationCode:D,phoneNumber:R,temporaryProof:F}):null}}class Es{constructor(m){var y,D,R,F,Y,xe;const mt=(0,G.zd)((0,G.pd)(m)),St=null!==(y=mt.apiKey)&&void 0!==y?y:null,rn=null!==(D=mt.oobCode)&&void 0!==D?D:null,kn=function oc(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=mt.mode)&&void 0!==R?R:null);ie(St&&rn&&kn,"argument-error"),this.apiKey=St,this.operation=kn,this.code=rn,this.continueUrl=null!==(F=mt.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(Y=mt.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(xe=mt.tenantId)&&void 0!==xe?xe:null}static parseLink(m){const y=function Zl(b){const m=(0,G.zd)((0,G.pd)(b)).link,y=m?(0,G.zd)((0,G.pd)(m)).deep_link_id:null,D=(0,G.zd)((0,G.pd)(b)).deep_link_id;return(D?(0,G.zd)((0,G.pd)(D)).link:null)||D||y||m||b}(m);try{return new Es(y)}catch{return null}}}let Ga=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(y,D){return bs._fromEmailAndPassword(y,D)}static credentialWithLink(y,D){const R=Es.parseLink(D);return ie(R,"argument-error"),bs._fromEmailAndCode(y,R.code,R.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class uo{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class sa extends uo{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class oa extends sa{static credentialFromJSON(m){const y="string"==typeof m?JSON.parse(m):m;return ie("providerId"in y&&"signInMethod"in y,"argument-error"),$t._fromParams(y)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return ie(m.idToken||m.accessToken,"argument-error"),$t._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return oa.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return oa.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:y,oauthAccessToken:D,oauthTokenSecret:R,pendingToken:F,nonce:Y,providerId:xe}=m;if(!D&&!R&&!y&&!F||!xe)return null;try{return new oa(xe)._credential({idToken:y,accessToken:D,nonce:Y,pendingToken:F})}catch{return null}}}let Em=(()=>{class b extends sa{constructor(){super("facebook.com")}static credential(y){return $t._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch{return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),Md=(()=>{class b extends sa{constructor(){super("google.com"),this.addScope("profile")}static credential(y,D){return $t._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:D})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:D,oauthAccessToken:R}=y;if(!D&&!R)return null;try{return b.credential(D,R)}catch{return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Dm=(()=>{class b extends sa{constructor(){super("github.com")}static credential(y){return $t._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch{return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class ja extends Ii{constructor(m,y){super(m,m),this.pendingToken=y}_getIdTokenResponse(m){return Ir(m,this.buildRequest())}_linkToIdToken(m,y){const D=this.buildRequest();return D.idToken=y,Ir(m,D)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,Ir(m,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:D,signInMethod:R,pendingToken:F}=y;return D&&R&&F&&D===R?new ja(D,F):null}static _create(m,y){return new ja(m,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Is extends uo{constructor(m){ie(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return Is.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return Is.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const y=ja.fromJSON(m);return ie(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:y,providerId:D}=m;if(!y||!D)return null;try{return ja._create(D,y)}catch{return null}}}let Ro=(()=>{class b extends sa{constructor(){super("twitter.com")}static credential(y,D){return $t._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:D})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:D,oauthTokenSecret:R}=y;if(!D||!R)return null;try{return b.credential(D,R)}catch{return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function Im(b,m){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,l.Z)(function*(b,m){return un(b,"POST","/v1/accounts:signUp",At(b,m))})).apply(this,arguments)}class Ui{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,y,D,R=!1){return(0,l.Z)(function*(){const F=yield rt._fromIdTokenResponse(m,D,R),Y=xd(D);return new Ui({user:F,providerId:Y,_tokenResponse:D,operationType:y})})()}static _forOperation(m,y,D){return(0,l.Z)(function*(){yield m._updateTokensIfNecessary(D,!0);const R=xd(D);return new Ui({user:m,providerId:R,_tokenResponse:D,operationType:y})})()}}function xd(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function kd(b){return aa.apply(this,arguments)}function aa(){return(aa=(0,l.Z)(function*(b){var m;const y=jr(b);if(yield y._initializationPromise,null!==(m=y.currentUser)&&void 0!==m&&m.isAnonymous)return new Ui({user:y.currentUser,providerId:null,operationType:"signIn"});const D=yield Im(y,{returnSecureToken:!0}),R=yield Ui._fromIdTokenResponse(y,"signIn",D,!0);return yield y._updateCurrentUser(R.user),R})).apply(this,arguments)}class ac extends G.ZR{constructor(m,y,D,R){var F;super(y.code,y.message),this.operationType=D,this.user=R,Object.setPrototypeOf(this,ac.prototype),this.customData={appName:m.name,tenantId:null!==(F=m.tenantId)&&void 0!==F?F:void 0,_serverResponse:y.customData._serverResponse,operationType:D}}static _fromErrorAndOperation(m,y,D,R){return new ac(m,y,D,R)}}function Pd(b,m,y,D){return("reauthenticate"===m?y._getReauthenticationResolver(b):y._getIdTokenResponse(b)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?ac._fromErrorAndOperation(b,F,m,D):F})}function Tm(b){return new Set(b.map(({providerId:m})=>m).filter(m=>!!m))}function Vi(b,m){return Jl.apply(this,arguments)}function Jl(){return Jl=(0,l.Z)(function*(b,m){const y=(0,G.m9)(b);yield Mo(!0,y,m);const{providerUserInfo:D}=yield function de(b,m){return Re.apply(this,arguments)}(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[m]}),R=Tm(D||[]);return y.providerData=y.providerData.filter(F=>R.has(F.providerId)),R.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y}),Jl.apply(this,arguments)}function Oo(b,m){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,l.Z)(function*(b,m,y=!1){const D=yield Mn(b,m._linkToIdToken(b.auth,yield b.getIdToken()),y);return Ui._forOperation(b,"link",D)})).apply(this,arguments)}function Mo(b,m,y){return $a.apply(this,arguments)}function $a(){return($a=(0,l.Z)(function*(b,m,y){yield fi(m);const R=!1===b?"provider-already-linked":"no-such-provider";ie(Tm(m.providerData).has(y)===b,m.auth,R)})).apply(this,arguments)}function Ql(b,m){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,l.Z)(function*(b,m,y=!1){var D;const{auth:R}=b,F="reauthenticate";try{const Y=yield Mn(b,Pd(R,F,m,b),y);ie(Y.idToken,R,"internal-error");const xe=wt(Y.idToken);ie(xe,R,"internal-error");const{sub:mt}=xe;return ie(b.uid===mt,R,"user-mismatch"),Ui._forOperation(b,F,Y)}catch(Y){throw"auth/user-not-found"===(null===(D=Y)||void 0===D?void 0:D.code)&&He(R,"user-mismatch"),Y}})).apply(this,arguments)}function lc(b,m){return Us.apply(this,arguments)}function Us(){return(Us=(0,l.Z)(function*(b,m,y=!1){const D="signIn",R=yield Pd(b,D,m),F=yield Ui._fromIdTokenResponse(b,D,R);return y||(yield b._updateCurrentUser(F.user)),F})).apply(this,arguments)}function uc(b,m){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,l.Z)(function*(b,m){return lc(jr(b),m)})).apply(this,arguments)}function cc(b,m){return la.apply(this,arguments)}function la(){return(la=(0,l.Z)(function*(b,m){const y=(0,G.m9)(b);return yield Mo(!1,y,m.providerId),Oo(y,m)})).apply(this,arguments)}function ir(b,m){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,l.Z)(function*(b,m){return Ql((0,G.m9)(b),m)})).apply(this,arguments)}function Mr(){return(Mr=(0,l.Z)(function*(b,m){return un(b,"POST","/v1/accounts:signInWithCustomToken",At(b,m))})).apply(this,arguments)}function dc(b,m){return za.apply(this,arguments)}function za(){return za=(0,l.Z)(function*(b,m){const y=jr(b),D=yield function co(b,m){return Mr.apply(this,arguments)}(y,{token:m,returnSecureToken:!0}),R=yield Ui._fromIdTokenResponse(y,"signIn",D);return yield y._updateCurrentUser(R.user),R}),za.apply(this,arguments)}class ns{constructor(m,y){this.factorId=m,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(m,y){return"phoneInfo"in y?xr._fromServerResponse(m,y):He(m,"internal-error")}}class xr extends ns{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,y){return new xr(y)}}function eu(b,m,y){var D;ie((null===(D=y.url)||void 0===D?void 0:D.length)>0,b,"invalid-continue-uri"),ie(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),m.continueUrl=y.url,m.dynamicLinkDomain=y.dynamicLinkDomain,m.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(ie(y.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),m.iOSBundleId=y.iOS.bundleId),y.android&&(ie(y.android.packageName.length>0,b,"missing-android-pkg-name"),m.androidInstallApp=y.android.installApp,m.androidMinimumVersionCode=y.android.minimumVersion,m.androidPackageName=y.android.packageName)}function tu(b,m,y){return nu.apply(this,arguments)}function nu(){return nu=(0,l.Z)(function*(b,m,y){const D=(0,G.m9)(b),R={requestType:"PASSWORD_RESET",email:m};y&&eu(D,R,y),yield function rr(b,m){return Qn.apply(this,arguments)}(D,R)}),nu.apply(this,arguments)}function Vs(b,m,y){return ua.apply(this,arguments)}function ua(){return(ua=(0,l.Z)(function*(b,m,y){yield gi((0,G.m9)(b),{oobCode:m,newPassword:y})})).apply(this,arguments)}function hc(b,m){return Bt.apply(this,arguments)}function Bt(){return Bt=(0,l.Z)(function*(b,m){yield function vs(b,m){return gt.apply(this,arguments)}((0,G.m9)(b),{oobCode:m})}),Bt.apply(this,arguments)}function fc(b,m){return ru.apply(this,arguments)}function ru(){return(ru=(0,l.Z)(function*(b,m){const y=(0,G.m9)(b),D=yield gi(y,{oobCode:m}),R=D.requestType;switch(ie(R,y,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(D.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(D.mfaInfo,y,"internal-error");default:ie(D.email,y,"internal-error")}let F=null;return D.mfaInfo&&(F=ns._fromServerResponse(jr(y),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:F},operation:R}})).apply(this,arguments)}function Ff(b,m){return qa.apply(this,arguments)}function qa(){return(qa=(0,l.Z)(function*(b,m){const{data:y}=yield fc((0,G.m9)(b),m);return y.email})).apply(this,arguments)}function Lf(b,m,y){return iu.apply(this,arguments)}function iu(){return(iu=(0,l.Z)(function*(b,m,y){const D=jr(b),R=yield Im(D,{returnSecureToken:!0,email:m,password:y}),F=yield Ui._fromIdTokenResponse(D,"signIn",R);return yield D._updateCurrentUser(F.user),F})).apply(this,arguments)}function Bf(b,m,y){return uc((0,G.m9)(b),Ga.credential(m,y))}function sr(b,m,y){return Ge.apply(this,arguments)}function Ge(){return Ge=(0,l.Z)(function*(b,m,y){const D=(0,G.m9)(b),R={requestType:"EMAIL_SIGNIN",email:m};ie(y.handleCodeInApp,D,"argument-error"),y&&eu(D,R,y),yield function sc(b,m){return Kt.apply(this,arguments)}(D,R)}),Ge.apply(this,arguments)}function pn(b,m){return"EMAIL_SIGNIN"===Es.parseLink(m)?.operation}function Fd(b,m,y){return pc.apply(this,arguments)}function pc(){return(pc=(0,l.Z)(function*(b,m,y){const D=(0,G.m9)(b),R=Ga.credentialWithLink(m,y||he());return ie(R._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),uc(D,R)})).apply(this,arguments)}function gc(){return(gc=(0,l.Z)(function*(b,m){return pt(b,"POST","/v1/accounts:createAuthUri",At(b,m))})).apply(this,arguments)}function ca(b,m){return Ti.apply(this,arguments)}function Ti(){return Ti=(0,l.Z)(function*(b,m){const D={identifier:m,continueUri:ve()?he():"http://localhost"},{signinMethods:R}=yield function Tr(b,m){return gc.apply(this,arguments)}((0,G.m9)(b),D);return R||[]}),Ti.apply(this,arguments)}function Ld(b,m){return da.apply(this,arguments)}function da(){return da=(0,l.Z)(function*(b,m){const y=(0,G.m9)(b),R={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};m&&eu(y.auth,R,m);const{email:F}=yield function xn(b,m){return Ls.apply(this,arguments)}(y.auth,R);F!==b.email&&(yield b.reload())}),da.apply(this,arguments)}function Bd(b,m,y){return su.apply(this,arguments)}function su(){return su=(0,l.Z)(function*(b,m,y){const D=(0,G.m9)(b),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:m};y&&eu(D.auth,F,y);const{email:Y}=yield function Kl(b,m){return oo.apply(this,arguments)}(D.auth,F);Y!==b.email&&(yield b.reload())}),su.apply(this,arguments)}function or(){return(or=(0,l.Z)(function*(b,m){return pt(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Ci(b,m){return Ka.apply(this,arguments)}function Ka(){return Ka=(0,l.Z)(function*(b,{displayName:m,photoURL:y}){if(void 0===m&&void 0===y)return;const D=(0,G.m9)(b),F={idToken:yield D.getIdToken(),displayName:m,photoUrl:y,returnSecureToken:!0},Y=yield Mn(D,function mc(b,m){return or.apply(this,arguments)}(D.auth,F));D.displayName=Y.displayName||null,D.photoURL=Y.photoUrl||null;const xe=D.providerData.find(({providerId:mt})=>"password"===mt);xe&&(xe.displayName=D.displayName,xe.photoURL=D.photoURL),yield D._updateTokensIfNecessary(Y)}),Ka.apply(this,arguments)}function Za(b,m){return Ya((0,G.m9)(b),m,null)}function Ts(b,m){return Ya((0,G.m9)(b),null,m)}function Ya(b,m,y){return ou.apply(this,arguments)}function ou(){return(ou=(0,l.Z)(function*(b,m,y){const{auth:D}=b,F={idToken:yield b.getIdToken(),returnSecureToken:!0};m&&(F.email=m),y&&(F.password=y);const Y=yield Mn(b,ic(D,F));yield b._updateTokensIfNecessary(Y,!0)})).apply(this,arguments)}class ha{constructor(m,y,D={}){this.isNewUser=m,this.providerId=y,this.profile=D}}class Ja extends ha{constructor(m,y,D,R){super(m,y,D),this.username=R}}class Ud extends ha{constructor(m,y){super(m,"facebook.com",y)}}class Vd extends Ja{constructor(m,y){super(m,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class au extends ha{constructor(m,y){super(m,"google.com",y)}}class Cm extends Ja{constructor(m,y,D){super(m,"twitter.com",y,D)}}function _c(b){const{user:m,_tokenResponse:y}=b;return m.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function Uf(b){var m,y;if(!b)return null;const{providerId:D}=b,R=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},F=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!D&&b?.idToken){const Y=null===(y=null===(m=wt(b.idToken))||void 0===m?void 0:m.firebase)||void 0===y?void 0:y.sign_in_provider;if(Y)return new ha(F,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!D)return null;switch(D){case"facebook.com":return new Ud(F,R);case"github.com":return new Vd(F,R);case"google.com":return new au(F,R);case"twitter.com":return new Cm(F,R,b.screenName||null);case"custom":case"anonymous":return new ha(F,null);default:return new ha(F,D,R)}}(y)}class Gi{constructor(m,y){this.type=m,this.credential=y}static _fromIdtoken(m){return new Gi("enroll",m)}static _fromMfaPendingCredential(m){return new Gi("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var y,D;if(m?.multiFactorSession){if(null!==(y=m.multiFactorSession)&&void 0!==y&&y.pendingCredential)return Gi._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(D=m.multiFactorSession)&&void 0!==D&&D.idToken)return Gi._fromIdtoken(m.multiFactorSession.idToken)}return null}}class jn{constructor(m,y,D){this.session=m,this.hints=y,this.signInResolver=D}static _fromError(m,y){const D=jr(m),R=y.customData._serverResponse,F=(R.mfaInfo||[]).map(xe=>ns._fromServerResponse(D,xe));ie(R.mfaPendingCredential,D,"internal-error");const Y=Gi._fromMfaPendingCredential(R.mfaPendingCredential);return new jn(Y,F,function(){var xe=(0,l.Z)(function*(mt){const St=yield mt._process(D,Y);delete R.mfaInfo,delete R.mfaPendingCredential;const rn=Object.assign(Object.assign({},R),{idToken:St.idToken,refreshToken:St.refreshToken});switch(y.operationType){case"signIn":const kn=yield Ui._fromIdTokenResponse(D,y.operationType,rn);return yield D._updateCurrentUser(kn.user),kn;case"reauthenticate":return ie(y.user,D,"internal-error"),Ui._forOperation(y.user,y.operationType,rn);default:He(D,"internal-error")}});return function(mt){return xe.apply(this,arguments)}}())}resolveSignIn(m){var y=this;return(0,l.Z)(function*(){return y.signInResolver(m)})()}}function jf(b,m){var y;const D=(0,G.m9)(b),R=m;return ie(m.customData.operationType,D,"argument-error"),ie(null===(y=R.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,D,"argument-error"),jn._fromError(D,R)}class Hd{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(D=>ns._fromServerResponse(m.auth,D)))})}static _fromUser(m){return new Hd(m)}getSession(){var m=this;return(0,l.Z)(function*(){return Gi._fromIdtoken(yield m.user.getIdToken())})()}enroll(m,y){var D=this;return(0,l.Z)(function*(){const R=m,F=yield D.getSession(),Y=yield Mn(D.user,R._process(D.user.auth,F,y));return yield D.user._updateTokensIfNecessary(Y),D.user.reload()})()}unenroll(m){var y=this;return(0,l.Z)(function*(){var D;const R="string"==typeof m?m:m.uid,F=yield y.user.getIdToken(),Y=yield Mn(y.user,function Am(b,m){return pt(b,"POST","/v2/accounts/mfaEnrollment:withdraw",At(b,m))}(y.user.auth,{idToken:F,mfaEnrollmentId:R}));y.enrolledFactors=y.enrolledFactors.filter(({uid:xe})=>xe!==R),yield y.user._updateTokensIfNecessary(Y);try{yield y.user.reload()}catch(xe){if("auth/user-token-expired"!==(null===(D=xe)||void 0===D?void 0:D.code))throw xe}})()}}const $d=new WeakMap;function Qa(b){const m=(0,G.m9)(b);return $d.has(m)||$d.set(m,Hd._fromUser(m)),$d.get(m)}const fa="__sak";class xo{constructor(m,y){this.storageRetriever=m,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(fa,"1"),this.storage.removeItem(fa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,y){return this.storage.setItem(m,JSON.stringify(y)),Promise.resolve()}_get(m){const y=this.storage.getItem(m);return Promise.resolve(y?JSON.parse(y):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Cr=(()=>{class b extends xo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,D)=>this.onStorageEvent(y,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Xa(){const b=(0,G.z$)();return W(b)||An(b)}()&&function tc(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Bi(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const D of Object.keys(this.listeners)){const R=this.storage.getItem(D),F=this.localCache[D];R!==F&&y(D,F,R)}}onStorageEvent(y,D=!1){if(!y.key)return void this.forAllChangedKeys((xe,mt,St)=>{this.notifyListeners(xe,St)});const R=y.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const xe=this.storage.getItem(R);if(y.newValue!==xe)null!==y.newValue?this.storage.setItem(R,y.newValue):this.storage.removeItem(R);else if(this.localCache[R]===y.newValue&&!D)return}const F=()=>{const xe=this.storage.getItem(R);!D&&this.localCache[R]===xe||this.notifyListeners(R,xe)},Y=this.storage.getItem(R);!function an(){return(0,G.w1)()&&10===document.documentMode}()||Y===y.newValue||y.newValue===y.oldValue?F():setTimeout(F,10)}notifyListeners(y,D){this.localCache[y]=D;const R=this.listeners[y];if(R)for(const F of Array.from(R))F(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,D,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:D,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(D)}_removeListener(y,D){this.listeners[y]&&(this.listeners[y].delete(D),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,D){var R=()=>super._set,F=this;return(0,l.Z)(function*(){yield R().call(F,y,D),F.localCache[y]=JSON.stringify(D)})()}_get(y){var D=()=>super._get,R=this;return(0,l.Z)(function*(){const F=yield D().call(R,y);return R.localCache[y]=JSON.stringify(F),F})()}_remove(y){var D=()=>super._remove,R=this;return(0,l.Z)(function*(){yield D().call(R,y),delete R.localCache[y]})()}}return b.type="LOCAL",b})(),Wd=(()=>{class b extends xo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,D){}_removeListener(y,D){}}return b.type="SESSION",b})();let zf=(()=>{class b{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const D=this.receivers.find(F=>F.isListeningto(y));if(D)return D;const R=new b(y);return this.receivers.push(R),R}isListeningto(y){return this.eventTarget===y}handleEvent(y){var D=this;return(0,l.Z)(function*(){const R=y,{eventId:F,eventType:Y,data:xe}=R.data,mt=D.handlersMap[Y];if(!mt?.size)return;R.ports[0].postMessage({status:"ack",eventId:F,eventType:Y});const St=Array.from(mt).map(function(){var kn=(0,l.Z)(function*(qi){return qi(R.origin,xe)});return function(qi){return kn.apply(this,arguments)}}()),rn=yield function yc(b){return Promise.all(b.map(function(){var m=(0,l.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(D){return{fulfilled:!1,reason:D}}});return function(y){return m.apply(this,arguments)}}()))}(St);R.ports[0].postMessage({status:"done",eventId:F,eventType:Y,response:rn})})()}_subscribe(y,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(D)}_unsubscribe(y,D){this.handlersMap[y]&&D&&this.handlersMap[y].delete(D),(!D||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function el(b="",m=10){let y="";for(let D=0;D<m;D++)y+=Math.floor(10*Math.random());return b+y}class lu{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,y,D=50){var R=this;return(0,l.Z)(function*(){const F=typeof MessageChannel<"u"?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let Y,xe;return new Promise((mt,St)=>{const rn=el("",20);F.port1.start();const kn=setTimeout(()=>{St(new Error("unsupported_event"))},D);xe={messageChannel:F,onMessage(qi){const ba=qi;if(ba.data.eventId===rn)switch(ba.data.status){case"ack":clearTimeout(kn),Y=setTimeout(()=>{St(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),mt(ba.data.response);break;default:clearTimeout(kn),clearTimeout(Y),St(new Error("invalid_response"))}}},R.handlers.add(xe),F.port1.addEventListener("message",xe.onMessage),R.target.postMessage({eventType:m,eventId:rn,data:y},[F.port2])}).finally(()=>{xe&&R.removeMessageHandler(xe)})})()}}function qn(){return window}function fo(){return typeof qn().WorkerGlobalScope<"u"&&"function"==typeof qn().importScripts}function po(){return(po=(0,l.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const uu="firebaseLocalStorageDb",ga=1,cu="firebaseLocalStorage",Fo="fbase_key";class go{constructor(m){this.request=m}toPromise(){return new Promise((m,y)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Gs(b,m){return b.transaction([cu],m?"readwrite":"readonly").objectStore(cu)}function Lo(){const b=indexedDB.open(uu,ga);return new Promise((m,y)=>{b.addEventListener("error",()=>{y(b.error)}),b.addEventListener("upgradeneeded",()=>{const D=b.result;try{D.createObjectStore(cu,{keyPath:Fo})}catch(R){y(R)}}),b.addEventListener("success",(0,l.Z)(function*(){const D=b.result;D.objectStoreNames.contains(cu)?m(D):(D.close(),yield function Nm(){const b=indexedDB.deleteDatabase(uu);return new go(b).toPromise()}(),m(yield Lo()))}))})}function du(b,m,y){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,l.Z)(function*(b,m,y){const D=Gs(b,!0).put({[Fo]:m,value:y});return new go(D).toPromise()})).apply(this,arguments)}function tl(){return(tl=(0,l.Z)(function*(b,m){const y=Gs(b,!1).get(m),D=yield new go(y).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function mo(b,m){const y=Gs(b,!0).delete(m);return new go(y).toPromise()}const Uo=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,l.Z)(function*(){return y.db||(y.db=yield Lo()),y.db})()}_withRetries(y){var D=this;return(0,l.Z)(function*(){let R=0;for(;;)try{const F=yield D._openDb();return yield y(F)}catch(F){if(R++>3)throw F;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,l.Z)(function*(){return fo()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,l.Z)(function*(){y.receiver=zf._getInstance(function vc(){return fo()?self:null}()),y.receiver._subscribe("keyChanged",function(){var D=(0,l.Z)(function*(R,F){return{keyProcessed:(yield y._poll()).includes(F.key)}});return function(R,F){return D.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var D=(0,l.Z)(function*(R,F){return["keyChanged"]});return function(R,F){return D.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,l.Z)(function*(){var D,R;if(y.activeServiceWorker=yield function ko(){return po.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new lu(y.activeServiceWorker);const F=yield y.sender._send("ping",{},800);F&&null!==(D=F[0])&&void 0!==D&&D.fulfilled&&null!==(R=F[0])&&void 0!==R&&R.value.includes("keyChanged")&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var D=this;return(0,l.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function Po(){var b;return(null===(b=navigator?.serviceWorker)||void 0===b?void 0:b.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:y},D.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const y=yield Lo();return yield du(y,fa,"1"),yield mo(y,fa),!0}catch{}return!1})()}_withPendingWrite(y){var D=this;return(0,l.Z)(function*(){D.pendingWrites++;try{yield y()}finally{D.pendingWrites--}})()}_set(y,D){var R=this;return(0,l.Z)(function*(){return R._withPendingWrite((0,l.Z)(function*(){return yield R._withRetries(F=>du(F,y,D)),R.localCache[y]=D,R.notifyServiceWorker(y)}))})()}_get(y){var D=this;return(0,l.Z)(function*(){const R=yield D._withRetries(F=>function ji(b,m){return tl.apply(this,arguments)}(F,y));return D.localCache[y]=R,R})()}_remove(y){var D=this;return(0,l.Z)(function*(){return D._withPendingWrite((0,l.Z)(function*(){return yield D._withRetries(R=>mo(R,y)),delete D.localCache[y],D.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,l.Z)(function*(){const D=yield y._withRetries(Y=>{const xe=Gs(Y,!1).getAll();return new go(xe).toPromise()});if(!D)return[];if(0!==y.pendingWrites)return[];const R=[],F=new Set;for(const{fbase_key:Y,value:xe}of D)F.add(Y),JSON.stringify(y.localCache[Y])!==JSON.stringify(xe)&&(y.notifyListeners(Y,xe),R.push(Y));for(const Y of Object.keys(y.localCache))y.localCache[Y]&&!F.has(Y)&&(y.notifyListeners(Y,null),R.push(Y));return R})()}notifyListeners(y,D){this.localCache[y]=D;const R=this.listeners[y];if(R)for(const F of Array.from(R))F(D)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(D)}_removeListener(y,D){this.listeners[y]&&(this.listeners[y].delete(D),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function Hi(){return(Hi=(0,l.Z)(function*(b){return(yield pt(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function il(b){return new Promise((m,y)=>{const D=document.createElement("script");D.setAttribute("src",b),D.onload=m,D.onerror=R=>{const F=Ve("internal-error");F.customData=R,y(F)},D.type="text/javascript",D.charset="UTF-8",function wc(){var b,m;return null!==(m=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==m?m:document}().appendChild(D)})}function Vo(b){return`__${b}${Math.floor(1e6*Math.random())}`}const $i=1e12;class fu{constructor(m){this.auth=m,this.counter=$i,this._widgets=new Map}render(m,y){const D=this.counter;return this._widgets.set(D,new sl(m,this.auth.name,y||{})),this.counter++,D}reset(m){var y;const D=m||$i;null===(y=this._widgets.get(D))||void 0===y||y.delete(),this._widgets.delete(D)}getResponse(m){var y;return(null===(y=this._widgets.get(m||$i))||void 0===y?void 0:y.getResponse())||""}execute(m){var y=this;return(0,l.Z)(function*(){var D;return null===(D=y._widgets.get(m||$i))||void 0===D||D.execute(),""})()}}class sl{constructor(m,y,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof m?document.getElementById(m):m;ie(R,"argument-error",{appName:y}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Zf(b){const m=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<b;D++)m.push(y.charAt(Math.floor(Math.random()*y.length)));return m.join("")}(50);const{callback:m,"expired-callback":y}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ol=Vo("rcb"),qd=new We(3e4,6e4);class Dc{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=qn().grecaptcha)||void 0===m||!m.render)}load(m,y=""){return ie(function ma(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(y),m,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(qn().grecaptcha):new Promise((D,R)=>{const F=qn().setTimeout(()=>{R(Ve(m,"network-request-failed"))},qd.get());qn()[ol]=()=>{qn().clearTimeout(F),delete qn()[ol];const xe=qn().grecaptcha;if(!xe)return void R(Ve(m,"internal-error"));const mt=xe.render;xe.render=(St,rn)=>{const kn=mt(St,rn);return this.counter++,kn},this.hostLanguage=y,D(xe)},il(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:ol,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(F),R(Ve(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var y;return!(null===(y=qn().grecaptcha)||void 0===y||!y.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class al{load(m){return(0,l.Z)(function*(){return new fu(m)})()}clearedOneInstance(){}}const ll="recaptcha",ul={theme:"light",type:"image"};class Rm{constructor(m,y=Object.assign({},ul),D){this.parameters=y,this.type=ll,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=jr(D),this.isInvisible="invisible"===this.parameters.size,ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof m?document.getElementById(m):m;ie(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new al:new Dc,this.validateStartingState()}verify(){var m=this;return(0,l.Z)(function*(){m.assertNotDestroyed();const y=yield m.render(),D=m.getAssertedRecaptcha();return D.getResponse(y)||new Promise(F=>{const Y=xe=>{xe&&(m.tokenChangeListeners.delete(Y),F(xe))};m.tokenChangeListeners.add(Y),m.isInvisible&&D.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return y=>{if(this.tokenChangeListeners.forEach(D=>D(y)),"function"==typeof m)m(y);else if("string"==typeof m){const D=qn()[m];"function"==typeof D&&D(y)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,l.Z)(function*(){if(yield m.init(),!m.widgetId){let y=m.container;if(!m.isInvisible){const D=document.createElement("div");y.appendChild(D),y=D}m.widgetId=m.getAssertedRecaptcha().render(y,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,l.Z)(function*(){ie(ve()&&!fo(),m.auth,"internal-error"),yield function Zd(){let b=null;return new Promise(m=>{"complete"!==document.readyState?(b=()=>m(),window.addEventListener("load",b)):m()}).catch(m=>{throw b&&window.removeEventListener("load",b),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const y=yield function zd(b){return Hi.apply(this,arguments)}(m.auth);ie(y,m.auth,"internal-error"),m.parameters.sitekey=y})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class js{constructor(m,y){this.verificationId=m,this.onConfirmation=y}confirm(m){const y=Or._fromVerification(this.verificationId,m);return this.onConfirmation(y)}}function Om(b,m,y){return rs.apply(this,arguments)}function rs(){return(rs=(0,l.Z)(function*(b,m,y){const D=jr(b),R=yield Qd(D,m,(0,G.m9)(y));return new js(R,F=>uc(D,F))})).apply(this,arguments)}function Fn(b,m,y){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,l.Z)(function*(b,m,y){const D=(0,G.m9)(b);yield Mo(!1,D,"phone");const R=yield Qd(D.auth,m,(0,G.m9)(y));return new js(R,F=>cc(D,F))})).apply(this,arguments)}function Jd(b,m,y){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,l.Z)(function*(b,m,y){const D=(0,G.m9)(b),R=yield Qd(D.auth,m,(0,G.m9)(y));return new js(R,F=>ir(D,F))})).apply(this,arguments)}function Qd(b,m,y){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,l.Z)(function*(b,m,y){var D;const R=yield y.verify();try{let F;if(ie("string"==typeof R,b,"argument-error"),ie(y.type===ll,b,"argument-error"),F="string"==typeof m?{phoneNumber:m}:m,"session"in F){const Y=F.session;if("phoneNumber"in F)return ie("enroll"===Y.type,b,"internal-error"),(yield function zr(b,m){return pt(b,"POST","/v2/accounts/mfaEnrollment:start",At(b,m))}(b,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{ie("signin"===Y.type,b,"internal-error");const xe=(null===(D=F.multiFactorHint)||void 0===D?void 0:D.uid)||F.multiFactorUid;return ie(xe,b,"missing-multi-factor-info"),(yield function Kf(b,m){return pt(b,"POST","/v2/accounts/mfaSignIn:start",At(b,m))}(b,{mfaPendingCredential:Y.credential,mfaEnrollmentId:xe,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield function bm(b,m){return Va.apply(this,arguments)}(b,{phoneNumber:F.phoneNumber,recaptchaToken:R});return Y}}finally{y._reset()}}),Yf.apply(this,arguments)}function ov(b,m){return Jf.apply(this,arguments)}function Jf(){return(Jf=(0,l.Z)(function*(b,m){yield Oo((0,G.m9)(b),m)})).apply(this,arguments)}let pu=(()=>{class b{constructor(y){this.providerId=b.PROVIDER_ID,this.auth=jr(y)}verifyPhoneNumber(y,D){return Qd(this.auth,y,(0,G.m9)(D))}static credential(y,D){return Or._fromVerification(y,D)}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:D,temporaryProof:R}=y;return D&&R?Or._fromTokenResponse(D,R):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function cl(b,m){return m?ze(m):(ie(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Xd extends Ii{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return Ir(m,this._buildIdpRequest())}_linkToIdToken(m,y){return Ir(m,this._buildIdpRequest(y))}_getReauthenticationResolver(m){return Ir(m,this._buildIdpRequest())}_buildIdpRequest(m){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(y.idToken=m),y}}function Sr(b){return lc(b.auth,new Xd(b),b.bypassAuthState)}function eh(b){const{auth:m,user:y}=b;return ie(y,m,"internal-error"),Ql(y,new Xd(b),b.bypassAuthState)}function jo(b){return gu.apply(this,arguments)}function gu(){return(gu=(0,l.Z)(function*(b){const{auth:m,user:y}=b;return ie(y,m,"internal-error"),Oo(y,new Xd(b),b.bypassAuthState)})).apply(this,arguments)}class _i{constructor(m,y,D,R,F=!1){this.auth=m,this.resolver=D,this.user=R,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var m=this;return new Promise(function(){var y=(0,l.Z)(function*(D,R){m.pendingPromise={resolve:D,reject:R};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(F){m.reject(F)}});return function(D,R){return y.apply(this,arguments)}}())}onAuthEvent(m){var y=this;return(0,l.Z)(function*(){const{urlResponse:D,sessionId:R,postBody:F,tenantId:Y,error:xe,type:mt}=m;if(xe)return void y.reject(xe);const St={auth:y.auth,requestUri:D,sessionId:R,tenantId:Y||void 0,postBody:F||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(mt)(St))}catch(rn){y.reject(rn)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Sr;case"linkViaPopup":case"linkViaRedirect":return jo;case"reauthViaPopup":case"reauthViaRedirect":return eh;default:He(this.auth,"internal-error")}}resolve(m){Ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _o=new We(2e3,1e4);function Tc(b,m,y){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,l.Z)(function*(b,m,y){const D=jr(b);Pe(b,m,uo);const R=cl(D,y);return new Xf(D,"signInViaPopup",m,R).executeNotNull()})).apply(this,arguments)}function _a(b,m,y){return Qf.apply(this,arguments)}function Qf(){return(Qf=(0,l.Z)(function*(b,m,y){const D=(0,G.m9)(b);Pe(D.auth,m,uo);const R=cl(D.auth,y);return new Xf(D.auth,"reauthViaPopup",m,R,D).executeNotNull()})).apply(this,arguments)}function qw(b,m,y){return th.apply(this,arguments)}function th(){return(th=(0,l.Z)(function*(b,m,y){const D=(0,G.m9)(b);Pe(D.auth,m,uo);const R=cl(D.auth,y);return new Xf(D.auth,"linkViaPopup",m,R,D).executeNotNull()})).apply(this,arguments)}let Xf=(()=>{class b extends _i{constructor(y,D,R,F,Y){super(y,D,F,Y),this.provider=R,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var y=this;return(0,l.Z)(function*(){const D=yield y.execute();return ie(D,y.auth,"internal-error"),D})()}onExecution(){var y=this;return(0,l.Z)(function*(){Ce(1===y.filter.length,"Popup operations only handle one event");const D=el();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],D),y.authWindow.associatedEvent=D,y.resolver._originValidation(y.auth).catch(R=>{y.reject(R)}),y.resolver._isIframeWebStorageSupported(y.auth,R=>{R||y.reject(Ve(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const y=()=>{var D,R;this.pollId=null!==(R=null===(D=this.authWindow)||void 0===D?void 0:D.window)&&void 0!==R&&R.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,_o.get())};y()}}return b.currentPopupAction=null,b})();const Qt="pendingRedirect",vr=new Map;class _t extends _i{constructor(m,y,D=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,D),this.eventId=null}execute(){var m=()=>super.execute,y=this;return(0,l.Z)(function*(){let D=vr.get(y.auth._key());if(!D){try{const F=(yield function Hn(b,m){return ar.apply(this,arguments)}(y.resolver,y.auth))?yield m().call(y):null;D=()=>Promise.resolve(F)}catch(R){D=()=>Promise.reject(R)}vr.set(y.auth._key(),D)}return y.bypassAuthState||vr.set(y.auth._key(),()=>Promise.resolve(null)),D()})()}onAuthEvent(m){var y=()=>super.onAuthEvent,D=this;return(0,l.Z)(function*(){if("signInViaRedirect"===m.type)return y().call(D,m);if("unknown"!==m.type){if(m.eventId){const R=yield D.auth._redirectUserForId(m.eventId);if(R)return D.user=R,y().call(D,m);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function ar(){return(ar=(0,l.Z)(function*(b,m){const y=Cc(m),D=ep(b);if(!(yield D._isAvailable()))return!1;const R="true"===(yield D._get(y));return yield D._remove(y),R})).apply(this,arguments)}function Hs(b,m){return ya.apply(this,arguments)}function ya(){return(ya=(0,l.Z)(function*(b,m){return ep(b)._set(Cc(m),"true")})).apply(this,arguments)}function Kn(){vr.clear()}function nh(b,m){vr.set(b._key(),m)}function ep(b){return ze(b._redirectPersistence)}function Cc(b){return In(Qt,b.config.apiKey,b.name)}function Sc(b,m,y){return function dl(b,m,y){return mu.apply(this,arguments)}(b,m,y)}function mu(){return(mu=(0,l.Z)(function*(b,m,y){const D=jr(b);Pe(b,m,uo);const R=cl(D,y);return yield Hs(R,D),R._openRedirect(D,m,"signInViaRedirect")})).apply(this,arguments)}function T(b,m,y){return function C(b,m,y){return O.apply(this,arguments)}(b,m,y)}function O(){return(O=(0,l.Z)(function*(b,m,y){const D=(0,G.m9)(b);Pe(D.auth,m,uo);const R=cl(D.auth,y);yield Hs(R,D.auth);const F=yield Gt(D);return R._openRedirect(D.auth,m,"reauthViaRedirect",F)})).apply(this,arguments)}function V(b,m,y){return function X(b,m,y){return fe.apply(this,arguments)}(b,m,y)}function fe(){return(fe=(0,l.Z)(function*(b,m,y){const D=(0,G.m9)(b);Pe(D.auth,m,uo);const R=cl(D.auth,y);yield Mo(!1,D,m.providerId),yield Hs(R,D.auth);const F=yield Gt(D);return R._openRedirect(D.auth,m,"linkViaRedirect",F)})).apply(this,arguments)}function we(b,m){return ot.apply(this,arguments)}function ot(){return(ot=(0,l.Z)(function*(b,m){return yield jr(b)._initializationPromise,Nt(b,m,!1)})).apply(this,arguments)}function Nt(b,m){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,l.Z)(function*(b,m,y=!1){const D=jr(b),R=cl(D,m),Y=yield new _t(D,R,y).execute();return Y&&!y&&(delete Y.user._redirectEventId,yield D._persistUserIfCurrent(Y.user),yield D._setRedirectUser(null,m)),Y})).apply(this,arguments)}function Gt(b){return It.apply(this,arguments)}function It(){return(It=(0,l.Z)(function*(b){const m=el(`${b.uid}:::`);return b._redirectEventId=m,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),m})).apply(this,arguments)}class Pr{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let y=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(m,D)&&(y=!0,this.sendToConsumer(m,D),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function hl(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $o(b);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=m,y=!0)),y}sendToConsumer(m,y){var D;if(m.error&&!$o(m)){const R=(null===(D=m.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";y.onError(Ve(this.auth,R))}else y.onAuthEvent(m)}isEventForConsumer(m,y){const D=null===y.eventId||!!m.eventId&&m.eventId===y.eventId;return y.filter.includes(m.type)&&D}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kr(m))}saveEventToCache(m){this.cachedEventUids.add(Kr(m)),this.lastProcessedEventTime=Date.now()}}function Kr(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(m=>m).join("-")}function $o({type:b,error:m}){return"unknown"===b&&"auth/no-auth-event"===m?.code}function is(b){return $s.apply(this,arguments)}function $s(){return($s=(0,l.Z)(function*(b,m={}){return pt(b,"GET","/v1/projects",m)})).apply(this,arguments)}const yi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ss=/^https?/;function va(){return(va=(0,l.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:m}=yield is(b);for(const y of m)try{if(tp(y))return}catch{}He(b,"unauthorized-domain")})).apply(this,arguments)}function tp(b){const m=he(),{protocol:y,hostname:D}=new URL(m);if(b.startsWith("chrome-extension://")){const Y=new URL(b);return""===Y.hostname&&""===D?"chrome-extension:"===y&&b.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===y&&Y.hostname===D}if(!ss.test(y))return!1;if(yi.test(b))return D===b;const R=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(D)}const hr=new We(3e4,6e4);function fr(){const b=qn().___jsl;if(b?.H)for(const m of Object.keys(b.H))if(b.H[m].r=b.H[m].r||[],b.H[m].L=b.H[m].L||[],b.H[m].r=[...b.H[m].L],b.CP)for(let y=0;y<b.CP.length;y++)b.CP[y]=null}let Xn=null;const yu=new We(5e3,15e3),av="__/auth/iframe",Kw="emulator/auth/iframe",Ws={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ai(b){const m=b.config;ie(m.authDomain,b,"auth-domain-config-required");const y=m.emulator?ft(m,Kw):`https://${b.config.authDomain}/${av}`,D={apiKey:m.apiKey,appName:b.name,v:x.SDK_VERSION},R=vu.get(b.config.apiHost);R&&(D.eid=R);const F=b._getFrameworks();return F.length&&(D.fw=F.join(",")),`${y}?${(0,G.xO)(D).slice(1)}`}function Mm(){return Mm=(0,l.Z)(function*(b){const m=yield function oi(b){return Xn=Xn||function _u(b){return new Promise((m,y)=>{var D,R,F;function Y(){fr(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{fr(),y(Ve(b,"network-request-failed"))},timeout:hr.get()})}if(null!==(R=null===(D=qn().gapi)||void 0===D?void 0:D.iframes)&&void 0!==R&&R.Iframe)m(gapi.iframes.getContext());else{if(null===(F=qn().gapi)||void 0===F||!F.load){const xe=Vo("iframefcb");return qn()[xe]=()=>{gapi.load?Y():y(Ve(b,"network-request-failed"))},il(`https://apis.google.com/js/api.js?onload=${xe}`).catch(mt=>y(mt))}Y()}}).catch(m=>{throw Xn=null,m})}(b),Xn}(b),y=qn().gapi;return ie(y,b,"internal-error"),m.open({where:document.body,url:ai(b),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ws,dontclear:!0},D=>new Promise(function(){var R=(0,l.Z)(function*(F,Y){yield D.restyle({setHideOnLeave:!1});const xe=Ve(b,"network-request-failed"),mt=qn().setTimeout(()=>{Y(xe)},yu.get());function St(){qn().clearTimeout(mt),F(D)}D.ping(St).then(St,()=>{Y(xe)})});return function(F,Y){return R.apply(this,arguments)}}()))}),Mm.apply(this,arguments)}const bu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},np=500,rp=600,ip="_blank",sp="http://localhost";class Ac{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const lv="__/auth/handler",wu="emulator/auth/handler";function op(b,m,y,D,R,F){ie(b.config.authDomain,b,"auth-domain-config-required"),ie(b.config.apiKey,b,"invalid-api-key");const Y={apiKey:b.config.apiKey,appName:b.name,authType:y,redirectUrl:D,v:x.SDK_VERSION,eventId:R};if(m instanceof uo){m.setDefaultLanguage(b.languageCode),Y.providerId=m.providerId||"",(0,G.xb)(m.getCustomParameters())||(Y.customParameters=JSON.stringify(m.getCustomParameters()));for(const[mt,St]of Object.entries(F||{}))Y[mt]=St}if(m instanceof sa){const mt=m.getScopes().filter(St=>""!==St);mt.length>0&&(Y.scopes=mt.join(","))}b.tenantId&&(Y.tid=b.tenantId);const xe=Y;for(const mt of Object.keys(xe))void 0===xe[mt]&&delete xe[mt];return`${function xm({config:b}){return b.emulator?ft(b,wu):`https://${b.authDomain}/${lv}`}(b)}?${(0,G.xO)(xe).slice(1)}`}const zi="webStorageSupport",ap=class km{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wd,this._completeRedirectFn=Nt,this._overrideRedirectResult=nh}_openPopup(m,y,D,R){var F=this;return(0,l.Z)(function*(){var Y;Ce(null===(Y=F.eventManagers[m._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const xe=op(m,y,D,he(),R);return function Zt(b,m,y,D=np,R=rp){const F=Math.max((window.screen.availHeight-R)/2,0).toString(),Y=Math.max((window.screen.availWidth-D)/2,0).toString();let xe="";const mt=Object.assign(Object.assign({},bu),{width:D.toString(),height:R.toString(),top:F,left:Y}),St=(0,G.z$)().toLowerCase();y&&(xe=Se(St)?ip:y),K(St)&&(m=m||sp,mt.scrollbars="yes");const rn=Object.entries(mt).reduce((qi,[ba,zs])=>`${qi}${ba}=${zs},`,"");if(function ni(b=(0,G.z$)()){var m;return An(b)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(St)&&"_self"!==xe)return function Wi(b,m){const y=document.createElement("a");y.href=b,y.target=m;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(D)}(m||"",xe),new Ac(null);const kn=window.open(m||"",xe,rn);ie(kn,b,"popup-blocked");try{kn.focus()}catch{}return new Ac(kn)}(m,xe,el())})()}_openRedirect(m,y,D,R){var F=this;return(0,l.Z)(function*(){return yield F._originValidation(m),function qf(b){qn().location.href=b}(op(m,y,D,he(),R)),new Promise(()=>{})})()}_initialize(m){const y=m._key();if(this.eventManagers[y]){const{manager:R,promise:F}=this.eventManagers[y];return R?Promise.resolve(R):(Ce(F,"If manager is not set, promise should be"),F)}const D=this.initAndGetManager(m);return this.eventManagers[y]={promise:D},D.catch(()=>{delete this.eventManagers[y]}),D}initAndGetManager(m){var y=this;return(0,l.Z)(function*(){const D=yield function fl(b){return Mm.apply(this,arguments)}(m),R=new Pr(m);return D.register("authEvent",F=>(ie(F?.authEvent,m,"invalid-auth-event"),{status:R.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[m._key()]={manager:R},y.iframes[m._key()]=D,R})()}_isIframeWebStorageSupported(m,y){this.iframes[m._key()].send(zi,{type:zi},R=>{var F;const Y=null===(F=R?.[0])||void 0===F?void 0:F[zi];void 0!==Y&&y(!!Y),He(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const y=m._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Ln(b){return va.apply(this,arguments)}(m)),this.originValidationPromises[y]}get _shouldInitProactively(){return Bi()||W()||An()}};class Pm{constructor(m){this.factorId=m}_process(m,y,D){switch(y.type){case"enroll":return this._finalizeEnroll(m,y.credential,D);case"signin":return this._finalizeSignIn(m,y.credential);default:return pe("unexpected MultiFactorSessionType")}}}class lp extends Pm{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new lp(m)}_finalizeEnroll(m,y,D){return function Hf(b,m){return pt(b,"POST","/v2/accounts/mfaEnrollment:finalize",At(b,m))}(m,{idToken:y,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,y){return function rl(b,m){return pt(b,"POST","/v2/accounts/mfaSignIn:finalize",At(b,m))}(m,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let li=(()=>{class b{constructor(){}static assertion(y){return lp._fromCredential(y)}}return b.FACTOR_ID="phone",b})();var Wo="@firebase/auth";class up{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var y=this;return(0,l.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const y=this.auth.onIdTokenChanged(D=>{var R;m((null===(R=D)||void 0===R?void 0:R.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,y),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const y=this.internalListeners.get(m);y&&(this.internalListeners.delete(m),y(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function rh(b){(0,x._registerComponent)(new ce.wA("auth",(m,{options:y})=>{const D=m.getProvider("app").getImmediate(),R=m.getProvider("heartbeat"),{apiKey:F,authDomain:Y}=D.options;return((xe,mt)=>{ie(F&&!F.includes(":"),"invalid-api-key",{appName:xe.name}),ie(!Y?.includes(":"),"argument-error",{appName:xe.name});const St={apiKey:F,authDomain:Y,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zl(b)},rn=new ql(xe,mt,St);return function lt(b,m){const y=m?.persistence||[],D=(Array.isArray(y)?y:[y]).map(ze);m?.errorMap&&b._updateErrorMap(m.errorMap),b._initializeWithPersistence(D,m?.popupRedirectResolver)}(rn,y),rn})(D,R)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,y,D)=>{m.getProvider("auth-internal").initialize()})),(0,x._registerComponent)(new ce.wA("auth-internal",m=>{const y=jr(m.getProvider("auth").getImmediate());return new up(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,x.registerVersion)(Wo,"0.20.5",function cp(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,x.registerVersion)(Wo,"0.20.5","esm2017")}("Browser")},2090:(Et,Me,L)=>{L.d(Me,{$s:()=>fi,BH:()=>Ye,DV:()=>pt,Dv:()=>cn,G6:()=>ie,GJ:()=>Rt,L:()=>me,LL:()=>he,Mn:()=>Pe,Pz:()=>qe,Sg:()=>Be,UG:()=>Ee,UI:()=>Jn,US:()=>ce,Wj:()=>vn,Yr:()=>et,ZB:()=>H,ZR:()=>lt,b$:()=>He,cI:()=>Ue,d:()=>Ve,dS:()=>wt,eu:()=>Ce,g5:()=>x,gK:()=>Ft,gQ:()=>se,h$:()=>Ie,hl:()=>pe,hu:()=>G,jU:()=>Le,lb:()=>Mt,m9:()=>tn,ne:()=>ne,p$:()=>z,pd:()=>zn,r3:()=>At,ru:()=>Oe,tV:()=>be,uI:()=>yt,ug:()=>xt,vZ:()=>On,w1:()=>ke,w9:()=>En,xO:()=>yr,xb:()=>ln,z$:()=>Xe,zI:()=>nt,zd:()=>Li});const l={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},G=function(Q,$){if(!Q)throw x($)},x=function(Q){return new Error("Firebase Database ("+l.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Q)},ae=function(Q){const $=[];let U=0;for(let q=0;q<Q.length;q++){let Z=Q.charCodeAt(q);Z<128?$[U++]=Z:Z<2048?($[U++]=Z>>6|192,$[U++]=63&Z|128):55296==(64512&Z)&&q+1<Q.length&&56320==(64512&Q.charCodeAt(q+1))?(Z=65536+((1023&Z)<<10)+(1023&Q.charCodeAt(++q)),$[U++]=Z>>18|240,$[U++]=Z>>12&63|128,$[U++]=Z>>6&63|128,$[U++]=63&Z|128):($[U++]=Z>>12|224,$[U++]=Z>>6&63|128,$[U++]=63&Z|128)}return $},ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Q,$){if(!Array.isArray(Q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const U=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,q=[];for(let Z=0;Z<Q.length;Z+=3){const Fe=Q[Z],rt=Z+1<Q.length,Ot=rt?Q[Z+1]:0,Dn=Z+2<Q.length,In=Dn?Q[Z+2]:0;let K=(15&Ot)<<2|In>>6,W=63&In;Dn||(W=64,rt||(K=64)),q.push(U[Fe>>2],U[(3&Fe)<<4|Ot>>4],U[K],U[W])}return q.join("")},encodeString(Q,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(Q):this.encodeByteArray(ae(Q),$)},decodeString(Q,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(Q):function(Q){const $=[];let U=0,q=0;for(;U<Q.length;){const Z=Q[U++];if(Z<128)$[q++]=String.fromCharCode(Z);else if(Z>191&&Z<224){const Fe=Q[U++];$[q++]=String.fromCharCode((31&Z)<<6|63&Fe)}else if(Z>239&&Z<365){const Dn=((7&Z)<<18|(63&Q[U++])<<12|(63&Q[U++])<<6|63&Q[U++])-65536;$[q++]=String.fromCharCode(55296+(Dn>>10)),$[q++]=String.fromCharCode(56320+(1023&Dn))}else{const Fe=Q[U++],rt=Q[U++];$[q++]=String.fromCharCode((15&Z)<<12|(63&Fe)<<6|63&rt)}}return $.join("")}(this.decodeStringToByteArray(Q,$))},decodeStringToByteArray(Q,$){this.init_();const U=$?this.charToByteMapWebSafe_:this.charToByteMap_,q=[];for(let Z=0;Z<Q.length;){const Fe=U[Q.charAt(Z++)],Ot=Z<Q.length?U[Q.charAt(Z)]:0;++Z;const In=Z<Q.length?U[Q.charAt(Z)]:64;++Z;const re=Z<Q.length?U[Q.charAt(Z)]:64;if(++Z,null==Fe||null==Ot||null==In||null==re)throw Error();q.push(Fe<<2|Ot>>4),64!==In&&(q.push(Ot<<4&240|In>>2),64!==re&&q.push(In<<6&192|re))}return q},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Q=0;Q<this.ENCODED_VALS.length;Q++)this.byteToCharMap_[Q]=this.ENCODED_VALS.charAt(Q),this.charToByteMap_[this.byteToCharMap_[Q]]=Q,this.byteToCharMapWebSafe_[Q]=this.ENCODED_VALS_WEBSAFE.charAt(Q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Q]]=Q,Q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Q)]=Q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Q)]=Q)}}},Ie=function(Q){const $=ae(Q);return ce.encodeByteArray($,!0)},me=function(Q){return Ie(Q).replace(/\./g,"")},be=function(Q){try{return ce.decodeString(Q,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function z(Q){return H(void 0,Q)}function H(Q,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===Q&&(Q={});break;case Array:Q=[];break;default:return $}for(const U in $)!$.hasOwnProperty(U)||!ee(U)||(Q[U]=H(Q[U],$[U]));return Q}function ee(Q){return"__proto__"!==Q}class Ye{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,U)=>{this.resolve=$,this.reject=U})}wrapCallback($){return(U,q)=>{U?this.reject(U):this.resolve(q),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(U):$(U,q))}}}function Be(Q,$){if(Q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const q=$||"demo-project",Z=Q.iat||0,Fe=Q.sub||Q.user_id;if(!Fe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const rt=Object.assign({iss:`https://securetoken.google.com/${q}`,aud:q,iat:Z,exp:Z+3600,auth_time:Z,sub:Fe,user_id:Fe,firebase:{sign_in_provider:"custom",identities:{}}},Q);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(rt)),""].join(".")}function Xe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function yt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function Ee(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Le(){return"object"==typeof self&&self.self===self}function Oe(){const Q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Q&&void 0!==Q.id}function He(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ve(){return Xe().indexOf("Electron/")>=0}function ke(){const Q=Xe();return Q.indexOf("MSIE ")>=0||Q.indexOf("Trident/")>=0}function Pe(){return Xe().indexOf("MSAppHost/")>=0}function et(){return!0===l.NODE_CLIENT||!0===l.NODE_ADMIN}function ie(){return!Ee()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pe(){return"object"==typeof indexedDB}function Ce(){return new Promise((Q,$)=>{try{let U=!0;const q="validate-browser-context-for-indexeddb-analytics-module",Z=self.indexedDB.open(q);Z.onsuccess=()=>{Z.result.close(),U||self.indexedDB.deleteDatabase(q),Q(!0)},Z.onupgradeneeded=()=>{U=!1},Z.onerror=()=>{var Fe;$((null===(Fe=Z.error)||void 0===Fe?void 0:Fe.message)||"")}}catch(U){$(U)}})}function nt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class lt extends Error{constructor($,U,q){super(U),this.code=$,this.customData=q,this.name="FirebaseError",Object.setPrototypeOf(this,lt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,he.prototype.create)}}class he{constructor($,U,q){this.service=$,this.serviceName=U,this.errors=q}create($,...U){const q=U[0]||{},Z=`${this.service}/${$}`,Fe=this.errors[$],rt=Fe?function ve(Q,$){return Q.replace(Te,(U,q)=>{const Z=$[q];return null!=Z?String(Z):`<${q}?>`})}(Fe,q):"Error";return new lt(Z,`${this.serviceName}: ${rt} (${Z}).`,q)}}const Te=/\{\$([^}]+)}/g;function Ue(Q){return JSON.parse(Q)}function qe(Q){return JSON.stringify(Q)}const We=function(Q){let $={},U={},q={},Z="";try{const Fe=Q.split(".");$=Ue(be(Fe[0])||""),U=Ue(be(Fe[1])||""),Z=Fe[2],q=U.d||{},delete U.d}catch{}return{header:$,claims:U,data:q,signature:Z}},En=function(Q){const U=We(Q).claims;return!!U&&"object"==typeof U&&U.hasOwnProperty("iat")},Rt=function(Q){const $=We(Q).claims;return"object"==typeof $&&!0===$.admin};function At(Q,$){return Object.prototype.hasOwnProperty.call(Q,$)}function pt(Q,$){if(Object.prototype.hasOwnProperty.call(Q,$))return Q[$]}function ln(Q){for(const $ in Q)if(Object.prototype.hasOwnProperty.call(Q,$))return!1;return!0}function Jn(Q,$,U){const q={};for(const Z in Q)Object.prototype.hasOwnProperty.call(Q,Z)&&(q[Z]=$.call(U,Q[Z],Z,Q));return q}function On(Q,$){if(Q===$)return!0;const U=Object.keys(Q),q=Object.keys($);for(const Z of U){if(!q.includes(Z))return!1;const Fe=Q[Z],rt=$[Z];if(un(Fe)&&un(rt)){if(!On(Fe,rt))return!1}else if(Fe!==rt)return!1}for(const Z of q)if(!U.includes(Z))return!1;return!0}function un(Q){return null!==Q&&"object"==typeof Q}function yr(Q){const $=[];for(const[U,q]of Object.entries(Q))Array.isArray(q)?q.forEach(Z=>{$.push(encodeURIComponent(U)+"="+encodeURIComponent(Z))}):$.push(encodeURIComponent(U)+"="+encodeURIComponent(q));return $.length?"&"+$.join("&"):""}function Li(Q){const $={};return Q.replace(/^\?/,"").split("&").forEach(q=>{if(q){const[Z,Fe]=q.split("=");$[decodeURIComponent(Z)]=decodeURIComponent(Fe)}}),$}function zn(Q){const $=Q.indexOf("?");if(!$)return"";const U=Q.indexOf("#",$);return Q.substring($,U>0?U:void 0)}class se{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,U){U||(U=0);const q=this.W_;if("string"==typeof $)for(let re=0;re<16;re++)q[re]=$.charCodeAt(U)<<24|$.charCodeAt(U+1)<<16|$.charCodeAt(U+2)<<8|$.charCodeAt(U+3),U+=4;else for(let re=0;re<16;re++)q[re]=$[U]<<24|$[U+1]<<16|$[U+2]<<8|$[U+3],U+=4;for(let re=16;re<80;re++){const K=q[re-3]^q[re-8]^q[re-14]^q[re-16];q[re]=4294967295&(K<<1|K>>>31)}let In,Dr,Z=this.chain_[0],Fe=this.chain_[1],rt=this.chain_[2],Ot=this.chain_[3],Dn=this.chain_[4];for(let re=0;re<80;re++){re<40?re<20?(In=Ot^Fe&(rt^Ot),Dr=1518500249):(In=Fe^rt^Ot,Dr=1859775393):re<60?(In=Fe&rt|Ot&(Fe|rt),Dr=2400959708):(In=Fe^rt^Ot,Dr=3395469782);const K=(Z<<5|Z>>>27)+In+Dn+Dr+q[re]&4294967295;Dn=Ot,Ot=rt,rt=4294967295&(Fe<<30|Fe>>>2),Fe=Z,Z=K}this.chain_[0]=this.chain_[0]+Z&4294967295,this.chain_[1]=this.chain_[1]+Fe&4294967295,this.chain_[2]=this.chain_[2]+rt&4294967295,this.chain_[3]=this.chain_[3]+Ot&4294967295,this.chain_[4]=this.chain_[4]+Dn&4294967295}update($,U){if(null==$)return;void 0===U&&(U=$.length);const q=U-this.blockSize;let Z=0;const Fe=this.buf_;let rt=this.inbuf_;for(;Z<U;){if(0===rt)for(;Z<=q;)this.compress_($,Z),Z+=this.blockSize;if("string"==typeof $){for(;Z<U;)if(Fe[rt]=$.charCodeAt(Z),++rt,++Z,rt===this.blockSize){this.compress_(Fe),rt=0;break}}else for(;Z<U;)if(Fe[rt]=$[Z],++rt,++Z,rt===this.blockSize){this.compress_(Fe),rt=0;break}}this.inbuf_=rt,this.total_+=U}digest(){const $=[];let U=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Z=this.blockSize-1;Z>=56;Z--)this.buf_[Z]=255&U,U/=256;this.compress_(this.buf_);let q=0;for(let Z=0;Z<5;Z++)for(let Fe=24;Fe>=0;Fe-=8)$[q]=this.chain_[Z]>>Fe&255,++q;return $}}function ne(Q,$){const U=new de(Q,$);return U.subscribe.bind(U)}class de{constructor($,U){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=U,this.task.then(()=>{$(this)}).catch(q=>{this.error(q)})}next($){this.forEachObserver(U=>{U.next($)})}error($){this.forEachObserver(U=>{U.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,U,q){let Z;if(void 0===$&&void 0===U&&void 0===q)throw new Error("Missing Observer.");Z=function _e(Q,$){if("object"!=typeof Q||null===Q)return!1;for(const U of $)if(U in Q&&"function"==typeof Q[U])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:U,complete:q},void 0===Z.next&&(Z.next=it),void 0===Z.error&&(Z.error=it),void 0===Z.complete&&(Z.complete=it);const Fe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Z.error(this.finalError):Z.complete()}catch{}}),this.observers.push(Z),Fe}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let U=0;U<this.observers.length;U++)this.sendOne(U,$)}sendOne($,U){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{U(this.observers[$])}catch(q){typeof console<"u"&&console.error&&console.error(q)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function it(){}const cn=function(Q,$,U,q){let Z;if(q<$?Z="at least "+$:q>U&&(Z=0===U?"none":"no more than "+U),Z)throw new Error(Q+" failed: Was called with "+q+(1===q?" argument.":" arguments.")+" Expects "+Z+".")};function Ft(Q,$){return`${Q} failed: ${$} argument `}function vn(Q,$,U,q){if((!q||U)&&"function"!=typeof U)throw new Error(Ft(Q,$)+"must be a valid function.")}function Mt(Q,$,U,q){if((!q||U)&&("object"!=typeof U||null===U))throw new Error(Ft(Q,$)+"must be a valid context object.")}const wt=function(Q){const $=[];let U=0;for(let q=0;q<Q.length;q++){let Z=Q.charCodeAt(q);if(Z>=55296&&Z<=56319){const Fe=Z-55296;q++,G(q<Q.length,"Surrogate pair missing trail surrogate."),Z=65536+(Fe<<10)+(Q.charCodeAt(q)-56320)}Z<128?$[U++]=Z:Z<2048?($[U++]=Z>>6|192,$[U++]=63&Z|128):Z<65536?($[U++]=Z>>12|224,$[U++]=Z>>6&63|128,$[U++]=63&Z|128):($[U++]=Z>>18|240,$[U++]=Z>>12&63|128,$[U++]=Z>>6&63|128,$[U++]=63&Z|128)}return $},xt=function(Q){let $=0;for(let U=0;U<Q.length;U++){const q=Q.charCodeAt(U);q<128?$++:q<2048?$+=2:q>=55296&&q<=56319?($+=4,U++):$+=3}return $},bn=1e3,Vn=2,fn=144e5,Gn=.5;function fi(Q,$=bn,U=Vn){const q=$*Math.pow(U,Q),Z=Math.round(Gn*q*(Math.random()-.5)*2);return Math.min(fn,q+Z)}function tn(Q){return Q&&Q._delegate?Q._delegate:Q}},1888:(Et,Me,L)=>{var l=L(4650);let G=null;function x(){return G}class ue{}const ce=new l.OlP("DocumentToken");let Ie=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function me(){return(0,l.LFG)(z)}()},providedIn:"platform"}),n})();const be=new l.OlP("Location Initialized");let z=(()=>{class n extends Ie{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return x().getBaseHref(this._doc)}onPopState(t){const r=x().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=x().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){H()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){H()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ce))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function ee(){return new z((0,l.LFG)(ce))}()},providedIn:"platform"}),n})();function H(){return!!window.history.pushState}function Ye(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Be(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Xe(n){return n&&"?"!==n[0]?"?"+n:n}let yt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(Le)},providedIn:"root"}),n})();const Ee=new l.OlP("appBaseHref");let Le=(()=>{class n extends yt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,l.f3M)(ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ye(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Xe(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const c=this.prepareExternalUrl(i+Xe(s));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,s){const c=this.prepareExternalUrl(i+Xe(s));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ie),l.LFG(Ee,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Oe=(()=>{class n extends yt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ye(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let c=this.prepareExternalUrl(i+Xe(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,s){let c=this.prepareExternalUrl(i+Xe(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ie),l.LFG(Ee,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),He=(()=>{class n{constructor(t){this._subject=new l.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function et(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Be(Pe(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Xe(r))}normalize(t){return n.stripTrailingSlash(function ke(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Pe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xe(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xe(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Xe,n.joinWithSlash=Ye,n.stripTrailingSlash=Be,n.\u0275fac=function(t){return new(t||n)(l.LFG(yt))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Ve(){return new He((0,l.LFG)(yt))}()},providedIn:"root"}),n})();function Pe(n){return n.replace(/\/index.html$/,"")}var pe=(()=>((pe=pe||{})[pe.Decimal=0]="Decimal",pe[pe.Percent=1]="Percent",pe[pe.Currency=2]="Currency",pe[pe.Scientific=3]="Scientific",pe))(),nt=(()=>((nt=nt||{})[nt.Format=0]="Format",nt[nt.Standalone=1]="Standalone",nt))(),ze=(()=>((ze=ze||{})[ze.Narrow=0]="Narrow",ze[ze.Abbreviated=1]="Abbreviated",ze[ze.Wide=2]="Wide",ze[ze.Short=3]="Short",ze))(),kt=(()=>((kt=kt||{})[kt.Short=0]="Short",kt[kt.Medium=1]="Medium",kt[kt.Long=2]="Long",kt[kt.Full=3]="Full",kt))(),lt=(()=>((lt=lt||{})[lt.Decimal=0]="Decimal",lt[lt.Group=1]="Group",lt[lt.List=2]="List",lt[lt.PercentSign=3]="PercentSign",lt[lt.PlusSign=4]="PlusSign",lt[lt.MinusSign=5]="MinusSign",lt[lt.Exponential=6]="Exponential",lt[lt.SuperscriptingExponent=7]="SuperscriptingExponent",lt[lt.PerMille=8]="PerMille",lt[lt.Infinity=9]="Infinity",lt[lt.NaN=10]="NaN",lt[lt.TimeSeparator=11]="TimeSeparator",lt[lt.CurrencyDecimal=12]="CurrencyDecimal",lt[lt.CurrencyGroup=13]="CurrencyGroup",lt))();function Te(n,e,t){const r=(0,l.cg1)(n),s=de([r[l.wAp.DayPeriodsFormat],r[l.wAp.DayPeriodsStandalone]],e);return de(s,t)}function Ue(n,e,t){const r=(0,l.cg1)(n),s=de([r[l.wAp.DaysFormat],r[l.wAp.DaysStandalone]],e);return de(s,t)}function qe(n,e,t){const r=(0,l.cg1)(n),s=de([r[l.wAp.MonthsFormat],r[l.wAp.MonthsStandalone]],e);return de(s,t)}function En(n,e){return de((0,l.cg1)(n)[l.wAp.DateFormat],e)}function Rt(n,e){return de((0,l.cg1)(n)[l.wAp.TimeFormat],e)}function At(n,e){return de((0,l.cg1)(n)[l.wAp.DateTimeFormat],e)}function pt(n,e){const t=(0,l.cg1)(n),r=t[l.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===lt.CurrencyDecimal)return t[l.wAp.NumberSymbols][lt.Decimal];if(e===lt.CurrencyGroup)return t[l.wAp.NumberSymbols][lt.Group]}return r}function Li(n){if(!n[l.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[l.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function de(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Re(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Ft=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ut={},vn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Mt=(()=>((Mt=Mt||{})[Mt.Short=0]="Short",Mt[Mt.ShortGMT=1]="ShortGMT",Mt[Mt.Long=2]="Long",Mt[Mt.Extended=3]="Extended",Mt))(),wt=(()=>((wt=wt||{})[wt.FullYear=0]="FullYear",wt[wt.Month=1]="Month",wt[wt.Date=2]="Date",wt[wt.Hours=3]="Hours",wt[wt.Minutes=4]="Minutes",wt[wt.Seconds=5]="Seconds",wt[wt.FractionalSeconds=6]="FractionalSeconds",wt[wt.Day=7]="Day",wt))(),xt=(()=>((xt=xt||{})[xt.DayPeriods=0]="DayPeriods",xt[xt.Days=1]="Days",xt[xt.Months=2]="Months",xt[xt.Eras=3]="Eras",xt))();function Mn(n,e,t,r){let i=function W(n){if(je(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,s=1,c=1]=n.split("-").map(h=>+h);return bn(i,s-1,c)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Ft))return function Se(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-t,h=Number(n[5]||0)-r,p=Number(n[6]||0),_=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,c,h,p,_),e}(r)}const e=new Date(n);if(!je(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Vn(t,e)||e;let h,c=[];for(;e;){if(h=vn.exec(e),!h){c.push(e);break}{c=c.concat(h.slice(1));const w=c.pop();if(!w)break;e=w}}let p=i.getTimezoneOffset();r&&(p=Dr(r,p),i=function K(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function re(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(Dr(e,i)-i))}(i,r,!0));let _="";return c.forEach(w=>{const S=function In(n){if(Dn[n])return Dn[n];let e;switch(n){case"G":case"GG":case"GGG":e=tn(xt.Eras,ze.Abbreviated);break;case"GGGG":e=tn(xt.Eras,ze.Wide);break;case"GGGGG":e=tn(xt.Eras,ze.Narrow);break;case"y":e=zt(wt.FullYear,1,0,!1,!0);break;case"yy":e=zt(wt.FullYear,2,0,!0,!0);break;case"yyy":e=zt(wt.FullYear,3,0,!1,!0);break;case"yyyy":e=zt(wt.FullYear,4,0,!1,!0);break;case"Y":e=Ot(1);break;case"YY":e=Ot(2,!0);break;case"YYY":e=Ot(3);break;case"YYYY":e=Ot(4);break;case"M":case"L":e=zt(wt.Month,1,1);break;case"MM":case"LL":e=zt(wt.Month,2,1);break;case"MMM":e=tn(xt.Months,ze.Abbreviated);break;case"MMMM":e=tn(xt.Months,ze.Wide);break;case"MMMMM":e=tn(xt.Months,ze.Narrow);break;case"LLL":e=tn(xt.Months,ze.Abbreviated,nt.Standalone);break;case"LLLL":e=tn(xt.Months,ze.Wide,nt.Standalone);break;case"LLLLL":e=tn(xt.Months,ze.Narrow,nt.Standalone);break;case"w":e=rt(1);break;case"ww":e=rt(2);break;case"W":e=rt(1,!0);break;case"d":e=zt(wt.Date,1);break;case"dd":e=zt(wt.Date,2);break;case"c":case"cc":e=zt(wt.Day,1);break;case"ccc":e=tn(xt.Days,ze.Abbreviated,nt.Standalone);break;case"cccc":e=tn(xt.Days,ze.Wide,nt.Standalone);break;case"ccccc":e=tn(xt.Days,ze.Narrow,nt.Standalone);break;case"cccccc":e=tn(xt.Days,ze.Short,nt.Standalone);break;case"E":case"EE":case"EEE":e=tn(xt.Days,ze.Abbreviated);break;case"EEEE":e=tn(xt.Days,ze.Wide);break;case"EEEEE":e=tn(xt.Days,ze.Narrow);break;case"EEEEEE":e=tn(xt.Days,ze.Short);break;case"a":case"aa":case"aaa":e=tn(xt.DayPeriods,ze.Abbreviated);break;case"aaaa":e=tn(xt.DayPeriods,ze.Wide);break;case"aaaaa":e=tn(xt.DayPeriods,ze.Narrow);break;case"b":case"bb":case"bbb":e=tn(xt.DayPeriods,ze.Abbreviated,nt.Standalone,!0);break;case"bbbb":e=tn(xt.DayPeriods,ze.Wide,nt.Standalone,!0);break;case"bbbbb":e=tn(xt.DayPeriods,ze.Narrow,nt.Standalone,!0);break;case"B":case"BB":case"BBB":e=tn(xt.DayPeriods,ze.Abbreviated,nt.Format,!0);break;case"BBBB":e=tn(xt.DayPeriods,ze.Wide,nt.Format,!0);break;case"BBBBB":e=tn(xt.DayPeriods,ze.Narrow,nt.Format,!0);break;case"h":e=zt(wt.Hours,1,-12);break;case"hh":e=zt(wt.Hours,2,-12);break;case"H":e=zt(wt.Hours,1);break;case"HH":e=zt(wt.Hours,2);break;case"m":e=zt(wt.Minutes,1);break;case"mm":e=zt(wt.Minutes,2);break;case"s":e=zt(wt.Seconds,1);break;case"ss":e=zt(wt.Seconds,2);break;case"S":e=zt(wt.FractionalSeconds,1);break;case"SS":e=zt(wt.FractionalSeconds,2);break;case"SSS":e=zt(wt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=$(Mt.Short);break;case"ZZZZZ":e=$(Mt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=$(Mt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=$(Mt.Long);break;default:return null}return Dn[n]=e,e}(w);_+=S?S(i,t,p):"''"===w?"'":w.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),_}function bn(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Vn(n,e){const t=function ve(n){return(0,l.cg1)(n)[l.wAp.LocaleId]}(n);if(Ut[t]=Ut[t]||{},Ut[t][e])return Ut[t][e];let r="";switch(e){case"shortDate":r=En(n,kt.Short);break;case"mediumDate":r=En(n,kt.Medium);break;case"longDate":r=En(n,kt.Long);break;case"fullDate":r=En(n,kt.Full);break;case"shortTime":r=Rt(n,kt.Short);break;case"mediumTime":r=Rt(n,kt.Medium);break;case"longTime":r=Rt(n,kt.Long);break;case"fullTime":r=Rt(n,kt.Full);break;case"short":const i=Vn(n,"shortTime"),s=Vn(n,"shortDate");r=fn(At(n,kt.Short),[i,s]);break;case"medium":const c=Vn(n,"mediumTime"),h=Vn(n,"mediumDate");r=fn(At(n,kt.Medium),[c,h]);break;case"long":const p=Vn(n,"longTime"),_=Vn(n,"longDate");r=fn(At(n,kt.Long),[p,_]);break;case"full":const w=Vn(n,"fullTime"),S=Vn(n,"fullDate");r=fn(At(n,kt.Full),[w,S])}return r&&(Ut[t][e]=r),r}function fn(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Gn(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,s=t));let c=String(n);for(;c.length<e;)c="0"+c;return r&&(c=c.slice(c.length-e)),s+c}function zt(n,e,t=0,r=!1,i=!1){return function(s,c){let h=function pi(n,e){switch(n){case wt.FullYear:return e.getFullYear();case wt.Month:return e.getMonth();case wt.Date:return e.getDate();case wt.Hours:return e.getHours();case wt.Minutes:return e.getMinutes();case wt.Seconds:return e.getSeconds();case wt.FractionalSeconds:return e.getMilliseconds();case wt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||h>-t)&&(h+=t),n===wt.Hours)0===h&&-12===t&&(h=12);else if(n===wt.FractionalSeconds)return function fi(n,e){return Gn(n,3).substring(0,e)}(h,e);const p=pt(c,lt.MinusSign);return Gn(h,e,p,r,i)}}function tn(n,e,t=nt.Format,r=!1){return function(i,s){return function Q(n,e,t,r,i,s){switch(t){case xt.Months:return qe(e,i,r)[n.getMonth()];case xt.Days:return Ue(e,i,r)[n.getDay()];case xt.DayPeriods:const c=n.getHours(),h=n.getMinutes();if(s){const _=function zn(n){const e=(0,l.cg1)(n);return Li(e),(e[l.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Re(r):[Re(r[0]),Re(r[1])])}(e),w=function se(n,e,t){const r=(0,l.cg1)(n);Li(r);const s=de([r[l.wAp.ExtraData][0],r[l.wAp.ExtraData][1]],e)||[];return de(s,t)||[]}(e,i,r),S=_.findIndex(N=>{if(Array.isArray(N)){const[k,j]=N,te=c>=k.hours&&h>=k.minutes,oe=c<j.hours||c===j.hours&&h<j.minutes;if(k.hours<j.hours){if(te&&oe)return!0}else if(te||oe)return!0}else if(N.hours===c&&N.minutes===h)return!0;return!1});if(-1!==S)return w[S]}return Te(e,i,r)[c<12?0:1];case xt.Eras:return function We(n,e){return de((0,l.cg1)(n)[l.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,n,e,t,r)}}function $(n){return function(e,t,r){const i=-1*r,s=pt(t,lt.MinusSign),c=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Mt.Short:return(i>=0?"+":"")+Gn(c,2,s)+Gn(Math.abs(i%60),2,s);case Mt.ShortGMT:return"GMT"+(i>=0?"+":"")+Gn(c,1,s);case Mt.Long:return"GMT"+(i>=0?"+":"")+Gn(c,2,s)+":"+Gn(Math.abs(i%60),2,s);case Mt.Extended:return 0===r?"Z":(i>=0?"+":"")+Gn(c,2,s)+":"+Gn(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const U=0,q=4;function Fe(n){return bn(n.getFullYear(),n.getMonth(),n.getDate()+(q-n.getDay()))}function rt(n,e=!1){return function(t,r){let i;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,c=t.getDate();i=1+Math.floor((c+s)/7)}else{const s=Fe(t),c=function Z(n){const e=bn(n,U,1).getDay();return bn(n,0,1+(e<=q?q:q+7)-e)}(s.getFullYear()),h=s.getTime()-c.getTime();i=1+Math.round(h/6048e5)}return Gn(i,n,pt(r,lt.MinusSign))}}function Ot(n,e=!1){return function(t,r){return Gn(Fe(t).getFullYear(),n,pt(r,lt.MinusSign),e)}}const Dn={};function Dr(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function je(n){return n instanceof Date&&!isNaN(n.valueOf())}const Vt=/^(\d+)?\.((\d+)(-(\d+))?)?$/,qt=22,dn=".",An="0",nr=";",ni=",",an="#";function dr(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}class Fs{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let xn=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Fs(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===s?void 0:s);else if(null!==s){const h=r.get(s);r.move(h,c),Ls(h,i)}});for(let i=0,s=r.length;i<s;i++){const h=r.get(i).context;h.index=i,h.count=s,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Ls(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Ls(n,e){n.context.$implicit=e.item}let Qn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new sc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Kt("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Kt("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class sc{constructor(){this.$implicit=null,this.ngIf=null}}function Kt(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(e)}'.`)}let Wr=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:s,ngTemplateOutletInjector:c}=this;this._viewRef=r.createEmbeddedView(i,s,c?{injector:c}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[l.TTD]}),n})();let kf=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function Pf(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function ql(n,e,t){return function zl(n,e,t,r,i,s,c=!1){let h="",p=!1;if(isFinite(n)){let _=function rc(n){let r,i,s,c,h,e=Math.abs(n)+"",t=0;for((i=e.indexOf(dn))>-1&&(e=e.replace(dn,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===An;s++);if(s===(h=e.length))r=[0],i=1;else{for(h--;e.charAt(h)===An;)h--;for(i-=s,r=[],c=0;s<=h;s++,c++)r[c]=Number(e.charAt(s))}return i>qt&&(r=r.splice(0,qt-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);c&&(_=function Rd(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(_));let w=e.minInt,S=e.minFrac,N=e.maxFrac;if(s){const Ze=s.match(Vt);if(null===Ze)throw new Error(`${s} is not a valid digit info`);const st=Ze[1],Qe=Ze[3],ut=Ze[5];null!=st&&(w=dr(st)),null!=Qe&&(S=dr(Qe)),null!=ut?N=dr(ut):null!=Qe&&S>N&&(N=S)}!function _n(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const s=Math.min(Math.max(e,i),t);let c=s+n.integerLen,h=r[c];if(c>0){r.splice(Math.max(n.integerLen,c));for(let S=c;S<r.length;S++)r[S]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,c=s+1),r[0]=0;for(let S=1;S<c;S++)r[S]=0}if(h>=5)if(c-1<0){for(let S=0;S>c;S--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[c-1]++;for(;i<Math.max(0,s);i++)r.push(0);let p=0!==s;const _=e+n.integerLen,w=r.reduceRight(function(S,N,k,j){return j[k]=(N+=S)<10?N:N-10,p&&(0===j[k]&&k>=_?j.pop():p=!1),N>=10?1:0},0);w&&(r.unshift(w),n.integerLen++)}(_,S,N);let k=_.digits,j=_.integerLen;const te=_.exponent;let oe=[];for(p=k.every(Ze=>!Ze);j<w;j++)k.unshift(0);for(;j<0;j++)k.unshift(0);j>0?oe=k.splice(j,k.length):(oe=k,k=[0]);const Ke=[];for(k.length>=e.lgSize&&Ke.unshift(k.splice(-e.lgSize,k.length).join(""));k.length>e.gSize;)Ke.unshift(k.splice(-e.gSize,k.length).join(""));k.length&&Ke.unshift(k.join("")),h=Ke.join(pt(t,r)),oe.length&&(h+=pt(t,i)+oe.join("")),te&&(h+=pt(t,lt.Exponential)+"+"+te)}else h=pt(t,lt.Infinity);return h=n<0&&!p?e.negPre+h+e.negSuf:e.posPre+h+e.posSuf,h}(n,function Ba(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(nr),i=r[0],s=r[1],c=-1!==i.indexOf(dn)?i.split(dn):[i.substring(0,i.lastIndexOf(An)+1),i.substring(i.lastIndexOf(An)+1)],h=c[0],p=c[1]||"";t.posPre=h.substring(0,h.indexOf(an));for(let w=0;w<p.length;w++){const S=p.charAt(w);S===An?t.minFrac=t.maxFrac=w+1:S===an?t.maxFrac=w+1:t.posSuf+=S}const _=h.split(ni);if(t.gSize=_[1]?_[1].length:0,t.lgSize=_[2]||_[1]?(_[2]||_[1]).length:0,s){const w=i.length-t.posPre.length-t.posSuf.length,S=s.indexOf(an);t.negPre=s.substring(0,S).replace(/'/g,""),t.negSuf=s.slice(S+w).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function ln(n,e){return(0,l.cg1)(n)[l.wAp.NumberFormats][e]}(e,pe.Percent),pt(e,lt.MinusSign)),e,lt.Group,lt.Decimal,t,!0).replace(new RegExp("%","g"),pt(e,lt.PercentSign))}(function Is(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(s){throw function $t(n,e){return new l.vHH(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.soG,16))},n.\u0275pipe=l.Yjl({name:"percent",type:n,pure:!0,standalone:!0}),n})();let Yl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const Ui="browser",xd="server";function Pd(n){return n===xd}let Oo=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new Ha((0,l.LFG)(ce),window)}),n})();class Ha{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function $a(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const c=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Mo(this.window.history)||Mo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Mo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class xo extends ue{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Xa extends xo{static makeCurrent(){!function ae(n){G||(G=n)}(new Xa)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function $f(){return pa=pa||document.querySelector("base"),pa?pa.getAttribute("href"):null}();return null==t?null:function Cr(n){ho=ho||document.createElement("a"),ho.setAttribute("href",n);const e=ho.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){pa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ic(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let ho,pa=null;const Wf=new l.OlP("TRANSITION_ID"),yc=[{provide:l.ip1,useFactory:function Wd(n,e,t){return()=>{t.get(l.CZH).donePromise.then(()=>{const r=x(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Wf,ce,l.zs3],multi:!0}];let el=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const lu=new l.OlP("EventManagerPlugins");let qn=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const c=i[s];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(lu),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class qf{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=x().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let fo=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let s=i.get(t)??0;return s+=r,s>0?i.set(t,s):i.delete(t),s}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),ko=(()=>{class n extends fo{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(s=>s.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const s=this.styleRef.get(r);s?s.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ce))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const po={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Po=/%COMP%/g,go=new l.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Lo(n,e){return e.flat(100).map(t=>t.replace(Po,n))}function du(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Bo=(()=>{class n{constructor(t,r,i,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new ji(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof Uo?i.applyToHost(t):i instanceof hu&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const c=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestory;switch(r.encapsulation){case l.ifc.Emulated:s=new Uo(c,h,r,this.appId,p);break;case l.ifc.ShadowDom:return new bc(c,h,t,r);default:s=new hu(c,h,r,p)}s.onDestroy=()=>i.delete(r.id),i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(qn),l.LFG(ko),l.LFG(l.AFp),l.LFG(go))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class ji{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(po[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(nl(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(nl(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=po[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=po[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(l.JOm.DashCase|l.JOm.Important)?e.style.setProperty(t,r,i&l.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&l.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,du(r)):this.eventManager.addEventListener(e,t,du(r))}}function nl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class bc extends ji{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Lo(i.id,i.styles);for(const c of s){const h=document.createElement("style");h.textContent=c,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class hu extends ji{constructor(e,t,r,i,s=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=Lo(s,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Uo extends hu{constructor(e,t,r,i,s){const c=i+"-"+r.id;super(e,t,r,s,c),this.contentAttr=function Gs(n){return"_ngcontent-%COMP%".replace(Po,n)}(c),this.hostAttr=function Nm(n){return"_nghost-%COMP%".replace(Po,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Kf=(()=>{class n extends qf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ce))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const rl=["alt","control","meta","shift"],zd={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Hi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let wc=(()=>{class n extends qf{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),c=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>x().onAndCancel(t,s.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let c="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),c="code."),rl.forEach(_=>{const w=r.indexOf(_);w>-1&&(r.splice(w,1),c+=_+".")}),c+=s,0!=r.length||0===s.length)return null;const p={};return p.domEventName=i,p.fullKey=c,p}static matchEventFullKeyCode(t,r){let i=zd[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),rl.forEach(c=>{c!==i&&(0,Hi[c])(t)&&(s+=c+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ce))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const qd=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:Ui},{provide:l.g9A,useValue:function fu(){Xa.makeCurrent()},multi:!0},{provide:ce,useFactory:function Zf(){return(0,l.RDi)(document),document},deps:[]}]),Kd=new l.OlP(""),Dc=[{provide:l.rWj,useClass:class zf{addToWindow(e){l.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},l.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(r=>{const i=l.dqk.getAllAngularTestabilities();let s=i.length,c=!1;const h=function(p){c=c||p,s--,0==s&&r(c)};i.forEach(function(p){p.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?x().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:l.lri,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]}],ma=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function sl(){return new l.qLn},deps:[]},{provide:lu,useClass:Kf,multi:!0,deps:[ce,l.R0b,l.Lbi]},{provide:lu,useClass:wc,multi:!0,deps:[ce]},{provide:Bo,useClass:Bo,deps:[qn,ko,l.AFp,go]},{provide:l.FYo,useExisting:Bo},{provide:fo,useExisting:ko},{provide:ko,useClass:ko,deps:[ce]},{provide:qn,useClass:qn,deps:[lu,l.R0b]},{provide:class Xl{},useClass:el,deps:[]},[]];let al=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:l.AFp,useValue:t.appId},{provide:Wf,useExisting:l.AFp},yc]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Kd,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[...ma,...Dc],imports:[Yl,l.hGG]}),n})(),js=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ce))},n.\u0275prov=l.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Zd(){return new js((0,l.LFG)(ce))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Qt=L(8996),vr=L(3269);function _t(...n){const e=(0,vr.yG)(n);return(0,Qt.D)(n,e)}var Hn=L(7579);class ar extends Hn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const ya=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Kn=L(9751);const{isArray:nh}=Array,{getPrototypeOf:ep,prototype:Cc,keys:Sc}=Object;var T=L(4671),C=L(4004);const{isArray:O}=Array;function X(n){return(0,C.U)(e=>function V(n,e){return O(e)?n(...e):n(e)}(n,e))}var we=L(5403),ot=L(9672);function Nt(...n){const e=(0,vr.yG)(n),t=(0,vr.jO)(n),{args:r,keys:i}=function dl(n){if(1===n.length){const e=n[0];if(nh(e))return{args:e,keys:null};if(function mu(n){return n&&"object"==typeof n&&ep(n)===Cc}(e)){const t=Sc(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Qt.D)([],e);const s=new Kn.y(function Wt(n,e,t=T.y){return r=>{Gt(e,()=>{const{length:i}=n,s=new Array(i);let c=i,h=i;for(let p=0;p<i;p++)Gt(e,()=>{const _=(0,Qt.D)(n[p],e);let w=!1;_.subscribe((0,we.x)(r,S=>{s[p]=S,w||(w=!0,h--),h||r.next(t(s.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>function fe(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,c):T.y));return t?s.pipe(X(t)):s}function Gt(n,e,t){n?(0,ot.f)(t,n,e):e()}var It=L(8189);function Pr(...n){return function qr(){return(0,It.J)(1)}()((0,Qt.D)(n,(0,vr.yG)(n)))}var Kr=L(8421);function $o(n){return new Kn.y(e=>{(0,Kr.Xf)(n()).subscribe(e)})}var hl=L(9635),is=L(576);function $s(n,e){const t=(0,is.m)(n)?n:()=>n,r=i=>i.error(t());return new Kn.y(e?i=>e.schedule(r,0,i):r)}var yi=L(515),ss=L(727),Ln=L(4482);function va(){return(0,Ln.e)((n,e)=>{let t=null;n._refCount++;const r=(0,we.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class tp extends Kn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Ln.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ss.w0;const t=this.getSubject();e.add(this.source.subscribe((0,we.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ss.w0.EMPTY)}return e}refCount(){return va()(this)}}function hr(n,e){return(0,Ln.e)((t,r)=>{let i=null,s=0,c=!1;const h=()=>c&&!i&&r.complete();t.subscribe((0,we.x)(r,p=>{i?.unsubscribe();let _=0;const w=s++;(0,Kr.Xf)(n(p,w)).subscribe(i=(0,we.x)(r,S=>r.next(e?e(p,S,w,_++):S),()=>{i=null,h()}))},()=>{c=!0,h()}))})}function fr(n){return n<=0?()=>yi.E:(0,Ln.e)((e,t)=>{let r=0;e.subscribe((0,we.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function _u(...n){const e=(0,vr.yG)(n);return(0,Ln.e)((t,r)=>{(e?Pr(n,t,e):Pr(n,t)).subscribe(r)})}function Xn(n,e){return(0,Ln.e)((t,r)=>{let i=0;t.subscribe((0,we.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var oi=L(5577);function yu(n){return(0,Ln.e)((e,t)=>{let r=!1;e.subscribe((0,we.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function av(n=Kw){return(0,Ln.e)((e,t)=>{let r=!1;e.subscribe((0,we.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Kw(){return new ya}function Ws(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xn((i,s)=>n(i,s,r)):T.y,fr(1),t?yu(e):av(()=>new ya))}function vu(n,e){return(0,is.m)(e)?(0,oi.z)(n,e,1):(0,oi.z)(n,1)}var ai=L(8505);function fl(n){return(0,Ln.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,we.x)(t,void 0,void 0,c=>{s=(0,Kr.Xf)(n(c,fl(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function bu(n,e){return(0,Ln.e)(function Mm(n,e,t,r,i){return(s,c)=>{let h=t,p=e,_=0;s.subscribe((0,we.x)(c,w=>{const S=_++;p=h?n(p,w,S):(h=!0,w),r&&c.next(p)},i&&(()=>{h&&c.next(p),c.complete()})))}}(n,e,arguments.length>=2,!0))}function np(n){return n<=0?()=>yi.E:(0,Ln.e)((e,t)=>{let r=[];e.subscribe((0,we.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function rp(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xn((i,s)=>n(i,s,r)):T.y,np(1),t?yu(e):av(()=>new ya))}function Ac(n){return(0,Ln.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Zt="primary",Wi=Symbol("RouteTitle");class lv{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function wu(n){return new lv(n)}function op(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const c=r[s],h=n[s];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function zi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!km(n[i],e[i]))return!1;return!0}function km(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function ap(n){return Array.prototype.concat.apply([],n)}function Pm(n){return n.length>0?n[n.length-1]:null}function li(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Wo(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,Qt.D)(Promise.resolve(n)):_t(n)}const Zr=!1,up={exact:function b(n,e,t){if(!St(n.segments,e.segments)||!R(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!b(n.children[r],e.children[r],t))return!1;return!0},subset:y},cp={exact:function Si(n,e){return zi(n,e)},subset:function m(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>km(n[t],e[t]))},ignored:()=>!0};function rh(n,e,t){return up[t.paths](n.root,e.root,t.matrixParams)&&cp[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function y(n,e,t){return D(n,e,e.segments,t)}function D(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!St(i,t)||e.hasChildren()||!R(i,t,r))}if(n.segments.length===t.length){if(!St(n.segments,t)||!R(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!y(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(St(n.segments,i)&&R(n.segments,i,r)&&n.children[Zt])&&D(n.children[Zt],e,s,r)}}function R(n,e,t){return e.every((r,i)=>cp[t](n[i].parameters,r.parameters))}class F{constructor(e=new Y([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wu(this.queryParams)),this._queryParamMap}toString(){return ba.serialize(this)}}class Y{constructor(e,t){this.segments=e,this.children=t,this.parent=null,li(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zs(this)}}class xe{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=wu(this.parameters)),this._parameterMap}toString(){return Rc(this)}}function St(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let kn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return new qi},providedIn:"root"}),n})();class qi{parse(e){const t=new Zw(e);return new F(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Eu(e.root,!0)}`,r=function dp(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${pl(t)}=${pl(i)}`).join("&"):`${pl(t)}=${pl(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function sh(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ba=new qi;function zs(n){return n.segments.map(e=>Rc(e)).join("/")}function Eu(n,e){if(!n.hasChildren())return zs(n);if(e){const t=n.children[Zt]?Eu(n.children[Zt],!1):"",r=[];return li(n.children,(i,s)=>{s!==Zt&&r.push(`${s}:${Eu(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function rn(n,e){let t=[];return li(n.children,(r,i)=>{i===Zt&&(t=t.concat(e(r,i)))}),li(n.children,(r,i)=>{i!==Zt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Zt?[Eu(n.children[Zt],!1)]:[`${i}:${Eu(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Zt]?`${zs(n)}/${t[0]}`:`${zs(n)}/(${t.join("//")})`}}function ih(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pl(n){return ih(n).replace(/%3B/gi,";")}function Du(n){return ih(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function yo(n){return decodeURIComponent(n)}function Nc(n){return yo(n.replace(/\+/g,"%20"))}function Rc(n){return`${Du(n.path)}${function Fm(n){return Object.keys(n).map(e=>`;${Du(e)}=${Du(n[e])}`).join("")}(n.parameters)}`}const hp=/^[^\/()?;=#]+/;function oh(n){const e=n.match(hp);return e?e[0]:""}const ES=/^[^=?&#]+/,IS=/^[^&#]+/;class Zw{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Y([],{}):new Y([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Zt]=new Y(e,t)),r}parseSegment(){const e=oh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new l.vHH(4009,Zr);return this.capture(e),new xe(yo(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=oh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=oh(this.remaining);i&&(r=i,this.capture(r))}e[yo(t)]=yo(r)}parseQueryParam(e){const t=function DS(n){const e=n.match(ES);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function TS(n){const e=n.match(IS);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Nc(t),s=Nc(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=oh(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new l.vHH(4010,Zr);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Zt);const c=this.parseChildren();t[s]=1===Object.keys(c).length?c[Zt]:new Y([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new l.vHH(4011,Zr)}}function fp(n){return n.segments.length>0?new Y([],{[Zt]:n}):n}function pp(n){const e={};for(const r of Object.keys(n.children)){const s=pp(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function uv(n){if(1===n.numberOfChildren&&n.children[Zt]){const e=n.children[Zt];return new Y(n.segments.concat(e.segments),e.children)}return n}(new Y(n.segments,e))}function Oc(n){return n instanceof F}const cv=!1;function Yw(n,e,t,r,i){if(0===t.length)return mp(e.root,e.root,e.root,r,i);const s=function hv(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Jw(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return li(s.outlets,(p,_)=>{h[_]="string"==typeof p?p.split("/"):p}),[...i,{outlets:h}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===c?(s.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,s]},[]);return new Jw(t,e,r)}(t);return s.toRoot()?mp(e.root,e.root,new Y([],{}),r,i):function c(p){const _=function fv(n,e,t,r){if(n.isAbsolute)return new Mc(e.root,!0,0);if(-1===r)return new Mc(t,t===e.root,0);return function pv(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new l.vHH(4005,cv&&"Invalid number of '../'");i=r.segments.length}return new Mc(r,!1,i-s)}(t,r+(ah(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,p),w=_.processChildren?xc(_.segmentGroup,_.index,s.commands):lh(_.segmentGroup,_.index,s.commands);return mp(e.root,_.segmentGroup,w,r,i)}(n.snapshot?._lastPathIndex)}function ah(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function gp(n){return"object"==typeof n&&null!=n&&n.outlets}function mp(n,e,t,r,i){let c,s={};r&&li(r,(p,_)=>{s[_]=Array.isArray(p)?p.map(w=>`${w}`):`${p}`}),c=n===e?t:_p(n,e,t);const h=fp(pp(c));return new F(h,s,i)}function _p(n,e,t){const r={};return li(n.children,(i,s)=>{r[s]=i===e?t:_p(i,e,t)}),new Y(n.segments,r)}class Jw{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ah(r[0]))throw new l.vHH(4003,cv&&"Root segment cannot have matrix parameters");const i=r.find(gp);if(i&&i!==Pm(r))throw new l.vHH(4004,cv&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Mc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function lh(n,e,t){if(n||(n=new Y([],{})),0===n.segments.length&&n.hasChildren())return xc(n,e,t);const r=function gv(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const c=n.segments[i],h=t[r];if(gp(h))break;const p=`${h}`,_=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&_&&"object"==typeof _&&void 0===_.outlets){if(!Xw(p,_,c))return s;r+=2}else{if(!Xw(p,{},c))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Y(n.segments.slice(0,r.pathIndex),{});return s.children[Zt]=new Y(n.segments.slice(r.pathIndex),n.children),xc(s,0,i)}return r.match&&0===i.length?new Y(n.segments,{}):r.match&&!n.hasChildren()?yp(n,e,t):r.match?xc(n,0,i):yp(n,e,t)}function xc(n,e,t){if(0===t.length)return new Y(n.segments,{});{const r=function Lm(n){return gp(n[0])?n[0].outlets:{[Zt]:n}}(t),i={};if(!r[Zt]&&n.children[Zt]&&1===n.numberOfChildren&&0===n.children[Zt].segments.length){const s=xc(n.children[Zt],e,t);return new Y(n.segments,s.children)}return li(r,(s,c)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[c]=lh(n.children[c],e,s))}),li(n.children,(s,c)=>{void 0===r[c]&&(i[c]=s)}),new Y(n.segments,i)}}function yp(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(gp(s)){const p=mv(s.outlets);return new Y(r,p)}if(0===i&&ah(t[0])){r.push(new xe(n.segments[e].path,uh(t[0]))),i++;continue}const c=gp(s)?s.outlets[Zt]:`${s}`,h=i<t.length-1?t[i+1]:null;c&&h&&ah(h)?(r.push(new xe(c,uh(h))),i+=2):(r.push(new xe(c,{})),i++)}return new Y(r,{})}function mv(n){const e={};return li(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=yp(new Y([],{}),0,t))}),e}function uh(n){const e={};return li(n,(t,r)=>e[r]=`${t}`),e}function Xw(n,e,t){return n==t.path&&zi(e,t.parameters)}const ch="imperative";class wa{constructor(e,t){this.id=e,this.url=t}}class _v extends wa{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class kc extends wa{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class vp extends wa{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bp extends wa{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class dh extends wa{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class yv extends wa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hh extends wa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class SS extends wa{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class AS extends wa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class QM extends wa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class NS{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class vv{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class RS{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eE{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bm{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bv{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wv{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let rE=(()=>{class n{createUrlTree(t,r,i,s,c,h){return Yw(t||r.root,i,s,c,h)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),MS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(e){return rE.\u0275fac(e)},providedIn:"root"}),n})();class iE{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Ev(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Ev(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Dv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Dv(e,this._root).map(t=>t.value)}}function Ev(n,e){if(n===e.value)return e;for(const t of e.children){const r=Ev(n,t);if(r)return r}return null}function Dv(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Dv(n,t);if(r.length)return r.unshift(e),r}return[]}class Ki{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ea(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class sE extends iE{constructor(e,t){super(e),this.snapshot=t,Iv(this,e)}toString(){return this.snapshot.toString()}}function xS(n,e){const t=function XM(n,e){const c=new Ep([],{},{},"",{},Zt,e,null,n.root,-1,{});return new oE("",new Ki(c,[]))}(n,e),r=new ar([new xe("",{})]),i=new ar({}),s=new ar({}),c=new ar({}),h=new ar(""),p=new wp(r,i,c,h,s,Zt,e,t.root);return p.snapshot=t.root,new sE(new Ki(p,[]),t)}class wp{constructor(e,t,r,i,s,c,h,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=c,this.component=h,this.title=this.data?.pipe((0,C.U)(_=>_[Wi]))??_t(void 0),this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,C.U)(e=>wu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,C.U)(e=>wu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function kS(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function ex(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ep{get title(){return this.data?.[Wi]}constructor(e,t,r,i,s,c,h,p,_,w,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=c,this.component=h,this.routeConfig=p,this._urlSegment=_,this._lastPathIndex=w,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=wu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class oE extends iE{constructor(e,t){super(t),this.url=e,Iv(this,t)}toString(){return aE(this._root)}}function Iv(n,e){e.value._routerState=n,e.children.forEach(t=>Iv(n,t))}function aE(n){const e=n.children.length>0?` { ${n.children.map(aE).join(", ")} } `:"";return`${n.value}${e}`}function Tv(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,zi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),zi(e.params,t.params)||n.params.next(t.params),function xm(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!zi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),zi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Dp(n,e){const t=zi(n.params,e.params)&&function mt(n,e){return St(n,e)&&n.every((t,r)=>zi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Dp(n.parent,e.parent))}function ml(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function lE(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ml(n,r,i);return ml(n,r)})}(n,e,t);return new Ki(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>ml(n,h)),c}}const r=function uE(n){return new wp(new ar(n.url),new ar(n.params),new ar(n.queryParams),new ar(n.fragment),new ar(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>ml(n,s));return new Ki(r,i)}}const Um="ngNavigationCancelingError";function PS(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Oc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=FS(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function FS(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Um]=!0,r.cancellationCode=e,t&&(r.url=t),r}function LS(n){return Vm(n)&&Oc(n.url)}function Vm(n){return n&&n[Um]}class Cv{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Gm,this.attachRef=null}}let Gm=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Cv,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Sv=!1;let jm=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Zt,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.parentContexts=(0,l.f3M)(Gm),this.location=(0,l.f3M)(l.s_b),this.changeDetector=(0,l.f3M)(l.sBO),this.environmentInjector=(0,l.f3M)(l.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new l.vHH(4012,Sv);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new l.vHH(4012,Sv);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new l.vHH(4012,Sv);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new l.vHH(4013,Sv);this._activatedRoute=t;const i=this.location,c=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,p=new BS(t,h,i.injector);if(r&&function US(n){return!!n.resolveComponentFactory}(r)){const _=r.resolveComponentFactory(c);this.activated=i.createComponent(_,i.length,p)}else this.activated=i.createComponent(c,{index:i.length,injector:p,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[l.TTD]}),n})();class BS{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===wp?this.route:e===Gm?this.childContexts:this.parent.get(e,t)}}let Av=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[l.jDz],decls:1,vars:0,template:function(t,r){1&t&&l._UZ(0,"router-outlet")},dependencies:[jm],encapsulation:2}),n})();function cE(n,e){return n.providers&&!n._injector&&(n._injector=(0,l.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Ip(n){const e=n.children&&n.children.map(Ip),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Zt&&(t.component=Av),t}function qs(n){return n.outlet||Zt}function hE(n,e){const t=n.filter(r=>qs(r)===e);return t.push(...n.filter(r=>qs(r)!==e)),t}function Tp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class $S{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Tv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ea(t);e.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,i[c],r),delete i[c]}),li(i,(s,c)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ea(e);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ea(e);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ea(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new bv(s.value.snapshot))}),e.children.length&&this.forwardEvent(new eE(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(Tv(i),i===s)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),Tv(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=Tp(i.snapshot),p=h?.get(l._Vd)??null;c.attachRef=null,c.route=i,c.resolver=p,c.injector=h,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Ov{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Mv{constructor(e,t){this.component=e,this.route=t}}function nx(n,e,t){const r=n._root;return fh(r,e?e._root:null,t,[r.value])}function Tu(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,l.Z0I)(n)?e.get(n):n:r}function fh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ea(e);return n.children.forEach(c=>{(function fE(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const p=function pE(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!St(n.url,e.url);case"pathParamsOrQueryParamsChange":return!St(n.url,e.url)||!zi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Dp(n,e)||!zi(n.queryParams,e.queryParams);default:return!Dp(n,e)}}(c,s,s.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new Ov(r)):(s.data=c.data,s._resolvedData=c._resolvedData),fh(n,e,s.component?h?h.children:null:t,r,i),p&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Mv(h.outlet.component,c))}else c&&Hm(e,h,i),i.canActivateChecks.push(new Ov(r)),fh(n,null,s.component?h?h.children:null:t,r,i)})(c,s[c.value.outlet],t,r.concat([c.value]),i),delete s[c.value.outlet]}),li(s,(c,h)=>Hm(c,t.getContext(h),i)),i}function Hm(n,e,t){const r=Ea(n),i=n.value;li(r,(s,c)=>{Hm(s,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Mv(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Sp(n){return"function"==typeof n}function $m(n){return n instanceof ya||"EmptyError"===n?.name}const Da=Symbol("INITIAL_VALUE");function ph(){return hr(n=>Nt(n.map(e=>e.pipe(fr(1),_u(Da)))).pipe((0,C.U)(e=>{for(const t of e)if(!0!==t){if(t===Da)return Da;if(!1===t||t instanceof F)return t}return!0}),Xn(e=>e!==Da),fr(1)))}function bE(n){return(0,hl.z)((0,ai.b)(e=>{if(Oc(e))throw PS(0,e)}),(0,C.U)(e=>!0===e))}const Cu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function EE(n,e,t,r,i){const s=Bv(n,e,t);return s.matched?function wE(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?_t(i.map(c=>{const h=Tu(c,n);return Wo(function WS(n){return n&&Sp(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(ph(),bE()):_t(!0)}(r=cE(e,r),e,t).pipe((0,C.U)(c=>!0===c?s:{...Cu})):_t(s)}function Bv(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Cu}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||op)(t,n,e);if(!i)return{...Cu};const s={};li(i.posParams,(h,p)=>{s[p]=h.path});const c=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function qm(n,e,t,r){if(t.length>0&&function DE(n,e,t){return t.some(r=>Ap(n,e,r)&&qs(r)!==Zt)}(n,t,r)){const s=new Y(e,function KS(n,e,t,r){const i={};i[Zt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&qs(s)!==Zt){const c=new Y([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[qs(s)]=c}return i}(n,e,r,new Y(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function ZS(n,e,t){return t.some(r=>Ap(n,e,r))}(n,t,r)){const s=new Y(n.segments,function Uv(n,e,t,r,i){const s={};for(const c of r)if(Ap(n,t,c)&&!i[qs(c)]){const h=new Y([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,s[qs(c)]=h}return{...i,...s}}(n,e,t,r,n.children));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const i=new Y(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function Ap(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function YS(n,e,t,r){return!!(qs(n)===r||r!==Zt&&Ap(e,t,n))&&("**"===n.path||Bv(e,n,t).matched)}function IE(n,e,t){return 0===e.length&&!n.children[t]}const Su=!1;class Km{constructor(e){this.segmentGroup=e||null}}class Fc{constructor(e){this.urlTree=e}}function _l(n){return $s(new Km(n))}function TE(n){return $s(new Fc(n))}class XS{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=qm(this.urlTree.root,[],[],this.config).segmentGroup,t=new Y(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Zt).pipe((0,C.U)(s=>this.createUrlTree(pp(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(fl(s=>{if(s instanceof Fc)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Km?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Zt).pipe((0,C.U)(i=>this.createUrlTree(pp(i),e.queryParams,e.fragment))).pipe(fl(i=>{throw i instanceof Km?this.noMatchError(i):i}))}noMatchError(e){return new l.vHH(4002,Su)}createUrlTree(e,t,r){const i=fp(e);return new F(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,C.U)(s=>new Y([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,Qt.D)(i).pipe(vu(s=>{const c=r.children[s],h=hE(t,s);return this.expandSegmentGroup(e,h,c,s).pipe((0,C.U)(p=>({segment:p,outlet:s})))}),bu((s,c)=>(s[c.outlet]=c.segment,s),{}),rp())}expandSegment(e,t,r,i,s,c){return(0,Qt.D)(r).pipe(vu(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,s,c).pipe(fl(_=>{if(_ instanceof Km)return _t(null);throw _}))),Ws(h=>!!h),fl((h,p)=>{if($m(h))return IE(t,i,s)?_t(new Y([],{})):_l(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,s,c,h){return YS(i,t,s,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c):_l(t):_l(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?TE(s):this.lineralizeSegments(r,s).pipe((0,oi.z)(c=>{const h=new Y(c,{});return this.expandSegment(e,h,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c){const{matched:h,consumedSegments:p,remainingSegments:_,positionalParamSegments:w}=Bv(t,i,s);if(!h)return _l(t);const S=this.applyRedirectCommands(p,i.redirectTo,w);return i.redirectTo.startsWith("/")?TE(S):this.lineralizeSegments(i,S).pipe((0,oi.z)(N=>this.expandSegment(e,t,r,N.concat(_),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=cE(r,e),r.loadChildren?(r._loadedRoutes?_t({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,C.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new Y(i,{})))):_t(new Y(i,{}))):EE(t,r,i,e).pipe(hr(({matched:c,consumedSegments:h,remainingSegments:p})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,oi.z)(w=>{const S=w.injector??e,N=w.routes,{segmentGroup:k,slicedSegments:j}=qm(t,h,p,N),te=new Y(k.segments,k.children);if(0===j.length&&te.hasChildren())return this.expandChildren(S,N,te).pipe((0,C.U)(st=>new Y(h,st)));if(0===N.length&&0===j.length)return _t(new Y(h,{}));const oe=qs(r)===s;return this.expandSegment(S,te,N,j,oe?Zt:s,!0).pipe((0,C.U)(Ze=>new Y(h.concat(Ze.segments),Ze.children)))})):_l(t)))}getChildConfig(e,t,r){return t.children?_t({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?_t({routes:t._loadedRoutes,injector:t._loadedInjector}):function qS(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?_t(!0):_t(i.map(c=>{const h=Tu(c,n);return Wo(function mE(n){return n&&Sp(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(ph(),bE())}(e,t,r).pipe((0,oi.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,ai.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function JS(n){return $s(FS(Su,3))}())):_t({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return _t(r);if(i.numberOfChildren>1||!i.children[Zt])return e.redirectTo,$s(new l.vHH(4e3,Su));i=i.children[Zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new F(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return li(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[s]=t[h]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let c={};return li(t.children,(h,p)=>{c[p]=this.createSegmentGroup(e,h,r,i)}),new Y(s,c)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new l.vHH(4001,Su);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class Gv{}class Hv{constructor(e,t,r,i,s,c,h){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=c,this.urlSerializer=h}recognize(){const e=qm(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Zt).pipe((0,C.U)(t=>{if(null===t)return null;const r=new Ep([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Zt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ki(r,t),s=new oE(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=kS(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Qt.D)(Object.keys(r.children)).pipe(vu(i=>{const s=r.children[i],c=hE(t,i);return this.processSegmentGroup(e,c,s,i)}),bu((i,s)=>i&&s?(i.push(...s),i):null),function ip(n,e=!1){return(0,Ln.e)((t,r)=>{let i=0;t.subscribe((0,we.x)(r,s=>{const c=n(s,i++);(c||e)&&r.next(s),!c&&r.complete()}))})}(i=>null!==i),yu(null),rp(),(0,C.U)(i=>{if(null===i)return null;const s=AE(i);return function Np(n){n.sort((e,t)=>e.value.outlet===Zt?-1:t.value.outlet===Zt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return(0,Qt.D)(t).pipe(vu(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,s)),Ws(c=>!!c),fl(c=>{if($m(c))return IE(r,i,s)?_t([]):_t(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!YS(t,r,i,s))return _t(null);let c;if("**"===t.path){const h=i.length>0?Pm(i).parameters:{},p=RE(r)+i.length;c=_t({snapshot:new Ep(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Lc(t),qs(t),t.component??t._loadedComponent??null,t,NE(r),p,Ia(t)),consumedSegments:[],remainingSegments:[]})}else c=EE(r,t,i,e).pipe((0,C.U)(({matched:h,consumedSegments:p,remainingSegments:_,parameters:w})=>{if(!h)return null;const S=RE(r)+p.length;return{snapshot:new Ep(p,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Lc(t),qs(t),t.component??t._loadedComponent??null,t,NE(r),S,Ia(t)),consumedSegments:p,remainingSegments:_}}));return c.pipe(hr(h=>{if(null===h)return _t(null);const{snapshot:p,consumedSegments:_,remainingSegments:w}=h;e=t._injector??e;const S=t._loadedInjector??e,N=function t1(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:k,slicedSegments:j}=qm(r,_,w,N.filter(oe=>void 0===oe.redirectTo));if(0===j.length&&k.hasChildren())return this.processChildren(S,N,k).pipe((0,C.U)(oe=>null===oe?null:[new Ki(p,oe)]));if(0===N.length&&0===j.length)return _t([new Ki(p,[])]);const te=qs(t)===s;return this.processSegment(S,N,k,j,te?Zt:s).pipe((0,C.U)(oe=>null===oe?null:[new Ki(p,oe)]))}))}}function n1(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function AE(n){const e=[],t=new Set;for(const r of n){if(!n1(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=AE(r.children);e.push(new Ki(r.value,i))}return e.filter(r=>!t.has(r))}function NE(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function RE(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Lc(n){return n.data||{}}function Ia(n){return n.resolve||{}}function s1(n,e){return(0,oi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return _t(t);let s=0;return(0,Qt.D)(i).pipe(vu(c=>function sx(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!$v(i)&&(s[Wi]=i.title),function ox(n,e,t,r){const i=function OE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return _t({});const s={};return(0,Qt.D)(i).pipe((0,oi.z)(c=>function ax(n,e,t,r){const i=Tp(e)??r,s=Tu(n,i);return Wo(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[c],e,t,r).pipe(Ws(),(0,ai.b)(h=>{s[c]=h}))),np(1),function sp(n){return(0,C.U)(()=>n)}(s),fl(c=>$m(c)?yi.E:$s(c)))}(s,n,e,r).pipe((0,C.U)(c=>(n._resolvedData=c,n.data=kS(n,t).resolve,i&&$v(i)&&(n.data[Wi]=i.title),null)))}(c.route,r,n,e)),(0,ai.b)(()=>s++),np(1),(0,oi.z)(c=>s===i.length?_t(t):yi.E))})}function $v(n){return"string"==typeof n.title||null===n.title}function Zm(n){return hr(e=>{const t=n(e);return t?(0,Qt.D)(t).pipe((0,C.U)(()=>e)):_t(e)})}const Bc=new l.OlP("ROUTES");let Wv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,l.f3M)(l.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return _t(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Wo(t.loadComponent()).pipe((0,C.U)(vo),(0,ai.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Ac(()=>{this.componentLoaders.delete(t)})),i=new tp(r,()=>new Hn.x).pipe(va());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return _t({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,C.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let p,_,w=!1;Array.isArray(h)?_=h:(p=h.create(t).injector,_=ap(p.get(Bc,[],l.XFs.Self|l.XFs.Optional)));return{routes:_.map(Ip),injector:p}}),Ac(()=>{this.childrenLoaders.delete(r)})),c=new tp(s,()=>new Hn.x).pipe(va());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return Wo(t()).pipe((0,C.U)(vo),(0,oi.z)(r=>r instanceof l.YKP||Array.isArray(r)?_t(r):(0,Qt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vo(n){return function o1(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Rp=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Hn.x,this.configLoader=(0,l.f3M)(Wv),this.environmentInjector=(0,l.f3M)(l.lqb),this.urlSerializer=(0,l.f3M)(kn),this.rootContexts=(0,l.f3M)(Gm),this.navigationId=0,this.afterPreactivation=()=>_t(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new vv(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new NS(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new ar({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ch,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Xn(r=>0!==r.id),(0,C.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),hr(r=>{let i=!1,s=!1;return _t(r).pipe((0,ai.b)(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),hr(c=>{const h=t.browserUrlTree.toString(),p=!t.navigated||c.extractedUrl.toString()!==h||h!==t.currentUrlTree.toString();if(!p&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const w="";return this.events.next(new bp(c.id,t.serializeUrl(r.rawUrl),w,0)),t.rawUrlTree=c.rawUrl,c.resolve(null),yi.E}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return xE(c.source)&&(t.browserUrlTree=c.extractedUrl),_t(c).pipe(hr(w=>{const S=this.transitions?.getValue();return this.events.next(new _v(w.id,this.urlSerializer.serialize(w.extractedUrl),w.source,w.restoredState)),S!==this.transitions?.getValue()?yi.E:Promise.resolve(w)}),function SE(n,e,t,r){return hr(i=>function QS(n,e,t,r,i){return new XS(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,C.U)(s=>({...i,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,ai.b)(w=>{this.currentNavigation={...this.currentNavigation,finalUrl:w.urlAfterRedirects},r.urlAfterRedirects=w.urlAfterRedirects}),function i1(n,e,t,r,i){return(0,oi.z)(s=>function e1(n,e,t,r,i,s,c="emptyOnly"){return new Hv(n,e,t,r,i,c,s).recognize().pipe(hr(h=>null===h?function jv(n){return new Kn.y(e=>e.error(n))}(new Gv):_t(h)))}(n,e,t,s.urlAfterRedirects,r.serialize(s.urlAfterRedirects),r,i).pipe((0,C.U)(c=>({...s,targetSnapshot:c}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,ai.b)(w=>{if(r.targetSnapshot=w.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!w.extras.skipLocationChange){const N=t.urlHandlingStrategy.merge(w.urlAfterRedirects,w.rawUrl);t.setBrowserUrl(N,w)}t.browserUrlTree=w.urlAfterRedirects}const S=new yv(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(S)}));if(p&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:w,extractedUrl:S,source:N,restoredState:k,extras:j}=c,te=new _v(w,this.urlSerializer.serialize(S),N,k);this.events.next(te);const oe=xS(S,this.rootComponentType).snapshot;return _t(r={...c,targetSnapshot:oe,urlAfterRedirects:S,extras:{...j,skipLocationChange:!1,replaceUrl:!1}})}{const w="";return this.events.next(new bp(c.id,t.serializeUrl(r.extractedUrl),w,1)),t.rawUrlTree=c.rawUrl,c.resolve(null),yi.E}}),(0,ai.b)(c=>{const h=new hh(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),(0,C.U)(c=>r={...c,guards:nx(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function Pv(n,e){return(0,oi.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:c}}=t;return 0===c.length&&0===s.length?_t({...t,guardsResult:!0}):function Wm(n,e,t,r){return(0,Qt.D)(n).pipe((0,oi.z)(i=>function Lv(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?_t(s.map(h=>{const p=Tp(e)??i,_=Tu(h,p);return Wo(function kv(n){return n&&Sp(n.canDeactivate)}(_)?_.canDeactivate(n,e,t,r):p.runInContext(()=>_(n,e,t,r))).pipe(Ws())})).pipe(ph()):_t(!0)}(i.component,i.route,t,e,r)),Ws(i=>!0!==i,!0))}(c,r,i,n).pipe((0,oi.z)(h=>h&&function gE(n){return"boolean"==typeof n}(h)?function zS(n,e,t,r){return(0,Qt.D)(e).pipe(vu(i=>Pr(function zm(n,e){return null!==n&&e&&e(new RS(n)),_t(!0)}(i.route.parent,r),function Fv(n,e){return null!==n&&e&&e(new Bm(n)),_t(!0)}(i.route,r),function vE(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(c=>function Cp(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>$o(()=>_t(c.guards.map(p=>{const _=Tp(c.node)??t,w=Tu(p,_);return Wo(function rx(n){return n&&Sp(n.canActivateChild)}(w)?w.canActivateChild(r,n):_.runInContext(()=>w(r,n))).pipe(Ws())})).pipe(ph())));return _t(s).pipe(ph())}(n,i.path,t),function Pc(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return _t(!0);const i=r.map(s=>$o(()=>{const c=Tp(e)??t,h=Tu(s,c);return Wo(function xv(n){return n&&Sp(n.canActivate)}(h)?h.canActivate(e,n):c.runInContext(()=>h(e,n))).pipe(Ws())}));return _t(i).pipe(ph())}(n,i.route,t))),Ws(i=>!0!==i,!0))}(r,s,n,e):_t(h)),(0,C.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,c=>this.events.next(c)),(0,ai.b)(c=>{if(r.guardsResult=c.guardsResult,Oc(c.guardsResult))throw PS(0,c.guardsResult);const h=new SS(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(h)}),Xn(c=>!!c.guardsResult||(t.restoreHistory(c),this.cancelNavigationTransition(c,"",3),!1)),Zm(c=>{if(c.guards.canActivateChecks.length)return _t(c).pipe((0,ai.b)(h=>{const p=new AS(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),hr(h=>{let p=!1;return _t(h).pipe(s1(t.paramsInheritanceStrategy,this.environmentInjector),(0,ai.b)({next:()=>p=!0,complete:()=>{p||(t.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),(0,ai.b)(h=>{const p=new QM(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),Zm(c=>{const h=p=>{const _=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&_.push(this.configLoader.loadComponent(p.routeConfig).pipe((0,ai.b)(w=>{p.component=w}),(0,C.U)(()=>{})));for(const w of p.children)_.push(...h(w));return _};return Nt(h(c.targetSnapshot.root)).pipe(yu(),fr(1))}),Zm(()=>this.afterPreactivation()),(0,C.U)(c=>{const h=function gl(n,e,t){const r=ml(n,e._root,t?t._root:void 0);return new sE(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return r={...c,targetRouterState:h}}),(0,ai.b)(c=>{t.currentUrlTree=c.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),t.routerState=c.targetRouterState,"deferred"===t.urlUpdateStrategy&&(c.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,c),t.browserUrlTree=c.urlAfterRedirects)}),((n,e,t)=>(0,C.U)(r=>(new $S(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c)),fr(1),(0,ai.b)({next:c=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new kc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{i=!0}}),Ac(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),fl(c=>{if(s=!0,Vm(c)){LS(c)||(t.navigated=!0,t.restoreHistory(r,!0));const h=new vp(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode);if(this.events.next(h),LS(c)){const p=t.urlHandlingStrategy.merge(c.url,t.rawUrlTree),_={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||xE(r.source)};t.scheduleNavigation(p,ch,null,_,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const h=new dh(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);this.events.next(h);try{r.resolve(t.errorHandler(c))}catch(p){r.reject(p)}}return yi.E}))}))}cancelNavigationTransition(t,r,i){const s=new vp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function xE(n){return n!==ch}let kE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Zt);return r}getResolvedTitleForRoute(t){return t.data[Wi]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(a1)},providedIn:"root"}),n})(),a1=(()=>{class n extends kE{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(js))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),l1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(u1)},providedIn:"root"}),n})();class PE{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let u1=(()=>{class n extends PE{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Jm=new l.OlP("",{providedIn:"root",factory:()=>({})});let nn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(FE)},providedIn:"root"}),n})(),FE=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function LE(n){throw n}function d1(n,e,t){return e.parse("/")}const h1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},BE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let os=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,l.f3M)(l.c2e),this.isNgZoneEnabled=!1,this.options=(0,l.f3M)(Jm,{optional:!0})||{},this.errorHandler=this.options.errorHandler||LE,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||d1,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,l.f3M)(nn),this.routeReuseStrategy=(0,l.f3M)(l1),this.urlCreationStrategy=(0,l.f3M)(MS),this.titleStrategy=(0,l.f3M)(kE),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=ap((0,l.f3M)(Bc,{optional:!0})??[]),this.navigationTransitions=(0,l.f3M)(Rp),this.urlSerializer=(0,l.f3M)(kn),this.location=(0,l.f3M)(He),this.isNgZoneEnabled=(0,l.f3M)(l.R0b)instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new F,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=xS(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ch,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},c=i?.navigationId?i:null;if(i){const p={...i};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const h=this.parseUrl(t);this.scheduleNavigation(h,r,c,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Ip),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:c,queryParamsHandling:h,preserveFragment:p}=r,_=p?this.currentUrlTree.fragment:c;let w=null;switch(h){case"merge":w={...this.currentUrlTree.queryParams,...s};break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=s||null}return null!==w&&(w=this.removeEmptyProps(w)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,w,_??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Oc(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,ch,null,r)}navigate(t,r={skipLocationChange:!1}){return function UE(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new l.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...h1}:!1===r?{...BE}:r,Oc(t))return rh(this.currentUrlTree,t,i);const s=this.parseUrl(t);return rh(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,c){if(this.disposed)return Promise.resolve(!1);let h,p,_,w;return c?(h=c.resolve,p=c.reject,_=c.promise):_=new Promise((S,N)=>{h=S,p=N}),w="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:w,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:h,reject:p,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Uc=(()=>{class n{constructor(t,r,i,s,c,h){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=c,this.locationStrategy=h,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Hn.x;const p=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===p||"area"===p,this.isAnchorElement?this.subscription=t.events.subscribe(_=>{_ instanceof kc&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,l.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,l.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,l.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,c){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||c||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,l.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(os),l.Y36(wp),l.$8M("tabindex"),l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(yt))},n.\u0275dir=l.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&l.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&l.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[l.TTD]}),n})();class zv{}let g1=(()=>{class n{constructor(t,r,i,s,c){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Xn(t=>t instanceof kc),vu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,l.MMx)(s.providers,t,`Route: ${s.path}`));const c=s._injector??t,h=s._loadedInjector??c;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(c,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(h,s.children??s._loadedRoutes))}return(0,Qt.D)(i).pipe((0,It.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):_t(null);const s=i.pipe((0,oi.z)(c=>null===c?_t(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,Qt.D)([s,c]).pipe((0,It.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(os),l.LFG(l.Sil),l.LFG(l.lqb),l.LFG(zv),l.LFG(Wv))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Op=new l.OlP("");let Xm=(()=>{class n{constructor(t,r,i,s,c={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof _v?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof kc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof wv&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new wv(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();var Ks=(()=>((Ks=Ks||{})[Ks.COMPLETE=0]="COMPLETE",Ks[Ks.FAILED=1]="FAILED",Ks[Ks.REDIRECTING=2]="REDIRECTING",Ks))();const Mp=!1;function yl(n,e){return{\u0275kind:n,\u0275providers:e}}const GE=new l.OlP("",{providedIn:"root",factory:()=>!1});function qv(){const n=(0,l.f3M)(l.zs3);return e=>{const t=n.get(l.z2F);if(e!==t.components[0])return;const r=n.get(os),i=n.get(kp);1===n.get(Kv)&&r.initialNavigation(),n.get(HE,null,l.XFs.Optional)?.setUpPreloading(),n.get(Op,null,l.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const kp=new l.OlP(Mp?"bootstrap done indicator":"",{factory:()=>new Hn.x}),Kv=new l.OlP(Mp?"initial navigation":"",{providedIn:"root",factory:()=>1});function y1(){let n=[];return n=Mp?[{provide:l.Xts,multi:!0,useFactory:()=>{const e=(0,l.f3M)(os);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function tE(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],yl(1,n)}const HE=new l.OlP(Mp?"router preloader":"");function v1(n){return yl(0,[{provide:HE,useExisting:g1},{provide:zv,useExisting:n}])}const mh=!1,e_=new l.OlP(mh?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),fx=[He,{provide:kn,useClass:qi},os,Gm,{provide:wp,useFactory:function VE(n){return n.routerState.root},deps:[os]},Wv,mh?{provide:GE,useValue:!0}:[]];function Zv(){return new l.PXZ("Router",os)}let $E=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[fx,mh&&r?.enableTracing?y1().\u0275providers:[],{provide:Bc,multi:!0,useValue:t},{provide:e_,useFactory:E1,deps:[[os,new l.FiY,new l.tp0]]},{provide:Jm,useValue:r||{}},r?.useHash?{provide:yt,useClass:Oe}:{provide:yt,useClass:Le},{provide:Op,useFactory:()=>{const n=(0,l.f3M)(Oo),e=(0,l.f3M)(l.R0b),t=(0,l.f3M)(Jm),r=(0,l.f3M)(Rp),i=(0,l.f3M)(kn);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Xm(i,r,n,e,t)}},r?.preloadingStrategy?v1(r.preloadingStrategy).\u0275providers:[],{provide:l.PXZ,multi:!0,useFactory:Zv},r?.initialNavigation?zE(r):[],[{provide:qE,useFactory:qv},{provide:l.tb,multi:!0,useExisting:qE}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Bc,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(e_,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Av]}),n})();function E1(n){if(mh&&n)throw new l.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function zE(n){return["disabled"===n.initialNavigation?yl(3,[{provide:l.ip1,multi:!0,useFactory:()=>{const e=(0,l.f3M)(os);return()=>{e.setUpLocationChangeListener()}}},{provide:Kv,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?yl(2,[{provide:Kv,useValue:0},{provide:l.ip1,multi:!0,deps:[l.zs3],useFactory:e=>{const t=e.get(be,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(os),s=e.get(kp);(function ux(n,e){n.events.pipe(Xn(t=>t instanceof kc||t instanceof vp||t instanceof dh||t instanceof bp),(0,C.U)(t=>t instanceof kc||t instanceof bp?Ks.COMPLETE:t instanceof vp&&(0===t.code||1===t.code)?Ks.REDIRECTING:Ks.FAILED),Xn(t=>t!==Ks.REDIRECTING),fr(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(Rp).afterPreactivation=()=>(r(!0),s.closed?_t(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const qE=new l.OlP(mh?"Router Initializer":"");var yh=L(6457),P=L(2090),ui=L(9681),Zs=L(1877),Cs=L(4859),vh=L(4986),Cn=L(5813);function Pp(){return(0,Ln.e)((n,e)=>{let t,r=!1;n.subscribe((0,we.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}function Vc(n,e=T.y){return n=n??KE,(0,Ln.e)((t,r)=>{let i,s=!0;t.subscribe((0,we.x)(r,c=>{const h=e(c);(s||!n(i,h))&&(s=!1,i=h,r.next(c))}))})}function KE(n,e){return n===e}var Dt,Fr=L(2011),Jv=(L(5881),L(3942)),De=L(5861),I1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ta={},Qv=Qv||{},Xt=I1||self;function Zi(){}function Xv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Fp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Lp="closure_uid_"+(1e9*Math.random()>>>0),ZE=0;function T1(n,e,t){return n.call.apply(n.bind,arguments)}function C1(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ai(n,e,t){return(Ai=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?T1:C1).apply(null,arguments)}function Bp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ni(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,s){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function Au(){this.s=this.s,this.o=this.o}var S1={};Au.prototype.s=!1,Au.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function mx(n){return Object.prototype.hasOwnProperty.call(n,Lp)&&n[Lp]||(n[Lp]=++ZE)}(this);delete S1[n]}},Au.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const YE=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},JE=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let s=0;s<r;s++)s in i&&e.call(t,i[s],s,n)};function QE(n){return Array.prototype.concat.apply([],arguments)}function bo(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function bh(n){return/^[\s\xa0]*$/.test(n)}var ls,XE=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function as(n,e){return-1!=n.indexOf(e)}function t_(n,e){return n<e?-1:n>e?1:0}e:{var eD=Xt.navigator;if(eD){var tD=eD.userAgent;if(tD){ls=tD;break e}}ls=""}function Up(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function nD(n){const e={};for(const t in n)e[t]=n[t];return e}var rD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Vp(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<rD.length;s++)t=rD[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function wh(n){return wh[" "](n),n}wh[" "]=Zi;var Eh,n,_x=as(ls,"Opera"),Nu=as(ls,"Trident")||as(ls,"MSIE"),N1=as(ls,"Edge"),r_=N1||Nu,t0=as(ls,"Gecko")&&!(as(ls.toLowerCase(),"webkit")&&!as(ls,"Edge"))&&!(as(ls,"Trident")||as(ls,"MSIE"))&&!as(ls,"Edge"),iD=as(ls.toLowerCase(),"webkit")&&!as(ls,"Edge");function n0(){var n=Xt.document;return n?n.documentMode:void 0}e:{var zo="",Dh=(n=ls,t0?/rv:([^\);]+)(\)|;)/.exec(n):N1?/Edge\/([\d\.]+)/.exec(n):Nu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):iD?/WebKit\/(\S+)/.exec(n):_x?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Dh&&(zo=Dh?Dh[1]:""),Nu){var Ih=n0();if(null!=Ih&&Ih>parseFloat(zo)){Eh=String(Ih);break e}}Eh=zo}var Gp={};var O1=Xt.document&&Nu&&(n0()||parseInt(Eh,10))||void 0,M1=function(){if(!Xt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Xt.addEventListener("test",Zi,e),Xt.removeEventListener("test",Zi,e)}catch{}return n}();function Jr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function jp(n,e){if(Jr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(t0){e:{try{wh(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:yx[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&jp.Z.h.call(this)}}Jr.prototype.h=function(){this.defaultPrevented=!0},Ni(jp,Jr);var yx={2:"touch",3:"pen",4:"mouse"};jp.prototype.h=function(){jp.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Hp="closure_listenable_"+(1e6*Math.random()|0),x1=0;function k1(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++x1,this.ca=this.fa=!1}function s_(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function o_(n){this.src=n,this.g={},this.h=0}function s0(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=YE(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(s_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function o0(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ca&&s.listener==e&&s.capture==!!t&&s.ia==r)return i}return-1}o_.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=o0(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new k1(e,this.src,s,!!r,i)).fa=t,n.push(e)),e};var a_="closure_lm_"+(1e6*Math.random()|0),$p={};function sD(n,e,t,r,i){if(r&&r.once)return oD(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)sD(n,e[s],t,r,i);return null}return t=d_(t),n&&n[Hp]?n.N(e,t,Fp(r)?!!r.capture:!!r,i):l_(n,e,t,!1,r,i)}function l_(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var c=Fp(i)?!!i.capture:!!i,h=u_(n);if(h||(n[a_]=h=new o_(n)),(t=h.add(e,t,r,c,s)).proxy)return t;if(r=function P1(){var e=F1;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)M1||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(lD(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function oD(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)oD(n,e[s],t,r,i);return null}return t=d_(t),n&&n[Hp]?n.O(e,t,Fp(r)?!!r.capture:!!r,i):l_(n,e,t,!0,r,i)}function aD(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)aD(n,e[s],t,r,i);else r=Fp(r)?!!r.capture:!!r,t=d_(t),n&&n[Hp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=o0(s=n.g[e],t,r,i))&&(s_(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=u_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=o0(e,t,r,i)),(t=-1<n?e[n]:null)&&a0(t))}function a0(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Hp])s0(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(lD(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=u_(e))?(s0(t,n),0==t.h&&(t.src=null,e[a_]=null)):s_(n)}}}function lD(n){return n in $p?$p[n]:$p[n]="on"+n}function F1(n,e){if(n.ca)n=!0;else{e=new jp(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&a0(n),n=t.call(r,e)}return n}function u_(n){return(n=n[a_])instanceof o_?n:null}var c_="__closure_events_fn_"+(1e9*Math.random()>>>0);function d_(n){return"function"==typeof n?n:(n[c_]||(n[c_]=function(e){return n.handleEvent(e)}),n[c_])}function vi(){Au.call(this),this.i=new o_(this),this.P=this,this.I=null}function Yi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Jr(e,n);else if(e instanceof Jr)e.target=e.target||n;else{var i=e;Vp(e=new Jr(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var c=e.g=t[s];i=Wp(c,r,!0,e)&&i}if(i=Wp(c=e.g=n,r,!0,e)&&i,i=Wp(c,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=Wp(c=e.g=t[s],r,!1,e)&&i}function Wp(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var c=e[s];if(c&&!c.ca&&c.capture==t){var h=c.listener,p=c.ia||c.src;c.fa&&s0(n.i,c),i=!1!==h.call(p,r)&&i}}return i&&!r.defaultPrevented}Ni(vi,Au),vi.prototype[Hp]=!0,vi.prototype.removeEventListener=function(n,e,t,r){aD(this,n,e,t,r)},vi.prototype.M=function(){if(vi.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)s_(t[r]);delete n.g[e],n.h--}}this.I=null},vi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},vi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var uD=Xt.JSON.stringify;function h_(){var n=zp;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Gc,cD=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new l0,n=>n.reset());class l0{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function B1(n){Xt.setTimeout(()=>{throw n},0)}function wo(n,e){Gc||function Ji(){var n=Xt.Promise.resolve(void 0);Gc=function(){n.then(Eo)}}(),vl||(Gc(),vl=!0),zp.add(n,e)}var vl=!1,zp=new class L1{constructor(){this.h=this.g=null}add(e,t){const r=cD.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Eo(){for(var n;n=h_();){try{n.h.call(n.g)}catch(t){B1(t)}var e=cD;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}vl=!1}function Th(n,e){vi.call(this),this.h=n||1,this.g=e||Xt,this.j=Ai(this.kb,this),this.l=Date.now()}function Ru(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Ou(n,e,t){if("function"==typeof n)t&&(n=Ai(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ai(n.handleEvent,n)}return 2147483647<Number(e)?-1:Xt.setTimeout(n,e||0)}function jc(n){n.g=Ou(()=>{n.g=null,n.i&&(n.i=!1,jc(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ni(Th,vi),(Dt=Th.prototype).da=!1,Dt.S=null,Dt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Yi(this,"tick"),this.da&&(Ru(this),this.start()))}},Dt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Dt.M=function(){Th.Z.M.call(this),Ru(this),delete this.g};class Ch extends Au{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:jc(this)}M(){super.M(),this.g&&(Xt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ca(n){Au.call(this),this.h=n,this.g={}}Ni(Ca,Au);var Hc=[];function $c(n,e,t,r){Array.isArray(t)||(t&&(Hc[0]=t.toString()),t=Hc);for(var i=0;i<t.length;i++){var s=sD(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function Wc(n){Up(n.g,function(e,t){this.g.hasOwnProperty(t)&&a0(e)},n),n.g={}}function bl(){this.g=!0}function zc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function pD(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<i.length;c++)i[c]=""}}}return uD(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Ca.prototype.M=function(){Ca.Z.M.call(this),Wc(this)},Ca.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bl.prototype.Aa=function(){this.g=!1},bl.prototype.info=function(){};var Mu={},u0=null;function qp(){return u0=u0||new vi}function c0(n){Jr.call(this,Mu.Ma,n)}function Kp(n){const e=qp();Yi(e,new c0(e,n))}function gD(n,e){Jr.call(this,Mu.STAT_EVENT,n),this.stat=e}function Qi(n){const e=qp();Yi(e,new gD(e,n))}function mD(n,e){Jr.call(this,Mu.Na,n),this.size=e}function Sh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Xt.setTimeout(function(){n()},e)}Mu.Ma="serverreachability",Ni(c0,Jr),Mu.STAT_EVENT="statevent",Ni(gD,Jr),Mu.Na="timingevent",Ni(mD,Jr);var Ah={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},f_={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function d0(){}function Yp(){}d0.prototype.h=null;var Rh,qc={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function h0(){Jr.call(this,"d")}function Nh(){Jr.call(this,"c")}function Jp(){}function Oh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Ca(this),this.P=_D,this.W=new Th(n=r_?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new p_}function p_(){this.i=null,this.g="",this.h=!1}Ni(h0,Jr),Ni(Nh,Jr),Ni(Jp,d0),Jp.prototype.g=function(){return new XMLHttpRequest},Jp.prototype.i=function(){return{}},Rh=new Jp;var _D=45e3,g_={},Mh={};function m_(n,e,t){n.K=1,n.v=Fh(Do(e)),n.s=t,n.U=!0,yD(n,null)}function yD(n,e){n.F=Date.now(),xh(n),n.A=Do(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),y0(t.h,"t",r),n.C=0,t=n.l.H,n.h=new p_,n.g=qD(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Ch(Ai(n.Ia,n,n.g),n.O)),$c(n.V,n.g,"readystatechange",n.gb),e=n.H?nD(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Kp(1),function dD(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var c="",h=s.split("&"),p=0;p<h.length;p++){var _=h[p].split("=");if(1<_.length){var w=_[0];_=_[1];var S=w.split("_");c=2<=S.length&&"type"==S[1]?c+(w+"=")+_+"&":c+(w+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function f0(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function p0(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=vD(n,t),i==Mh){4==e&&(n.o=4,Qi(14),r=!1),zc(n.j,n.m,null,"[Incomplete Response]");break}if(i==g_){n.o=4,Qi(15),zc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}zc(n.j,n.m,i,null),Ph(n,i)}f0(n)&&i!=Mh&&i!=g_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Qi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),N0(e),e.L=!0,Qi(11))):(zc(n.j,n.m,t,"[Invalid Chunked Response]"),wl(n),kh(n))}function vD(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Mh:(t=Number(e.substring(t,r)),isNaN(t)?g_:(r+=1)+t>e.length?Mh:(e=e.substr(r,t),n.C=r+t,e))}function xh(n){n.Y=Date.now()+n.P,bD(n,n.P)}function bD(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Sh(Ai(n.eb,n),e)}function Qp(n){n.B&&(Xt.clearTimeout(n.B),n.B=null)}function kh(n){0==n.l.G||n.I||HD(n.l,n)}function wl(n){Qp(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Ru(n.W),Wc(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Ph(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||RD(t.i,n)))if(t.I=n.N,!n.J&&RD(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;A_(t),og(t)}A0(t),Qi(18)}}else t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Sh(Ai(t.ab,t),6e3));if(1>=v0(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else Yc(t,11)}else if((n.J||t.g==n)&&A_(t),!bh(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let _=i[e];if(t.U=_[0],_=_[1],2==t.G)if("c"==_[0]){t.J=_[1],t.la=_[2];const w=_[3];null!=w&&(t.ma=w,t.h.info("VER="+t.ma));const S=_[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const N=_[5];null!=N&&"number"==typeof N&&0<N&&(t.K=r=1.5*N,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const k=n.g;if(k){const j=k.g?k.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(j){var s=r.i;!s.g&&(as(j,"spdy")||as(j,"quic")||as(j,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(eg(s,s.h),s.h=null))}if(r.D){const te=k.g?k.g.getResponseHeader("X-HTTP-Session-Id"):null;te&&(r.sa=te,Bn(r.F,r.D,te))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=zD(r,r.H?r.la:null,r.W),c.J){I_(r.i,c);var h=c,p=r.K;p&&h.setTimeout(p),h.B&&(Qp(h),xh(h)),r.g=c}else GD(r);0<t.l.length&&ag(t)}else"stop"!=_[0]&&"close"!=_[0]||Yc(t,7);else 3==t.G&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?Yc(t,7):S_(t):"noop"!=_[0]&&t.j&&t.j.wa(_),t.A=0)}Kp(4)}catch{}}function __(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Xv(n)||"string"==typeof n)JE(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Xv(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function wD(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Xv(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}}function Kc(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Kc)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function y_(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];xu(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)xu(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function xu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Dt=Oh.prototype).setTimeout=function(n){this.P=n},Dt.gb=function(n){n=n.target;const e=this.L;e&&3==Io(n)?e.l():this.Ia(n)},Dt.Ia=function(n){try{if(n==this.g)e:{const w=Io(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>w)&&(3!=w||r_||this.g&&(this.h.h||this.g.ga()||I0(this.g)))){this.I||4!=w||7==e||Kp(8==e||0>=S?3:2),Qp(this);var t=this.g.ba();this.N=t;t:if(f0(this)){var r=I0(this.g);n="";var i=r.length,s=4==Io(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){wl(this),kh(this);var c="";break t}this.h.i=new Xt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function hD(n,e,t,r,i,s,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.X,w,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bh(h)){var _=h;break t}}_=null}if(!(t=_)){this.i=!1,this.o=3,Qi(12),wl(this),kh(this);break e}zc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ph(this,t)}this.U?(p0(this,w,c),r_&&this.i&&3==w&&($c(this.V,this.W,"tick",this.fb),this.W.start())):(zc(this.j,this.m,c,null),Ph(this,c)),4==w&&wl(this),this.i&&!this.I&&(4==w?HD(this.l,this):(this.i=!1,xh(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Qi(12)):(this.o=0,Qi(13)),wl(this),kh(this)}}}catch{}},Dt.fb=function(){if(this.g){var n=Io(this.g),e=this.g.ga();this.C<e.length&&(Qp(this),p0(this,n,e),this.i&&4!=n&&xh(this))}},Dt.cancel=function(){this.I=!0,wl(this)},Dt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function fD(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Kp(3),Qi(17)),wl(this),this.o=2,kh(this)):bD(this,this.Y-n)},(Dt=Kc.prototype).R=function(){y_(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Dt.T=function(){return y_(this),this.g.concat()},Dt.get=function(n,e){return xu(this.h,n)?this.h[n]:e},Dt.set=function(n,e){xu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Dt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],s=this.get(i);n.call(e,s,i,this)}};var g0=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ku(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof ku){this.g=void 0!==e?e:n.g,qo(this,n.j),this.s=n.s,v_(this,n.i),b_(this,n.m),this.l=n.l,e=n.h;var t=new Xp;t.i=e.i,e.g&&(t.g=new Kc(e.g),t.h=e.h),w_(this,t),this.o=n.o}else n&&(t=String(n).match(g0))?(this.g=!!e,qo(this,t[1]||"",!0),this.s=E_(t[2]||""),v_(this,t[3]||"",!0),b_(this,t[4]),this.l=E_(t[5]||"",!0),w_(this,t[6]||"",!0),this.o=E_(t[7]||"")):(this.g=!!e,this.h=new Xp(null,this.g))}function Do(n){return new ku(n)}function qo(n,e,t){n.j=t?E_(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function v_(n,e,t){n.i=t?E_(e,!0):e}function b_(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function w_(n,e,t){e instanceof Xp?(n.h=e,function Lh(n,e){e&&!n.j&&(Pu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(_0(this,r),y0(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=D_(e,ci)),n.h=new Xp(e,n.g))}function Bn(n,e,t){n.h.set(e,t)}function Fh(n){return Bn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function E_(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function D_(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,V1),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function V1(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ku.prototype.toString=function(){var n=[],e=this.j;e&&n.push(D_(e,DD,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(D_(e,DD,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(D_(t,"/"==t.charAt(0)?G1:ID,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",D_(t,TD)),n.join("")};var DD=/[#\/\?@]/g,ID=/[#\?:]/g,G1=/[#\?]/g,ci=/[#\?@]/g,TD=/#/g;function Xp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Pu(n){n.g||(n.g=new Kc,n.h=0,n.i&&function ED(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function _0(n,e){Pu(n),e=Zc(n,e),xu(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,xu((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&y_(n)))}function CD(n,e){return Pu(n),e=Zc(n,e),xu(n.g.h,e)}function y0(n,e,t){_0(n,e),0<t.length&&(n.i=null,n.g.set(Zc(n,e),bo(t)),n.h+=t.length)}function Zc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}(Dt=Xp.prototype).add=function(n,e){Pu(this),this.i=null,n=Zc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Dt.forEach=function(n,e){Pu(this),this.g.forEach(function(t,r){JE(t,function(i){n.call(e,i,r,this)},this)},this)},Dt.T=function(){Pu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],s=0;s<i.length;s++)t.push(e[r]);return t},Dt.R=function(n){Pu(this);var e=[];if("string"==typeof n)CD(this,n)&&(e=QE(e,this.g.get(Zc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=QE(e,n[t])}return e},Dt.set=function(n,e){return Pu(this),this.i=null,CD(this,n=Zc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Dt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Dt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var c=i;""!==r[s]&&(c+="="+encodeURIComponent(String(r[s]))),n.push(c)}}return this.i=n.join("&")};var j1=class{constructor(n,e){this.h=n,this.g=e}};function SD(n){this.l=n||AD,n=Xt.PerformanceNavigationTiming?0<(n=Xt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Xt.g&&Xt.g.Ea&&Xt.g.Ea()&&Xt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var AD=10;function ND(n){return!!n.h||!!n.g&&n.g.size>=n.j}function v0(n){return n.h?1:n.g?n.g.size:0}function RD(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function eg(n,e){n.g?n.g.add(e):n.h=e}function I_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Ko(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return bo(n.i)}function b0(){}function OD(){this.g=new b0}function Sa(n,e,t){const r=t||"";try{__(n,function(i,s){let c=i;Fp(i)&&(c=uD(i)),e.push(r+s+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ss(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Bh(n){this.l=n.$b||null,this.j=n.ib||!1}function tg(n,e){vi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=w0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}SD.prototype.cancel=function(){if(this.i=Ko(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},b0.prototype.stringify=function(n){return Xt.JSON.stringify(n,void 0)},b0.prototype.parse=function(n){return Xt.JSON.parse(n,void 0)},Ni(Bh,d0),Bh.prototype.g=function(){return new tg(this.l,this.j)},Bh.prototype.i=function(n){return function(){return n}}({}),Ni(tg,vi);var w0=0;function MD(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function ng(n){n.readyState=4,n.l=null,n.j=null,n.A=null,rg(n)}function rg(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Dt=tg.prototype).open=function(n,e){if(this.readyState!=w0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,rg(this)},Dt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Xt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Dt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ng(this)),this.readyState=w0},Dt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,rg(this)),this.g&&(this.readyState=3,rg(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Xt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;MD(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Dt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ng(this):rg(this),3==this.readyState&&MD(this)}},Dt.Ua=function(n){this.g&&(this.response=this.responseText=n,ng(this))},Dt.Ta=function(n){this.g&&(this.response=n,ng(this))},Dt.ha=function(){this.g&&ng(this)},Dt.setRequestHeader=function(n,e){this.v.append(n,e)},Dt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Dt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(tg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var E0=Xt.JSON.parse;function pr(n){vi.call(this),this.headers=new Kc,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=xD,this.K=this.L=!1}Ni(pr,vi);var xD="",kD=/^https?$/i,H1=["POST","PUT"];function FD(n){return"content-type"==n.toLowerCase()}function ig(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,LD(n),sg(n)}function LD(n){n.D||(n.D=!0,Yi(n,"complete"),Yi(n,"error"))}function D0(n){if(n.h&&typeof Qv<"u"&&(!n.C[1]||4!=Io(n)||2!=n.ba()))if(n.v&&4==Io(n))Ou(n.Fa,0,n);else if(Yi(n,"readystatechange"),4==Io(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(g0)[1]||null;if(!i&&Xt.self&&Xt.self.location){var s=Xt.self.location.protocol;i=s.substr(0,s.length-1)}r=!kD.test(i?i.toLowerCase():"")}t=r}if(t)Yi(n,"complete"),Yi(n,"success");else{n.m=6;try{var c=2<Io(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.ba()+"]",LD(n)}}finally{sg(n)}}}function sg(n,e){if(n.g){T_(n);const t=n.g,r=n.C[0]?Zi:null;n.g=null,n.C=null,e||Yi(n,"ready");try{t.onreadystatechange=r}catch{}}}function T_(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Xt.clearTimeout(n.A),n.A=null)}function Io(n){return n.g?n.g.readyState:0}function I0(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case xD:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function C_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function BD(n){let e="";return Up(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Bn(n,e,t))}function Uh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function T0(n){this.za=0,this.l=[],this.h=new bl,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Uh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Uh("baseRetryDelayMs",5e3,n),this.$a=Uh("retryDelaySeedMs",1e4,n),this.Ya=Uh("forwardChannelMaxRetries",2,n),this.ra=Uh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new SD(n&&n.concurrentRequestLimit),this.Ca=new OD,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function S_(n){if(C0(n),3==n.G){var e=n.V++,t=Do(n.F);Bn(t,"SID",n.J),Bn(t,"RID",e),Bn(t,"TYPE","terminate"),lg(n,t),(e=new Oh(n,n.h,e,void 0)).K=2,e.v=Fh(Do(t)),t=!1,Xt.navigator&&Xt.navigator.sendBeacon&&(t=Xt.navigator.sendBeacon(e.v.toString(),"")),!t&&Xt.Image&&((new Image).src=e.v,t=!0),t||(e.g=qD(e.l,null),e.g.ea(e.v)),e.F=Date.now(),xh(e)}WD(n)}function og(n){n.g&&(N0(n),n.g.cancel(),n.g=null)}function C0(n){og(n),n.u&&(Xt.clearTimeout(n.u),n.u=null),A_(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Xt.clearTimeout(n.m),n.m=null)}function S0(n,e){n.l.push(new j1(n.Za++,e)),3==n.G&&ag(n)}function ag(n){ND(n.i)||n.m||(n.m=!0,wo(n.Ha,n),n.C=0)}function UD(n,e){var t;t=e?e.m:n.V++;const r=Do(n.F);Bn(r,"SID",n.J),Bn(r,"RID",t),Bn(r,"AID",n.U),lg(n,r),n.o&&n.s&&C_(r,n.o,n.s),t=new Oh(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=VD(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),eg(n.i,t),m_(t,r,e)}function lg(n,e){n.j&&__({},function(t,r){Bn(e,r,t)})}function VD(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Ai(n.j.Oa,n.j,n):null;e:{var i=n.l;let s=-1;for(;;){const c=["count="+t];-1==s?0<t?(s=i[0].h,c.push("ofs="+s)):s=0:c.push("ofs="+s);let h=!0;for(let p=0;p<t;p++){let _=i[p].h;const w=i[p].g;if(_-=s,0>_)s=Math.max(0,i[p].h-100),h=!1;else try{Sa(w,c,"req"+_+"_")}catch{r&&r(w)}}if(h){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function GD(n){n.g||n.u||(n.Y=1,wo(n.Ga,n),n.A=0)}function A0(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Sh(Ai(n.Ga,n),$D(n,n.A)),n.A++,0))}function N0(n){null!=n.B&&(Xt.clearTimeout(n.B),n.B=null)}function jD(n){n.g=new Oh(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Do(n.oa);Bn(e,"RID","rpc"),Bn(e,"SID",n.J),Bn(e,"CI",n.N?"0":"1"),Bn(e,"AID",n.U),lg(n,e),Bn(e,"TYPE","xmlhttp"),n.o&&n.s&&C_(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Fh(Do(e)),t.s=null,t.U=!0,yD(t,n)}function A_(n){null!=n.v&&(Xt.clearTimeout(n.v),n.v=null)}function HD(n,e){var t=null;if(n.g==e){A_(n),N0(n),n.g=null;var r=2}else{if(!RD(n.i,e))return;t=e.D,I_(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Yi(r=qp(),new mD(r,t,e,i)),ag(n)}else GD(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function $1(n,e){return!(v0(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Sh(Ai(n.Ha,n,e),$D(n,n.C)),n.C++,0)))}(n,e)||2==r&&A0(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Yc(n,5);break;case 4:Yc(n,10);break;case 3:Yc(n,6);break;default:Yc(n,2)}}function $D(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Yc(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Ai(n.jb,n);t||(t=new ku("//www.google.com/images/cleardot.gif"),Xt.location&&"http"==Xt.location.protocol||qo(t,"https"),Fh(t)),function Zo(n,e){const t=new bl;if(Xt.Image){const r=new Image;r.onload=Bp(Ss,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Bp(Ss,t,r,"TestLoadImage: error",!1,e),r.onabort=Bp(Ss,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Bp(Ss,t,r,"TestLoadImage: timeout",!1,e),Xt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Qi(2);n.G=0,n.j&&n.j.va(e),WD(n),C0(n)}function WD(n){n.G=0,n.I=-1,n.j&&((0!=Ko(n.i).length||0!=n.l.length)&&(n.i.i.length=0,bo(n.l),n.l.length=0),n.j.ua())}function zD(n,e,t){let r=function U1(n){return n instanceof ku?Do(n):new ku(n,void 0)}(t);if(""!=r.i)e&&v_(r,e+"."+r.i),b_(r,r.m);else{const i=Xt.location;r=function m0(n,e,t,r){var i=new ku(null,void 0);return n&&qo(i,n),e&&v_(i,e),t&&b_(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Up(n.aa,function(i,s){Bn(r,s,i)}),t=n.sa,(e=n.D)&&t&&Bn(r,e,t),Bn(r,"VER",n.ma),lg(n,r),r}function qD(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new pr(t&&n.Ba&&!n.qa?new Bh({ib:!0}):n.qa)).L=n.H,e}function KD(){}function ug(){if(Nu&&!(10<=Number(O1)))throw Error("Environmental error: no available transport.")}function As(n,e){vi.call(this),this.g=new T0(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!bh(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!bh(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Jc(this)}function R0(n){h0.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function O0(){Nh.call(this),this.status=1}function Jc(n){this.g=n}(Dt=pr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Rh.g(),this.C=function Zp(n){return n.h||(n.h=n.i())}(this.u?this.u:Rh),this.g.onreadystatechange=Ai(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void ig(this,s)}n=t||"";const i=new Kc(this.headers);r&&__(r,function(s,c){i.set(c,s)}),r=function A1(n){e:{var e=FD;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Xt.FormData&&n instanceof Xt.FormData,!(0<=YE(H1,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,c){this.g.setRequestHeader(c,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{T_(this),0<this.B&&((this.K=function PD(n){return Nu&&function R1(){return function n_(n){var e=Gp;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=XE(String(Eh)).split("."),t=XE("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",s=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=t_(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||t_(0==i[2].length,0==s[2].length)||t_(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ai(this.pa,this)):this.A=Ou(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){ig(this,s)}},Dt.pa=function(){typeof Qv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Yi(this,"timeout"),this.abort(8))},Dt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Yi(this,"complete"),Yi(this,"abort"),sg(this))},Dt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),sg(this,!0)),pr.Z.M.call(this)},Dt.Fa=function(){this.s||(this.F||this.v||this.l?D0(this):this.cb())},Dt.cb=function(){D0(this)},Dt.ba=function(){try{return 2<Io(this)?this.g.status:-1}catch{return-1}},Dt.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},Dt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),E0(e)}},Dt.Da=function(){return this.m},Dt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Dt=T0.prototype).ma=8,Dt.G=1,Dt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},Dt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Oh(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=nD(s),Vp(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=VD(this,i,e),Bn(t=Do(this.F),"RID",n),Bn(t,"CVER",22),this.D&&Bn(t,"X-HTTP-Session-Id",this.D),lg(this,t),this.o&&s&&C_(t,this.o,s),eg(this.i,i),this.Ra&&Bn(t,"TYPE","init"),this.ja?(Bn(t,"$req",e),Bn(t,"SID","null"),i.$=!0,m_(i,t,null)):m_(i,t,e),this.G=2}}else 3==this.G&&(n?UD(this,n):0==this.l.length||ND(this.i)||UD(this))},Dt.Ga=function(){if(this.u=null,jD(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Sh(Ai(this.bb,this),n)}},Dt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Qi(10),og(this),jD(this))},Dt.ab=function(){null!=this.v&&(this.v=null,og(this),A0(this),Qi(19))},Dt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Qi(2)):(this.h.info("Failed to ping google.com"),Qi(1))},(Dt=KD.prototype).xa=function(){},Dt.wa=function(){},Dt.va=function(){},Dt.ua=function(){},Dt.Oa=function(){},ug.prototype.g=function(n,e){return new As(n,e)},Ni(As,vi),As.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),wo(Ai(n.hb,n,e))),Qi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=zD(n,null,n.W),ag(n)},As.prototype.close=function(){S_(this.g)},As.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,S0(this.g,e)}else this.v?((e={}).__data__=uD(n),S0(this.g,e)):S0(this.g,n)},As.prototype.M=function(){this.g.j=null,delete this.j,S_(this.g),delete this.g,As.Z.M.call(this)},Ni(R0,h0),Ni(O0,Nh),Ni(Jc,KD),Jc.prototype.xa=function(){Yi(this.g,"a")},Jc.prototype.wa=function(n){Yi(this.g,new R0(n))},Jc.prototype.va=function(n){Yi(this.g,new O0(n))},Jc.prototype.ua=function(){Yi(this.g,"b")},ug.prototype.createWebChannel=ug.prototype.g,As.prototype.send=As.prototype.u,As.prototype.open=As.prototype.m,As.prototype.close=As.prototype.close,Ah.NO_ERROR=0,Ah.TIMEOUT=8,Ah.HTTP_ERROR=6,f_.COMPLETE="complete",Yp.EventType=qc,qc.OPEN="a",qc.CLOSE="b",qc.ERROR="c",qc.MESSAGE="d",vi.prototype.listen=vi.prototype.N,pr.prototype.listenOnce=pr.prototype.O,pr.prototype.getLastError=pr.prototype.La,pr.prototype.getLastErrorCode=pr.prototype.Da,pr.prototype.getStatus=pr.prototype.ba,pr.prototype.getResponseJson=pr.prototype.Qa,pr.prototype.getResponseText=pr.prototype.ga,pr.prototype.send=pr.prototype.ea;var ZD=Ta.createWebChannelTransport=function(){return new ug},YD=Ta.getStatEventTarget=function(){return qp()},N_=Ta.ErrorCode=Ah,JD=Ta.EventType=f_,M0=Ta.Event=Mu,x0=Ta.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Qc=Ta.FetchXmlHttpFactory=Bh,R_=Ta.WebChannel=Yp,W1=Ta.XhrIo=pr;const Xc="@firebase/firestore";class Ri{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ri.UNAUTHENTICATED=new Ri(null),Ri.GOOGLE_CREDENTIALS=new Ri("google-credentials-uid"),Ri.FIRST_PARTY=new Ri("first-party-uid"),Ri.MOCK_USER=new Ri("mock-user");let Fu="9.9.1";const ed=new Zs.Yd("@firebase/firestore");function O_(){return ed.logLevel}function Je(n,...e){if(ed.logLevel<=Zs.in.DEBUG){const t=e.map(k0);ed.debug(`Firestore (${Fu}): ${n}`,...t)}}function vt(n,...e){if(ed.logLevel<=Zs.in.ERROR){const t=e.map(k0);ed.error(`Firestore (${Fu}): ${n}`,...t)}}function cg(n,...e){if(ed.logLevel<=Zs.in.WARN){const t=e.map(k0);ed.warn(`Firestore (${Fu}): ${n}`,...t)}}function k0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Tt(n="Unexpected state"){const e=`FIRESTORE (${Fu}) INTERNAL ASSERTION FAILED: `+n;throw vt(e),new Error(e)}function Lt(n,e){n||Tt()}function dt(n,e){return n}const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends P.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Oi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class P0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ri.UNAUTHENTICATED))}shutdown(){}}class q1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class eI{constructor(e){this.t=e,this.currentUser=Ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=_=>this.i!==i?(i=this.i,t(_)):Promise.resolve();let c=new Oi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Oi,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const _=c;e.enqueueRetryable((0,De.Z)(function*(){yield _.promise,yield s(r.currentUser)}))},p=_=>{Je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(_=>p(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(Je("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Oi)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Lt("string"==typeof r.accessToken),new P0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Lt(null===e||"string"==typeof e),new Ri(e)}}class tI{constructor(e,t,r){this.type="FirstParty",this.user=Ri.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class nI{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new tI(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ri.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class F0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K1{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=s=>{null!=s.error&&Je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.p;return this.p=s.token,Je("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):Je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Lt("string"==typeof t.token),this.p=t.token,new F0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Z1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Vh{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Z1(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function sn(n,e){return n<e?-1:n>e?1:0}function Gh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function rI(n){return n+"\0"}class Zn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Zn.fromMillis(Date.now())}static fromDate(e){return Zn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Zn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?sn(this.nanoseconds,e.nanoseconds):sn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class jt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new jt(e)}static min(){return new jt(new Zn(0,0))}static max(){return new jt(new Zn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class jh{constructor(e,t,r){void 0===t?t=0:t>e.length&&Tt(),void 0===r?r=e.length-t:r>e.length-t&&Tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===jh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof jh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),c=t.get(i);if(s<c)return-1;if(s>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class wn extends jh{construct(e,t,r){return new wn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(ye.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new wn(t)}static emptyPath(){return new wn([])}}const Y1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lr extends jh{construct(e,t,r){return new lr(e,t,r)}static isValidIdentifier(e){return Y1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new lr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Ae(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Ae(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Ae(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(s(),i++)}if(s(),c)throw new Ae(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lr(t)}static emptyPath(){return new lr([])}}class at{constructor(e){this.path=e}static fromPath(e){return new at(wn.fromString(e))}static fromName(e){return new at(wn.fromString(e).popFirst(5))}static empty(){return new at(wn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===wn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return wn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new at(new wn(e.slice()))}}class M_{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function L0(n){return n.fields.find(e=>2===e.kind)}function td(n){return n.fields.filter(e=>2!==e.kind)}M_.UNKNOWN_ID=-1;class dg{constructor(e,t){this.fieldPath=e,this.kind=t}}class Hh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Hh(0,Ns.min())}}function B0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=jt.fromTimestamp(1e9===r?new Zn(t+1,0):new Zn(t,r));return new Ns(i,at.empty(),e)}function iI(n){return new Ns(n.readTime,n.key,-1)}class Ns{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ns(jt.min(),at.empty(),-1)}static max(){return new Ns(jt.max(),at.empty(),-1)}}function U0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=at.comparator(n.documentKey,e.documentKey),0!==t?t:sn(n.largestBatchId,e.largestBatchId))}const sI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class J1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function nd(n){return oI.apply(this,arguments)}function oI(){return oI=(0,De.Z)(function*(n){if(n.code!==ye.FAILED_PRECONDITION||n.message!==sI)throw n;Je("LocalStore","Unexpectedly lost primary lease")}),oI.apply(this,arguments)}class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.reject(t)}static resolve(e){return new ge((t,r)=>{t(e)})}static reject(e){return new ge((t,r)=>{r(e)})}static waitFor(e){return new ge((t,r)=>{let i=0,s=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++s,c&&s===i&&t()},p=>r(p))}),c=!0,s===i&&t()})}static or(e){let t=ge.resolve(!1);for(const r of e)t=t.next(i=>i?ge.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new ge((r,i)=>{const s=e.length,c=new Array(s);let h=0;for(let p=0;p<s;p++){const _=p;t(e[_]).next(w=>{c[_]=w,++h,h===s&&r(c)},w=>i(w))}})}static doWhile(e,t){return new ge((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class hg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Oi,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new fg(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=V0(r.target.error);this.T.reject(new fg(e,i))}}static open(e,t,r,i){try{return new hg(t,e.transaction(i,r))}catch(s){throw new fg(t,s)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new pg(t)}}class Rs{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===Rs.v((0,P.z$)())&&vt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Je("SimpleDb","Removing database:",e),rd(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,P.hl)())return!1;if(Rs.S())return!0;const e=(0,P.z$)(),t=Rs.v(e),r=0<t&&t<10,i=Rs.D(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,De.Z)(function*(){return t.db||(Je("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=c=>{r(c.target.result)},s.onblocked=()=>{i(new fg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new Ae(ye.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ae(ye.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new fg(e,h))},s.onupgradeneeded=c=>{Je("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.P.O(c.target.result,s.transaction,c.oldVersion,t.version).next(()=>{Je("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=r=>t.M(r)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,De.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{s.db=yield s.k(e);const p=hg.open(s.db,e,c?"readonly":"readwrite",r),_=i(p).next(w=>(p.R(),w)).catch(w=>(p.abort(w),ge.reject(w))).toPromise();return _.catch(()=>{}),yield p.A,_}catch(p){const _=p,w="FirebaseError"!==_.name&&h<3;if(Je("SimpleDb","Transaction failed with error:",_.message,"Retrying:",w),s.close(),!w)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Q1{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return rd(this.$.delete())}}class fg extends Ae{constructor(e,t){super(ye.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function El(n){return"IndexedDbTransactionError"===n.name}class pg{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Je("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Je("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),rd(r)}add(e){return Je("SimpleDb","ADD",this.store.name,e,e),rd(this.store.add(e))}get(e){return rd(this.store.get(e)).next(t=>(void 0===t&&(t=null),Je("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Je("SimpleDb","DELETE",this.store.name,e),rd(this.store.delete(e))}count(){return Je("SimpleDb","COUNT",this.store.name),rd(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.G(i,(c,h)=>{s.push(h)}).next(()=>s)}{const i=this.store.getAll(r.range);return new ge((s,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{s(h.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ge((i,s)=>{r.onerror=c=>{s(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}W(e,t){Je("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.G(i,(s,c,h)=>h.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Y(e){const t=this.cursor({});return new ge((r,i)=>{t.onerror=s=>{const c=V0(s.target.error);i(c)},t.onsuccess=s=>{const c=s.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}G(e,t){const r=[];return new ge((i,s)=>{e.onerror=c=>{s(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const p=new Q1(h),_=t(h.primaryKey,h.value,p);if(_ instanceof ge){const w=_.catch(S=>(p.done(),ge.reject(S)));r.push(w)}p.isDone?i():null===p.U?h.continue():h.continue(p.U)}}).next(()=>ge.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function rd(n){return new ge((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=V0(r.target.error);t(i)}})}let aI=!1;function V0(n){const e=Rs.v((0,P.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return aI||(aI=!0,setTimeout(()=>{throw r},0)),r}}return n}class X1{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Je("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,De.Z)(function*(){t.task=null;try{Je("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){El(r)?Je("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield nd(r)}yield t.Z(1)}))}}class bx{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,De.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let i=t,s=!0;return ge.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Je("IndexBackiller",`Processing collection: ${c}`),this.nt(e,c,i).next(h=>{i-=h,r.add(c)});s=!1})).next(()=>t-i)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const c=s.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.st(i,s)).next(h=>(Je("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>c.size)}))}st(e,t){let r=e;return t.changes.forEach((i,s)=>{const c=iI(s);U0(c,r)>0&&(r=c)}),new Ns(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Os{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function G0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function id(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function lI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Os.ot=-1;class er{constructor(e,t){this.comparator=e,this.root=t||bi.EMPTY}insert(e,t){return new er(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bi.BLACK,null,null))}remove(e){return new er(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new x_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new x_(this.root,e,this.comparator,!1)}getReverseIterator(){return new x_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new x_(this.root,e,this.comparator,!0)}}class x_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??bi.RED,this.left=i??bi.EMPTY,this.right=s??bi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new bi(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return bi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return bi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Tt();const e=this.left.check();if(e!==this.right.check())throw Tt();return e+(this.isRed()?0:1)}}bi.EMPTY=null,bi.RED=!0,bi.BLACK=!1,bi.EMPTY=new class{constructor(){this.size=0}get key(){throw Tt()}get value(){throw Tt()}get color(){throw Tt()}get left(){throw Tt()}get right(){throw Tt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new bi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $n{constructor(e){this.comparator=e,this.data=new er(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new j0(this.data.getIterator())}getIteratorFrom(e){return new j0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof $n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new $n(this.comparator);return t.data=e,t}}class j0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function $h(n){return n.hasNext()?n.getNext():void 0}class Ms{constructor(e){this.fields=e,e.sort(lr.comparator)}static empty(){return new Ms([])}unionWith(e){let t=new $n(lr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ms(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Lr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Lr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Lr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return sn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lr.EMPTY_BYTE_STRING=new Lr("");const tA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dl(n){if(Lt(!!n),"string"==typeof n){let e=0;const t=tA.exec(n);if(Lt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:br(n.seconds),nanos:br(n.nanos)}}function br(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function sd(n){return"string"==typeof n?Lr.fromBase64String(n):Lr.fromUint8Array(n)}function H0(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function uI(n){const e=n.mapValue.fields.__previous_value__;return H0(e)?uI(e):e}function od(n){const e=Dl(n.mapValue.fields.__local_write_time__.timestampValue);return new Zn(e.seconds,e.nanos)}class nA{constructor(e,t,r,i,s,c,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=p}}class Aa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Aa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Aa&&e.projectId===this.projectId&&e.database===this.database}}function gg(n){return null==n}function mg(n){return 0===n&&1/n==-1/0}function cI(n){return"number"==typeof n&&Number.isInteger(n)&&!mg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Lu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},k_={nullValue:"NULL_VALUE"};function ad(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?H0(n)?4:L_(n)?9007199254740991:10:Tt()}function Na(n,e){if(n===e)return!0;const t=ad(n);if(t!==ad(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return od(n).isEqual(od(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Dl(r.timestampValue),c=Dl(i.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,sd(n.bytesValue).isEqual(sd(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return br(r.geoPointValue.latitude)===br(i.geoPointValue.latitude)&&br(r.geoPointValue.longitude)===br(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return br(r.integerValue)===br(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=br(r.doubleValue),c=br(i.doubleValue);return s===c?mg(s)===mg(c):isNaN(s)&&isNaN(c)}return!1}(n,e);case 9:return Gh(n.arrayValue.values||[],e.arrayValue.values||[],Na);case 10:return function(r,i){const s=r.mapValue.fields||{},c=i.mapValue.fields||{};if(G0(s)!==G0(c))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===c[h]||!Na(s[h],c[h])))return!1;return!0}(n,e);default:return Tt()}var i}function _g(n,e){return void 0!==(n.values||[]).find(t=>Na(t,e))}function Il(n,e){if(n===e)return 0;const t=ad(n),r=ad(e);if(t!==r)return sn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return sn(n.booleanValue,e.booleanValue);case 2:return function(i,s){const c=br(i.integerValue||i.doubleValue),h=br(s.integerValue||s.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return $0(n.timestampValue,e.timestampValue);case 4:return $0(od(n),od(e));case 5:return sn(n.stringValue,e.stringValue);case 6:return function(i,s){const c=sd(i),h=sd(s);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const c=i.split("/"),h=s.split("/");for(let p=0;p<c.length&&p<h.length;p++){const _=sn(c[p],h[p]);if(0!==_)return _}return sn(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const c=sn(br(i.latitude),br(s.latitude));return 0!==c?c:sn(br(i.longitude),br(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const c=i.values||[],h=s.values||[];for(let p=0;p<c.length&&p<h.length;++p){const _=Il(c[p],h[p]);if(_)return _}return sn(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Lu.mapValue&&s===Lu.mapValue)return 0;if(i===Lu.mapValue)return 1;if(s===Lu.mapValue)return-1;const c=i.fields||{},h=Object.keys(c),p=s.fields||{},_=Object.keys(p);h.sort(),_.sort();for(let w=0;w<h.length&&w<_.length;++w){const S=sn(h[w],_[w]);if(0!==S)return S;const N=Il(c[h[w]],p[_[w]]);if(0!==N)return N}return sn(h.length,_.length)}(n.mapValue,e.mapValue);default:throw Tt()}}function $0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return sn(n,e);const t=Dl(n),r=Dl(e),i=sn(t.seconds,r.seconds);return 0!==i?i:sn(t.nanos,r.nanos)}function ld(n){return W0(n)}function W0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Dl(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?sd(n.bytesValue).toBase64():"referenceValue"in n?at.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const c of r.values||[])s?s=!1:i+=",",i+=W0(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",c=!0;for(const h of i)c?c=!1:s+=",",s+=`${h}:${W0(r.fields[h])}`;return s+"}"}(n.mapValue):Tt();var e}function Tl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function P_(n){return!!n&&"integerValue"in n}function yg(n){return!!n&&"arrayValue"in n}function dI(n){return!!n&&"nullValue"in n}function F_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Wh(n){return!!n&&"mapValue"in n}function zh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return id(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=zh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function L_(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function rA(n){return"nullValue"in n?k_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Tl(Aa.empty(),at.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Tt()}function iA(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Tl(Aa.empty(),at.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Lu:Tt()}function B_(n,e){const t=Il(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function hI(n,e){const t=Il(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class wi{constructor(e){this.value=e}static empty(){return new wi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Wh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zh(t)}setAll(e){let t=lr.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=zh(c):i.push(h.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Wh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Na(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Wh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){id(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new wi(zh(this.value))}}function ud(n){const e=[];return id(n.fields,(t,r)=>{const i=new lr([t]);if(Wh(r)){const s=ud(r.mapValue).fields;if(0===s.length)e.push(i);else for(const c of s)e.push(i.child(c))}else e.push(i)}),new Ms(e)}class Yn{constructor(e,t,r,i,s,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=s,this.documentState=c}static newInvalidDocument(e){return new Yn(e,0,jt.min(),jt.min(),wi.empty(),0)}static newFoundDocument(e,t,r){return new Yn(e,1,t,jt.min(),r,0)}static newNoDocument(e,t){return new Yn(e,2,t,jt.min(),wi.empty(),0)}static newUnknownDocument(e,t){return new Yn(e,3,t,jt.min(),wi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=jt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class sA{constructor(e,t=null,r=[],i=[],s=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=c,this.endAt=h,this.ut=null}}function oA(n,e=null,t=[],r=[],i=null,s=null,c=null){return new sA(n,e,t,r,i,s,c)}function Bu(n){const e=dt(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+ld(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),gg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ld(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ld(r)).join(",")),e.ut=t}return e.ut}function vg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!cA(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Na(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!dA(n.startAt,e.startAt)&&dA(n.endAt,e.endAt)}function qh(n){return at.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function U_(n,e){return n.filters.filter(t=>t instanceof Ei&&t.field.isEqual(e))}function q0(n,e,t){let r=k_,i=!0;for(const s of U_(n,e)){let c=k_,h=!0;switch(s.op){case"<":case"<=":c=rA(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,h=!1;break;case"!=":case"not-in":c=k_}B_({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const c=t.position[s];B_({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function V_(n,e,t){let r=Lu,i=!0;for(const s of U_(n,e)){let c=Lu,h=!0;switch(s.op){case">=":case">":c=iA(s.value),h=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,h=!1;break;case"!=":case"not-in":c=Lu}hI({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const c=t.position[s];hI({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Ei extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new fI(e,t,r):"array-contains"===t?new aA(e,r):"in"===t?new lA(e,r):"not-in"===t?new uA(e,r):"array-contains-any"===t?new _I(e,r):new Ei(e,t,r)}static ct(e,t,r){return"in"===t?new pI(e,r):new gI(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Il(t,this.value)):null!==t&&ad(this.value)===ad(t)&&this.at(Il(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Tt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class fI extends Ei{constructor(e,t,r){super(e,t,r),this.key=at.fromName(r.referenceValue)}matches(e){const t=at.comparator(e.key,this.key);return this.at(t)}}class pI extends Ei{constructor(e,t){super(e,"in",t),this.keys=mI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class gI extends Ei{constructor(e,t){super(e,"not-in",t),this.keys=mI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function mI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>at.fromName(r.referenceValue))}class aA extends Ei{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yg(t)&&_g(t.arrayValue,this.value)}}class lA extends Ei{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_g(this.value.arrayValue,t)}}class uA extends Ei{constructor(e,t){super(e,"not-in",t)}matches(e){if(_g(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_g(this.value.arrayValue,t)}}class _I extends Ei{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>_g(this.value.arrayValue,r))}}class cd{constructor(e,t){this.position=e,this.inclusive=t}}class dd{constructor(e,t="asc"){this.field=e,this.dir=t}}function cA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function yI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],c=n.position[i];if(r=s.field.isKeyField()?at.comparator(at.fromName(c.referenceValue),t.key):Il(c,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function dA(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Na(n.position[t],e.position[t]))return!1;return!0}class Cl{constructor(e,t=null,r=[],i=[],s=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=c,this.startAt=h,this.endAt=p,this.lt=null,this.ft=null}}function vI(n,e,t,r,i,s,c,h){return new Cl(n,e,t,r,i,s,c,h)}function Kh(n){return new Cl(n)}function G_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function j_(n){for(const e of n.filters)if(e.ht())return e.field;return null}function K0(n){return null!==n.collectionGroup}function Zh(n){const e=dt(n);if(null===e.lt){e.lt=[];const t=j_(e),r=G_(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new dd(t)),e.lt.push(new dd(lr.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.lt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new dd(lr.keyField(),s))}}}return e.lt}function To(n){const e=dt(n);if(!e.ft)if("F"===e.limitType)e.ft=oA(e.path,e.collectionGroup,Zh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Zh(e))t.push(new dd(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new cd(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new cd(e.startAt.position,e.startAt.inclusive):null;e.ft=oA(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.ft}function wI(n,e,t){return new Cl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function bg(n,e){return vg(To(n),To(e))&&n.limitType===e.limitType}function EI(n){return`${Bu(To(n))}|lt:${n.limitType}`}function hd(n){return`Query(target=${function z0(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${ld(r.value)}`;var r}).join(", ")}]`),gg(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>ld(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>ld(t)).join(",")),`Target(${e})`}(To(n))}; limitType=${n.limitType})`}function H_(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):at.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,c){const h=yI(i,s,c);return i.inclusive?h<=0:h<0}(t.startAt,Zh(t),r)||t.endAt&&!function(i,s,c){const h=yI(i,s,c);return i.inclusive?h>=0:h>0}(t.endAt,Zh(t),r)));var t,r}function Z0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Y0(n){return(e,t)=>{let r=!1;for(const i of Zh(n)){const s=DI(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function DI(n,e,t){const r=n.field.isKeyField()?at.comparator(e.key,t.key):function(i,s,c){const h=s.data.field(i),p=c.data.field(i);return null!==h&&null!==p?Il(h,p):Tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Tt()}}function J0(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mg(e)?"-0":e}}function Q0(n){return{integerValue:""+n}}function II(n,e){return cI(e)?Q0(e):J0(n,e)}class X0{constructor(){this._=void 0}}function TI(n,e,t){return n instanceof Yh?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof fd?Jh(n,e):n instanceof pd?$_(n,e):function(r,i){const s=CI(r,i),c=SI(s)+SI(r._t);return P_(s)&&P_(r._t)?Q0(c):J0(r.wt,c)}(n,e)}function hA(n,e,t){return n instanceof fd?Jh(n,e):n instanceof pd?$_(n,e):t}function CI(n,e){return n instanceof us?P_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Yh extends X0{}class fd extends X0{constructor(e){super(),this.elements=e}}function Jh(n,e){const t=W_(e);for(const r of n.elements)t.some(i=>Na(i,r))||t.push(r);return{arrayValue:{values:t}}}class pd extends X0{constructor(e){super(),this.elements=e}}function $_(n,e){let t=W_(e);for(const r of n.elements)t=t.filter(i=>!Na(i,r));return{arrayValue:{values:t}}}class us extends X0{constructor(e,t){super(),this.wt=e,this._t=t}}function SI(n){return br(n.integerValue||n.doubleValue)}function W_(n){return yg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Sl{constructor(e,t){this.field=e,this.transform=t}}class pA{constructor(e,t){this.version=e,this.transformResults=t}}class wr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wr}static exists(e){return new wr(void 0,e)}static updateTime(e){return new wr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gd(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class md{}function AI(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Uu(n.key,wr.none()):new _d(n.key,n.data,wr.none());{const t=n.data,r=wi.empty();let i=new $n(lr.comparator);for(let s of e.fields)if(!i.has(s)){let c=t.field(s);null===c&&s.length>1&&(s=s.popLast(),c=t.field(s)),null===c?r.delete(s):r.set(s,c),i=i.add(s)}return new Yo(n.key,r,new Ms(i.toArray()),wr.none())}}function gA(n,e,t){n instanceof _d?function(r,i,s){const c=r.value.clone(),h=eb(r.fieldTransforms,i,s.transformResults);c.setAll(h),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Yo?function(r,i,s){if(!gd(r.precondition,i))return void i.convertToUnknownDocument(s.version);const c=eb(r.fieldTransforms,i,s.transformResults),h=i.data;h.setAll(q_(r)),h.setAll(c),i.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Qh(n,e,t,r){return n instanceof _d?function(i,s,c,h){if(!gd(i.precondition,s))return c;const p=i.value.clone(),_=K_(i.fieldTransforms,h,s);return p.setAll(_),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof Yo?function(i,s,c,h){if(!gd(i.precondition,s))return c;const p=K_(i.fieldTransforms,h,s),_=s.data;return _.setAll(q_(i)),_.setAll(p),s.convertToFoundDocument(s.version,_).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(w=>w.field))}(n,e,t,r):(c=t,gd(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c);var s,c}function NI(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=CI(r.transform,i||null);null!=s&&(null===t&&(t=wi.empty()),t.set(r.field,s))}return t||null}function z_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Gh(t,r,(i,s)=>function fA(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof fd&&r instanceof fd||t instanceof pd&&r instanceof pd?Gh(t.elements,r.elements,Na):t instanceof us&&r instanceof us?Na(t._t,r._t):t instanceof Yh&&r instanceof Yh);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class _d extends md{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Yo extends md{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function q_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function eb(n,e,t){const r=new Map;Lt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],c=s.transform,h=e.data.field(s.field);r.set(s.field,hA(c,h,t[i]))}return r}function K_(n,e,t){const r=new Map;for(const i of n){const s=i.transform,c=t.data.field(i.field);r.set(i.field,TI(s,c,e))}return r}class Uu extends md{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tb extends md{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class mA{constructor(e){this.count=e}}var Qr,Sn;function nb(n){switch(n){default:return Tt();case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0}}function Z_(n){if(void 0===n)return vt("GRPC error has no .code"),ye.UNKNOWN;switch(n){case Qr.OK:return ye.OK;case Qr.CANCELLED:return ye.CANCELLED;case Qr.UNKNOWN:return ye.UNKNOWN;case Qr.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case Qr.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case Qr.INTERNAL:return ye.INTERNAL;case Qr.UNAVAILABLE:return ye.UNAVAILABLE;case Qr.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case Qr.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case Qr.NOT_FOUND:return ye.NOT_FOUND;case Qr.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case Qr.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case Qr.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case Qr.ABORTED:return ye.ABORTED;case Qr.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case Qr.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case Qr.DATA_LOSS:return ye.DATA_LOSS;default:return Tt()}}(Sn=Qr||(Qr={}))[Sn.OK=0]="OK",Sn[Sn.CANCELLED=1]="CANCELLED",Sn[Sn.UNKNOWN=2]="UNKNOWN",Sn[Sn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Sn[Sn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Sn[Sn.NOT_FOUND=5]="NOT_FOUND",Sn[Sn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Sn[Sn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Sn[Sn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Sn[Sn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Sn[Sn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Sn[Sn.ABORTED=10]="ABORTED",Sn[Sn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Sn[Sn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Sn[Sn.INTERNAL=13]="INTERNAL",Sn[Sn.UNAVAILABLE=14]="UNAVAILABLE",Sn[Sn.DATA_LOSS=15]="DATA_LOSS";class Al{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){id(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return lI(this.inner)}size(){return this.innerSize}}const RI=new er(at.comparator);function cs(){return RI}const rb=new er(at.comparator);function wg(...n){let e=rb;for(const t of n)e=e.insert(t.key,t);return e}function ib(n){let e=rb;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Jo(){return Xh()}function OI(){return Xh()}function Xh(){return new Al(n=>n.toString(),(n,e)=>n.isEqual(e))}const MI=new er(at.comparator),ds=new $n(at.comparator);function Yt(...n){let e=ds;for(const t of n)e=e.add(t);return e}const _A=new $n(sn);function Y_(){return _A}class J_{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Q_.createSynthesizedTargetChangeForCurrentChange(e,t)),new J_(jt.min(),r,Y_(),cs(),Yt())}}class Q_{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Q_(Lr.EMPTY_BYTE_STRING,t,Yt(),Yt(),Yt())}}class Eg{constructor(e,t,r,i){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=i}}class X_{constructor(e,t){this.targetId=e,this.It=t}}class ef{constructor(e,t,r=Lr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class xI{constructor(){this.Tt=0,this.Et=ob(),this.At=Lr.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Yt(),t=Yt(),r=Yt();return this.Et.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Tt()}}),new Q_(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=ob()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class sb{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=cs(),this.Bt=kI(),this.Lt=new $n(sn)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:Tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,i)=>{this.jt(i)&&t(i)})}zt(e){const t=e.targetId,r=e.It.count,i=this.Ht(t);if(i){const s=i.target;if(qh(s))if(0===r){const c=new at(s.path);this.Kt(t,c,Yn.newNoDocument(c,jt.min()))}else Lt(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((s,c)=>{const h=this.Ht(c);if(h){if(s.current&&qh(h.target)){const p=new at(h.target.path);null!==this.$t.get(p)||this.Xt(c,p)||this.Kt(c,p,Yn.newNoDocument(p,e))}s.vt&&(t.set(c,s.St()),s.Dt())}});let r=Yt();this.Bt.forEach((s,c)=>{let h=!0;c.forEachWhile(p=>{const _=this.Ht(p);return!_||2===_.purpose||(h=!1,!1)}),h&&(r=r.add(s))}),this.$t.forEach((s,c)=>c.setReadTime(e));const i=new J_(e,t,this.Lt,this.$t,r);return this.$t=cs(),this.Bt=kI(),this.Lt=new $n(sn),i}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,t)?i.Ct(t,1):i.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new xI,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new $n(sn),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Je("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new xI),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function kI(){return new er(at.comparator)}function ob(){return new er(at.comparator)}const yA={asc:"ASCENDING",desc:"DESCENDING"},vA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class bA{constructor(e,t){this.databaseId=e,this.dt=t}}function yd(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ab(n,e){return n.dt?e.toBase64():e.toUint8Array()}function PI(n,e){return yd(n,e.toTimestamp())}function Br(n){return Lt(!!n),jt.fromTimestamp(function(e){const t=Dl(e);return new Zn(t.seconds,t.nanos)}(n))}function Dg(n,e){return(t=n,new wn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function wA(n){const e=wn.fromString(n);return Lt(fb(e)),e}function tf(n,e){return Dg(n.databaseId,e.path)}function Ra(n,e){const t=wA(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new at(lb(t))}function ey(n,e){return Dg(n.databaseId,e)}function vd(n){const e=wA(n);return 4===e.length?wn.emptyPath():lb(e)}function Ig(n){return new wn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lb(n){return Lt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function ty(n,e,t){return{name:tf(n,e),fields:t.value.mapValue.fields}}function EA(n,e,t){const r=Ra(n,e.name),i=Br(e.updateTime),s=new wi({mapValue:{fields:e.fields}}),c=Yn.newFoundDocument(r,i,s);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Tg(n,e){let t;if(e instanceof _d)t={update:ty(n,e.key,e.value)};else if(e instanceof Uu)t={delete:tf(n,e.key)};else if(e instanceof Yo)t={update:ty(n,e.key,e.data),updateMask:VI(e.fieldMask)};else{if(!(e instanceof tb))return Tt();t={verify:tf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const c=s.transform;if(c instanceof Yh)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof fd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof pd)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof us)return{fieldPath:s.field.canonicalString(),increment:c._t};throw Tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:PI(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Tt()),t;var i}function ub(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?wr.updateTime(Br(i.updateTime)):void 0!==i.exists?wr.exists(i.exists):wr.none():wr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,c){let h=null;"setToServerValue"in c?(Lt("REQUEST_TIME"===c.setToServerValue),h=new Yh):"appendMissingElements"in c?h=new fd(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new pd(c.removeAllFromArray.values||[]):"increment"in c?h=new us(s,c.increment):Tt();const p=lr.fromServerFormat(c.fieldPath);return new Sl(p,h)}(n,i)):[];var i;if(e.update){const i=Ra(n,e.update.name),s=new wi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Ms((e.updateMask.fieldPaths||[]).map(_=>lr.fromServerFormat(_)));return new Yo(i,s,c,t,r)}return new _d(i,s,t,r)}if(e.delete){const i=Ra(n,e.delete);return new Uu(i,t)}if(e.verify){const i=Ra(n,e.verify);return new tb(i,t)}return Tt()}function cb(n,e){return{documents:[ey(n,e.path)]}}function db(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=ey(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=ey(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const _=p.map(w=>function(S){if("=="===S.op){if(F_(S.value))return{unaryFilter:{field:bd(S.field),op:"IS_NAN"}};if(dI(S.value))return{unaryFilter:{field:bd(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(F_(S.value))return{unaryFilter:{field:bd(S.field),op:"IS_NOT_NAN"}};if(dI(S.value))return{unaryFilter:{field:bd(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bd(S.field),op:CA(S.op),value:S.value}}}(w));return 1===_.length?_[0]:{compositeFilter:{op:"AND",filters:_}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(p){if(0!==p.length)return p.map(_=>{return{field:bd((w=_).field),direction:TA(w.dir)};var w})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const c=(_=e.limit,n.dt||gg(_)?_:{value:_});var _,h,p;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function FI(n){let e=vd(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Lt(1===r);const w=t.from[0];w.allDescendants?i=w.collectionId:e=e.child(w.collectionId)}let s=[];t.where&&(s=hb(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(w=>{return new dd(nf((S=w).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(w){let S;return S="object"==typeof w?w.value:w,gg(S)?null:S}(t.limit));let p=null;var w;t.startAt&&(p=new cd((w=t.startAt).values||[],!!w.before));let _=null;return t.endAt&&(_=function(w){return new cd(w.values||[],!w.before)}(t.endAt)),vI(e,i,c,s,h,"F",p,_)}function hb(n){return n?void 0!==n.unaryFilter?[UI(n)]:void 0!==n.fieldFilter?[BI(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>hb(e)).reduce((e,t)=>e.concat(t)):Tt():[]}function TA(n){return yA[n]}function CA(n){return vA[n]}function bd(n){return{fieldPath:n.canonicalString()}}function nf(n){return lr.fromServerFormat(n.fieldPath)}function BI(n){return Ei.create(nf(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Tt()}}(n.fieldFilter.op),n.fieldFilter.value)}function UI(n){switch(n.unaryFilter.op){case"IS_NAN":const e=nf(n.unaryFilter.field);return Ei.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=nf(n.unaryFilter.field);return Ei.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=nf(n.unaryFilter.field);return Ei.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=nf(n.unaryFilter.field);return Ei.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Tt()}}function VI(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function fb(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function hs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=AA(e)),e=SA(n.get(t),e);return AA(e)}function SA(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function AA(n){return n+"\x01\x01"}function Qo(n){const e=n.length;if(Lt(e>=2),2===e)return Lt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),wn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const c=n.indexOf("\x01",s);switch((c<0||c>t)&&Tt(),n.charAt(c+1)){case"\x01":const h=n.substring(s,c);let p;0===i.length?p=h:(i+=h,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(s,c),i+="\0";break;case"\x11":i+=n.substring(s,c+1);break;default:Tt()}s=c+2}return new wn(r)}const NA=["userId","batchId"];function pb(n,e){return[n,hs(e)]}function RA(n,e,t){return[n,hs(e),t]}const Ex={},Dx=["prefixPath","collectionGroup","readTime","documentId"],Ix=["prefixPath","collectionGroup","documentId"],Tx=["collectionGroup","readTime","prefixPath","documentId"],Cx=["canonicalId","targetId"],ny=["targetId","path"],Sx=["path","targetId"],GI=["collectionId","parent"],ry=["indexId","uid"],jI=["uid","sequenceNumber"],HI=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ax=["indexId","uid","orderedDocumentKey"],gb=["userId","collectionPath","documentId"],$I=["userId","collectionPath","largestBatchId"],OA=["userId","collectionGroup","largestBatchId"],MA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Nx=[...MA,"documentOverlays"],WI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],zI=WI,iy=[...zI,"indexConfiguration","indexState","indexEntries"];class mb extends J1{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Mi(n,e){const t=dt(n);return Rs.N(t.ee,e)}class qI{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&gA(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Qh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Qh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=OI();return this.mutations.forEach(i=>{const s=e.get(i.key),c=s.overlayedDocument;let h=this.applyToLocalView(c,s.mutatedFields);h=t.has(i.key)?null:h;const p=AI(c,h);null!==p&&r.set(i.key,p),c.isValidDocument()||c.convertToNoDocument(jt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yt())}isEqual(e){return this.batchId===e.batchId&&Gh(this.mutations,e.mutations,(t,r)=>z_(t,r))&&Gh(this.baseMutations,e.baseMutations,(t,r)=>z_(t,r))}}class KI{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Lt(e.mutations.length===r.length);let i=MI;const s=e.mutations;for(let c=0;c<s.length;c++)i=i.insert(s[c].key,r[c].version);return new KI(e,t,r,i)}}class _b{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Vu{constructor(e,t,r,i,s=jt.min(),c=jt.min(),h=Lr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(e){return new Vu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Vu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Vu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ZI{constructor(e){this.ne=e}}function YI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Cg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:tf(i=n.ne,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:yd(i,s.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Gu(e.version)};else{if(!e.isUnknownDocument())return Tt();r.unknownDocument={path:t.path.toArray(),version:Gu(e.version)}}var i,s;return r}function Cg(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Gu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function rf(n){const e=new Zn(n.seconds,n.nanoseconds);return jt.fromTimestamp(e)}function xi(n,e){const t=(e.baseMutations||[]).map(s=>ub(n.ne,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>ub(n.ne,s)),i=Zn.fromMillis(e.localWriteTimeMs);return new qI(e.batchId,i,t,r)}function Sg(n){const e=rf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?rf(n.lastLimboFreeSnapshotVersion):jt.min();let r;var i;return void 0!==n.query.documents?(Lt(1===(i=n.query).documents.length),r=To(Kh(vd(i.documents[0])))):r=To(FI(n.query)),new Vu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Lr.fromBase64String(n.resumeToken))}function sy(n,e){const t=Gu(e.snapshotVersion),r=Gu(e.lastLimboFreeSnapshotVersion);let i;i=qh(e.target)?cb(n.ne,e.target):db(n.ne,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Bu(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function yb(n){const e=FI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?wI(e,e.limit,"L"):e}function JI(n,e){return new _b(e.largestBatchId,ub(n.ne,e.overlayMutation))}function Ys(n,e){const t=e.path.lastSegment();return[n,hs(e.path.popLast()),t]}function QI(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Gu(r.readTime),documentKey:hs(r.documentKey.path),largestBatchId:r.largestBatchId}}class vb{getBundleMetadata(e,t){return XI(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:rf(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return XI(e).put({bundleId:(r=t).id,createTime:Gu(Br(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return eT(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:yb(i.bundledQuery),readTime:rf(i.readTime)};var i})}saveNamedQuery(e,t){return eT(e).put({name:(r=t).name,readTime:Gu(Br(r.readTime)),bundledQuery:r.bundledQuery});var r}}function XI(n){return Mi(n,"bundles")}function eT(n){return Mi(n,"namedQueries")}class sf{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new sf(e,t.uid||"")}getOverlay(e,t){return af(e).get(Ys(this.userId,t)).next(r=>r?JI(this.wt,r):null)}getOverlays(e,t){const r=Jo();return ge.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,c)=>{const h=new _b(t,c);i.push(this.ie(e,h))}),ge.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(hs(c.getCollectionPath())));const s=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);s.push(af(e).W("collectionPathOverlayIndex",h))}),ge.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Jo(),s=hs(t),c=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return af(e).K("collectionPathOverlayIndex",c).next(h=>{for(const p of h){const _=JI(this.wt,p);i.set(_.getKey(),_)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Jo();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return af(e).J({index:"collectionGroupOverlayIndex",range:h},(p,_,w)=>{const S=JI(this.wt,_);s.size()<i||S.largestBatchId===c?(s.set(S.getKey(),S),c=S.largestBatchId):w.done()}).next(()=>s)}ie(e,t){return af(e).put(function(r,i,s){const[c,h,p]=Ys(i,s.mutation.key);return{userId:i,collectionPath:h,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Tg(r.ne,s.mutation)}}(this.wt,this.userId,t))}}function af(n){return Mi(n,"documentOverlays")}class ju{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(br(e.integerValue));else if("doubleValue"in e){const r=br(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),mg(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(sd(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?L_(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):Tt()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const i of Object.keys(r))this.le(i,t),this.oe(r[i],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const i of r)this.oe(i,t)}_e(e,t){this.ce(t,37),at.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function xA(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function bb(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=xA(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}ju.ye=new ju;class tT{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=t.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(e){const t=this.Ve(e),r=bb(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}De(e){const t=this.Ve(e),r=bb(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class kA{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class nT{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class Ag{constructor(){this.Me=new tT,this.Fe=new kA(this.Me),this.$e=new nT(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class Nl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Nl(this.indexId,this.documentKey,this.arrayValue,r)}}function fs(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Rl(n.arrayValue,e.arrayValue),0!==t?t:(t=Rl(n.directionalValue,e.directionalValue),0!==t?t:at.comparator(n.documentKey,e.documentKey)))}function Rl(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class rT{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=L0(e);if(void 0!==t&&!this.Qe(t))return!1;const r=td(e);let i=0,s=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ke){const c=r[i];if(!this.je(this.Ke,c)||!this.We(this.Ue[s++],c))return!1;++i}for(;i<r.length;++i)if(s>=this.Ue.length||!this.We(this.Ue[s++],r[i]))return!1;return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class wb{constructor(){this.ze=new oy}addToCollectionParentIndex(e,t){return this.ze.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t){return ge.resolve(null)}getIndexType(e,t){return ge.resolve(0)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,t){return ge.resolve(Ns.min())}getMinOffsetFromCollectionGroup(e,t){return ge.resolve(Ns.min())}updateCollectionGroup(e,t,r){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class oy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new $n(wn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $n(wn.comparator)).toArray()}}const ay=new Uint8Array(0);class Ox{constructor(e,t){this.user=e,this.databaseId=t,this.He=new oy,this.Je=new Al(r=>Bu(r),(r,i)=>vg(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const s={collectionId:r,parent:hs(i)};return iT(e).put(s)}return ge.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[rI(t),""],!1,!0);return iT(e).K(i).next(s=>{for(const c of s){if(c.collectionId!==t)break;r.push(Qo(c.parent))}return r})}addFieldIndex(e,t){const r=ly(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var c;delete i.indexId;const s=r.add(i);if(t.indexState){const c=Rg(e);return s.next(h=>{c.put(QI(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=ly(e),i=Rg(e),s=Ng(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Ng(e);let i=!0;const s=new Map;return ge.forEach(this.Ye(t),c=>this.Xe(e,c).next(h=>{i&&(i=!!h),s.set(c,h)})).next(()=>{if(i){let c=Yt();const h=[];return ge.forEach(s,(p,_)=>{var w;Je("IndexedDbIndexManager",`Using index ${w=p,`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(st=>`${st.fieldPath}:${st.kind}`).join(",")}`} to execute ${Bu(t)}`);const S=function(st,Qe){const ut=L0(Qe);if(void 0===ut)return null;for(const bt of U_(st,ut.fieldPath))switch(bt.op){case"array-contains-any":return bt.value.arrayValue.values||[];case"array-contains":return[bt.value]}return null}(_,p),N=function(st,Qe){const ut=new Map;for(const bt of td(Qe))for(const en of U_(st,bt.fieldPath))switch(en.op){case"==":case"in":ut.set(bt.fieldPath.canonicalString(),en.value);break;case"not-in":case"!=":return ut.set(bt.fieldPath.canonicalString(),en.value),Array.from(ut.values())}return null}(_,p),k=function(st,Qe){const ut=[];let bt=!0;for(const en of td(Qe)){const hn=0===en.kind?q0(st,en.fieldPath,st.startAt):V_(st,en.fieldPath,st.startAt);ut.push(hn.value),bt&&(bt=hn.inclusive)}return new cd(ut,bt)}(_,p),j=function(st,Qe){const ut=[];let bt=!0;for(const en of td(Qe)){const hn=0===en.kind?V_(st,en.fieldPath,st.endAt):q0(st,en.fieldPath,st.endAt);ut.push(hn.value),bt&&(bt=hn.inclusive)}return new cd(ut,bt)}(_,p),te=this.Ze(p,_,k),oe=this.Ze(p,_,j),Ke=this.tn(p,_,N),Ze=this.en(p.indexId,S,te,k.inclusive,oe,j.inclusive,Ke);return ge.forEach(Ze,st=>r.j(st,t.limit).next(Qe=>{Qe.forEach(ut=>{const bt=at.fromSegments(ut.documentKey);c.has(bt)||(c=c.add(bt),h.push(bt))})}))}).next(()=>h)}return ge.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,i,s,c,h){const p=(null!=t?t.length:1)*Math.max(r.length,s.length),_=p/(null!=t?t.length:1),w=[];for(let S=0;S<p;++S){const N=t?this.nn(t[S/_]):ay,k=this.sn(e,N,r[S%_],i),j=this.rn(e,N,s[S%_],c),te=h.map(oe=>this.sn(e,N,oe,!0));w.push(...this.createRange(k,j,te))}return w}sn(e,t,r,i){const s=new Nl(e,at.empty(),t,r);return i?s:s.Le()}rn(e,t,r,i){const s=new Nl(e,at.empty(),t,r);return i?s.Le():s}Xe(e,t){const r=new rT(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let c=null;for(const h of s)r.Ge(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;return ge.forEach(this.Ye(t),i=>this.Xe(e,i).next(s=>{s?0!==r&&s.fields.length<function(c){let h=new $n(lr.comparator),p=!1;for(const _ of c.filters){const w=_;w.field.isKeyField()||("array-contains"===w.op||"array-contains-any"===w.op?p=!0:h=h.add(w.field))}for(const _ of c.orderBy)_.field.isKeyField()||(h=h.add(_.field));return h.size+(p?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new Ag;for(const i of td(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const c=r.Be(i.kind);ju.ye.re(s,c)}return r.Oe()}nn(e){const t=new Ag;return ju.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const r=new Ag;return ju.ye.re(Tl(this.databaseId,t),r.Be(function(i){const s=td(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Oe()}tn(e,t,r){if(null===r)return[];let i=[];i.push(new Ag);let s=0;for(const c of td(e)){const h=r[s++];for(const p of i)if(this.cn(t,c.fieldPath)&&yg(h))i=this.an(i,c,h);else{const _=p.Be(c.kind);ju.ye.re(h,_)}}return this.hn(i)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Oe();return t}an(e,t,r){const i=[...e],s=[];for(const c of r.arrayValue.values||[])for(const h of i){const p=new Ag;p.seed(h.Oe()),ju.ye.re(c,p.Be(t.kind)),s.push(p)}return s}cn(e,t){return!!e.filters.find(r=>r instanceof Ei&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=ly(e),i=Rg(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(s=>{const c=[];return ge.forEach(s,h=>i.get([h.indexId,this.uid]).next(p=>{c.push(function(_,w){const S=w?new Hh(w.sequenceNumber,new Ns(rf(w.readTime),new at(Qo(w.documentKey)),w.largestBatchId)):Hh.empty(),N=_.fields.map(([k,j])=>new dg(lr.fromServerFormat(k),j));return new M_(_.indexId,_.collectionGroup,N,S)}(h,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:sn(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=ly(e),s=Rg(e);return this.ln(e).next(c=>i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ge.forEach(h,p=>s.put(QI(p.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ge.forEach(t,(i,s)=>{const c=r.get(i.collectionGroup);return(c?ge.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ge.forEach(h,p=>this.fn(e,i,p).next(_=>{const w=this.dn(s,p);return _.isEqual(w)?ge.resolve():this._n(e,s,p,_,w)}))))})}wn(e,t,r,i){return Ng(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,i){return Ng(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const i=Ng(e);let s=new $n(fs);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(c,h)=>{s=s.add(new Nl(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>s)}dn(e,t){let r=new $n(fs);const i=this.on(t,e);if(null==i)return r;const s=L0(t);if(null!=s){const c=e.data.field(s.fieldPath);if(yg(c))for(const h of c.arrayValue.values||[])r=r.add(new Nl(t.indexId,e.key,this.nn(h),i))}else r=r.add(new Nl(t.indexId,e.key,ay,i));return r}_n(e,t,r,i,s){Je("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(h,p,_,w,S){const N=h.getIterator(),k=p.getIterator();let j=$h(N),te=$h(k);for(;j||te;){let oe=!1,Ke=!1;if(j&&te){const Ze=_(j,te);Ze<0?Ke=!0:Ze>0&&(oe=!0)}else null!=j?Ke=!0:oe=!0;oe?(w(te),te=$h(k)):Ke?(S(j),j=$h(N)):(j=$h(N),te=$h(k))}}(i,s,fs,h=>{c.push(this.wn(e,t,r,h))},h=>{c.push(this.mn(e,t,r,h))}),ge.waitFor(c)}ln(e){let t=1;return Rg(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>fs(c,h)).filter((c,h,p)=>!h||0!==fs(c,p[h-1]));const i=[];i.push(e);for(const c of r){const h=fs(c,e),p=fs(c,t);if(0===h)i[0]=e.Le();else if(h>0&&p<0)i.push(c),i.push(c.Le());else if(p>0)break}i.push(t);const s=[];for(let c=0;c<i.length;c+=2)s.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,ay,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,ay,[]]));return s}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Eb)}getMinOffset(e,t){return ge.mapArray(this.Ye(t),r=>this.Xe(e,r).next(i=>i||Tt())).next(Eb)}}function iT(n){return Mi(n,"collectionParents")}function Ng(n){return Mi(n,"indexEntries")}function ly(n){return Mi(n,"indexConfiguration")}function Rg(n){return Mi(n,"indexState")}function Eb(n){Lt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;U0(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ns(e.readTime,e.documentKey,t)}const PA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ps{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ps(e,ps.DEFAULT_COLLECTION_PERCENTILE,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function sT(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],c=IDBKeyRange.only(t.batchId);let h=0;const p=r.J({range:c},(w,S,N)=>(h++,N.delete()));s.push(p.next(()=>{Lt(1===h)}));const _=[];for(const w of t.mutations){const S=RA(e,w.key.path,t.batchId);s.push(i.delete(S)),_.push(w.key)}return ge.waitFor(s).next(()=>_)}function Og(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Tt();e=n.noDocument}return JSON.stringify(e).length}ps.DEFAULT_COLLECTION_PERCENTILE=10,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ps.DEFAULT=new ps(41943040,ps.DEFAULT_COLLECTION_PERCENTILE,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ps.DISABLED=new ps(-1,0,0);class Db{constructor(e,t,r,i){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(e,t,r,i){Lt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new Db(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ol(e).J({index:"userMutationsIndex",range:r},(i,s,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=wd(e),c=Ol(e);return c.add({}).next(h=>{Lt("number"==typeof h);const p=new qI(h,t,r,i),_=function(N,k,j){const te=j.baseMutations.map(Ke=>Tg(N.ne,Ke)),oe=j.mutations.map(Ke=>Tg(N.ne,Ke));return{userId:k,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:te,mutations:oe}}(this.wt,this.userId,p),w=[];let S=new $n((N,k)=>sn(N.canonicalString(),k.canonicalString()));for(const N of i){const k=RA(this.userId,N.key.path,h);S=S.add(N.key.path.popLast()),w.push(c.put(_)),w.push(s.put(k,Ex))}return S.forEach(N=>{w.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.gn[h]=p.keys()}),ge.waitFor(w).next(()=>p)})}lookupMutationBatch(e,t){return Ol(e).get(t).next(r=>r?(Lt(r.userId===this.userId),xi(this.wt,r)):null)}yn(e,t){return this.gn[t]?ge.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.gn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ol(e).J({index:"userMutationsIndex",range:i},(c,h,p)=>{h.userId===this.userId&&(Lt(h.batchId>=r),s=xi(this.wt,h)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ol(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,c)=>{r=s.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ol(e).K("userMutationsIndex",t).next(r=>r.map(i=>xi(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=pb(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return wd(e).J({range:i},(c,h,p)=>{const[_,w,S]=c,N=Qo(w);if(_===this.userId&&t.path.isEqual(N))return Ol(e).get(S).next(k=>{if(!k)throw Tt();Lt(k.userId===this.userId),s.push(xi(this.wt,k))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $n(sn);const i=[];return t.forEach(s=>{const c=pb(this.userId,s.path),h=IDBKeyRange.lowerBound(c),p=wd(e).J({range:h},(_,w,S)=>{const[N,k,j]=_,te=Qo(k);N===this.userId&&s.path.isEqual(te)?r=r.add(j):S.done()});i.push(p)}),ge.waitFor(i).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=pb(this.userId,r),c=IDBKeyRange.lowerBound(s);let h=new $n(sn);return wd(e).J({range:c},(p,_,w)=>{const[S,N,k]=p,j=Qo(N);S===this.userId&&r.isPrefixOf(j)?j.length===i&&(h=h.add(k)):w.done()}).next(()=>this.pn(e,h))}pn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Ol(e).get(s).next(c=>{if(null===c)throw Tt();Lt(c.userId===this.userId),r.push(xi(this.wt,c))}))}),ge.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return sT(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),ge.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ge.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return wd(e).J({range:r},(s,c,h)=>{if(s[0]===this.userId){const p=Qo(s[1]);i.push(p)}else h.done()}).next(()=>{Lt(0===i.length)})})}containsKey(e,t){return uy(e,this.userId,t)}Tn(e){return Ib(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function uy(n,e,t){const r=pb(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let c=!1;return wd(n).J({range:s,H:!0},(h,p,_)=>{const[w,S,N]=h;w===e&&S===i&&(c=!0),_.done()}).next(()=>c)}function Ol(n){return Mi(n,"mutations")}function wd(n){return Mi(n,"documentMutations")}function Ib(n){return Mi(n,"mutationQueues")}class Hu{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Hu(0)}static Rn(){return new Hu(-1)}}class oT{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new Hu(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>jt.fromTimestamp(new Zn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Pn(e,i)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ml(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(Lt(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Ml(e).J((c,h)=>{const p=Sg(h);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,s.push(this.removeTargetData(e,p)))}).next(()=>ge.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Ml(e).J((r,i)=>{const s=Sg(i);t(s)})}bn(e){return Mg(e).get("targetGlobalKey").next(t=>(Lt(null!==t),t))}Pn(e,t){return Mg(e).put("targetGlobalKey",t)}vn(e,t){return Ml(e).put(sy(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Bu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Ml(e).J({range:i,index:"queryTargetsIndex"},(c,h,p)=>{const _=Sg(h);vg(t,_.target)&&(s=_,p.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=xl(e);return t.forEach(c=>{const h=hs(c.path);i.push(s.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),ge.waitFor(i)}removeMatchingKeys(e,t,r){const i=xl(e);return ge.forEach(t,s=>{const c=hs(s.path);return ge.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=xl(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=xl(e);let s=Yt();return i.J({range:r,H:!0},(c,h,p)=>{const _=Qo(c[1]),w=new at(_);s=s.add(w)}).next(()=>s)}containsKey(e,t){const r=hs(t.path),i=IDBKeyRange.bound([r],[rI(r)],!1,!0);let s=0;return xl(e).J({index:"documentTargetsIndex",H:!0,range:i},([c,h],p,_)=>{0!==c&&(s++,_.done())}).next(()=>s>0)}te(e,t){return Ml(e).get(t).next(r=>r?Sg(r):null)}}function Ml(n){return Mi(n,"targets")}function Mg(n){return Mi(n,"targetGlobal")}function xl(n){return Mi(n,"targetDocuments")}function aT([n,e],[t,r]){const i=sn(n,t);return 0===i?sn(e,r):i}class FA{constructor(e){this.Sn=e,this.buffer=new $n(aT),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();aT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Mx{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Je("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,De.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){El(r)?Je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield nd(r)}yield t.kn(3e5)}))}}class xx{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ge.resolve(Os.ot);const r=new FA(t);return this.On.forEachTarget(e,i=>r.xn(i.sequenceNumber)).next(()=>this.On.Fn(e,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.On.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Je("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(PA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PA):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let r,i,s,c,h,p,_;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,c=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(s=S,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(_=Date.now(),O_()<=Zs.in.DEBUG&&Je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-w}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${s} targets in `+(p-h)+`ms\n\tRemoved ${S} documents in `+(_-p)+`ms\nTotal Duration: ${_-w}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:S})))}}class kx{constructor(e,t){this.db=e,this.garbageCollector=new xx(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,i)=>t(i))}addReference(e,t,r){return xg(e,r)}removeReference(e,t,r){return xg(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return xg(e,t)}Un(e,t){return function(r,i){let s=!1;return Ib(r).Y(c=>uy(r,c,i).next(h=>(h&&(s=!0),ge.resolve(!h)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Ln(e,(c,h)=>{if(h<=t){const p=this.Un(e,c).next(_=>{if(!_)return s++,r.getEntry(e,c).next(()=>(r.removeEntry(c,jt.min()),xl(e).delete([0,hs(c.path)])))});i.push(p)}}).next(()=>ge.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return xg(e,t)}Ln(e,t){const r=xl(e);let i,s=Os.ot;return r.J({index:"documentTargetsIndex"},([c,h],{path:p,sequenceNumber:_})=>{0===c?(s!==Os.ot&&t(new at(Qo(i)),s),s=_,i=p):s=Os.ot}).next(()=>{s!==Os.ot&&t(new at(Qo(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function xg(n,e){return xl(n).put((r=n.currentSequenceNumber,{targetId:0,path:hs(e.path),sequenceNumber:r}));var r}class lT{constructor(){this.changes=new Al(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ge.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class LA{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return lf(e).put(r)}removeEntry(e,t,r){return lf(e).delete(function(i,s){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Cg(s),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=Yn.newInvalidDocument(t);return lf(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(cy(t))},(i,s)=>{r=this.Kn(t,s)}).next(()=>r)}Gn(e,t){let r={size:0,document:Yn.newInvalidDocument(t)};return lf(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(cy(t))},(i,s)=>{r={document:this.Kn(t,s),size:Og(s)}}).next(()=>r)}getEntries(e,t){let r=cs();return this.Qn(e,t,(i,s)=>{const c=this.Kn(i,s);r=r.insert(i,c)}).next(()=>r)}jn(e,t){let r=cs(),i=new er(at.comparator);return this.Qn(e,t,(s,c)=>{const h=this.Kn(s,c);r=r.insert(s,h),i=i.insert(s,Og(c))}).next(()=>({documents:r,Wn:i}))}Qn(e,t,r){if(t.isEmpty())return ge.resolve();let i=new $n(cT);t.forEach(p=>i=i.add(p));const s=IDBKeyRange.bound(cy(i.first()),cy(i.last())),c=i.getIterator();let h=c.getNext();return lf(e).J({index:"documentKeyIndex",range:s},(p,_,w)=>{const S=at.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;h&&cT(h,S)<0;)r(h,null),h=c.getNext();h&&h.isEqual(S)&&(r(h,_),h=c.hasNext()?c.getNext():null),h?w.q(cy(h)):w.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),Cg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lf(e).K(IDBKeyRange.bound(i,s,!0)).next(c=>{let h=cs();for(const p of c){const _=this.Kn(at.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);h=h.insert(_.key,_)}return h})}getAllFromCollectionGroup(e,t,r,i){let s=cs();const c=UA(t,r),h=UA(t,Ns.max());return lf(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(p,_,w)=>{const S=this.Kn(at.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);s=s.insert(S.key,S),s.size===i&&w.done()}).next(()=>s)}newChangeBuffer(e){return new Px(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return BA(e).get("remoteDocumentGlobalKey").next(t=>(Lt(!!t),t))}qn(e,t){return BA(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function Rx(n,e){let t;if(e.document)t=EA(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=at.fromSegments(e.noDocument.path),i=rf(e.noDocument.readTime);t=Yn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Tt();{const r=at.fromSegments(e.unknownDocument.path),i=rf(e.unknownDocument.version);t=Yn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Zn(r[0],r[1]);return jt.fromTimestamp(i)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(jt.min()))return r}return Yn.newInvalidDocument(e)}}function uT(n){return new LA(n)}class Px extends lT{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Al(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new $n((s,c)=>sn(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const h=this.Hn.get(s);if(t.push(this.zn.removeEntry(e,s,h.readTime)),c.isValidDocument()){const p=YI(this.zn.wt,c);i=i.add(s.path.popLast());const _=Og(p);r+=_-h.size,t.push(this.zn.addEntry(e,s,p))}else if(r-=h.size,this.trackRemovals){const p=YI(this.zn.wt,c.convertToNoDocument(jt.min()));t.push(this.zn.addEntry(e,s,p))}}),i.forEach(s=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.zn.updateMetadata(e,r)),ge.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:i})=>(i.forEach((s,c)=>{this.Hn.set(s,{size:c,readTime:r.get(s).readTime})}),r))}}function BA(n){return Mi(n,"remoteDocumentGlobal")}function lf(n){return Mi(n,"remoteDocumentsV14")}function cy(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function UA(n,e){const t=e.documentKey.path.toArray();return[n,Cg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function cT(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=sn(t[s],r[s]),i)return i;return i=sn(t.length,r.length),i||(i=sn(t[t.length-2],r[r.length-2]),i||sn(t[t.length-1],r[r.length-1]))}class dy{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class dT{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Qh(r.mutation,i,Ms.empty(),Zn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Yt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Yt()){const i=Jo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let c=wg();return s.forEach((h,p)=>{c=c.insert(h,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Jo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Yt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,i){let s=cs();const c=Xh(),h=Xh();return t.forEach((p,_)=>{const w=r.get(_.key);i.has(_.key)&&(void 0===w||w.mutation instanceof Yo)?s=s.insert(_.key,_):void 0!==w&&(c.set(_.key,w.mutation.getFieldMask()),Qh(w.mutation,_,w.mutation.getFieldMask(),Zn.now()))}),this.recalculateAndSaveOverlays(e,s).next(p=>(p.forEach((_,w)=>c.set(_,w)),t.forEach((_,w)=>{var S;return h.set(_,new dy(w,null!==(S=c.get(_))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Xh();let i=new er((c,h)=>c-h),s=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(p=>{const _=t.get(p);if(null===_)return;let w=r.get(p)||Ms.empty();w=h.applyToLocalView(_,w),r.set(p,w);const S=(i.get(h.batchId)||Yt()).add(p);i=i.insert(h.batchId,S)})}).next(()=>{const c=[],h=i.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),_=p.key,w=p.value,S=OI();w.forEach(N=>{if(!s.has(N)){const k=AI(t.get(N),r.get(N));null!==k&&S.set(N,k),s=s.add(N)}}),c.push(this.documentOverlayCache.saveOverlays(e,_,S))}return ge.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return at.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):K0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const c=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):ge.resolve(Jo());let h=-1,p=s;return c.next(_=>ge.forEach(_,(w,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),s.get(w)?ge.resolve():this.getBaseDocument(e,w,S).next(N=>{p=p.insert(w,N)}))).next(()=>this.populateOverlays(e,_,s)).next(()=>this.computeViews(e,p,_,Yt())).next(w=>({batchId:h,changes:ib(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new at(t)).next(r=>{let i=wg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=wg();return this.indexManager.getCollectionParents(e,i).next(c=>ge.forEach(c,h=>{const p=(_=t,w=h.child(i),new Cl(w,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,w;return this.getDocumentsMatchingCollectionQuery(e,p,r).next(_=>{_.forEach((w,S)=>{s=s.insert(w,S)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(s=>{s.forEach((h,p)=>{const _=p.getKey();null===i.get(_)&&(i=i.insert(_,Yn.newInvalidDocument(_)))});let c=wg();return i.forEach((h,p)=>{const _=s.get(h);void 0!==_&&Qh(_.mutation,p,Ms.empty(),Zn.now()),H_(t,p)&&(c=c.insert(h,p))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ge.resolve(Yn.newInvalidDocument(t))}}class VA{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return ge.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:Br(r.createTime)}),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:yb(r.bundledQuery),readTime:Br(r.readTime)}),ge.resolve();var r}}class hT{constructor(){this.overlays=new er(at.comparator),this.Xn=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Jo();return ge.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ie(e,t,s)}),ge.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Xn.delete(r)),ge.resolve()}getOverlaysForCollection(e,t,r){const i=Jo(),s=t.length+1,c=new at(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,_=p.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===s&&p.largestBatchId>r&&i.set(p.getKey(),p)}return ge.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new er((_,w)=>_-w);const c=this.overlays.getIterator();for(;c.hasNext();){const _=c.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>r){let w=s.get(_.largestBatchId);null===w&&(w=Jo(),s=s.insert(_.largestBatchId,w)),w.set(_.getKey(),_)}}const h=Jo(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((_,w)=>h.set(_,w)),!(h.size()>=i)););return ge.resolve(h)}ie(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new _b(t,r));let s=this.Xn.get(t);void 0===s&&(s=Yt(),this.Xn.set(t,s)),this.Xn.set(t,s.add(r.key))}}class kl{constructor(){this.Zn=new $n(di.ts),this.es=new $n(di.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new di(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new di(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new at(new wn([])),r=new di(t,e),i=new di(t,e+1),s=[];return this.es.forEachInRange([r,i],c=>{this.rs(c),s.push(c.key)}),s}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new at(new wn([])),r=new di(t,e),i=new di(t,e+1);let s=Yt();return this.es.forEachInRange([r,i],c=>{s=s.add(c.key)}),s}containsKey(e){const t=new di(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class di{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return at.comparator(e.key,t.key)||sn(e.ls,t.ls)}static ns(e,t){return sn(e.ls,t.ls)||at.comparator(e.key,t.key)}}class Tb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new $n(di.ts)}checkEmpty(e){return ge.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.fs;this.fs++;const c=new qI(s,t,r,i);this.mutationQueue.push(c);for(const h of i)this.ds=this.ds.add(new di(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ge.resolve(c)}lookupMutationBatch(e,t){return ge.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ws(t+1),s=i<0?0:i;return ge.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new di(t,0),i=new di(t,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([r,i],c=>{const h=this._s(c.ls);s.push(h)}),ge.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $n(sn);return t.forEach(i=>{const s=new di(i,0),c=new di(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([s,c],h=>{r=r.add(h.ls)})}),ge.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;at.isDocumentKey(s)||(s=s.child(""));const c=new di(new at(s),0);let h=new $n(sn);return this.ds.forEachWhile(p=>{const _=p.key.path;return!!r.isPrefixOf(_)&&(_.length===i&&(h=h.add(p.ls)),!0)},c),ge.resolve(this.gs(h))}gs(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Lt(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return ge.forEach(t.mutations,i=>{const s=new di(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new di(t,0),i=this.ds.firstAfterOrEqual(r);return ge.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ge.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Cb{constructor(e){this.ps=e,this.docs=new er(at.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,c=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ge.resolve(r?r.document.mutableCopy():Yn.newInvalidDocument(t))}getEntries(e,t){let r=cs();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Yn.newInvalidDocument(i))}),ge.resolve(r)}getAllFromCollection(e,t,r){let i=cs();const s=new at(t.child("")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||U0(iI(p),r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return ge.resolve(i)}getAllFromCollectionGroup(e,t,r,i){Tt()}Is(e,t){return ge.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new GA(this)}getSize(e){return ge.resolve(this.size)}}class GA extends lT{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),ge.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class Sb{constructor(e){this.persistence=e,this.Ts=new Al(t=>Bu(t),vg),this.lastRemoteSnapshotVersion=jt.min(),this.highestTargetId=0,this.Es=0,this.As=new kl,this.targetCount=0,this.Rs=Hu.An()}forEachTarget(e,t){return this.Ts.forEach((r,i)=>t(i)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),ge.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Hu(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.vn(t),ge.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Ts.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Ts.delete(c),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ge.waitFor(s).next(()=>i)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return ge.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),ge.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(c=>{s.push(i.markPotentiallyOrphaned(e,c))}),ge.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return ge.resolve(r)}containsKey(e,t){return ge.resolve(this.As.containsKey(t))}}class hy{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Os(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new Sb(this),this.indexManager=new wb,this.remoteDocumentCache=new Cb(r=>this.referenceDelegate.Ss(r)),this.wt=new ZI(t),this.Ds=new VA(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new Tb(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Je("MemoryPersistence","Starting transaction:",e);const i=new fy(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(s=>this.referenceDelegate.xs(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ns(e,t){return ge.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class fy extends J1{constructor(e){super(),this.currentSequenceNumber=e}}class Ab{constructor(e){this.persistence=e,this.ks=new kl,this.Os=null}static Ms(e){return new Ab(e)}get Fs(){if(this.Os)return this.Os;throw Tt()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),ge.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),ge.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Fs.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.Fs,r=>{const i=at.fromPath(r);return this.$s(e,i).next(s=>{s||t.removeEntry(i,jt.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return ge.or([()=>ge.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class Fx{constructor(e){this.wt=e}O(e,t,r,i){const s=new hg("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",NA,{unique:!0}),h.createObjectStore("documentMutations"),jA(e),function(h){h.createObjectStore("remoteDocuments")}(e));let c=ge.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),jA(e)),c=c.next(()=>function(h){const p=h.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:jt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",_)}(s))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,p){return p.store("mutations").K().next(_=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",NA,{unique:!0});const w=p.store("mutations"),S=_.map(N=>w.put(N));return ge.waitFor(S)})}(e,s))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Bs(s))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(s)))),r<7&&i>=7&&(c=c.next(()=>this.Us(s))),r<8&&i>=8&&(c=c.next(()=>this.qs(e,s))),r<9&&i>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Ks(s))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const p=h.createObjectStore("documentOverlays",{keyPath:gb});p.createIndex("collectionPathOverlayIndex",$I,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",OA,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:Dx});p.createIndex("documentKeyIndex",Ix),p.createIndex("collectionGroupIndex",Tx)}(e)).next(()=>this.Gs(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.Qs(e,s))),r<15&&i>=15&&(c=c.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:ry}).createIndex("sequenceNumberIndex",jI,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:HI}).createIndex("documentKeyIndex",Ax,{unique:!1})}(e))),c}Ls(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Og(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(i=>ge.forEach(i,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",c).next(h=>ge.forEach(h,p=>{Lt(p.userId===s.userId);const _=xi(this.wt,p);return sT(e,s.userId,_).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((c,h)=>{const p=new wn(c),_=[0,hs(p)];s.push(t.get(_).next(w=>w?ge.resolve():t.put({targetId:0,path:hs(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ge.waitFor(s))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:GI});const r=t.store("collectionParents"),i=new oy,s=c=>{if(i.add(c)){const h=c.lastSegment(),p=c.popLast();return r.put({collectionId:h,parent:hs(p)})}};return t.store("remoteDocuments").J({H:!0},(c,h)=>{const p=new wn(c);return s(p.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([c,h,p],_)=>{const w=Qo(h);return s(w.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,i)=>{const s=Sg(i),c=sy(this.wt,s);return t.put(c)})}Gs(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,c)=>{const h=t.store("remoteDocumentsV14"),p=(_=c,_.document?new at(wn.fromString(_.document.name).popFirst(5)):_.noDocument?at.fromSegments(_.noDocument.path):_.unknownDocument?at.fromSegments(_.unknownDocument.path):Tt()).path.toArray();var _;const w={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(w))}).next(()=>ge.waitFor(i))}Qs(e,t){const r=t.store("mutations"),i=uT(this.wt),s=new hy(Ab.Ms,this.wt.ne);return r.K().next(c=>{const h=new Map;return c.forEach(p=>{var _;let w=null!==(_=h.get(p.userId))&&void 0!==_?_:Yt();xi(this.wt,p).keys().forEach(S=>w=w.add(S)),h.set(p.userId,w)}),ge.forEach(h,(p,_)=>{const w=new Ri(_),S=sf.se(this.wt,w),N=s.getIndexManager(w),k=Db.se(w,this.wt,N,s.referenceDelegate);return new dT(i,k,S,N).recalculateAndSaveOverlaysForDocumentKeys(new mb(t,Os.ot),p).next()})})}}function jA(n){n.createObjectStore("targetDocuments",{keyPath:ny}).createIndex("documentTargetsIndex",Sx,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Cx,{unique:!0}),n.createObjectStore("targetGlobal")}const fT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class py{constructor(e,t,r,i,s,c,h,p,_,w,S=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=s,this.window=c,this.document=h,this.Ws=_,this.zs=w,this.Hs=S,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=N=>Promise.resolve(),!py.V())throw new Ae(ye.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kx(this,i),this.ei=t+"main",this.wt=new ZI(p),this.ni=new Rs(this.ei,this.Hs,new Fx(this.wt)),this.Vs=new oT(this.referenceDelegate,this.wt),this.remoteDocumentCache=uT(this.wt),this.Ds=new vb,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===w&&vt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(ye.FAILED_PRECONDITION,fT);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Os(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,De.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,De.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,De.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(El(e))return Je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return kg(e).get("owner").next(t=>ge.resolve(this.di(t)))}_i(e){return gy(e).delete(this.clientId)}wi(){var e=this;return(0,De.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Mi(r,"clientMetadata");return i.K().next(s=>{const c=e.gi(s,18e5),h=s.filter(p=>-1===c.indexOf(p));return ge.forEach(h,p=>i.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?ge.resolve(!0):kg(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Ae(ye.FAILED_PRECONDITION,fT);return!1}}return!(!this.networkEnabled||!this.inForeground)||gy(e).K().next(r=>void 0===this.gi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Je("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,De.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new mb(t,Os.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>gy(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return Db.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ox(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return sf.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Je("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(c=this.Hs)?iy:14===c?zI:13===c?WI:12===c?Nx:11===c?MA:void Tt();var c;let h;return this.ni.runTransaction(e,i,s,p=>(h=new mb(p,this.Ps?this.Ps.next():Os.ot),"readwrite-primary"===t?this.ai(h).next(_=>!!_||this.hi(h)).next(_=>{if(!_)throw vt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Ae(ye.FAILED_PRECONDITION,sI);return r(h)}).next(_=>this.fi(h).next(()=>_)):this.bi(h).next(()=>r(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}bi(e){return kg(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ae(ye.FAILED_PRECONDITION,fT)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kg(e).put("owner",t)}static V(){return Rs.V()}li(e){const t=kg(e);return t.get("owner").next(r=>this.di(r)?(Je("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ge.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(vt(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,P.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Je("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return vt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){vt("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kg(n){return Mi(n,"owner")}function gy(n){return Mi(n,"clientMetadata")}function Nb(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Rb{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=i}static Vi(e,t){let r=Yt(),i=Yt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Rb(e,t.fromCache,r,i)}}class Ob{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ci(e,t).next(s=>s||this.xi(e,t,i,r)).next(s=>s||this.Ni(e,t))}Ci(e,t){return ge.resolve(null)}xi(e,t,r,i){return function bI(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(jt.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(s=>{const c=this.ki(t,s);return this.Oi(t,c,r,i)?this.Ni(e,t):(O_()<=Zs.in.DEBUG&&Je("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hd(t)),this.Mi(e,c,t,B0(i,-1)))})}ki(e,t){let r=new $n(Y0(e));return t.forEach((i,s)=>{H_(e,s)&&(r=r.add(s))}),r}Oi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ni(e,t){return O_()<=Zs.in.DEBUG&&Je("QueryEngine","Using full collection scan to execute query:",hd(t)),this.Di.getDocumentsMatchingQuery(e,t,Ns.min())}Mi(e,t,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(c=>{s=s.insert(c.key,c)}),s))}}class pT{constructor(e,t,r,i){this.persistence=e,this.Fi=t,this.wt=i,this.$i=new er(sn),this.Bi=new Al(s=>Bu(s),vg),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dT(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function Mb(n,e,t,r){return new pT(n,e,t,r)}function gT(n,e){return xb.apply(this,arguments)}function xb(){return xb=(0,De.Z)(function*(n,e){const t=dt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const c=[],h=[];let p=Yt();for(const _ of i){c.push(_.batchId);for(const w of _.mutations)p=p.add(w.key)}for(const _ of s){h.push(_.batchId);for(const w of _.mutations)p=p.add(w.key)}return t.localDocuments.getDocuments(r,p).next(_=>({Ki:_,removedBatchIds:c,addedBatchIds:h}))})})}),xb.apply(this,arguments)}function my(n){const e=dt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function kb(n,e,t){let r=Yt(),i=Yt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let c=cs();return t.forEach((h,p)=>{const _=s.get(h);p.isFoundDocument()!==_.isFoundDocument()&&(i=i.add(h)),p.isNoDocument()&&p.version.isEqual(jt.min())?(e.removeEntry(h,p.readTime),c=c.insert(h,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(p),c=c.insert(h,p)):Je("LocalStore","Ignoring outdated watch update for ",h,". Current version:",_.version," Watch version:",p.version)}),{Gi:c,Qi:i}})}function Pb(n,e){const t=dt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function uf(n,e){const t=dt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Vs.getTargetData(r,e).next(s=>s?(i=s,ge.resolve(i)):t.Vs.allocateTargetId(r).next(c=>(i=new Vu(e,c,0,r.currentSequenceNumber),t.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function cf(n,e,t){return _T.apply(this,arguments)}function _T(){return _T=(0,De.Z)(function*(n,e,t){const r=dt(n),i=r.$i.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!El(c))throw c;Je("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}),_T.apply(this,arguments)}function Fb(n,e,t){const r=dt(n);let i=jt.min(),s=Yt();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,p,_){const w=dt(h),S=w.Bi.get(_);return void 0!==S?ge.resolve(w.$i.get(S)):w.Vs.getTargetData(p,_)}(r,c,To(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(c,h.targetId).next(p=>{s=p})}).next(()=>r.Fi.getDocumentsMatchingQuery(c,e,t?i:jt.min(),t?s:Yt())).next(h=>(bT(r,Z0(e),h),{documents:h,ji:s})))}function yT(n,e){const t=dt(n),r=dt(t.Vs),i=t.$i.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.te(s,e).next(c=>c?c.target:null))}function vT(n,e){const t=dt(n),r=t.Li.get(e)||jt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ui.getAllFromCollectionGroup(i,e,B0(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(bT(t,e,i),i))}function bT(n,e,t){let r=jt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Li.set(e,r)}function wT(){return wT=(0,De.Z)(function*(n,e,t,r){const i=dt(n);let s=Yt(),c=cs();for(const _ of t){const w=e.Wi(_.metadata.name);_.document&&(s=s.add(w));const S=e.zi(_);S.setReadTime(e.Hi(_.metadata.readTime)),c=c.insert(w,S)}const h=i.Ui.newChangeBuffer({trackRemovals:!0}),p=yield uf(i,(_=r,To(Kh(wn.fromString(`__bundle__/docs/${_}`)))));var _;return i.persistence.runTransaction("Apply bundle documents","readwrite",_=>kb(_,h,c).next(w=>(h.apply(_),w)).next(w=>i.Vs.removeMatchingKeysForTargetId(_,p.targetId).next(()=>i.Vs.addMatchingKeys(_,s,p.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(_,w.Gi,w.Qi)).next(()=>w.Gi)))}),wT.apply(this,arguments)}function Ux(n,e){return ET.apply(this,arguments)}function ET(){return ET=(0,De.Z)(function*(n,e,t=Yt()){const r=yield uf(n,To(yb(e.bundledQuery))),i=dt(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const c=Br(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ds.saveNamedQuery(s,e);const h=r.withResumeToken(Lr.EMPTY_BYTE_STRING,c);return i.$i=i.$i.insert(h.targetId,h),i.Vs.updateTargetData(s,h).next(()=>i.Vs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Vs.addMatchingKeys(s,t,r.targetId)).next(()=>i.Ds.saveNamedQuery(s,e))})}),ET.apply(this,arguments)}function DT(n,e){return`firestore_clients_${n}_${e}`}function HA(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function IT(n,e){return`firestore_targets_${n}_${e}`}class Lb{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let s,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(s=new Ae(i.error.code,i.error.message))),c?new Lb(e,t,i.state,s):(vt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _y{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Ae(r.error.code,r.error.message))),s?new _y(e,r.state,i):(vt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yy{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=Y_();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=cI(r.activeTargetIds[c]),s=s.add(r.activeTargetIds[c]);return i?new yy(e,s):(vt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class TT{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new TT(t.clientId,t.onlineState):(vt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class o{constructor(){this.activeTargetIds=Y_()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class a{constructor(e,t,r,i,s){this.window=e,this.js=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new er(sn),this.started=!1,this.ir=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.rr=DT(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new o),this.cr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,De.Z)(function*(){const t=yield e.syncEngine.Ri();for(const i of t){if(i===e.tr)continue;const s=e.getItem(DT(e.persistenceKey,i));if(s){const c=yy.Ji(i,s);c&&(e.sr=e.sr.insert(c.clientId,c))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(IT(this.persistenceKey,e));if(r){const i=_y.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(IT(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Je("SharedClientState","READ",e,t),t}setItem(e,t){Je("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Je("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void vt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,De.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(s){let c=Os.ot;if(null!=s)try{const h=JSON.parse(s);Lt("number"==typeof h),c=h}catch(h){vt("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==Os.ot&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Nr(s)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new Lb(this.currentUser,e,t,r),s=HA(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Yi())}pr(e){const t=HA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=IT(this.persistenceKey,e),s=new _y(e,t,r);this.setItem(i,s.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return yy.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),i=Number(r[1]);return Lb.Ji(new Ri(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return _y.Ji(i,t)}wr(e){return TT.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,De.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),s=this.gr(r),c=[],h=[];return s.forEach(p=>{i.has(p)||c.push(p)}),i.forEach(p=>{s.has(p)||h.push(p)}),this.syncEngine.Mr(c,h).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Y_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class u{constructor(){this.Fr=new o,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new o,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class d{Br(e){}shutdown(){}}class f{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const g={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class v{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class E extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,s){const c=this.oo(e,t);Je("RestConnection","Sending: ",c,r);const h={};return this.uo(h,i,s),this.co(e,c,h,r).then(p=>(Je("RestConnection","Received: ",p),p),p=>{throw cg("RestConnection",`${e} failed with error: `,p,"url: ",c,"request:",r),p})}ao(e,t,r,i,s,c){return this.ro(e,t,r,i,s)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Fu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}oo(e,t){return`${this.so}/v1/${t}:${g[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((s,c)=>{const h=new W1;h.listenOnce(JD.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case N_.NO_ERROR:const _=h.getResponseJson();Je("Connection","XHR received:",JSON.stringify(_)),s(_);break;case N_.TIMEOUT:Je("Connection",'RPC "'+e+'" timed out'),c(new Ae(ye.DEADLINE_EXCEEDED,"Request time out"));break;case N_.HTTP_ERROR:const w=h.getStatus();if(Je("Connection",'RPC "'+e+'" failed with status:',w,"response text:",h.getResponseText()),w>0){const S=h.getResponseJson().error;if(S&&S.status&&S.message){const N=function(k){const j=k.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(j)>=0?j:ye.UNKNOWN}(S.status);c(new Ae(N,S.message))}else c(new Ae(ye.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Ae(ye.UNAVAILABLE,"Connection failed."));break;default:Tt()}}finally{Je("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);h.send(t,"POST",p,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=ZD(),c=YD(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new Qc({})),this.uo(h.initMessageHeaders,t,r),(0,P.uI)()||(0,P.b$)()||(0,P.d)()||(0,P.w1)()||(0,P.Mn)()||(0,P.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const p=i.join("");Je("Connection","Creating WebChannel: "+p,h);const _=s.createWebChannel(p,h);let w=!1,S=!1;const N=new v({jr:j=>{S?Je("Connection","Not sending because WebChannel is closed:",j):(w||(Je("Connection","Opening WebChannel transport."),_.open(),w=!0),Je("Connection","WebChannel sending:",j),_.send(j))},Wr:()=>_.close()}),k=(j,te,oe)=>{j.listen(te,Ke=>{try{oe(Ke)}catch(Ze){setTimeout(()=>{throw Ze},0)}})};return k(_,R_.EventType.OPEN,()=>{S||Je("Connection","WebChannel transport opened.")}),k(_,R_.EventType.CLOSE,()=>{S||(S=!0,Je("Connection","WebChannel transport closed"),N.eo())}),k(_,R_.EventType.ERROR,j=>{S||(S=!0,cg("Connection","WebChannel transport errored:",j),N.eo(new Ae(ye.UNAVAILABLE,"The operation could not be completed")))}),k(_,R_.EventType.MESSAGE,j=>{var te;if(!S){const oe=j.data[0];Lt(!!oe);const Ze=oe.error||(null===(te=oe[0])||void 0===te?void 0:te.error);if(Ze){Je("Connection","WebChannel received error:",Ze);const st=Ze.status;let Qe=function(bt){const en=Qr[bt];if(void 0!==en)return Z_(en)}(st),ut=Ze.message;void 0===Qe&&(Qe=ye.INTERNAL,ut="Unknown error status: "+st+" with message "+Ze.message),S=!0,N.eo(new Ae(Qe,ut)),_.close()}else Je("Connection","WebChannel received:",oe),N.no(oe)}}),k(c,M0.STAT_EVENT,j=>{j.stat===x0.PROXY?Je("Connection","Detected buffering proxy"):j.stat===x0.NOPROXY&&Je("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.Zr()},0),N}}function I(){return typeof window<"u"?window:null}function A(){return typeof document<"u"?document:null}function M(n){return new bA(n,!0)}class B{constructor(e,t,r=1e3,i=1.5,s=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=i,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class J{constructor(e,t,r,i,s,c,h,p){this.js=e,this.Ao=r,this.Ro=i,this.bo=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new B(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,De.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,De.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,De.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===ye.RESOURCE_EXHAUSTED?(vt(t.toString()),vt("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===ye.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Ae(ye.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,De.Z)(function*(){e.state=0,e.start()}))}qo(e){return Je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class le extends J{constructor(e,t,r,i,s,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.wt=s}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function wx(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:Tt(),i=e.targetChange.targetIds||[],s=function(p,_){return p.dt?(Lt(void 0===_||"string"==typeof _),Lr.fromBase64String(_||"")):(Lt(void 0===_||_ instanceof Uint8Array),Lr.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(p){const _=void 0===p.code?ye.UNKNOWN:Z_(p.code);return new Ae(_,p.message||"")}(c);t=new ef(r,i,s,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Ra(n,r.document.name),s=Br(r.document.updateTime),c=new wi({mapValue:{fields:r.document.fields}}),h=Yn.newFoundDocument(i,s,c);t=new Eg(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=Ra(n,r.document),s=r.readTime?Br(r.readTime):jt.min(),c=Yn.newNoDocument(i,s);t=new Eg([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Ra(n,r.document);t=new Eg([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Tt();{const r=e.filter,s=new mA(r.count||0);t=new X_(r.targetId,s)}}var p;return t}(this.wt,e),r=function(i){if(!("targetChange"in i))return jt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?jt.min():s.readTime?Br(s.readTime):jt.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=Ig(this.wt),t.addTarget=function(i,s){let c;const h=s.target;return c=qh(h)?{documents:cb(i,h)}:{query:db(i,h)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?c.resumeToken=ab(i,s.resumeToken):s.snapshotVersion.compareTo(jt.min())>0&&(c.readTime=yd(i,s.snapshotVersion.toTimestamp())),c}(this.wt,e);const r=function LI(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Mo(t)}jo(e){const t={};t.database=Ig(this.wt),t.removeTarget=e,this.Mo(t)}}class Ne extends J{constructor(e,t,r,i,s,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.wt=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function IA(n,e){return n&&n.length>0?(Lt(void 0!==e),n.map(t=>function(r,i){let s=Br(r.updateTime?r.updateTime:i);return s.isEqual(jt.min())&&(s=Br(i)),new pA(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Br(e.commitTime);return this.listener.Jo(r,t)}return Lt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Ig(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Tg(this.wt,r))};this.Mo(t)}}class tt extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new Ae(ye.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.bo.ro(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ae(ye.UNKNOWN,i.toString())})}ao(e,t,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.bo.ao(e,t,r,s,c,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ae(ye.UNKNOWN,s.toString())})}terminate(){this.Zo=!0}}class ht{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(vt(t),this.su=!1):Je("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class Ct{constructor(e,t,r,i,s){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(h=>{r.enqueueAndForget((0,De.Z)(function*(){var p;df(c)&&(Je("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,De.Z)(function*(_){const w=dt(_);w.lu.add(4),yield Ht(w),w._u.set("Unknown"),w.lu.delete(4),yield Pt(w)}),function(_){return p.apply(this,arguments)})(c))}))}),this._u=new ht(r,i)}}function Pt(n){return $e.apply(this,arguments)}function $e(){return $e=(0,De.Z)(function*(n){if(df(n))for(const e of n.fu)yield e(!0)}),$e.apply(this,arguments)}function Ht(n){return tr.apply(this,arguments)}function tr(){return tr=(0,De.Z)(function*(n){for(const e of n.fu)yield e(!1)}),tr.apply(this,arguments)}function gr(n,e){const t=dt(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),zA(t)?WA(t):wy(t).Co()&&$A(t,e))}function vy(n,e){const t=dt(n),r=wy(t);t.hu.delete(e),r.Co()&&Vx(t,e),0===t.hu.size&&(r.Co()?r.ko():df(t)&&t._u.set("Unknown"))}function $A(n,e){n.wu.Nt(e.targetId),wy(n).Qo(e)}function Vx(n,e){n.wu.Nt(e),wy(n).jo(e)}function WA(n){n.wu=new sb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),wy(n).start(),n._u.iu()}function zA(n){return df(n)&&!wy(n).Do()&&n.hu.size>0}function df(n){return 0===dt(n).lu.size}function Gx(n){n.wu=void 0}function MV(n){return qA.apply(this,arguments)}function qA(){return qA=(0,De.Z)(function*(n){n.hu.forEach((e,t)=>{$A(n,e)})}),qA.apply(this,arguments)}function xV(n,e){return KA.apply(this,arguments)}function KA(){return KA=(0,De.Z)(function*(n,e){Gx(n),zA(n)?(n._u.uu(e),WA(n)):n._u.set("Unknown")}),KA.apply(this,arguments)}function kV(n,e,t){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,De.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof ef&&2===e.state&&e.cause)try{yield(r=(0,De.Z)(function*(i,s){const c=s.cause;for(const h of s.targetIds)i.hu.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i.hu.delete(h),i.wu.removeTarget(h))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){Je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield CT(n,r)}else if(e instanceof Eg?n.wu.Ut(e):e instanceof X_?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(jt.min()))try{const r=yield my(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const c=i.wu.Yt(s);return c.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const _=i.hu.get(p);_&&i.hu.set(p,_.withResumeToken(h.resumeToken,s))}}),c.targetMismatches.forEach(h=>{const p=i.hu.get(h);if(!p)return;i.hu.set(h,p.withResumeToken(Lr.EMPTY_BYTE_STRING,p.snapshotVersion)),Vx(i,h);const _=new Vu(p.target,h,1,p.sequenceNumber);$A(i,_)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Je("RemoteStore","Failed to raise snapshot:",r),yield CT(n,r)}var r}),ZA.apply(this,arguments)}function CT(n,e,t){return YA.apply(this,arguments)}function YA(){return YA=(0,De.Z)(function*(n,e,t){if(!El(e))throw e;n.lu.add(1),yield Ht(n),n._u.set("Offline"),t||(t=()=>my(n.localStore)),n.asyncQueue.enqueueRetryable((0,De.Z)(function*(){Je("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield Pt(n)}))}),YA.apply(this,arguments)}function jx(n,e){return e().catch(t=>CT(n,t,e))}function by(n){return JA.apply(this,arguments)}function JA(){return JA=(0,De.Z)(function*(n){const e=dt(n),t=hf(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;PV(e);)try{const i=yield Pb(e.localStore,r);if(null===i){0===e.au.length&&t.ko();break}r=i.batchId,FV(e,i)}catch(i){yield CT(e,i)}Hx(e)&&$x(e)}),JA.apply(this,arguments)}function PV(n){return df(n)&&n.au.length<10}function FV(n,e){n.au.push(e);const t=hf(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function Hx(n){return df(n)&&!hf(n).Do()&&n.au.length>0}function $x(n){hf(n).start()}function LV(n){return QA.apply(this,arguments)}function QA(){return QA=(0,De.Z)(function*(n){hf(n).Xo()}),QA.apply(this,arguments)}function BV(n){return XA.apply(this,arguments)}function XA(){return XA=(0,De.Z)(function*(n){const e=hf(n);for(const t of n.au)e.Ho(t.mutations)}),XA.apply(this,arguments)}function UV(n,e,t){return eN.apply(this,arguments)}function eN(){return eN=(0,De.Z)(function*(n,e,t){const r=n.au.shift(),i=KI.from(r,e,t);yield jx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield by(n)}),eN.apply(this,arguments)}function VV(n,e){return tN.apply(this,arguments)}function tN(){return tN=(0,De.Z)(function*(n,e){var t;e&&hf(n).zo&&(yield(t=(0,De.Z)(function*(r,i){if(nb(s=i.code)&&s!==ye.ABORTED){const c=r.au.shift();hf(r).No(),yield jx(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield by(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),Hx(n)&&$x(n)}),tN.apply(this,arguments)}function Wx(n,e){return nN.apply(this,arguments)}function nN(){return nN=(0,De.Z)(function*(n,e){const t=dt(n);t.asyncQueue.verifyOperationInProgress(),Je("RemoteStore","RemoteStore received new credentials");const r=df(t);t.lu.add(3),yield Ht(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Pt(t)}),nN.apply(this,arguments)}function rN(n,e){return iN.apply(this,arguments)}function iN(){return iN=(0,De.Z)(function*(n,e){const t=dt(n);e?(t.lu.delete(2),yield Pt(t)):e||(t.lu.add(2),yield Ht(t),t._u.set("Unknown"))}),iN.apply(this,arguments)}function wy(n){return n.mu||(n.mu=function(e,t,r){const i=dt(e);return i.tu(),new le(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:MV.bind(null,n),Jr:xV.bind(null,n),Go:kV.bind(null,n)}),n.fu.push(function(){var e=(0,De.Z)(function*(t){t?(n.mu.No(),zA(n)?WA(n):n._u.set("Unknown")):(yield n.mu.stop(),Gx(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function hf(n){return n.gu||(n.gu=function(e,t,r){const i=dt(e);return i.tu(),new Ne(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:LV.bind(null,n),Jr:VV.bind(null,n),Yo:BV.bind(null,n),Jo:UV.bind(null,n)}),n.fu.push(function(){var e=(0,De.Z)(function*(t){t?(n.gu.No(),yield by(n)):(yield n.gu.stop(),n.au.length>0&&(Je("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class sN{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,s){const c=Date.now()+r,h=new sN(e,t,c,i,s);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ey(n,e){if(vt("AsyncQueue",`${e}: ${n}`),El(n))return new Ae(ye.UNAVAILABLE,`${e}: ${n}`);throw n}class Dy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||at.comparator(t.key,r.key):(t,r)=>at.comparator(t.key,r.key),this.keyedMap=wg(),this.sortedSet=new er(this.comparator)}static emptySet(e){return new Dy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Dy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Dy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class zx{constructor(){this.yu=new er(at.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Tt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Iy{constructor(e,t,r,i,s,c,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p}static fromInitialDocuments(e,t,r,i){const s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new Iy(e,t,Dy.emptySet(t),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class GV{constructor(){this.Iu=void 0,this.listeners=[]}}class jV{constructor(){this.queries=new Al(e=>EI(e),bg),this.onlineState="Unknown",this.Tu=new Set}}function oN(n,e){return aN.apply(this,arguments)}function aN(){return aN=(0,De.Z)(function*(n,e){const t=dt(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new GV),i)try{s.Iu=yield t.onListen(r)}catch(c){const h=Ey(c,`Initialization of query '${hd(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,s),s.listeners.push(e),e.Eu(t.onlineState),s.Iu&&e.Au(s.Iu)&&cN(t)}),aN.apply(this,arguments)}function lN(n,e){return uN.apply(this,arguments)}function uN(){return uN=(0,De.Z)(function*(n,e){const t=dt(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const c=s.listeners.indexOf(e);c>=0&&(s.listeners.splice(c,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),uN.apply(this,arguments)}function HV(n,e){const t=dt(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.Au(i)&&(r=!0);c.Iu=i}}r&&cN(t)}function $V(n,e,t){const r=dt(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function cN(n){n.Tu.forEach(e=>{e.next()})}class dN{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Iy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Iy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class WV{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class qx{constructor(e){this.wt=e}Wi(e){return Ra(this.wt,e)}zi(e){return e.metadata.exists?EA(this.wt,e.document,!1):Yn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Br(e)}}class zV{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Kx(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=wn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new qx(this.wt);for(const i of e)if(i.metadata.queries){const s=r.Wi(i.metadata.name);for(const c of i.metadata.queries){const h=(t.get(c)||Yt()).add(s);t.set(c,h)}}return t}complete(){var e=this;return(0,De.Z)(function*(){const t=yield function Bx(n,e,t,r){return wT.apply(this,arguments)}(e.localStore,new qx(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield Ux(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function Kx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Zx{constructor(e){this.key=e}}class Yx{constructor(e){this.key=e}}class Jx{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Yt(),this.mutatedKeys=Yt(),this.Lu=Y0(e),this.Uu=new Dy(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new zx,i=t?t.Uu:this.Uu;let s=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,_="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((w,S)=>{const N=i.get(w),k=H_(this.query,S)?S:null,j=!!N&&this.mutatedKeys.has(N.key),te=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let oe=!1;N&&k?N.data.isEqual(k.data)?j!==te&&(r.track({type:3,doc:k}),oe=!0):this.Qu(N,k)||(r.track({type:2,doc:k}),oe=!0,(p&&this.Lu(k,p)>0||_&&this.Lu(k,_)<0)&&(h=!0)):!N&&k?(r.track({type:0,doc:k}),oe=!0):N&&!k&&(r.track({type:1,doc:N}),oe=!0,(p||_)&&(h=!0)),oe&&(k?(c=c.add(k),s=te?s.add(w):s.delete(w)):(c=c.delete(w),s=s.delete(w)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const w="F"===this.query.limitType?c.last():c.first();c=c.delete(w.key),s=s.delete(w.key),r.track({type:1,doc:w})}return{Uu:c,Gu:r,Oi:h,mutatedKeys:s}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const s=e.Gu.pu();s.sort((_,w)=>function(S,N){const k=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Tt()}};return k(S)-k(N)}(_.type,w.type)||this.Lu(_.doc,w.doc)),this.ju(r);const c=t?this.Wu():[],h=0===this.Bu.size&&this.current?1:0,p=h!==this.$u;return this.$u=h,0!==s.length||p?{snapshot:new Iy(this.query,e.Uu,i,s,e.mutatedKeys,0===h,p,!1),zu:c}:{zu:c}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new zx,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Yt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new Yx(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new Zx(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Yt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Iy.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class qV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class KV{constructor(e){this.key=e,this.Xu=!1}}class ZV{constructor(e,t,r,i,s,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.Zu={},this.tc=new Al(h=>EI(h),bg),this.ec=new Map,this.nc=new Set,this.sc=new er(at.comparator),this.ic=new Map,this.rc=new kl,this.oc={},this.uc=new Map,this.cc=Hu.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function YV(n,e){return hN.apply(this,arguments)}function hN(){return hN=(0,De.Z)(function*(n,e){const t=PN(n);let r,i;const s=t.tc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.Yu();else{const c=yield uf(t.localStore,To(e));t.isPrimaryClient&&gr(t.remoteStore,c);const h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield fN(t,e,r,"current"===h)}return i}),hN.apply(this,arguments)}function fN(n,e,t,r){return pN.apply(this,arguments)}function pN(){return pN=(0,De.Z)(function*(n,e,t,r){n.hc=(w,S,N)=>{return(k=(0,De.Z)(function*(j,te,oe,Ke){let Ze=te.view.Ku(oe);Ze.Oi&&(Ze=yield Fb(j.localStore,te.query,!1).then(({documents:ut})=>te.view.Ku(ut,Ze)));const st=Ke&&Ke.targetChanges.get(te.targetId),Qe=te.view.applyChanges(Ze,j.isPrimaryClient,st);return IN(j,te.targetId,Qe.zu),Qe.snapshot}),function(j,te,oe,Ke){return k.apply(this,arguments)})(n,w,S,N);var k};const i=yield Fb(n.localStore,e,!0),s=new Jx(e,i.ji),c=s.Ku(i.documents),h=Q_.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),p=s.applyChanges(c,n.isPrimaryClient,h);IN(n,t,p.zu);const _=new qV(e,t,s);return n.tc.set(e,_),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),p.snapshot}),pN.apply(this,arguments)}function JV(n,e){return gN.apply(this,arguments)}function gN(){return gN=(0,De.Z)(function*(n,e){const t=dt(n),r=t.tc.get(e),i=t.ec.get(r.targetId);if(i.length>1)return t.ec.set(r.targetId,i.filter(s=>!bg(s,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield cf(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),vy(t.remoteStore,r.targetId),Ty(t,r.targetId)}).catch(nd))):(Ty(t,r.targetId),yield cf(t.localStore,r.targetId,!0))}),gN.apply(this,arguments)}function mN(){return mN=(0,De.Z)(function*(n,e,t){const r=FN(n);try{const i=yield function(s,c){const h=dt(s),p=Zn.now(),_=c.reduce((N,k)=>N.add(k.key),Yt());let w,S;return h.persistence.runTransaction("Locally write mutations","readwrite",N=>{let k=cs(),j=Yt();return h.Ui.getEntries(N,_).next(te=>{k=te,k.forEach((oe,Ke)=>{Ke.isValidDocument()||(j=j.add(oe))})}).next(()=>h.localDocuments.getOverlayedDocuments(N,k)).next(te=>{w=te;const oe=[];for(const Ke of c){const Ze=NI(Ke,w.get(Ke.key).overlayedDocument);null!=Ze&&oe.push(new Yo(Ke.key,Ze,ud(Ze.value.mapValue),wr.exists(!0)))}return h.mutationQueue.addMutationBatch(N,p,oe,c)}).next(te=>{S=te;const oe=te.applyToLocalDocumentSet(w,j);return h.documentOverlayCache.saveOverlays(N,te.batchId,oe)})}).then(()=>({batchId:S.batchId,changes:ib(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,h){let p=s.oc[s.currentUser.toKey()];p||(p=new er(sn)),p=p.insert(c,h),s.oc[s.currentUser.toKey()]=p}(r,i.batchId,t),yield Ed(r,i.changes),yield by(r.remoteStore)}catch(i){const s=Ey(i,"Failed to persist write");t.reject(s)}}),mN.apply(this,arguments)}function Qx(n,e){return _N.apply(this,arguments)}function _N(){return _N=(0,De.Z)(function*(n,e){const t=dt(n);try{const r=yield function Lx(n,e){const t=dt(n),r=e.snapshotVersion;let i=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=t.Ui.newChangeBuffer({trackRemovals:!0});i=t.$i;const h=[];e.targetChanges.forEach((w,S)=>{const N=i.get(S);if(!N)return;h.push(t.Vs.removeMatchingKeys(s,w.removedDocuments,S).next(()=>t.Vs.addMatchingKeys(s,w.addedDocuments,S)));let k=N.withSequenceNumber(s.currentSequenceNumber);var j,te,oe;e.targetMismatches.has(S)?k=k.withResumeToken(Lr.EMPTY_BYTE_STRING,jt.min()).withLastLimboFreeSnapshotVersion(jt.min()):w.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(w.resumeToken,r)),i=i.insert(S,k),te=k,oe=w,(0===(j=N).resumeToken.approximateByteSize()||te.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8||oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0)&&h.push(t.Vs.updateTargetData(s,k))});let p=cs(),_=Yt();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,w))}),h.push(kb(s,c,e.documentUpdates).next(w=>{p=w.Gi,_=w.Qi})),!r.isEqual(jt.min())){const w=t.Vs.getLastRemoteSnapshotVersion(s).next(S=>t.Vs.setTargetsMetadata(s,s.currentSequenceNumber,r));h.push(w)}return ge.waitFor(h).next(()=>c.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,p,_)).next(()=>p)}).then(s=>(t.$i=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const c=t.ic.get(s);c&&(Lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Xu=!0:i.modifiedDocuments.size>0?Lt(c.Xu):i.removedDocuments.size>0&&(Lt(c.Xu),c.Xu=!1))}),yield Ed(t,r,e)}catch(r){yield nd(r)}}),_N.apply(this,arguments)}function Xx(n,e,t){const r=dt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.tc.forEach((s,c)=>{const h=c.view.Eu(e);h.snapshot&&i.push(h.snapshot)}),function(s,c){const h=dt(s);h.onlineState=c;let p=!1;h.queries.forEach((_,w)=>{for(const S of w.listeners)S.Eu(c)&&(p=!0)}),p&&cN(h)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function XV(n,e,t){return yN.apply(this,arguments)}function yN(){return yN=(0,De.Z)(function*(n,e,t){const r=dt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ic.get(e),s=i&&i.key;if(s){let c=new er(at.comparator);c=c.insert(s,Yn.newNoDocument(s,jt.min()));const h=Yt().add(s),p=new J_(jt.min(),new Map,new $n(sn),c,h);yield Qx(r,p),r.sc=r.sc.remove(s),r.ic.delete(e),TN(r)}else yield cf(r.localStore,e,!1).then(()=>Ty(r,e,t)).catch(nd)}),yN.apply(this,arguments)}function eG(n,e){return vN.apply(this,arguments)}function vN(){return vN=(0,De.Z)(function*(n,e){const t=dt(n),r=e.batch.batchId;try{const i=yield function mT(n,e){const t=dt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Ui.newChangeBuffer({trackRemovals:!0});return function(c,h,p,_){const w=p.batch,S=w.keys();let N=ge.resolve();return S.forEach(k=>{N=N.next(()=>_.getEntry(h,k)).next(j=>{const te=p.docVersions.get(k);Lt(null!==te),j.version.compareTo(te)<0&&(w.applyToRemoteDocument(j,p),j.isValidDocument()&&(j.setReadTime(p.commitVersion),_.addEntry(j)))})}),N.next(()=>c.mutationQueue.removeMutationBatch(h,w))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=Yt();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(h=h.add(c.batch.mutations[p].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);DN(t,r,null),EN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ed(t,i)}catch(i){yield nd(i)}}),vN.apply(this,arguments)}function tG(n,e,t){return bN.apply(this,arguments)}function bN(){return bN=(0,De.Z)(function*(n,e,t){const r=dt(n);try{const i=yield function(s,c){const h=dt(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return h.mutationQueue.lookupMutationBatch(p,c).next(w=>(Lt(null!==w),_=w.keys(),h.mutationQueue.removeMutationBatch(p,w))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,_,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>h.localDocuments.getDocuments(p,_))})}(r.localStore,e);DN(r,e,t),EN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ed(r,i)}catch(i){yield nd(i)}}),bN.apply(this,arguments)}function wN(){return wN=(0,De.Z)(function*(n,e){const t=dt(n);df(t.remoteStore)||Je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const c=dt(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.uc.get(r)||[];i.push(e),t.uc.set(r,i)}catch(r){const i=Ey(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),wN.apply(this,arguments)}function EN(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function DN(n,e,t){const r=dt(n);let i=r.oc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function Ty(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||ek(n,r)})}function ek(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(vy(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),TN(n))}function IN(n,e,t){for(const r of t)r instanceof Zx?(n.rc.addReference(r.key,e),rG(n,r)):r instanceof Yx?(Je("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||ek(n,r.key)):Tt()}function rG(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Je("SyncEngine","New document in limbo: "+t),n.nc.add(r),TN(n))}function TN(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new at(wn.fromString(e)),r=n.cc.next();n.ic.set(r,new KV(t)),n.sc=n.sc.insert(t,r),gr(n.remoteStore,new Vu(To(Kh(t.path)),r,2,Os.ot))}}function Ed(n,e,t){return CN.apply(this,arguments)}function CN(){return CN=(0,De.Z)(function*(n,e,t){const r=dt(n),i=[],s=[],c=[];var h;r.tc.isEmpty()||(r.tc.forEach((h,p)=>{c.push(r.hc(p,e,t).then(_=>{if(_){r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,_.fromCache?"not-current":"current"),i.push(_);const w=Rb.Vi(p.targetId,_);s.push(w)}}))}),yield Promise.all(c),r.Zu.Go(i),yield(h=(0,De.Z)(function*(p,_){const w=dt(p);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ge.forEach(_,N=>ge.forEach(N.Pi,k=>w.persistence.referenceDelegate.addReference(S,N.targetId,k)).next(()=>ge.forEach(N.vi,k=>w.persistence.referenceDelegate.removeReference(S,N.targetId,k)))))}catch(S){if(!El(S))throw S;Je("LocalStore","Failed to update sequence numbers: "+S)}for(const S of _){const N=S.targetId;if(!S.fromCache){const k=w.$i.get(N),te=k.withLastLimboFreeSnapshotVersion(k.snapshotVersion);w.$i=w.$i.insert(N,te)}}}),function(p,_){return h.apply(this,arguments)})(r.localStore,s))}),CN.apply(this,arguments)}function iG(n,e){return SN.apply(this,arguments)}function SN(){return SN=(0,De.Z)(function*(n,e){const t=dt(n);if(!t.currentUser.isEqual(e)){Je("SyncEngine","User change. New user:",e.toKey());const r=yield gT(t.localStore,e);t.currentUser=e,(i=t).uc.forEach(c=>{c.forEach(h=>{h.reject(new Ae(ye.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ed(t,r.Ki)}var i}),SN.apply(this,arguments)}function sG(n,e){const t=dt(n),r=t.ic.get(e);if(r&&r.Xu)return Yt().add(r.key);{let i=Yt();const s=t.ec.get(e);if(!s)return i;for(const c of s){const h=t.tc.get(c);i=i.unionWith(h.view.qu)}return i}}function oG(n,e){return AN.apply(this,arguments)}function AN(){return AN=(0,De.Z)(function*(n,e){const t=dt(n),r=yield Fb(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&IN(t,e.targetId,i.zu),i}),AN.apply(this,arguments)}function aG(n,e){return NN.apply(this,arguments)}function NN(){return NN=(0,De.Z)(function*(n,e){const t=dt(n);return vT(t.localStore,e).then(r=>Ed(t,r))}),NN.apply(this,arguments)}function lG(n,e,t,r){return RN.apply(this,arguments)}function RN(){return RN=(0,De.Z)(function*(n,e,t,r){const i=dt(n),s=yield function(c,h){const p=dt(c),_=dt(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",w=>_.yn(w,h).next(S=>S?p.localDocuments.getDocuments(w,S):ge.resolve(null)))}(i.localStore,e);var h;null!==s?("pending"===t?yield by(i.remoteStore):"acknowledged"===t||"rejected"===t?(DN(i,e,r||null),EN(i,e),h=e,dt(dt(i.localStore).mutationQueue).In(h)):Tt(),yield Ed(i,s)):Je("SyncEngine","Cannot apply mutation batch with id: "+e)}),RN.apply(this,arguments)}function ON(){return ON=(0,De.Z)(function*(n,e){const t=dt(n);if(PN(t),FN(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield tk(t,r.toArray());t.ac=!0,yield rN(t.remoteStore,!0);for(const s of i)gr(t.remoteStore,s)}else if(!1===e&&!1!==t.ac){const r=[];let i=Promise.resolve();t.ec.forEach((s,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Ty(t,c),cf(t.localStore,c,!0))),vy(t.remoteStore,c)}),yield i,yield tk(t,r),function(s){const c=dt(s);c.ic.forEach((h,p)=>{vy(c.remoteStore,p)}),c.rc.cs(),c.ic=new Map,c.sc=new er(at.comparator)}(t),t.ac=!1,yield rN(t.remoteStore,!1)}}),ON.apply(this,arguments)}function tk(n,e,t){return MN.apply(this,arguments)}function MN(){return MN=(0,De.Z)(function*(n,e,t){const r=dt(n),i=[],s=[];for(const c of e){let h;const p=r.ec.get(c);if(p&&0!==p.length){h=yield uf(r.localStore,To(p[0]));for(const _ of p){const w=r.tc.get(_),S=yield oG(r,w);S.snapshot&&s.push(S.snapshot)}}else{const _=yield yT(r.localStore,c);h=yield uf(r.localStore,_),yield fN(r,nk(_),c,!1)}i.push(h)}return r.Zu.Go(s),i}),MN.apply(this,arguments)}function nk(n){return vI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function cG(n){const e=dt(n);return dt(dt(e.localStore).persistence).Ri()}function dG(n,e,t,r){return xN.apply(this,arguments)}function xN(){return xN=(0,De.Z)(function*(n,e,t,r){const i=dt(n);if(i.ac)return void Je("SyncEngine","Ignoring unexpected query state notification.");const s=i.ec.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const c=yield vT(i.localStore,Z0(s[0])),h=J_.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Ed(i,c,h);break}case"rejected":yield cf(i.localStore,e,!0),Ty(i,e,r);break;default:Tt()}}),xN.apply(this,arguments)}function hG(n,e,t){return kN.apply(this,arguments)}function kN(){return kN=(0,De.Z)(function*(n,e,t){const r=PN(n);if(r.ac){for(const i of e){if(r.ec.has(i)){Je("SyncEngine","Adding an already active target "+i);continue}const s=yield yT(r.localStore,i),c=yield uf(r.localStore,s);yield fN(r,nk(s),c.targetId,!1),gr(r.remoteStore,c)}for(const i of t)r.ec.has(i)&&(yield cf(r.localStore,i,!1).then(()=>{vy(r.remoteStore,i),Ty(r,i)}).catch(nd))}}),kN.apply(this,arguments)}function PN(n){const e=dt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XV.bind(null,e),e.Zu.Go=HV.bind(null,e.eventManager),e.Zu.lc=$V.bind(null,e.eventManager),e}function FN(n){const e=dt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tG.bind(null,e),e}class rk{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,De.Z)(function*(){t.wt=M(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return Mb(this.persistence,new Ob,e.initialUser,this.wt)}_c(e){return new hy(Ab.Ms,this.wt)}dc(e){return new u}terminate(){var e=this;return(0,De.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ik extends rk{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,De.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield FN(r.yc.syncEngine),yield by(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return Mb(this.persistence,new Ob,e.initialUser,this.wt)}mc(e,t){return new Mx(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new bx(t,this.persistence);return new X1(e.asyncQueue,r)}_c(e){const t=Nb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ps.withCacheSize(this.cacheSizeBytes):ps.DEFAULT;return new py(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,I(),A(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new u}}class pG extends ik{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,De.Z)(function*(){yield t().call(r,e);const i=r.yc.syncEngine;r.sharedClientState instanceof a&&(r.sharedClientState.syncEngine={kr:lG.bind(null,i),Or:dG.bind(null,i),Mr:hG.bind(null,i),Ri:cG.bind(null,i),Nr:aG.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var s=(0,De.Z)(function*(c){yield function uG(n,e){return ON.apply(this,arguments)}(r.yc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}dc(e){const t=I();if(!a.V(t))throw new Ae(ye.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Nb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new a(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class LN{initialize(e,t){var r=this;return(0,De.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Xx(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=iG.bind(null,r.syncEngine),yield rN(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new jV}createDatastore(e){const t=M(e.databaseInfo.databaseId),r=new E(e.databaseInfo);return new tt(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=h=>Xx(this.syncEngine,h,0),c=f.V()?new f:new d,new Ct(t,r,i,s,c);var t,r,i,s,c}createSyncEngine(e,t){return function(r,i,s,c,h,p,_){const w=new ZV(r,i,s,c,h,p);return _&&(w.ac=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,De.Z)(function*(t){const r=dt(t);Je("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield Ht(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function sk(n,e=10240){let t=0;return{read:()=>(0,De.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,De.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ST{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class gG{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Oi,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,De.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,De.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,De.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),i=Number(r);isNaN(i)&&e.Pc(`length string (${r}) is not valid number`);const s=yield e.vc(i);return new WV(JSON.parse(s),t.length+i)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,De.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,De.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,De.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class mG{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,De.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ae(ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,De.Z)(function*(s,c){const h=dt(s),p=Ig(h.wt)+"/documents",_={documents:c.map(k=>tf(h.wt,k))},w=yield h.ao("BatchGetDocuments",p,_,c.length),S=new Map;w.forEach(k=>{const j=function DA(n,e){return"found"in e?function(t,r){Lt(!!r.found);const i=Ra(t,r.found.name),s=Br(r.found.updateTime),c=new wi({mapValue:{fields:r.found.fields}});return Yn.newFoundDocument(i,s,c)}(n,e):"missing"in e?function(t,r){Lt(!!r.missing),Lt(!!r.readTime);const i=Ra(t,r.missing),s=Br(r.readTime);return Yn.newNoDocument(i,s)}(n,e):Tt()}(h.wt,k);S.set(j.key.toString(),j)});const N=[];return c.forEach(k=>{const j=S.get(k.toString());Lt(!!j),N.push(j)}),N}),function(s,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Uu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,De.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=at.fromPath(i);e.mutations.push(new tb(s,e.precondition(s)))}),yield(r=(0,De.Z)(function*(i,s){const c=dt(i),h=Ig(c.wt)+"/documents",p={writes:s.map(_=>Tg(c.wt,_))};yield c.ro("Commit",h,p)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Tt();t=jt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ae(ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?wr.updateTime(t):wr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(jt.min()))throw new Ae(ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wr.updateTime(t)}return wr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class _G{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Dc=r.maxAttempts,this.So=new B(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,De.Z)(function*(){const t=new mG(e.datastore),r=e.xc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Nc(s)}))}).catch(i=>{e.Nc(i)})}))}xc(e){try{const t=this.updateFunction(e);return!gg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!nb(t)}return!1}}class yG{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ri.UNAUTHENTICATED,this.clientId=Vh.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,De.Z)(function*(h){Je("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Je("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,De.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(ye.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,De.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Ey(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function ok(n,e){return BN.apply(this,arguments)}function BN(){return BN=(0,De.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Je("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,De.Z)(function*(s){r.isEqual(s)||(yield gT(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),BN.apply(this,arguments)}function ak(n,e){return UN.apply(this,arguments)}function UN(){return UN=(0,De.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield VN(n);Je("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Wx(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>Wx(e.remoteStore,s)),n.onlineComponents=e}),UN.apply(this,arguments)}function VN(n){return GN.apply(this,arguments)}function GN(){return GN=(0,De.Z)(function*(n){return n.offlineComponents||(Je("FirestoreClient","Using default OfflineComponentProvider"),yield ok(n,new rk)),n.offlineComponents}),GN.apply(this,arguments)}function AT(n){return jN.apply(this,arguments)}function jN(){return jN=(0,De.Z)(function*(n){return n.onlineComponents||(Je("FirestoreClient","Using default OnlineComponentProvider"),yield ak(n,new LN)),n.onlineComponents}),jN.apply(this,arguments)}function lk(n){return VN(n).then(e=>e.persistence)}function HN(n){return VN(n).then(e=>e.localStore)}function uk(n){return AT(n).then(e=>e.remoteStore)}function $N(n){return AT(n).then(e=>e.syncEngine)}function Cy(n){return WN.apply(this,arguments)}function WN(){return WN=(0,De.Z)(function*(n){const e=yield AT(n),t=e.eventManager;return t.onListen=YV.bind(null,e.syncEngine),t.onUnlisten=JV.bind(null,e.syncEngine),t}),WN.apply(this,arguments)}function ck(n,e,t={}){const r=new Oi;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function(i,s,c,h,p){const _=new ST({next:S=>{s.enqueueAndForget(()=>lN(i,w));const N=S.docs.has(c);!N&&S.fromCache?p.reject(new Ae(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&h&&"server"===h.source?p.reject(new Ae(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),w=new dN(Kh(c.path),_,{includeMetadataChanges:!0,Du:!0});return oN(i,w)}(yield Cy(n),n.asyncQueue,e,t,r)})),r.promise}function dk(n,e,t={}){const r=new Oi;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function(i,s,c,h,p){const _=new ST({next:S=>{s.enqueueAndForget(()=>lN(i,w)),S.fromCache&&"server"===h.source?p.reject(new Ae(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),w=new dN(c,_,{includeMetadataChanges:!0,Du:!0});return oN(i,w)}(yield Cy(n),n.asyncQueue,e,t,r)})),r.promise}const hk=new Map;function zN(n,e,t){if(!t)throw new Ae(ye.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fk(n,e,t,r){if(!0===e&&!0===r)throw new Ae(ye.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function pk(n){if(!at.isDocumentKey(n))throw new Ae(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gk(n){if(at.isDocumentKey(n))throw new Ae(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function NT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Tt()}function Nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=NT(n);throw new Ae(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function mk(n,e){if(e<=0)throw new Ae(ye.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class _k{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ae(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ae(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,fk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bb{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _k({}),this._settingsFrozen=!1,e instanceof Aa?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ae(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Aa(i.options.projectId)}(e))}get app(){if(!this._app)throw new Ae(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ae(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _k(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new XD;switch(t.type){case"gapi":const r=t.client;return Lt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new nI(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ae(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=hk.get(e);t&&(Je("ComponentProvider","Removing Datastore"),hk.delete(e),t.terminate())}(this),Promise.resolve()}}class Er{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $u(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Er(this.firestore,e,this._key)}}class xs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xs(this.firestore,e,this._query)}}class $u extends xs{constructor(e,t,r){super(e,t,Kh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Er(this.firestore,null,new at(e))}withConverter(e){return new $u(this.firestore,e,this._path)}}function yk(n,e,...t){if(n=(0,P.m9)(n),zN("collection","path",e),n instanceof Bb){const r=wn.fromString(e,...t);return gk(r),new $u(n,null,r)}{if(!(n instanceof Er||n instanceof $u))throw new Ae(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(wn.fromString(e,...t));return gk(r),new $u(n.firestore,null,r)}}function RT(n,e,...t){if(n=(0,P.m9)(n),1===arguments.length&&(e=Vh.I()),zN("doc","path",e),n instanceof Bb){const r=wn.fromString(e,...t);return pk(r),new Er(n,null,new at(r))}{if(!(n instanceof Er||n instanceof $u))throw new Ae(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(wn.fromString(e,...t));return pk(r),new Er(n.firestore,n instanceof $u?n.converter:null,new at(r))}}function vk(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),(n instanceof Er||n instanceof $u)&&(e instanceof Er||e instanceof $u)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function bk(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),n instanceof xs&&e instanceof xs&&n.firestore===e.firestore&&bg(n._query,e._query)&&n.converter===e.converter}class NG{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new B(this,"async_queue_retry"),this.Kc=()=>{const t=A();t&&Je("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=A();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=A();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Oi;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,De.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!El(t))throw t;Je("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,vt("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const i=sN.createAndSchedule(this,e,t,r,s=>this.Wc(s));return this.$c.push(i),i}Gc(){this.Bc&&Tt()}verifyOperationInProgress(){}zc(){var e=this;return(0,De.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function qN(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class RG{constructor(){this._progressObserver={},this._taskCompletionResolver=new Oi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ar extends Bb{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new NG,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||wk(this),this._firestoreClient.terminate()}}function Di(n){return n._firestoreClient||wk(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function wk(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new nA(n._databaseId,s,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var s,h;n._firestoreClient=new yG(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Ek(n,e,t){const r=new Oi;return n.asyncQueue.enqueue((0,De.Z)(function*(){try{yield ok(n,t),yield ak(n,e),r.resolve()}catch(i){const s=i;if(!("FirebaseError"===(c=s).name?c.code===ye.FAILED_PRECONDITION||c.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw s;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var c})).then(()=>r.promise)}function Dk(n){if(n._initialized||n._terminated)throw new Ae(ye.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Dd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ae(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Wu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wu(Lr.fromBase64String(e))}catch(t){throw new Ae(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wu(Lr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Pg{constructor(e){this._methodName=e}}class OT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return sn(this._lat,e._lat)||sn(this._long,e._long)}}const VG=/^__.*__$/;class GG{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Yo(e,this.data,this.fieldMask,t,this.fieldTransforms):new _d(e,this.data,t,this.fieldTransforms)}}class Ik{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Yo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Tk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Tt()}}class MT{constructor(e,t,r,i,s,c){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Xc(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new MT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return PT(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(Tk(this.Zc)&&VG.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class jG{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||M(e)}aa(e,t,r,i=!1){return new MT({Zc:e,methodName:t,ca:r,path:lr.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Fg(n){const e=n._freezeSettings(),t=M(n._databaseId);return new jG(n._databaseId,!!e.ignoreUndefinedProperties,t)}function xT(n,e,t,r,i,s={}){const c=n.aa(s.merge||s.mergeFields?2:0,e,t,i);JN("Data must be an object, but it was:",c,r);const h=Ak(r,c);let p,_;if(s.merge)p=new Ms(c.fieldMask),_=c.fieldTransforms;else if(s.mergeFields){const w=[];for(const S of s.mergeFields){const N=QN(e,S,t);if(!c.contains(N))throw new Ae(ye.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);Rk(w,N)||w.push(N)}p=new Ms(w),_=c.fieldTransforms.filter(S=>p.covers(S.field))}else p=null,_=c.fieldTransforms;return new GG(new wi(h),p,_)}class Ub extends Pg{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ub}}function Ck(n,e,t){return new MT({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class KN extends Pg{_toFieldTransform(e){return new Sl(e.path,new Yh)}isEqual(e){return e instanceof KN}}class HG extends Pg{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Ck(this,e,!0),r=this.ha.map(s=>Lg(s,t)),i=new fd(r);return new Sl(e.path,i)}isEqual(e){return this===e}}class $G extends Pg{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Ck(this,e,!0),r=this.ha.map(s=>Lg(s,t)),i=new pd(r);return new Sl(e.path,i)}isEqual(e){return this===e}}class WG extends Pg{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new us(e.wt,II(e.wt,this.la));return new Sl(e.path,t)}isEqual(e){return this===e}}function ZN(n,e,t,r){const i=n.aa(1,e,t);JN("Data must be an object, but it was:",i,r);const s=[],c=wi.empty();id(r,(p,_)=>{const w=kT(e,p,t);_=(0,P.m9)(_);const S=i.ia(w);if(_ instanceof Ub)s.push(w);else{const N=Lg(_,S);null!=N&&(s.push(w),c.set(w,N))}});const h=new Ms(s);return new Ik(c,h,i.fieldTransforms)}function YN(n,e,t,r,i,s){const c=n.aa(1,e,t),h=[QN(e,r,t)],p=[i];if(s.length%2!=0)throw new Ae(ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<s.length;N+=2)h.push(QN(e,s[N])),p.push(s[N+1]);const _=[],w=wi.empty();for(let N=h.length-1;N>=0;--N)if(!Rk(_,h[N])){const k=h[N];let j=p[N];j=(0,P.m9)(j);const te=c.ia(k);if(j instanceof Ub)_.push(k);else{const oe=Lg(j,te);null!=oe&&(_.push(k),w.set(k,oe))}}const S=new Ms(_);return new Ik(w,S,c.fieldTransforms)}function Sk(n,e,t,r=!1){return Lg(t,n.aa(r?4:3,e))}function Lg(n,e){if(Nk(n=(0,P.m9)(n)))return JN("Unsupported field value:",e,n),Ak(n,e);if(n instanceof Pg)return function(t,r){if(!Tk(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const c of t){let h=Lg(c,r.ra(s));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,P.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return II(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Zn.fromDate(t);return{timestampValue:yd(r.wt,i)}}if(t instanceof Zn){const i=new Zn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:yd(r.wt,i)}}if(t instanceof OT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Wu)return{bytesValue:ab(r.wt,t._byteString)};if(t instanceof Er){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.oa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Dg(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${NT(t)}`)}(n,e)}function Ak(n,e){const t={};return lI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):id(n,(r,i)=>{const s=Lg(i,e.ea(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function Nk(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Zn||n instanceof OT||n instanceof Wu||n instanceof Er||n instanceof Pg)}function JN(n,e,t){if(!Nk(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=NT(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function QN(n,e,t){if((e=(0,P.m9)(e))instanceof Dd)return e._internalPath;if("string"==typeof e)return kT(n,e);throw PT("Field path arguments must be of type string or ",n,!1,void 0,t)}const zG=new RegExp("[~\\*/\\[\\]]");function kT(n,e,t){if(e.search(zG)>=0)throw PT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Dd(...e.split("."))._internalPath}catch{throw PT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function PT(n,e,t,r,i){const s=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(s||c)&&(p+=" (found",s&&(p+=` in field ${r}`),c&&(p+=` in document ${i}`),p+=")"),new Ae(ye.INVALID_ARGUMENT,h+n+p)}function Rk(n,e){return n.some(t=>t.isEqual(e))}class Vb{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Er(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new qG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(FT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class qG extends Vb{data(){return super.data()}}function FT(n,e){return"string"==typeof e?kT(n,e):e instanceof Dd?e._internalPath:e._delegate._internalPath}class Bg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Id extends Vb{constructor(e,t,r,i,s,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Gb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(FT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Gb extends Id{data(e={}){return super.data(e)}}class ff{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Bg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Gb(this._firestore,this._userDataWriter,r.key,r,new Bg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Gb(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Bg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new Gb(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Bg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,_=-1;return 0!==c.type&&(p=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),_=s.indexOf(c.doc.key)),{type:KG(c.type),doc:h,oldIndex:p,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function KG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Tt()}}function Ok(n,e){return n instanceof Id&&e instanceof Id?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ff&&e instanceof ff&&n._firestore===e._firestore&&bk(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Mk(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ae(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jb{}function pf(n,...e){for(const t of e)n=t._apply(n);return n}class ZG extends jb{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=Fg(e.firestore),r=function(i,s,c,h,p,_,w){let S;if(p.isKeyField()){if("array-contains"===_||"array-contains-any"===_)throw new Ae(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if("in"===_||"not-in"===_){Bk(w,_);const k=[];for(const j of w)k.push(Lk(h,i,j));S={arrayValue:{values:k}}}else S=Lk(h,i,w)}else"in"!==_&&"not-in"!==_&&"array-contains-any"!==_||Bk(w,_),S=Sk(c,"where",w,"in"===_||"not-in"===_);const N=Ei.create(p,_,S);return function(k,j){if(j.ht()){const oe=j_(k);if(null!==oe&&!oe.isEqual(j.field))throw new Ae(ye.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${oe.toString()}' and '${j.field.toString()}'`);const Ke=G_(k);null!==Ke&&Uk(0,j.field,Ke)}const te=function(oe,Ke){for(const Ze of oe.filters)if(Ke.indexOf(Ze.op)>=0)return Ze.op;return null}(k,function(oe){switch(oe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(j.op));if(null!==te)throw new Ae(ye.INVALID_ARGUMENT,te===j.op?`Invalid query. You cannot use more than one '${j.op.toString()}' filter.`:`Invalid query. You cannot use '${j.op.toString()}' filters with '${te.toString()}' filters.`)}(i,N),N}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new xs(e.firestore,e.converter,function(i,s){const c=i.filters.concat([s]);return new Cl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class JG extends jb{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new Ae(ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ae(ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new dd(i,s);return function(h,p){if(null===G_(h)){const _=j_(h);null!==_&&Uk(0,_,p.field)}}(r,c),c}(e._query,this.fa,this.wa);return new xs(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Cl(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class xk extends jb{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new xs(e.firestore,e.converter,wI(e._query,this.ma,this.ga))}}class kk extends jb{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=Fk(e,this.type,this.ya,this.pa);return new xs(e.firestore,e.converter,(i=t,new Cl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class Pk extends jb{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=Fk(e,this.type,this.ya,this.pa);return new xs(e.firestore,e.converter,(i=t,new Cl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function Fk(n,e,t,r){if(t[0]=(0,P.m9)(t[0]),t[0]instanceof Vb)return function(i,s,c,h,p){if(!h)throw new Ae(ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const _=[];for(const w of Zh(i))if(w.field.isKeyField())_.push(Tl(s,h.key));else{const S=h.data.field(w.field);if(H0(S))throw new Ae(ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const N=w.field.canonicalString();throw new Ae(ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}_.push(S)}return new cd(_,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Fg(n.firestore);return function(s,c,h,p,_,w){const S=s.explicitOrderBy;if(_.length>S.length)throw new Ae(ye.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let k=0;k<_.length;k++){const j=_[k];if(S[k].field.isKeyField()){if("string"!=typeof j)throw new Ae(ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof j}`);if(!K0(s)&&-1!==j.indexOf("/"))throw new Ae(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${j}' contains a slash.`);const te=s.path.child(wn.fromString(j));if(!at.isDocumentKey(te))throw new Ae(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${te}' is not because it contains an odd number of segments.`);const oe=new at(te);N.push(Tl(c,oe))}else{const te=Sk(h,p,j);N.push(te)}}return new cd(N,w)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Lk(n,e,t){if("string"==typeof(t=(0,P.m9)(t))){if(""===t)throw new Ae(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!K0(e)&&-1!==t.indexOf("/"))throw new Ae(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(wn.fromString(t));if(!at.isDocumentKey(r))throw new Ae(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Tl(n,new at(r))}if(t instanceof Er)return Tl(n,t._key);throw new Ae(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${NT(t)}.`)}function Bk(n,e){if(!Array.isArray(n)||0===n.length)throw new Ae(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ae(ye.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Uk(n,e,t){if(!t.isEqual(e))throw new Ae(ye.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const sj={maxAttempts:5};class XN{convertValue(e,t="none"){switch(ad(e)){case 0:return null;case 1:return e.booleanValue;case 2:return br(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Tt()}}convertObject(e,t){const r={};return id(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new OT(br(e.latitude),br(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=uI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(od(e));default:return null}}convertTimestamp(e){const t=Dl(e);return new Zn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=wn.fromString(e);Lt(fb(r));const i=new Aa(r.get(1),r.get(3)),s=new at(r.popFirst(5));return i.isEqual(t)||vt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function LT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class oj extends XN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Er(this.firestore,null,t)}}class Vk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Fg(e)}set(e,t,r){this._verifyNotCommitted();const i=gf(e,this._firestore),s=LT(i.converter,t,r),c=xT(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,wr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=gf(e,this._firestore);let c;return c="string"==typeof(t=(0,P.m9)(t))||t instanceof Dd?YN(this._dataReader,"WriteBatch.update",s._key,t,r,i):ZN(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(c.toMutation(s._key,wr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=gf(e,this._firestore);return this._mutations=this._mutations.concat(new Uu(t._key,wr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gf(n,e){if((n=(0,P.m9)(n)).firestore!==e)throw new Ae(ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Ug extends XN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Er(this.firestore,null,t)}}function Gk(n,e,t){n=Nn(n,Er);const r=Nn(n.firestore,Ar),i=LT(n.converter,e,t);return Sy(r,[xT(Fg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,wr.none())])}function jk(n,e,t,...r){n=Nn(n,Er);const i=Nn(n.firestore,Ar),s=Fg(i);let c;return c="string"==typeof(e=(0,P.m9)(e))||e instanceof Dd?YN(s,"updateDoc",n._key,e,t,r):ZN(s,"updateDoc",n._key,e),Sy(i,[c.toMutation(n._key,wr.exists(!0))])}function Hk(n,...e){var t,r,i;n=(0,P.m9)(n);let s={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||qN(e[c])||(s=e[c],c++);const h={includeMetadataChanges:s.includeMetadataChanges};if(qN(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let p,_,w;if(n instanceof Er)_=Nn(n.firestore,Ar),w=Kh(n._key.path),p={next:S=>{e[c]&&e[c](eR(_,n,S))},error:e[c+1],complete:e[c+2]};else{const S=Nn(n,xs);_=Nn(S.firestore,Ar),w=S._query;const N=new Ug(_);p={next:k=>{e[c]&&e[c](new ff(_,N,S,k))},error:e[c+1],complete:e[c+2]},Mk(n._query)}return function(S,N,k,j){const te=new ST(j),oe=new dN(N,te,k);return S.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return oN(yield Cy(S),oe)})),()=>{te.Tc(),S.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return lN(yield Cy(S),oe)}))}}(Di(_),w,h,p)}function Sy(n,e){return function(t,r){const i=new Oi;return t.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function QV(n,e,t){return mN.apply(this,arguments)}(yield $N(t),r,i)})),i.promise}(Di(n),e)}function eR(n,e,t){const r=t.docs.get(e._key),i=new Ug(n);return new Id(n,i,e._key,r,new Bg(t.hasPendingWrites,t.fromCache),e.converter)}class mj extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Fg(e)}get(e){const t=gf(e,this._firestore),r=new oj(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Tt();const s=i[0];if(s.isFoundDocument())return new Vb(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new Vb(this._firestore,r,t._key,null,t.converter);throw Tt()})}set(e,t,r){const i=gf(e,this._firestore),s=LT(i.converter,t,r),c=xT(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const s=gf(e,this._firestore);let c;return c="string"==typeof(t=(0,P.m9)(t))||t instanceof Dd?YN(this._dataReader,"Transaction.update",s._key,t,r,i):ZN(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,c),this}delete(e){const t=gf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=gf(e,this._firestore),r=new Ug(this._firestore);return super.get(e).then(i=>new Id(this._firestore,r,t._key,i._document,new Bg(!1,!1),t.converter))}}!function(n,e=!0){Fu=ui.SDK_VERSION,(0,ui._registerComponent)(new Cs.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),s=new Ar(i,new eI(t.getProvider("auth-internal")),new K1(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),(0,ui.registerVersion)(Xc,"3.4.13",n),(0,ui.registerVersion)(Xc,"3.4.13","esm2017")}();function tR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Wk(){if(typeof Uint8Array>"u")throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function zk(){if(!function eA(){return typeof atob<"u"}())throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Hb{constructor(e){this._delegate=e}static fromBase64String(e){return zk(),new Hb(Wu.fromBase64String(e))}static fromUint8Array(e){return Wk(),new Hb(Wu.fromUint8Array(e))}toBase64(){return zk(),this._delegate.toBase64()}toUint8Array(){return Wk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function nR(n){return function Tj(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Cj{enableIndexedDbPersistence(e,t){return function MG(n,e){Dk(n=Nn(n,Ar));const t=Di(n),r=n._freezeSettings(),i=new LN;return Ek(t,i,new ik(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function xG(n){Dk(n=Nn(n,Ar));const e=Di(n),t=n._freezeSettings(),r=new LN;return Ek(e,r,new pG(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function kG(n){if(n._initialized&&!n._terminated)throw new Ae(ye.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Oi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,De.Z)(function*(){try{yield(t=(0,De.Z)(function*(r){if(!Rs.V())return Promise.resolve();const i=r+"main";yield Rs.delete(i)}),function(r){return t.apply(this,arguments)})(Nb(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class qk{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Aa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&cg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function SG(n,e,t,r={}){var i;const s=(n=Nn(n,Bb))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&cg("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,h;if("string"==typeof r.mockUserToken)c=r.mockUserToken,h=Ri.MOCK_USER;else{c=(0,P.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Ae(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ri(p)}n._authCredentials=new q1(new P0(c,h))}}(this._delegate,e,t,r)}enableNetwork(){return function FG(n){return function vG(n){return n.asyncQueue.enqueue((0,De.Z)(function*(){const e=yield lk(n),t=yield uk(n);return e.setNetworkEnabled(!0),function(r){const i=dt(r);return i.lu.delete(0),Pt(i)}(t)}))}(Di(n=Nn(n,Ar)))}(this._delegate)}disableNetwork(){return function LG(n){return function bG(n){return n.asyncQueue.enqueue((0,De.Z)(function*(){const e=yield lk(n),t=yield uk(n);return e.setNetworkEnabled(!1),(r=(0,De.Z)(function*(i){const s=dt(i);s.lu.add(0),yield Ht(s),s._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Di(n=Nn(n,Ar)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,fk("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function PG(n){return function(e){const t=new Oi;return e.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function nG(n,e){return wN.apply(this,arguments)}(yield $N(e),t)})),t.promise}(Di(n=Nn(n,Ar)))}(this._delegate)}onSnapshotsInSync(e){return function gj(n,e){return function DG(n,e){const t=new ST(e);return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return r=yield Cy(n),i=t,dt(r).Tu.add(i),void i.next();var r,i})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return r=yield Cy(n),i=t,void dt(r).Tu.delete(i);var r,i}))}}(Di(n=Nn(n,Ar)),qN(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ay(this,yk(this._delegate,e))}catch(t){throw Js(t,"collection()","Firestore.collection()")}}doc(e){try{return new Oa(this,RT(this._delegate,e))}catch(t){throw Js(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Qs(this,function AG(n,e){if(n=Nn(n,Bb),zN("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(ye.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xs(n,null,(t=e,new Cl(wn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Js(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function _j(n,e,t){n=Nn(n,Ar);const r=Object.assign(Object.assign({},sj),t);return function(i){if(i.maxAttempts<1)throw new Ae(ye.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function IG(n,e,t){const r=new Oi;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){const i=yield(s=n,AT(s).then(c=>c.datastore));var s;new _G(n.asyncQueue,i,t,e,r).run()})),r.promise}(Di(n),i=>e(new mj(n,i)),r)}(this._delegate,t=>e(new Kk(this,t)))}batch(){return Di(this._delegate),new Zk(new Vk(this._delegate,e=>Sy(this._delegate,e)))}loadBundle(e){return function BG(n,e){const t=Di(n=Nn(n,Ar)),r=new RG;return function TG(n,e,t,r){const i=function(s,c){let h;return h="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,_){if(p instanceof Uint8Array)return sk(p,_);if(p instanceof ArrayBuffer)return sk(new Uint8Array(p),_);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new gG(p,c);var p}(t,M(e));n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){!function fG(n,e,t){const r=dt(n);var i;(i=(0,De.Z)(function*(s,c,h){try{const p=yield c.getMetadata();if(yield function(N,k){const j=dt(N),te=Br(k.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",oe=>j.Ds.getBundleMetadata(oe,k.id)).then(oe=>!!oe&&oe.createTime.compareTo(te)>=0)}(s.localStore,p))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(N=p).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);h._updateProgress(Kx(p));const _=new zV(p,s.localStore,c.wt);let w=yield c.fc();for(;w;){const N=yield _.Nu(w);N&&h._updateProgress(N),w=yield c.fc()}const S=yield _.complete();return yield Ed(s,S.Mu,void 0),yield function(N,k){const j=dt(N);return j.persistence.runTransaction("Save bundle","readwrite",te=>j.Ds.saveBundleMetadata(te,k))}(s.localStore,p),h._completeWith(S.progress),Promise.resolve(S.Ou)}catch(p){return cg("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p),Promise.resolve(new Set)}var N}),function(s,c,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield $N(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function UG(n,e){return function CG(n,e){return n.asyncQueue.enqueue((0,De.Z)(function*(){return function(t,r){const i=dt(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ds.getNamedQuery(s,r))}(yield HN(n),e)}))}(Di(n=Nn(n,Ar)),e).then(t=>t?new xs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Qs(this,t):null)}}class BT extends XN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hb(new Wu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Oa.forKey(t,this.firestore,null)}}class Kk{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new BT(e)}get(e){const t=Gg(e);return this._delegate.get(t).then(r=>new $b(this._firestore,new Id(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Gg(e);return r?(tR("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Gg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Gg(e);return this._delegate.delete(t),this}}class Zk{constructor(e){this._delegate=e}set(e,t,r){const i=Gg(e);return r?(tR("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Gg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Gg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Vg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Gb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Wb(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Vg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Vg(e,new BT(e),t),i.set(t,s)),s}}Vg.INSTANCES=new WeakMap;class Oa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new BT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Oa(t,new Er(t._delegate,r,new at(e)))}static forKey(e,t,r){return new Oa(t,new Er(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ay(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ay(this.firestore,yk(this._delegate,e))}catch(t){throw Js(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,P.m9)(e))instanceof Er&&vk(this._delegate,e)}set(e,t){t=tR("DocumentReference.set",t);try{return t?Gk(this._delegate,e,t):Gk(this._delegate,e)}catch(r){throw Js(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?jk(this._delegate,e):jk(this._delegate,e,t,...r)}catch(i){throw Js(i,"updateDoc()","DocumentReference.update()")}}delete(){return function fj(n){return Sy(Nn(n.firestore,Ar),[new Uu(n._key,wr.none())])}(this._delegate)}onSnapshot(...e){const t=Yk(e),r=Jk(e,i=>new $b(this.firestore,new Id(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Hk(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function lj(n){n=Nn(n,Er);const e=Nn(n.firestore,Ar),t=Di(e),r=new Ug(e);return function wG(n,e){const t=new Oi;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return(r=(0,De.Z)(function*(i,s,c){try{const h=yield function(p,_){const w=dt(p);return w.persistence.runTransaction("read document","readonly",S=>w.localDocuments.getDocument(S,_))}(i,s);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new Ae(ye.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=Ey(h,`Failed to get document '${s} from cache`);c.reject(p)}}),function(i,s,c){return r.apply(this,arguments)})(yield HN(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Id(e,r,n._key,i,new Bg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function uj(n){n=Nn(n,Er);const e=Nn(n.firestore,Ar);return ck(Di(e),n._key,{source:"server"}).then(t=>eR(e,n,t))}(this._delegate):function aj(n){n=Nn(n,Er);const e=Nn(n.firestore,Ar);return ck(Di(e),n._key).then(t=>eR(e,n,t))}(this._delegate),t.then(r=>new $b(this.firestore,new Id(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Oa(this.firestore,this._delegate.withConverter(e?Vg.getInstance(this.firestore,e):null))}}function Js(n,e,t){return n.message=n.message.replace(e,t),n}function Yk(n){for(const e of n)if("object"==typeof e&&!nR(e))return e;return{}}function Jk(n,e){var t,r;let i;return i=nR(n[0])?n[0]:nR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class $b{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Oa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Ok(this._delegate,e._delegate)}}class Wb extends $b{data(e){const t=this._delegate.data(e);return function z1(n,e){n||Tt()}(void 0!==t),t}}class Qs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new BT(e)}where(e,t,r){try{return new Qs(this.firestore,pf(this._delegate,function YG(n,e,t){const r=e,i=FT("where",n);return new ZG(i,r,t)}(e,t,r)))}catch(i){throw Js(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Qs(this.firestore,pf(this._delegate,function QG(n,e="asc"){const t=e,r=FT("orderBy",n);return new JG(r,t)}(e,t)))}catch(r){throw Js(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Qs(this.firestore,pf(this._delegate,function XG(n){return mk("limit",n),new xk("limit",n,"F")}(e)))}catch(t){throw Js(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Qs(this.firestore,pf(this._delegate,function ej(n){return mk("limitToLast",n),new xk("limitToLast",n,"L")}(e)))}catch(t){throw Js(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Qs(this.firestore,pf(this._delegate,function tj(...n){return new kk("startAt",n,!0)}(...e)))}catch(t){throw Js(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Qs(this.firestore,pf(this._delegate,function nj(...n){return new kk("startAfter",n,!1)}(...e)))}catch(t){throw Js(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Qs(this.firestore,pf(this._delegate,function rj(...n){return new Pk("endBefore",n,!1)}(...e)))}catch(t){throw Js(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Qs(this.firestore,pf(this._delegate,function ij(...n){return new Pk("endAt",n,!0)}(...e)))}catch(t){throw Js(t,"endAt()","Query.endAt()")}}isEqual(e){return bk(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function dj(n){n=Nn(n,xs);const e=Nn(n.firestore,Ar),t=Di(e),r=new Ug(e);return function EG(n,e){const t=new Oi;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return(r=(0,De.Z)(function*(i,s,c){try{const h=yield Fb(i,s,!0),p=new Jx(s,h.ji),_=p.Ku(h.documents),w=p.applyChanges(_,!1);c.resolve(w.snapshot)}catch(h){const p=Ey(h,`Failed to execute query '${s} against cache`);c.reject(p)}}),function(i,s,c){return r.apply(this,arguments)})(yield HN(n),e,t);var r})),t.promise}(t,n._query).then(i=>new ff(e,r,n,i))}(this._delegate):"server"===e?.source?function hj(n){n=Nn(n,xs);const e=Nn(n.firestore,Ar),t=Di(e),r=new Ug(e);return dk(t,n._query,{source:"server"}).then(i=>new ff(e,r,n,i))}(this._delegate):function cj(n){n=Nn(n,xs);const e=Nn(n.firestore,Ar),t=Di(e),r=new Ug(e);return Mk(n._query),dk(t,n._query).then(i=>new ff(e,r,n,i))}(this._delegate),t.then(r=>new rR(this.firestore,new ff(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Yk(e),r=Jk(e,i=>new rR(this.firestore,new ff(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Hk(this._delegate,t,r)}withConverter(e){return new Qs(this.firestore,this._delegate.withConverter(e?Vg.getInstance(this.firestore,e):null))}}class Aj{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Wb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class rR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Qs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Wb(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Aj(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Wb(this._firestore,r))})}isEqual(e){return Ok(this._delegate,e._delegate)}}class Ay extends Qs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Oa(this.firestore,e):null}doc(e){try{return new Oa(this.firestore,void 0===e?RT(this._delegate):RT(this._delegate,e))}catch(t){throw Js(t,"doc()","CollectionReference.doc()")}}add(e){return function pj(n,e){const t=Nn(n.firestore,Ar),r=RT(n),i=LT(n.converter,e);return Sy(t,[xT(Fg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,wr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Oa(this.firestore,t))}isEqual(e){return vk(this._delegate,e._delegate)}withConverter(e){return new Ay(this.firestore,this._delegate.withConverter(e?Vg.getInstance(this.firestore,e):null))}}function Gg(n){return Nn(n,Er)}class iR{constructor(...e){this._delegate=new Dd(...e)}static documentId(){return new iR(lr.keyField().canonicalString())}isEqual(e){return(e=(0,P.m9)(e))instanceof Dd&&this._delegate._internalPath.isEqual(e._internalPath)}}class jg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function vj(){return new KN("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new jg(e)}static delete(){const e=function yj(){return new Ub("deleteField")}();return e._methodName="FieldValue.delete",new jg(e)}static arrayUnion(...e){const t=function bj(...n){return new HG("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new jg(t)}static arrayRemove(...e){const t=function wj(...n){return new $G("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new jg(t)}static increment(e){const t=function Ej(n){return new WG("increment",n)}(e);return t._methodName="FieldValue.increment",new jg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Nj={Firestore:qk,GeoPoint:OT,Timestamp:Zn,Blob:Hb,Transaction:Kk,WriteBatch:Zk,DocumentReference:Oa,DocumentSnapshot:$b,Query:Qs,QueryDocumentSnapshot:Wb,QuerySnapshot:rR,CollectionReference:Ay,FieldPath:iR,FieldValue:jg,setLogLevel:function Sj(n){!function QD(n){ed.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function Oj(n){(function Rj(n,e){n.INTERNAL.registerComponent(new Cs.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Nj)))})(n,(e,t)=>new qk(e,t,new Cj)),n.registerVersion("@firebase/firestore-compat","0.1.22")}(Jv.Z);var UT=L(6451),VT=L(5363),Mj=L(6063);class xj extends Hn.x{constructor(e=1/0,t=1/0,r=Mj.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:c}=this;t||(r.push(e),!i&&r.push(s.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let c=0;c<s.length&&!e.closed;c+=r?1:2)e.next(s[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const c=t.now();let h=0;for(let p=1;p<r.length&&r[p]<=c;p+=2)h=p;h&&r.splice(0,h+1)}}}var Qk=L(3099);function Xk(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Qk.B)({connector:()=>new xj(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function eP(n,e){return(0,is.m)(e)?hr(()=>n,e):hr(()=>n)}var sR=L(9468);L(5867);const nP=new Map,Bj={activated:!1,tokenObservers:[]},Uj={initialized:!1,enabled:!1};function Xi(n){return nP.get(n)||Bj}function Pl(n,e){nP.set(n,e)}function jT(){return Uj}const aR="https://content-firebaseappcheck.googleapis.com/v1",jj="exchangeDebugToken",rP={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class $j{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,De.Z)(function*(){t.stop();try{t.pending=new P.BH,yield function Wj(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new P.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Xs=new P.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function cR(){return cR=(0,De.Z)(function*({url:n,body:e},t){var r,i;const s={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const k=yield c.getHeartbeatsHeader();k&&(s["X-Firebase-Client"]=k)}const h={method:"POST",body:JSON.stringify(e),headers:s};let p,_;try{p=yield fetch(n,h)}catch(k){throw Xs.create("fetch-network-error",{originalErrorMessage:null===(r=k)||void 0===r?void 0:r.message})}if(200!==p.status)throw Xs.create("fetch-status-error",{httpStatus:p.status});try{_=yield p.json()}catch(k){throw Xs.create("fetch-parse-error",{originalErrorMessage:null===(i=k)||void 0===i?void 0:i.message})}const w=_.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw Xs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_.ttl}`});const S=1e3*Number(w[1]),N=Date.now();return{token:_.token,expireTimeMillis:N+S,issuedAtTimeMillis:N}}),cR.apply(this,arguments)}const Yj="firebase-app-check-database",Jj=1,zb="firebase-app-check-store";let WT=null;function dR(){return dR=(0,De.Z)(function*(n,e){const r=(yield function oP(){return WT||(WT=new Promise((n,e)=>{var t;try{const r=indexedDB.open(Yj,Jj);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var s;e(Xs.create("storage-open",{originalErrorMessage:null===(s=i.target.error)||void 0===s?void 0:s.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(zb,{keyPath:"compositeKey"})}}catch(r){e(Xs.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),WT)}()).transaction(zb,"readwrite"),s=r.objectStore(zb).put({compositeKey:n,value:e});return new Promise((c,h)=>{s.onsuccess=p=>{c()},r.onerror=p=>{var _;h(Xs.create("storage-set",{originalErrorMessage:null===(_=p.target.error)||void 0===_?void 0:_.message}))}})}),dR.apply(this,arguments)}const qb=new Zs.Yd("@firebase/app-check");function cP(n,e){return(0,P.hl)()?function Xj(n,e){return function aP(n,e){return dR.apply(this,arguments)}(function uP(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{qb.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function gR(){return gR=(0,De.Z)(function*(){const n=jT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),gR.apply(this,arguments)}const sH={error:"UNKNOWN_ERROR"};function oH(n){return P.US.encodeString(JSON.stringify(n),!1)}function zT(n){return mR.apply(this,arguments)}function mR(){return mR=(0,De.Z)(function*(n,e=!1){const t=n.app;!function iP(n){if(!Xi(n).activated)throw Xs.create("use-before-activation",{appName:n.name})}(t);const r=Xi(t);let s,i=r.token;if(!i){const p=yield r.cachedTokenPromise;p&&qT(p)&&(i=p)}if(!e&&i&&qT(i))return{token:i.token};let h,c=!1;if(function dP(){return jT().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function uR(n,e){return cR.apply(this,arguments)}(function Zj(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${aR}/projects/${t}/apps/${r}:${jj}?key=${i}`,body:{debug_token:e}}}(t,yield function hP(){return gR.apply(this,arguments)}()),n.heartbeatServiceProvider).then(_=>(r.exchangeTokenPromise=void 0,_)),c=!0);const p=yield r.exchangeTokenPromise;return yield cP(t,p),Pl(t,Object.assign(Object.assign({},r),{token:p})),{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(p=>(r.exchangeTokenPromise=void 0,p)),c=!0),i=yield r.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?qb.warn(p.message):qb.error(p),s=p}return i?(h={token:i.token},Pl(t,Object.assign(Object.assign({},r),{token:i})),yield cP(t,i)):h=function lH(n){return{token:oH(sH),error:n}}(s),c&&function pP(n,e){const t=Xi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,h),h}),mR.apply(this,arguments)}function yR(n,e){const t=Xi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Pl(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function fP(n){const{app:e}=n,t=Xi(e);let r=t.tokenRefresher;r||(r=function aH(n){const{app:e}=n;return new $j((0,De.Z)(function*(){let r;if(r=Xi(e).token?yield zT(n,!0):yield zT(n),r.error)throw r.error}),()=>!0,()=>{const t=Xi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},rP.RETRIAL_MIN_WAIT,rP.RETRIAL_MAX_WAIT)}(n),Pl(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function qT(n){return n.expireTimeMillis-Date.now()>0}class uH{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Xi(this.app);for(const t of e)yR(this.app,t.next);return Promise.resolve()}}const EP="app-check-internal";!function DH(){(0,ui._registerComponent)(new Cs.wA("app-check",n=>function cH(n,e){return new uH(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(EP).initialize()})),(0,ui._registerComponent)(new Cs.wA(EP,n=>function dH(n){return{getToken:e=>zT(n,e),addTokenListener:e=>function _R(n,e,t,r){const{app:i}=n,s=Xi(i),c={next:t,error:r,type:e};if(Pl(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,c]})),s.token&&qT(s.token)){const h=s.token;Promise.resolve().then(()=>{t({token:h.token}),fP(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>fP(n))}(n,"INTERNAL",e),removeTokenListener:e=>yR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ui.registerVersion)("@firebase/app-check","0.5.12")}();class Kb{constructor(){return(0,Cn.vb)("app-check")}}typeof window<"u"&&window;var ZT=L(127);const DR=new l.OlP("angularfire2.auth.use-emulator"),IR=new l.OlP("angularfire2.auth.settings"),TR=new l.OlP("angularfire2.auth.tenant-id"),CR=new l.OlP("angularfire2.auth.langugage-code"),SR=new l.OlP("angularfire2.auth.use-device-language"),AR=new l.OlP("angularfire.auth.persistence"),NR=(n,e,t,r,i,s,c,h)=>(0,Fr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,s&&p.useDeviceLanguage(),c)for(const[_,w]of Object.entries(c))p.settings[_]=w;return h&&p.setPersistence(h),p},[t,r,i,s,c,h]);let Zb=(()=>{class n{constructor(t,r,i,s,c,h,p,_,w,S,N,k){const j=new Hn.x,te=_t(void 0).pipe((0,VT.Q)(c.outsideAngular),hr(()=>s.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,5881)))),(0,C.U)(()=>(0,Fr.on)(t,s,r)),(0,C.U)(oe=>NR(oe,s,h,_,w,S,p,N)),Xk({bufferSize:1,refCount:!1}));if(Pd(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=_t(null);else{te.pipe(Ws()).subscribe();const Ke=te.pipe(hr(Qe=>Qe.getRedirectResult().then(ut=>ut,()=>null)),Cn.iC,Xk({bufferSize:1,refCount:!1})),Ze=te.pipe(hr(Qe=>new Kn.y(ut=>({unsubscribe:s.runOutsideAngular(()=>Qe.onAuthStateChanged(bt=>ut.next(bt),bt=>ut.error(bt),()=>ut.complete()))})))),st=te.pipe(hr(Qe=>new Kn.y(ut=>({unsubscribe:s.runOutsideAngular(()=>Qe.onIdTokenChanged(bt=>ut.next(bt),bt=>ut.error(bt),()=>ut.complete()))}))));this.authState=Ke.pipe(eP(Ze),(0,sR.R)(c.outsideAngular),(0,VT.Q)(c.insideAngular)),this.user=Ke.pipe(eP(st),(0,sR.R)(c.outsideAngular),(0,VT.Q)(c.insideAngular)),this.idToken=this.user.pipe(hr(Qe=>Qe?(0,Qt.D)(Qe.getIdToken()):_t(null))),this.idTokenResult=this.user.pipe(hr(Qe=>Qe?(0,Qt.D)(Qe.getIdTokenResult()):_t(null))),this.credential=(0,UT.T)(Ke,j,this.authState.pipe(Xn(Qe=>!Qe))).pipe((0,C.U)(Qe=>Qe?.user?Qe:null),(0,sR.R)(c.outsideAngular),(0,VT.Q)(c.insideAngular))}return(0,Fr.pX)(this,te,s,{spy:{apply:(oe,Ke,Ze)=>{(oe.startsWith("signIn")||oe.startsWith("createUser"))&&Ze.then(st=>j.next(st))}}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Fr.Dh),l.LFG(Fr.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Cn.HU),l.LFG(DR,8),l.LFG(IR,8),l.LFG(TR,8),l.LFG(CR,8),l.LFG(SR,8),l.LFG(AR,8),l.LFG(Kb,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),NH=(()=>{class n{constructor(){ZT.Z.registerVersion("angularfire",Cn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Zb]}),n})();function IP(n,e){return function RH(n,e=vh.z){return new Kn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function RR(n,e){return IP(n,e).pipe((0,C.U)(t=>({payload:t,type:"query"})))}function YT(n,e){return RR(n,e).pipe(_u(void 0),Pp(),(0,C.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const p=i.find(w=>w.doc.ref.isEqual(c.ref)),_=t?.payload.docs.find(w=>w.ref.isEqual(c.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(c.metadata)||!p&&_&&JSON.stringify(_.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),s}))}function TP(n,e,t){return YT(n,t).pipe(bu((r,i)=>function MH(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function xH(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return OR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return OR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return OR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),Vc(),(0,C.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function OR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function CP(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class SP{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=YT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,C.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(_u(void 0),Pp(),Xn(([r,i])=>i.length>0||!r),(0,C.U)(([r,i])=>i),Cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(bu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=CP(e);return TP(this.query,t,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return RR(this.query,this.afs.schedulers.outsideAngular).pipe((0,C.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Cn.iC)}get(e){return(0,Qt.D)(this.query.get(e)).pipe(Cn.iC)}add(e){return this.ref.add(e)}doc(e){return new AP(this.ref.doc(e),this.afs)}}class AP{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=OP(r,t);return new SP(i,s,this.afs)}snapshotChanges(){return function OH(n,e){return IP(n,e).pipe(_u(void 0),Pp(),(0,C.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,C.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Qt.D)(this.ref.get(e)).pipe(Cn.iC)}}class kH{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?YT(this.query,this.afs.schedulers.outsideAngular).pipe((0,C.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Xn(t=>t.length>0),Cn.iC):YT(this.query,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(bu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=CP(e);return TP(this.query,t,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return RR(this.query,this.afs.schedulers.outsideAngular).pipe((0,C.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Cn.iC)}get(e){return(0,Qt.D)(this.query.get(e)).pipe(Cn.iC)}}const NP=new l.OlP("angularfire2.enableFirestorePersistence"),RP=new l.OlP("angularfire2.firestore.persistenceSettings"),PH=new l.OlP("angularfire2.firestore.settings"),FH=new l.OlP("angularfire2.firestore.use-emulator");function OP(n,e=(t=>t)){return{query:e(n),ref:n}}let MP=(()=>{class n{constructor(t,r,i,s,c,h,p,_,w,S,N,k,j,te,oe,Ke,Ze){this.schedulers=p;const st=(0,Fr.on)(t,h,r),Qe=w;S&&NR(st,h,N,j,te,oe,k,Ke),[this.firestore,this.persistenceEnabled$]=(0,Fr.cc)(`${st.name}.firestore`,"AngularFirestore",st.name,()=>{const ut=h.runOutsideAngular(()=>st.firestore());if(s&&ut.settings(s),Qe&&ut.useEmulator(...Qe),i&&!Pd(c)){const bt=()=>{try{return(0,Qt.D)(ut.enablePersistence(_||void 0).then(()=>!0,()=>!1))}catch(en){return typeof console<"u"&&console.warn(en),_t(!1)}};return[ut,h.runOutsideAngular(bt)]}return[ut,_t(!1)]},[s,Qe,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:c}=OP(i,r),h=this.schedulers.ngZone.run(()=>s);return new SP(h,c,this)}collectionGroup(t,r){const i=r||(c=>c),s=this.firestore.collectionGroup(t);return new kH(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new AP(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Fr.Dh),l.LFG(Fr.xv,8),l.LFG(NP,8),l.LFG(PH,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Cn.HU),l.LFG(RP,8),l.LFG(FH,8),l.LFG(Zb,8),l.LFG(DR,8),l.LFG(IR,8),l.LFG(TR,8),l.LFG(CR,8),l.LFG(SR,8),l.LFG(AR,8),l.LFG(Kb,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),LH=(()=>{class n{constructor(){ZT.Z.registerVersion("angularfire",Cn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:NP,useValue:!0},{provide:RP,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[MP]}),n})(),Hg=(()=>{class n{constructor(t,r,i,s){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=s,this.afAuth.authState.subscribe(c=>{c?(this.userData=c,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.SetUserData(i.user),this.afAuth.authState.subscribe(s=>{s&&this.router.navigate(["dashboard"])})}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new yh.Q).then(t=>{this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.router.navigate(["dashboard"]),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(MP),l.LFG(Zb),l.LFG(os),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),BH=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Hg))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-sign-in"]],decls:29,vars:0,consts:[[1,"displayTable","p-5","d-flex","align-items-center","justify-content-center"],[1,"displayTableCell","p-5","border"],[1,"authBlock"],[1,"text-center","mb-2"],[1,"form-group","mb-3"],["type","text","placeholder","Username","required","",1,"form-control"],["userName",""],[1,"formGroup","mb-3"],["type","password","placeholder","Password","required","",1,"form-control"],["userPassword",""],[1,"form-group"],["type","button","value","Log in",1,"btn","btn-primary",3,"click"],[1,"form-group","mt-2"],[1,"or"],[1,"orInner"],["type","button",1,"btn","btn-warning","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"forgotPassword","mt-2"],["routerLink","/forgot-password"],[1,"redirectToLogin","mt-2"],["routerLink","/register-user"]],template:function(t,r){if(1&t){const i=l.EpF();l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),l._uU(4,"Sign In"),l.qZA(),l.TgZ(5,"div",4),l._UZ(6,"input",5,6),l.qZA(),l.TgZ(8,"div",7),l._UZ(9,"input",8,9),l.qZA(),l.TgZ(11,"div",10)(12,"input",11),l.NdJ("click",function(){l.CHM(i);const c=l.MAs(7),h=l.MAs(10);return l.KtG(r.authService.SignIn(c.value,h.value))}),l.qZA()(),l.TgZ(13,"div",12)(14,"span",13)(15,"span",14),l._uU(16,"Or"),l.qZA()()(),l.TgZ(17,"div",12)(18,"button",15),l.NdJ("click",function(){return r.authService.GoogleAuth()}),l._UZ(19,"i",16),l._uU(20," Log in with Google "),l.qZA()(),l.TgZ(21,"div",17)(22,"a",18),l._uU(23,"\xbfForgot Password?"),l.qZA()()(),l.TgZ(24,"div",19)(25,"span"),l._uU(26,"\xbfDon't have an account? "),l.TgZ(27,"a",20),l._uU(28,"Sign Up"),l.qZA()()()()()}},dependencies:[Uc]}),n})(),UH=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Hg))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-sign-up"]],decls:27,vars:0,consts:[[1,"displayTable","p-5","d-flex","align-items-center","justify-content-center"],[1,"displayTableCell","p-5","border"],[1,"authBlock"],[1,"text-center","mb-3"],[1,"formGroup","mb-3"],["type","email","placeholder","Email Address","required","",1,"form-control"],["userEmail",""],["type","password","placeholder","Password","required","",1,"form-control"],["userPwd",""],[1,"formGroup"],["type","button","value","Sign Up",1,"btn","btn-primary",3,"click"],[1,"formGroup","mt-2"],[1,"or"],[1,"orInner"],["type","button",1,"btn","btn-warning",3,"click"],[1,"fab","fa-google-plus-g"],[1,"redirectToLogin","mt-3"],["routerLink","/sign-in",1,"redirect"],["href",""]],template:function(t,r){if(1&t){const i=l.EpF();l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),l._uU(4,"Sign Up"),l.qZA(),l.TgZ(5,"div",4),l._UZ(6,"input",5,6),l.qZA(),l.TgZ(8,"div",4),l._UZ(9,"input",7,8),l.qZA(),l.TgZ(11,"div",9)(12,"input",10),l.NdJ("click",function(){l.CHM(i);const c=l.MAs(7),h=l.MAs(10);return l.KtG(r.authService.SignUp(c.value,h.value))}),l.qZA()(),l.TgZ(13,"div",11)(14,"span",12)(15,"span",13),l._uU(16,"Or"),l.qZA()()(),l.TgZ(17,"div",11)(18,"button",14),l.NdJ("click",function(){return r.authService.GoogleAuth()}),l._UZ(19,"i",15),l._uU(20," Continue with Google "),l.qZA()()(),l.TgZ(21,"div",16)(22,"span"),l._uU(23,"Already have an account? "),l.TgZ(24,"span",17)(25,"a",18),l._uU(26,"Log In"),l.qZA()()()()()()}},dependencies:[Uc]}),n})();var VH=L(1144);const GH=["addListener","removeListener"],jH=["addEventListener","removeEventListener"],HH=["on","off"];function gs(n,e,t,r){if((0,is.m)(t)&&(r=t,t=void 0),r)return gs(n,e,t).pipe(X(r));const[i,s]=function zH(n){return(0,is.m)(n.addEventListener)&&(0,is.m)(n.removeEventListener)}(n)?jH.map(c=>h=>n[c](e,h,t)):function $H(n){return(0,is.m)(n.addListener)&&(0,is.m)(n.removeListener)}(n)?GH.map(xP(n,e)):function WH(n){return(0,is.m)(n.on)&&(0,is.m)(n.off)}(n)?HH.map(xP(n,e)):[];if(!i&&(0,VH.z)(n))return(0,oi.z)(c=>gs(c,e,t))((0,Kr.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Kn.y(c=>{const h=(...p)=>c.next(1<p.length?p:p[0]);return i(h),()=>s(h)})}function xP(n,e){return t=>r=>n[t](e,r)}var qH=L(3532);function MR(n=0,e,t=vh.P){let r=-1;return null!=e&&((0,qH.K)(e)?t=e:r=e),new Kn.y(i=>{let s=function KH(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let c=0;return t.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},s)})}const{isArray:ZH}=Array;function kP(n){return 1===n.length&&ZH(n[0])?n[0]:n}var JT=L(5032);const FP=new Kn.y(JT.Z);function QT(...n){const e=(0,vr.jO)(n),t=kP(n);return t.length?new Kn.y(r=>{let i=t.map(()=>[]),s=t.map(()=>!1);r.add(()=>{i=s=null});for(let c=0;!r.closed&&c<t.length;c++)(0,Kr.Xf)(t[c]).subscribe((0,we.x)(r,h=>{if(i[c].push(h),i.every(p=>p.length)){const p=i.map(_=>_.shift());r.next(e?e(...p):p),i.some((_,w)=>!_.length&&s[w])&&r.complete()}},()=>{s[c]=!0,!i[c].length&&r.complete()}));return()=>{i=s=null}}):yi.E}function Xr(n){return(0,Ln.e)((e,t)=>{(0,Kr.Xf)(n).subscribe((0,we.x)(t,()=>t.complete(),JT.Z)),!t.closed&&e.subscribe(t)})}function XT(...n){const e=(0,vr.jO)(n);return(0,Ln.e)((t,r)=>{const i=n.length,s=new Array(i);let c=n.map(()=>!1),h=!1;for(let p=0;p<i;p++)(0,Kr.Xf)(n[p]).subscribe((0,we.x)(r,_=>{s[p]=_,!h&&!c[p]&&(c[p]=!0,(h=c.every(T.y))&&(c=null))},JT.Z));t.subscribe((0,we.x)(r,p=>{if(h){const _=[p,...s];r.next(e?e(..._):_)}}))})}const Co=new l.OlP("NgValueAccessor");function aW(n,e){}function lW(n,e){if(1&n&&(l.TgZ(0,"button",3),l._uU(1),l.YNc(2,aW,0,0,"ng-template",4),l.qZA()),2&n){const t=e.$implicit;l.Q6J("ngbPanelToggle",t),l.xp6(1),l.hij(" ",t.title," "),l.xp6(1),l.Q6J("ngTemplateOutlet",null==t.titleTpl?null:t.titleTpl.templateRef)}}function uW(n,e){}function cW(n,e){}function dW(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",8),l.NdJ("ngbRef",function(i){l.CHM(t);const s=l.oxw().$implicit;return l.KtG(s.panelDiv=i)}),l.TgZ(1,"div",9),l.YNc(2,cW,0,0,"ng-template",4),l.qZA()()}if(2&n){const t=l.oxw().$implicit;l.s9C("id",t.id),l.uIk("aria-labelledby",t.id+"-header"),l.xp6(2),l.Q6J("ngTemplateOutlet",(null==t.contentTpl?null:t.contentTpl.templateRef)||null)}}Math,Math,Math;const hW=function(n,e){return{$implicit:n,opened:e}};function fW(n,e){if(1&n&&(l.TgZ(0,"div")(1,"div",5),l.YNc(2,uW,0,0,"ng-template",6),l.qZA(),l.YNc(3,dW,3,3,"div",7),l.qZA()),2&n){const t=e.$implicit,r=l.oxw(),i=l.MAs(1);l.Tol("accordion-item "+(t.cardClass||"")),l.xp6(1),l.Tol("accordion-header "+(t.type?"bg-"+t.type:r.type?"bg-"+r.type:"")),l.MGl("id","",t.id,"-header"),l.xp6(1),l.Q6J("ngTemplateOutlet",(null==t.headerTpl?null:t.headerTpl.templateRef)||i)("ngTemplateOutletContext",l.WLB(8,hW,t,t.isOpen)),l.xp6(1),l.Q6J("ngIf",!r.destroyOnHide||t.isOpen||t.transitionRunning)}}const pW=["ngbAccordionBody",""];function gW(n,e){}function mW(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",1),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.close())}),l.qZA()}}const fC=["*"];function _W(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",6),l.NdJ("click",function(){const s=l.CHM(t).$implicit,c=l.oxw();return c.focus(),l.KtG(c.select(s.id,c.NgbSlideEventSource.INDICATOR))}),l.qZA()}if(2&n){const t=e.$implicit,r=l.oxw();l.ekj("active",t.id===r.activeId),l.uIk("aria-labelledby","slide-"+t.id)("aria-controls","slide-"+t.id)("aria-selected",t.id===r.activeId)}}function yW(n,e){}function vW(n,e){if(1&n&&(l.TgZ(0,"div",7)(1,"span",8),l.SDv(2,9),l.qZA(),l.YNc(3,yW,0,0,"ng-template",10),l.qZA()),2&n){const t=e.$implicit,r=e.index,i=e.count;l.Q6J("id","slide-"+t.id),l.xp6(2),l.pQV(r+1)(i),l.QtT(2),l.xp6(1),l.Q6J("ngTemplateOutlet",t.tplRef)}}function bW(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",11),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.arrowLeft())}),l._UZ(1,"span",12),l.TgZ(2,"span",8),l.SDv(3,13),l.qZA()()}}function wW(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",14),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.arrowRight())}),l._UZ(1,"span",15),l.TgZ(2,"span",8),l.SDv(3,16),l.qZA()()}}const EW=["ngbDatepickerDayView",""],DW=["month"],IW=["year"];function TW(n,e){if(1&n&&(l.TgZ(0,"option",5),l._uU(1),l.qZA()),2&n){const t=e.$implicit,r=l.oxw();l.Q6J("value",t),l.uIk("aria-label",r.i18n.getMonthFullName(t,r.date.year)),l.xp6(1),l.Oqu(r.i18n.getMonthShortName(t,r.date.year))}}function CW(n,e){if(1&n&&(l.TgZ(0,"option",5),l._uU(1),l.qZA()),2&n){const t=e.$implicit,r=l.oxw();l.Q6J("value",t),l.xp6(1),l.Oqu(r.i18n.getYearNumerals(t))}}function SW(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"ngb-datepicker-navigation-select",7),l.NdJ("select",function(i){l.CHM(t);const s=l.oxw();return l.KtG(s.select.emit(i))}),l.qZA()}if(2&n){const t=l.oxw();l.Q6J("date",t.date)("disabled",t.disabled)("months",t.selectBoxes.months)("years",t.selectBoxes.years)}}function AW(n,e){1&n&&l._UZ(0,"div",0)}function NW(n,e){1&n&&l._UZ(0,"div",0)}function RW(n,e){if(1&n&&(l.YNc(0,AW,1,0,"div",9),l.TgZ(1,"div",10),l._uU(2),l.qZA(),l.YNc(3,NW,1,0,"div",9)),2&n){const t=e.$implicit,r=e.index,i=l.oxw(2);l.Q6J("ngIf",r>0),l.xp6(2),l.hij(" ",i.i18n.getMonthLabel(t.firstDate)," "),l.xp6(1),l.Q6J("ngIf",r!==i.months.length-1)}}function OW(n,e){if(1&n&&l.YNc(0,RW,4,3,"ng-template",8),2&n){const t=l.oxw();l.Q6J("ngForOf",t.months)}}function MW(n,e){if(1&n&&(l.TgZ(0,"div",5),l._uU(1),l.qZA()),2&n){const t=l.oxw(2);l.xp6(1),l.Oqu(t.i18n.getWeekLabel())}}function xW(n,e){if(1&n&&(l.TgZ(0,"div",6),l._uU(1),l.qZA()),2&n){const t=e.$implicit;l.xp6(1),l.Oqu(t)}}function kW(n,e){if(1&n&&(l.TgZ(0,"div",2),l.YNc(1,MW,2,1,"div",3),l.YNc(2,xW,2,1,"div",4),l.qZA()),2&n){const t=l.oxw();l.xp6(1),l.Q6J("ngIf",t.datepicker.showWeekNumbers),l.xp6(1),l.Q6J("ngForOf",t.viewModel.weekdays)}}function PW(n,e){if(1&n&&(l.TgZ(0,"div",11),l._uU(1),l.qZA()),2&n){const t=l.oxw(2).$implicit,r=l.oxw();l.xp6(1),l.Oqu(r.i18n.getWeekNumerals(t.number))}}function FW(n,e){}function LW(n,e){if(1&n&&l.YNc(0,FW,0,0,"ng-template",14),2&n){const t=l.oxw().$implicit,r=l.oxw(3);l.Q6J("ngTemplateOutlet",r.datepicker.dayTemplate)("ngTemplateOutletContext",t.context)}}function BW(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",12),l.NdJ("click",function(i){const c=l.CHM(t).$implicit;return l.oxw(3).doSelect(c),l.KtG(i.preventDefault())}),l.YNc(1,LW,1,2,"ng-template",13),l.qZA()}if(2&n){const t=e.$implicit;l.ekj("disabled",t.context.disabled)("hidden",t.hidden)("ngb-dp-today",t.context.today),l.Q6J("tabindex",t.tabindex),l.uIk("aria-label",t.ariaLabel),l.xp6(1),l.Q6J("ngIf",!t.hidden)}}function UW(n,e){if(1&n&&(l.TgZ(0,"div",8),l.YNc(1,PW,2,1,"div",9),l.YNc(2,BW,2,9,"div",10),l.qZA()),2&n){const t=l.oxw().$implicit,r=l.oxw();l.xp6(1),l.Q6J("ngIf",r.datepicker.showWeekNumbers),l.xp6(1),l.Q6J("ngForOf",t.days)}}function VW(n,e){1&n&&l.YNc(0,UW,3,2,"div",7),2&n&&l.Q6J("ngIf",!e.$implicit.collapsed)}const GW=["defaultDayTemplate"],jW=["content"];function HW(n,e){if(1&n&&l._UZ(0,"div",7),2&n){const r=e.currentMonth,i=e.selected,s=e.disabled,c=e.focused;l.Q6J("date",e.date)("currentMonth",r)("selected",i)("disabled",s)("focused",c)}}function $W(n,e){if(1&n&&(l.TgZ(0,"div",12),l._uU(1),l.qZA()),2&n){const t=l.oxw().$implicit,r=l.oxw(2);l.xp6(1),l.hij(" ",r.i18n.getMonthLabel(t.firstDate)," ")}}function WW(n,e){if(1&n&&(l.TgZ(0,"div",9),l.YNc(1,$W,2,1,"div",10),l._UZ(2,"ngb-datepicker-month",11),l.qZA()),2&n){const t=e.$implicit,r=l.oxw(2);l.xp6(1),l.Q6J("ngIf","none"===r.navigation||r.displayMonths>1&&"select"===r.navigation),l.xp6(1),l.Q6J("month",t.firstDate)}}function zW(n,e){if(1&n&&l.YNc(0,WW,3,2,"div",8),2&n){const t=l.oxw();l.Q6J("ngForOf",t.model.months)}}function qW(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"ngb-datepicker-navigation",13),l.NdJ("navigate",function(i){l.CHM(t);const s=l.oxw();return l.KtG(s.onNavigateEvent(i))})("select",function(i){l.CHM(t);const s=l.oxw();return l.KtG(s.onNavigateDateSelect(i))}),l.qZA()}if(2&n){const t=l.oxw();l.Q6J("date",t.model.firstDate)("months",t.model.months)("disabled",t.model.disabled)("showSelect","select"===t.model.navigation)("prevDisabled",t.model.prevDisabled)("nextDisabled",t.model.nextDisabled)("selectBoxes",t.model.selectBoxes)}}function KW(n,e){}function ZW(n,e){}const YW=["dialog"],JW=["ngbNavOutlet",""];function QW(n,e){}const XW=function(n){return{$implicit:n}};function e6(n,e){if(1&n&&(l.TgZ(0,"div",2),l.YNc(1,QW,0,0,"ng-template",3),l.qZA()),2&n){const t=l.oxw().$implicit,r=l.oxw();l.Q6J("item",t)("nav",r.nav)("role",r.paneRole),l.xp6(1),l.Q6J("ngTemplateOutlet",(null==t.contentTpl?null:t.contentTpl.templateRef)||null)("ngTemplateOutletContext",l.VKq(5,XW,t.active||r.isPanelTransitioning(t)))}}function t6(n,e){if(1&n&&l.YNc(0,e6,2,7,"div",1),2&n){const t=e.$implicit,r=l.oxw();l.Q6J("ngIf",t.isPanelInDom()||r.isPanelTransitioning(t))}}function n6(n,e){1&n&&(l.TgZ(0,"span",9),l.SDv(1,10),l.qZA())}function r6(n,e){1&n&&(l.TgZ(0,"span",9),l.SDv(1,11),l.qZA())}function i6(n,e){1&n&&(l.TgZ(0,"span",9),l.SDv(1,12),l.qZA())}function s6(n,e){1&n&&(l.TgZ(0,"span",9),l.SDv(1,13),l.qZA())}function o6(n,e){1&n&&l._uU(0,"...")}function a6(n,e){1&n&&(l.TgZ(0,"span",15),l._uU(1,"(current)"),l.qZA())}function l6(n,e){if(1&n&&(l._uU(0),l.YNc(1,a6,2,0,"span",14)),2&n){const t=e.$implicit,r=e.currentPage;l.hij(" ",t," "),l.xp6(1),l.Q6J("ngIf",t===r)}}function u6(n,e){}const c6=function(n){return{disabled:!0,currentPage:n}};function d6(n,e){if(1&n&&(l.TgZ(0,"a",20),l.YNc(1,u6,0,0,"ng-template",8),l.qZA()),2&n){const t=l.oxw(2).$implicit,r=l.oxw(),i=l.MAs(9);l.xp6(1),l.Q6J("ngTemplateOutlet",(null==r.tplEllipsis?null:r.tplEllipsis.templateRef)||i)("ngTemplateOutletContext",l.VKq(2,c6,t))}}function h6(n,e){}const f6=function(n,e,t){return{disabled:n,$implicit:e,currentPage:t}};function p6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"a",21),l.NdJ("click",function(i){l.CHM(t);const s=l.oxw().$implicit;return l.oxw(2).selectPage(s),l.KtG(i.preventDefault())}),l.YNc(1,h6,0,0,"ng-template",8),l.qZA()}if(2&n){const t=l.oxw().$implicit,r=l.oxw(),i=r.disabled,s=r.$implicit,c=l.oxw(),h=l.MAs(11);l.uIk("tabindex",i?"-1":null)("aria-disabled",i?"true":null),l.xp6(1),l.Q6J("ngTemplateOutlet",(null==c.tplNumber?null:c.tplNumber.templateRef)||h)("ngTemplateOutletContext",l.kEZ(4,f6,i,t,s))}}function g6(n,e){if(1&n&&(l.TgZ(0,"li",17),l.YNc(1,d6,2,4,"a",18),l.YNc(2,p6,2,8,"a",19),l.qZA()),2&n){const t=e.$implicit,r=l.oxw(),i=r.$implicit,s=r.disabled,c=l.oxw();l.ekj("active",t===i)("disabled",c.isEllipsis(t)||s),l.uIk("aria-current",t===i?"page":null),l.xp6(1),l.Q6J("ngIf",c.isEllipsis(t)),l.xp6(1),l.Q6J("ngIf",!c.isEllipsis(t))}}function m6(n,e){1&n&&l.YNc(0,g6,3,7,"li",16),2&n&&l.Q6J("ngForOf",e.pages)}function _6(n,e){}const dO=function(n,e){return{disabled:n,currentPage:e}};function y6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"li",17)(1,"a",22),l.NdJ("click",function(i){return l.CHM(t),l.oxw().selectPage(1),l.KtG(i.preventDefault())}),l.YNc(2,_6,0,0,"ng-template",8),l.qZA()()}if(2&n){const t=l.oxw(),r=l.MAs(1);l.ekj("disabled",t.previousDisabled()),l.xp6(1),l.uIk("tabindex",t.previousDisabled()?"-1":null)("aria-disabled",t.previousDisabled()?"true":null),l.xp6(1),l.Q6J("ngTemplateOutlet",(null==t.tplFirst?null:t.tplFirst.templateRef)||r)("ngTemplateOutletContext",l.WLB(6,dO,t.previousDisabled(),t.page))}}function v6(n,e){}const b6=function(n){return{disabled:n}};function w6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"li",17)(1,"a",23),l.NdJ("click",function(i){l.CHM(t);const s=l.oxw();return s.selectPage(s.page-1),l.KtG(i.preventDefault())}),l.YNc(2,v6,0,0,"ng-template",8),l.qZA()()}if(2&n){const t=l.oxw(),r=l.MAs(3);l.ekj("disabled",t.previousDisabled()),l.xp6(1),l.uIk("tabindex",t.previousDisabled()?"-1":null)("aria-disabled",t.previousDisabled()?"true":null),l.xp6(1),l.Q6J("ngTemplateOutlet",(null==t.tplPrevious?null:t.tplPrevious.templateRef)||r)("ngTemplateOutletContext",l.VKq(6,b6,t.previousDisabled()))}}function E6(n,e){}function D6(n,e){}function I6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"li",17)(1,"a",24),l.NdJ("click",function(i){l.CHM(t);const s=l.oxw();return s.selectPage(s.page+1),l.KtG(i.preventDefault())}),l.YNc(2,D6,0,0,"ng-template",8),l.qZA()()}if(2&n){const t=l.oxw(),r=l.MAs(5);l.ekj("disabled",t.nextDisabled()),l.xp6(1),l.uIk("tabindex",t.nextDisabled()?"-1":null)("aria-disabled",t.nextDisabled()?"true":null),l.xp6(1),l.Q6J("ngTemplateOutlet",(null==t.tplNext?null:t.tplNext.templateRef)||r)("ngTemplateOutletContext",l.WLB(6,dO,t.nextDisabled(),t.page))}}function T6(n,e){}function C6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"li",17)(1,"a",25),l.NdJ("click",function(i){l.CHM(t);const s=l.oxw();return s.selectPage(s.pageCount),l.KtG(i.preventDefault())}),l.YNc(2,T6,0,0,"ng-template",8),l.qZA()()}if(2&n){const t=l.oxw(),r=l.MAs(7);l.ekj("disabled",t.nextDisabled()),l.xp6(1),l.uIk("tabindex",t.nextDisabled()?"-1":null)("aria-disabled",t.nextDisabled()?"true":null),l.xp6(1),l.Q6J("ngTemplateOutlet",(null==t.tplLast?null:t.tplLast.templateRef)||r)("ngTemplateOutletContext",l.WLB(6,dO,t.nextDisabled(),t.page))}}const S6=function(n,e,t){return{$implicit:n,pages:e,disabled:t}};function R6(n,e){if(1&n&&(l.TgZ(0,"span"),l.SDv(1,1),l.ALo(2,"percent"),l.qZA()),2&n){const t=l.oxw();l.xp6(2),l.pQV(l.lcZ(2,1,t.getValue()/t.max)),l.QtT(1)}}function O6(n,e){1&n&&l._uU(0),2&n&&l.Oqu(100===e.fill?"\u2605":"\u2606")}function M6(n,e){}function x6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"span",2),l._uU(1),l.qZA(),l.TgZ(2,"span",3),l.NdJ("mouseenter",function(){const s=l.CHM(t).index,c=l.oxw();return l.KtG(c.enter(s+1))})("click",function(){const s=l.CHM(t).index,c=l.oxw();return l.KtG(c.handleClick(s+1))}),l.YNc(3,M6,0,0,"ng-template",4),l.qZA()}if(2&n){const t=e.index,r=l.oxw(),i=l.MAs(1);l.xp6(1),l.hij("(",t<r.nextRate?"*":" ",")"),l.xp6(1),l.Udp("cursor",r.isInteractive()?"pointer":"default"),l.xp6(1),l.Q6J("ngTemplateOutlet",r.starTemplate||r.starTemplateFromContent||i)("ngTemplateOutletContext",r.contexts[t])}}function k6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",11),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.changeHour(i.hourStep))}),l._UZ(1,"span",12),l.TgZ(2,"span",13),l.SDv(3,14),l.qZA()()}if(2&n){const t=l.oxw();l.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),l.Q6J("disabled",t.disabled)}}function P6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",11),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.changeHour(-i.hourStep))}),l._UZ(1,"span",15),l.TgZ(2,"span",13),l.SDv(3,16),l.qZA()()}if(2&n){const t=l.oxw();l.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),l.Q6J("disabled",t.disabled)}}function F6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",11),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.changeMinute(i.minuteStep))}),l._UZ(1,"span",12),l.TgZ(2,"span",13),l.SDv(3,17),l.qZA()()}if(2&n){const t=l.oxw();l.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),l.Q6J("disabled",t.disabled)}}function L6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",11),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.changeMinute(-i.minuteStep))}),l._UZ(1,"span",15),l.TgZ(2,"span",13),l.SDv(3,18),l.qZA()()}if(2&n){const t=l.oxw();l.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),l.Q6J("disabled",t.disabled)}}function B6(n,e){1&n&&(l.TgZ(0,"div",5),l._uU(1,":"),l.qZA())}function U6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",11),l.NdJ("click",function(){l.CHM(t);const i=l.oxw(2);return l.KtG(i.changeSecond(i.secondStep))}),l._UZ(1,"span",12),l.TgZ(2,"span",13),l.SDv(3,21),l.qZA()()}if(2&n){const t=l.oxw(2);l.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),l.Q6J("disabled",t.disabled)}}function V6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",11),l.NdJ("click",function(){l.CHM(t);const i=l.oxw(2);return l.KtG(i.changeSecond(-i.secondStep))}),l._UZ(1,"span",15),l.TgZ(2,"span",13),l.SDv(3,22),l.qZA()()}if(2&n){const t=l.oxw(2);l.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),l.Q6J("disabled",t.disabled)}}function G6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",19),l.YNc(1,U6,4,7,"button",3),l.TgZ(2,"input",20),l.NdJ("change",function(i){l.CHM(t);const s=l.oxw();return l.KtG(s.updateSecond(i.target.value))})("blur",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.handleBlur())})("input",function(i){l.CHM(t);const s=l.oxw();return l.KtG(s.formatInput(i.target))})("keydown.ArrowUp",function(i){l.CHM(t);const s=l.oxw();return s.changeSecond(s.secondStep),l.KtG(i.preventDefault())})("keydown.ArrowDown",function(i){l.CHM(t);const s=l.oxw();return s.changeSecond(-s.secondStep),l.KtG(i.preventDefault())}),l.qZA(),l.YNc(3,V6,4,7,"button",3),l.qZA()}if(2&n){const t=l.oxw();l.xp6(1),l.Q6J("ngIf",t.spinners),l.xp6(1),l.ekj("form-control-sm",t.isSmallSize)("form-control-lg",t.isLargeSize),l.Q6J("value",t.formatMinSec(null==t.model?null:t.model.second))("readOnly",t.readonlyInputs)("disabled",t.disabled),l.xp6(1),l.Q6J("ngIf",t.spinners)}}function j6(n,e){1&n&&l._UZ(0,"div",5)}function H6(n,e){if(1&n&&(l.ynx(0),l.SDv(1,27),l.BQk()),2&n){const t=l.oxw(2);l.xp6(1),l.pQV(t.i18n.getAfternoonPeriod()),l.QtT(1)}}function $6(n,e){if(1&n&&l.SDv(0,28),2&n){const t=l.oxw(2);l.pQV(t.i18n.getMorningPeriod()),l.QtT(0)}}function W6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",23)(1,"button",24),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.toggleMeridian())}),l.YNc(2,H6,2,1,"ng-container",25),l.YNc(3,$6,1,1,"ng-template",null,26,l.W1O),l.qZA()()}if(2&n){const t=l.MAs(4),r=l.oxw();l.xp6(1),l.ekj("btn-sm",r.isSmallSize)("btn-lg",r.isLargeSize)("disabled",r.disabled),l.Q6J("disabled",r.disabled),l.xp6(1),l.Q6J("ngIf",r.model&&r.model.hour>=12)("ngIfElse",t)}}function z6(n,e){if(1&n&&(l.TgZ(0,"strong",3),l._uU(1),l.qZA()),2&n){const t=l.oxw();l.xp6(1),l.Oqu(t.header)}}function q6(n,e){}function K6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",4),l.YNc(1,q6,0,0,"ng-template",5),l.TgZ(2,"button",6),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.hide())}),l.qZA()()}if(2&n){const t=l.oxw(),r=l.MAs(1);l.xp6(1),l.Q6J("ngTemplateOutlet",t.contentHeaderTpl||r)}}function Z6(n,e){if(1&n&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&n){const t=l.oxw().$implicit,r=l.oxw();l.Tol(r.highlightClass),l.xp6(1),l.Oqu(t)}}function Y6(n,e){if(1&n&&l._uU(0),2&n){const t=l.oxw().$implicit;l.Oqu(t)}}function J6(n,e){if(1&n&&(l.YNc(0,Z6,2,3,"span",1),l.YNc(1,Y6,1,1,"ng-template",null,2,l.W1O)),2&n){const t=e.odd,r=l.MAs(2);l.Q6J("ngIf",t)("ngIfElse",r)}}function _s(n){return parseInt(`${n}`,10)}function rL(n){return null!=n?`${n}`:""}function pC(n,e,t=0){return Math.max(Math.min(n,e),t)}function ky(n){return"string"==typeof n}function ei(n){return!isNaN(_s(n))}function Ur(n){return"number"==typeof n&&isFinite(n)&&Math.floor(n)===n}function Kg(n){return null!=n}function Py(n){return ei(n)?`0${n}`.slice(-2):""}function sL(n,e){return n&&n.className&&n.className.split&&n.className.split(/\s+/).indexOf(e)>=0}function Fy(n){return(n||document.body).getBoundingClientRect()}function oL(n){return n.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const aL={animation:!0,transitionTimerDelayMs:5},iz=()=>{},{transitionTimerDelayMs:sz}=aL,aw=new Map,ki=(n,e,t,r)=>{let i=r.context||{};const s=aw.get(e);if(s)switch(r.runningTransition){case"continue":return yi.E;case"stop":n.run(()=>s.transition$.complete()),i=Object.assign(s.context,i),aw.delete(e)}const c=t(e,r.animation,i)||iz;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>c()),_t(void 0).pipe(function nz(n){return e=>new Kn.y(t=>e.subscribe({next:c=>n.run(()=>t.next(c)),error:c=>n.run(()=>t.error(c)),complete:()=>n.run(()=>t.complete())}))}(n));const h=new Hn.x,p=new Hn.x,_=h.pipe(function JH(...n){return e=>Pr(e,_t(...n))}(!0));aw.set(e,{transition$:h,complete:()=>{p.next(),p.complete()},context:i});const w=function rz(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const S=gs(e,"transitionend").pipe(Xr(_),Xn(({target:k})=>k===e));(function PP(...n){return 1===(n=kP(n)).length?(0,Kr.Xf)(n[0]):new Kn.y(function YH(n){return e=>{let t=[];for(let r=0;t&&!e.closed&&r<n.length;r++)t.push((0,Kr.Xf)(n[r]).subscribe((0,we.x)(e,i=>{if(t){for(let s=0;s<t.length;s++)s!==r&&t[s].unsubscribe();t=null}e.next(i)})))}}(n))})(MR(w+sz).pipe(Xr(_)),S,p).pipe(Xr(_)).subscribe(()=>{aw.delete(e),n.run(()=>{c(),h.next(),h.complete()})})}),h.asObservable()},hO=(n,e,t)=>{let{direction:r,maxSize:i,dimension:s}=t;const{classList:c}=n;function h(){c.add("collapse"),"show"===r?c.add("show"):c.remove("show")}if(e)return i||(i=function az(n,e){if(typeof navigator>"u")return"0px";const{classList:t}=n,r=t.contains("show");r||t.add("show"),n.style[e]="";const i=n.getBoundingClientRect()[e]+"px";return r||t.remove("show"),i}(n,s),t.maxSize=i,n.style[s]="show"!==r?i:"0px",c.remove("collapse"),c.remove("collapsing"),c.remove("show"),Fy(n),c.add("collapsing")),n.style[s]="show"===r?i:"0px",()=>{h(),c.remove("collapsing"),n.style[s]=""};h()};let Zg=(()=>{class n{constructor(){this.animation=aL.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lL=(()=>{class n{constructor(t){this._ngbConfig=t,this.closeOthers=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Zg))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lz=0,fO=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["ng-template","ngbPanelHeader",""]],standalone:!0}),n})(),uL=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["ng-template","ngbPanelTitle",""]],standalone:!0}),n})(),cL=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["ng-template","ngbPanelContent",""]],standalone:!0}),n})(),pO=(()=>{class n{constructor(){this.disabled=!1,this.id="ngb-panel-"+lz++,this.isOpen=!1,this.initClassDone=!1,this.transitionRunning=!1,this.shown=new l.vpe,this.hidden=new l.vpe}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.headerTpl=this.headerTpls.first,this.contentTpl=this.contentTpls.first}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["ngb-panel"]],contentQueries:function(t,r,i){if(1&t&&(l.Suo(i,uL,4),l.Suo(i,fO,4),l.Suo(i,cL,4)),2&t){let s;l.iGM(s=l.CRH())&&(r.titleTpls=s),l.iGM(s=l.CRH())&&(r.headerTpls=s),l.iGM(s=l.CRH())&&(r.contentTpls=s)}},inputs:{disabled:"disabled",id:"id",title:"title",type:"type",cardClass:"cardClass"},outputs:{shown:"shown",hidden:"hidden"},standalone:!0}),n})(),uz=(()=>{class n{constructor(t){this._El=t,this.ngbRef=new l.vpe}ngOnInit(){this.ngbRef.emit(this._El.nativeElement)}ngOnDestroy(){this.ngbRef.emit(null)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngbRef",""]],outputs:{ngbRef:"ngbRef"},standalone:!0}),n})(),dL=(()=>{class n{constructor(t,r){this.accordion=t,this.panel=r}set ngbPanelToggle(t){t&&(this.panel=t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36((0,l.Gpc)(()=>gO)),l.Y36(pO,9))},n.\u0275dir=l.lG2({type:n,selectors:[["button","ngbPanelToggle",""]],hostAttrs:["type","button"],hostVars:5,hostBindings:function(t,r){1&t&&l.NdJ("click",function(){return r.accordion.toggle(r.panel.id)}),2&t&&(l.Ikx("disabled",r.panel.disabled),l.uIk("aria-expanded",r.panel.isOpen)("aria-controls",r.panel.id),l.ekj("collapsed",!r.panel.isOpen))},inputs:{ngbPanelToggle:"ngbPanelToggle"},standalone:!0}),n})(),gO=(()=>{class n{constructor(t,r,i){this._ngZone=r,this._changeDetector=i,this.activeIds=[],this.destroyOnHide=!0,this.panelChange=new l.vpe,this.shown=new l.vpe,this.hidden=new l.vpe,this.animation=t.animation,this.type=t.type,this.closeOtherPanels=t.closeOthers}isExpanded(t){return this.activeIds.indexOf(t)>-1}expand(t){this._changeOpenState(this._findPanelById(t),!0)}expandAll(){this.closeOtherPanels?0===this.activeIds.length&&this.panels.length&&this._changeOpenState(this.panels.first,!0):this.panels.forEach(t=>this._changeOpenState(t,!0))}collapse(t){this._changeOpenState(this._findPanelById(t),!1)}collapseAll(){this.panels.forEach(t=>{this._changeOpenState(t,!1)})}toggle(t){const r=this._findPanelById(t);r&&this._changeOpenState(r,!r.isOpen)}ngAfterContentChecked(){ky(this.activeIds)&&(this.activeIds=this.activeIds.split(/\s*,\s*/)),this.panels.forEach(t=>{t.isOpen=!t.disabled&&this.activeIds.indexOf(t.id)>-1}),this.activeIds.length>1&&this.closeOtherPanels&&(this._closeOthers(this.activeIds[0],!1),this._updateActiveIds()),this._ngZone.onStable.pipe(fr(1)).subscribe(()=>{this.panels.forEach(t=>{const r=t.panelDiv;r?t.initClassDone||(t.initClassDone=!0,ki(this._ngZone,r,hO,{animation:!1,runningTransition:"continue",context:{direction:t.isOpen?"show":"hide",dimension:"height"}})):t.initClassDone=!1})})}_changeOpenState(t,r){if(null!=t&&!t.disabled&&t.isOpen!==r){let i=!1;this.panelChange.emit({panelId:t.id,nextState:r,preventDefault:()=>{i=!0}}),i||(t.isOpen=r,t.transitionRunning=!0,r&&this.closeOtherPanels&&this._closeOthers(t.id),this._updateActiveIds(),this._runTransitions(this.animation))}}_closeOthers(t,r=!0){this.panels.forEach(i=>{i.id!==t&&i.isOpen&&(i.isOpen=!1,i.transitionRunning=r)})}_findPanelById(t){return this.panels.find(r=>r.id===t)||null}_updateActiveIds(){this.activeIds=this.panels.filter(t=>t.isOpen&&!t.disabled).map(t=>t.id)}_runTransitions(t){this._changeDetector.detectChanges(),this.panels.forEach(r=>{r.transitionRunning&&ki(this._ngZone,r.panelDiv,hO,{animation:t,runningTransition:"stop",context:{direction:r.isOpen?"show":"hide",dimension:"height"}}).subscribe(()=>{r.transitionRunning=!1;const{id:s}=r;r.isOpen?(r.shown.emit(),this.shown.emit(s)):(r.hidden.emit(),this.hidden.emit(s))})})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(lL),l.Y36(l.R0b),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-accordion"]],contentQueries:function(t,r,i){if(1&t&&l.Suo(i,pO,4),2&t){let s;l.iGM(s=l.CRH())&&(r.panels=s)}},hostAttrs:["role","tablist",1,"accordion"],hostVars:1,hostBindings:function(t,r){2&t&&l.uIk("aria-multiselectable",!r.closeOtherPanels)},inputs:{animation:"animation",activeIds:"activeIds",closeOtherPanels:["closeOthers","closeOtherPanels"],destroyOnHide:"destroyOnHide",type:"type"},outputs:{panelChange:"panelChange",shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0,features:[l.jDz],decls:3,vars:1,consts:[["ngbPanelHeader",""],["t",""],["ngFor","",3,"ngForOf"],[1,"accordion-button",3,"ngbPanelToggle"],[3,"ngTemplateOutlet"],["role","tab",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tabpanel",3,"id","ngbRef",4,"ngIf"],["role","tabpanel",3,"id","ngbRef"],[1,"accordion-body"]],template:function(t,r){1&t&&(l.YNc(0,lW,3,3,"ng-template",0,1,l.W1O),l.YNc(2,fW,4,11,"ng-template",2)),2&t&&(l.xp6(2),l.Q6J("ngForOf",r.panels))},dependencies:[xn,Wr,dL,uz,fO,Qn],encapsulation:2}),n})(),cz=(()=>{class n{constructor(t){this._ngbConfig=t,this.horizontal=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Zg))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hL=(()=>{class n{constructor(t,r,i){this._element=t,this._zone=i,this._afterInit=!1,this._isCollapsed=!1,this.ngbCollapseChange=new l.vpe,this.shown=new l.vpe,this.hidden=new l.vpe,this.animation=r.animation,this.horizontal=r.horizontal}set collapsed(t){this._isCollapsed!==t&&(this._isCollapsed=t,this._afterInit&&this._runTransitionWithEvents(t,this.animation))}ngOnInit(){this._runTransition(this._isCollapsed,!1),this._afterInit=!0}toggle(t=this._isCollapsed){this.collapsed=!t,this.ngbCollapseChange.next(this._isCollapsed)}_runTransition(t,r){return ki(this._zone,this._element.nativeElement,hO,{animation:r,runningTransition:"stop",context:{direction:t?"hide":"show",dimension:this.horizontal?"width":"height"}})}_runTransitionWithEvents(t,r){this._runTransition(t,r).subscribe(()=>{t?this.hidden.emit():this.shown.emit()})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(cz),l.Y36(l.R0b))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngbCollapse",""]],hostVars:2,hostBindings:function(t,r){2&t&&l.ekj("collapse-horizontal",r.horizontal)},inputs:{animation:"animation",collapsed:["ngbCollapse","collapsed"],horizontal:"horizontal"},outputs:{ngbCollapseChange:"ngbCollapseChange",shown:"shown",hidden:"hidden"},exportAs:["ngbCollapse"],standalone:!0}),n})(),dz=0,fL=(()=>{class n{constructor(t){this._item=t}template(){return!1===this._item.destroyOnHide||this._item.animatingBodyCollapse?this._bodyTpl:null}}return n.\u0275fac=function(t){return new(t||n)(l.Y36((0,l.Gpc)(()=>Yg)))},n.\u0275cmp=l.Xpm({type:n,selectors:[["","ngbAccordionBody",""]],contentQueries:function(t,r,i){if(1&t&&l.Suo(i,l.Rgc,7),2&t){let s;l.iGM(s=l.CRH())&&(r._bodyTpl=s.first)}},hostVars:2,hostBindings:function(t,r){2&t&&l.ekj("accordion-body",!0)},standalone:!0,features:[l.jDz],attrs:pW,decls:1,vars:1,consts:[[3,"ngTemplateOutlet"]],template:function(t,r){1&t&&l.YNc(0,gW,0,0,"ng-template",0),2&t&&l.Q6J("ngTemplateOutlet",r.template())},dependencies:[Wr],encapsulation:2}),n})(),pL=(()=>{class n{constructor(t,r){this.item=t,this.ngbCollapse=r}}return n.\u0275fac=function(t){return new(t||n)(l.Y36((0,l.Gpc)(()=>Yg)),l.Y36(hL))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngbAccordionCollapse",""]],hostAttrs:["role","region"],hostVars:4,hostBindings:function(t,r){2&t&&(l.Ikx("id",r.item.collapseId),l.uIk("aria-labelledby",r.item.toggleId),l.ekj("accordion-collapse",!0))},exportAs:["ngbAccordionCollapse"],standalone:!0,features:[l.zW0([hL])]}),n})(),Yg=(()=>{class n{constructor(t,r){this._accordion=t,this._cd=r,this._subscriptions=[],this._collapsed=!0,this._id="ngb-accordion-item-"+dz++,this.animatingBodyCollapse=!1,this.destroyOnHide=this._accordion.destroyOnHide,this.disabled=!1,this.shown=new l.vpe,this.hidden=new l.vpe}set id(t){ky(t)&&""!==t&&(this._id=t)}set collapsed(t){this.collapsed!==t&&(this._collapsed=t,this._cd.markForCheck(),this._collapsed||(this.animatingBodyCollapse=!0,this._cd.detectChanges()),this._collapse.ngbCollapse.animation=this._accordion.animation,this._collapse.ngbCollapse.collapsed=t)}get collapsed(){return this._collapsed}get id(){return`${this._id}`}get toggleId(){return`${this.id}-toggle`}get collapseId(){return`${this.id}-collapse`}ngAfterContentInit(){const{ngbCollapse:t}=this._collapse;t.animation=!1,t.collapsed=this.collapsed,t.animation=this._accordion.animation,this._subscriptions.push(t.hidden.subscribe(()=>{this.animatingBodyCollapse=!1,this.hidden.emit(),this._accordion.hidden.emit(this.id)}),t.shown.subscribe(()=>{this.shown.emit(),this._accordion.shown.emit(this.id)}))}ngOnDestroy(){this._subscriptions.forEach(t=>t.unsubscribe())}toggle(){this.collapsed=!this.collapsed}}return n.\u0275fac=function(t){return new(t||n)(l.Y36((0,l.Gpc)(()=>mO)),l.Y36(l.sBO))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngbAccordionItem",""]],contentQueries:function(t,r,i){if(1&t&&l.Suo(i,pL,7),2&t){let s;l.iGM(s=l.CRH())&&(r._collapse=s.first)}},hostVars:3,hostBindings:function(t,r){2&t&&(l.Ikx("id",r.id),l.ekj("accordion-item",!0))},inputs:{id:["ngbAccordionItem","id"],destroyOnHide:"destroyOnHide",disabled:"disabled",collapsed:"collapsed"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbAccordionItem"],standalone:!0}),n})(),mO=(()=>{class n{constructor(t){this.destroyOnHide=!0,this.shown=new l.vpe,this.hidden=new l.vpe,this.animation=t.animation,this.closeOthers=t.closeOthers}toggle(t){const r=this._getItem(t);if(r){const i=r.collapsed;this._items.forEach(s=>{s===r?s.toggle():this.closeOthers&&i&&(s.collapsed=!0)})}}expand(t){const r=this._getItem(t);r&&this._items.forEach(i=>{i===r?r.collapsed=!1:this.closeOthers&&(i.collapsed=!0)})}expandAll(){this.closeOthers?this._items.find(t=>!t.collapsed)||(this._items.get(0).collapsed=!1):this._items.forEach(t=>{t.collapsed=!1})}collapse(t){const r=this._getItem(t);r&&(r.collapsed=!0)}collapseAll(){this._items.forEach(t=>t.collapsed=!0)}isExpanded(t){const r=this._getItem(t);return!!r&&!r.collapsed}_getItem(t){return this._items.find(r=>r.id===t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(lL))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngbAccordion",""]],contentQueries:function(t,r,i){if(1&t&&l.Suo(i,Yg,4),2&t){let s;l.iGM(s=l.CRH())&&(r._items=s)}},hostVars:2,hostBindings:function(t,r){2&t&&l.ekj("accordion",!0)},inputs:{animation:"animation",closeOthers:"closeOthers",destroyOnHide:"destroyOnHide"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0}),n})(),mL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[gO,fL]}),n})();const pz=({classList:n})=>{n.remove("show")};let gz=(()=>{class n{constructor(t){this._ngbConfig=t,this.dismissible=!0,this.type="warning"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Zg))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mz=(()=>{class n{constructor(t,r,i,s){this._renderer=r,this._element=i,this._zone=s,this.closed=new l.vpe,this.dismissible=t.dismissible,this.type=t.type,this.animation=t.animation}close(){const t=ki(this._zone,this._element.nativeElement,pz,{animation:this.animation,runningTransition:"continue"});return t.subscribe(()=>this.closed.emit()),t}ngOnChanges(t){const r=t.type;r&&!r.firstChange&&(this._renderer.removeClass(this._element.nativeElement,`alert-${r.previousValue}`),this._renderer.addClass(this._element.nativeElement,`alert-${r.currentValue}`))}ngOnInit(){this._renderer.addClass(this._element.nativeElement,`alert-${this.type}`)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(gz),l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(l.R0b))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-alert"]],hostAttrs:["role","alert",1,"alert","show"],hostVars:4,hostBindings:function(t,r){2&t&&l.ekj("fade",r.animation)("alert-dismissible",r.dismissible)},inputs:{animation:"animation",dismissible:"dismissible",type:"type"},outputs:{closed:"closed"},exportAs:["ngbAlert"],standalone:!0,features:[l.TTD,l.jDz],ngContentSelectors:fC,decls:2,vars:1,consts:function(){let e;return e=$localize`:@@ngb.alert.close:Close`,[["type","button","class","btn-close","aria-label",e,3,"click",4,"ngIf"],["type","button","aria-label",e,1,"btn-close",3,"click"]]},template:function(t,r){1&t&&(l.F$t(),l.Hsn(0),l.YNc(1,mW,1,0,"button",0)),2&t&&(l.xp6(1),l.Q6J("ngIf",r.dismissible))},dependencies:[Qn],styles:["ngb-alert{display:block}\n"],encapsulation:2,changeDetection:0}),n})(),_L=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[mz]}),n})();var bf=(()=>(function(n){n.START="start",n.END="end"}(bf||(bf={})),bf))();const yL=({classList:n})=>n.contains("carousel-item-start")||n.contains("carousel-item-end"),lw=n=>{n.remove("carousel-item-start"),n.remove("carousel-item-end")},gC=n=>{lw(n),n.remove("carousel-item-prev"),n.remove("carousel-item-next")},_z=(n,e,{direction:t})=>{const{classList:r}=n;return e?(yL(n)?lw(r):(r.add("carousel-item-"+(t===bf.START?"next":"prev")),Fy(n),r.add("carousel-item-"+t)),()=>{gC(r),r.add("active")}):(lw(r),gC(r),void r.add("active"))},yz=(n,e,{direction:t})=>{const{classList:r}=n;return e?(yL(n)?lw(r):r.add("carousel-item-"+t),()=>{gC(r),r.remove("active")}):(lw(r),gC(r),void r.remove("active"))};let vz=(()=>{class n{constructor(t){this._ngbConfig=t,this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Zg))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bz=0,wz=(()=>{class n{constructor(t){this.tplRef=t,this.id="ngb-slide-"+bz++,this.slid=new l.vpe}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"},standalone:!0}),n})(),Ez=(()=>{class n{constructor(t,r,i,s,c){this._platformId=r,this._ngZone=i,this._cd=s,this._container=c,this.NgbSlideEventSource=Jg,this._destroy$=new Hn.x,this._interval$=new ar(0),this._mouseHover$=new ar(!1),this._focused$=new ar(!1),this._pauseOnHover$=new ar(!1),this._pauseOnFocus$=new ar(!1),this._pause$=new ar(!1),this._wrap$=new ar(!1),this.slide=new l.vpe,this.slid=new l.vpe,this._transitionIds=null,this.animation=t.animation,this.interval=t.interval,this.wrap=t.wrap,this.keyboard=t.keyboard,this.pauseOnHover=t.pauseOnHover,this.pauseOnFocus=t.pauseOnFocus,this.showNavigationArrows=t.showNavigationArrows,this.showNavigationIndicators=t.showNavigationIndicators}set interval(t){this._interval$.next(t)}get interval(){return this._interval$.value}set wrap(t){this._wrap$.next(t)}get wrap(){return this._wrap$.value}set pauseOnHover(t){this._pauseOnHover$.next(t)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(t){this._pauseOnFocus$.next(t)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(t){this._mouseHover$.next(t)}get mouseHover(){return this._mouseHover$.value}set focused(t){this._focused$.next(t)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(Jg.ARROW_LEFT)}arrowRight(){this.focus(),this.next(Jg.ARROW_RIGHT)}ngAfterContentInit(){(function ac(n){return n===Ui})(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const t=Nt([this.slide.pipe((0,C.U)(r=>r.current),_u(this.activeId)),this._wrap$,this.slides.changes.pipe(_u(null))]).pipe((0,C.U)(([r,i])=>{const s=this.slides.toArray(),c=this._getSlideIdxById(r);return i?s.length>1:c<s.length-1}),Vc());Nt([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,t]).pipe((0,C.U)(([r,i,s,c,h,p,_])=>r||i&&s||c&&h||!_?0:p),Vc(),hr(r=>r>0?MR(r,r):FP),Xr(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(Jg.TIMER)))}),this.slides.changes.pipe(Xr(this._destroy$)).subscribe(()=>{this._transitionIds?.forEach(t=>(n=>{aw.get(n)?.complete()})(this._getSlideElement(t))),this._transitionIds=null,this._cd.markForCheck(),this._ngZone.onStable.pipe(fr(1)).subscribe(()=>{for(const{id:t}of this.slides){const r=this._getSlideElement(t);t===this.activeId?r.classList.add("active"):r.classList.remove("active")}})})}ngAfterContentChecked(){let t=this._getSlideById(this.activeId);this.activeId=t?t.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){const t=this._getSlideElement(this.activeId);t&&t.classList.add("active")}}ngOnDestroy(){this._destroy$.next()}select(t,r){this._cycleToSelected(t,this._getSlideEventDirection(this.activeId,t),r)}prev(t){this._cycleToSelected(this._getPrevSlide(this.activeId),bf.END,t)}next(t){this._cycleToSelected(this._getNextSlide(this.activeId),bf.START,t)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(t,r,i){const s=this._transitionIds;if(s&&(s[0]!==t||s[1]!==this.activeId))return;let c=this._getSlideById(t);if(c&&c.id!==this.activeId){this._transitionIds=[this.activeId,t],this.slide.emit({prev:this.activeId,current:c.id,direction:r,paused:this._pause$.value,source:i});const h={animation:this.animation,runningTransition:"stop",context:{direction:r}},p=[],_=this._getSlideById(this.activeId);if(_){const k=ki(this._ngZone,this._getSlideElement(_.id),yz,h);k.subscribe(()=>{_.slid.emit({isShown:!1,direction:r,source:i})}),p.push(k)}const w=this.activeId;this.activeId=c.id;const S=this._getSlideById(this.activeId),N=ki(this._ngZone,this._getSlideElement(c.id),_z,h);N.subscribe(()=>{S?.slid.emit({isShown:!0,direction:r,source:i})}),p.push(N),QT(...p).pipe(fr(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:w,current:c.id,direction:r,paused:this._pause$.value,source:i})})}this._cd.markForCheck()}_getSlideEventDirection(t,r){return this._getSlideIdxById(t)>this._getSlideIdxById(r)?bf.END:bf.START}_getSlideById(t){return this.slides.find(r=>r.id===t)||null}_getSlideIdxById(t){const r=this._getSlideById(t);return null!=r?this.slides.toArray().indexOf(r):-1}_getNextSlide(t){const r=this.slides.toArray(),i=this._getSlideIdxById(t);return i===r.length-1?this.wrap?r[0].id:r[r.length-1].id:r[i+1].id}_getPrevSlide(t){const r=this.slides.toArray(),i=this._getSlideIdxById(t);return 0===i?this.wrap?r[r.length-1].id:r[0].id:r[i-1].id}_getSlideElement(t){return this._container.nativeElement.querySelector(`#slide-${t}`)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(vz),l.Y36(l.Lbi),l.Y36(l.R0b),l.Y36(l.sBO),l.Y36(l.SBq))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-carousel"]],contentQueries:function(t,r,i){if(1&t&&l.Suo(i,wz,4),2&t){let s;l.iGM(s=l.CRH())&&(r.slides=s)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(t,r){1&t&&l.NdJ("keydown.arrowLeft",function(){return r.keyboard&&r.arrowLeft()})("keydown.arrowRight",function(){return r.keyboard&&r.arrowRight()})("mouseenter",function(){return r.mouseHover=!0})("mouseleave",function(){return r.mouseHover=!1})("focusin",function(){return r.focused=!0})("focusout",function(){return r.focused=!1}),2&t&&(l.uIk("aria-activedescendant","slide-"+r.activeId),l.Udp("display","block"))},inputs:{animation:"animation",activeId:"activeId",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],standalone:!0,features:[l.jDz],decls:6,vars:6,consts:function(){let e,t,r;return e=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number: Slide ${"\ufffd0\ufffd"}:INTERPOLATION: of ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,t=$localize`:@@ngb.carousel.previous:Previous`,r=$localize`:@@ngb.carousel.next:Next`,[["role","tablist",1,"carousel-indicators"],["type","button","data-bs-target","","role","tab",3,"active","click",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["class","carousel-control-prev","type","button",3,"click",4,"ngIf"],["class","carousel-control-next","type","button",3,"click",4,"ngIf"],["type","button","data-bs-target","","role","tab",3,"click"],["role","tabpanel",1,"carousel-item",3,"id"],[1,"visually-hidden"],e,[3,"ngTemplateOutlet"],["type","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],t,["type","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],r]},template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.YNc(1,_W,1,5,"button",1),l.qZA(),l.TgZ(2,"div",2),l.YNc(3,vW,4,4,"div",3),l.qZA(),l.YNc(4,bW,4,0,"button",4),l.YNc(5,wW,4,0,"button",5)),2&t&&(l.ekj("visually-hidden",!r.showNavigationIndicators),l.xp6(1),l.Q6J("ngForOf",r.slides),l.xp6(2),l.Q6J("ngForOf",r.slides),l.xp6(1),l.Q6J("ngIf",r.showNavigationArrows),l.xp6(1),l.Q6J("ngIf",r.showNavigationArrows))},dependencies:[xn,Wr,Qn],encapsulation:2,changeDetection:0}),n})();var Jg=(()=>(function(n){n.TIMER="timer",n.ARROW_LEFT="arrowLeft",n.ARROW_RIGHT="arrowRight",n.INDICATOR="indicator"}(Jg||(Jg={})),Jg))();let vL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ez]}),n})(),bL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();class Pi{constructor(e,t,r){this.year=Ur(e)?e:null,this.month=Ur(t)?t:null,this.day=Ur(r)?r:null}static from(e){return e instanceof Pi?e:e?new Pi(e.year,e.month,e.day):null}equals(e){return null!=e&&this.year===e.year&&this.month===e.month&&this.day===e.day}before(e){return!!e&&(this.year===e.year?this.month===e.month?this.day!==e.day&&this.day<e.day:this.month<e.month:this.year<e.year)}after(e){return!!e&&(this.year===e.year?this.month===e.month?this.day!==e.day&&this.day>e.day:this.month>e.month:this.year>e.year)}}function Ly(n,e){return!function Dz(n,e){return!n&&!e||!!n&&!!e&&n.equals(e)}(n,e)}function wL(n,e){return!(!n&&!e||n&&e&&n.year===e.year&&n.month===e.month)}function mC(n,e,t){return n&&e&&n.before(e)?e:n&&t&&n.after(t)?t:n||null}function _O(n,e){const{minDate:t,maxDate:r,disabled:i,markDisabled:s}=e;return!(null==n||i||s&&s(n,{year:n.year,month:n.month})||t&&n.before(t)||r&&n.after(r))}function EL(n){return new Pi(n.getFullYear(),n.getMonth()+1,n.getDate())}function _C(n){const e=new Date(n.year,n.month-1,n.day,12);return isNaN(e.getTime())||e.setFullYear(n.year),e}let yC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Mz(){return new xz}()},providedIn:"root"}),n})(),xz=(()=>{class n extends yC{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(t,r="d",i=1){let s=_C(t),c=!0,h=s.getMonth();switch(r){case"y":s.setFullYear(s.getFullYear()+i);break;case"m":h+=i,s.setMonth(h),h%=12,h<0&&(h+=12);break;case"d":s.setDate(s.getDate()+i),c=!1;break;default:return t}return c&&s.getMonth()!==h&&s.setDate(0),EL(s)}getPrev(t,r="d",i=1){return this.getNext(t,r,-i)}getWeekday(t){let i=_C(t).getDay();return 0===i?7:i}getWeekNumber(t,r){7===r&&(r=0);const c=_C(t[(11-r)%7]);c.setDate(c.getDate()+4-(c.getDay()||7));const h=c.getTime();return c.setMonth(0),c.setDate(1),Math.floor(Math.round((h-c.getTime())/864e5)/7)+1}getToday(){return EL(new Date)}isValid(t){if(!(t&&Ur(t.year)&&Ur(t.month)&&Ur(t.day)&&0!==t.year))return!1;const r=_C(t);return!isNaN(r.getTime())&&r.getFullYear()===t.year&&r.getMonth()+1===t.month&&r.getDate()===t.day}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Qg=(()=>{class n{getMonthLabel(t){return`${this.getMonthFullName(t.month,t.year)} ${this.getYearNumerals(t.year)}`}getDayNumerals(t){return`${t.day}`}getWeekNumerals(t){return`${t}`}getYearNumerals(t){return`${t}`}getWeekLabel(){return""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function kz(n){return new Pz(n)}(l.LFG(l.soG)),r},providedIn:"root"}),n})(),Pz=(()=>{class n extends Qg{constructor(t){super(),this._locale=t,this._monthsShort=qe(t,nt.Standalone,ze.Abbreviated),this._monthsFull=qe(t,nt.Standalone,ze.Wide)}getWeekdayLabel(t,r){const i=Ue(this._locale,nt.Standalone,void 0===r?ze.Short:r);return i.map((c,h)=>i[(h+1)%7])[t-1]||""}getMonthShortName(t){return this._monthsShort[t-1]||""}getMonthFullName(t){return this._monthsFull[t-1]||""}getDayAriaLabel(t){return Mn(new Date(t.year,t.month-1,t.day),"fullDate",this._locale)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.soG))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),yO=(()=>{class n{constructor(t,r){this._calendar=t,this._i18n=r,this._VALIDATORS={dayTemplateData:i=>{if(this._state.dayTemplateData!==i)return{dayTemplateData:i}},displayMonths:i=>{if(Ur(i=_s(i))&&i>0&&this._state.displayMonths!==i)return{displayMonths:i}},disabled:i=>{if(this._state.disabled!==i)return{disabled:i}},firstDayOfWeek:i=>{if(Ur(i=_s(i))&&i>=0&&this._state.firstDayOfWeek!==i)return{firstDayOfWeek:i}},focusVisible:i=>{if(this._state.focusVisible!==i&&!this._state.disabled)return{focusVisible:i}},markDisabled:i=>{if(this._state.markDisabled!==i)return{markDisabled:i}},maxDate:i=>{const s=this.toValidDate(i,null);if(Ly(this._state.maxDate,s))return{maxDate:s}},minDate:i=>{const s=this.toValidDate(i,null);if(Ly(this._state.minDate,s))return{minDate:s}},navigation:i=>{if(this._state.navigation!==i)return{navigation:i}},outsideDays:i=>{if(this._state.outsideDays!==i)return{outsideDays:i}},weekdays:i=>{const s=!0===i||!1===i?ze.Short:i,c=!0!==i&&!1!==i||i;if(this._state.weekdayWidth!==s||this._state.weekdaysVisible!==c)return{weekdayWidth:s,weekdaysVisible:c}}},this._model$=new Hn.x,this._dateSelect$=new Hn.x,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:ze.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe(Xn(t=>t.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe(Xn(t=>null!==t))}set(t){let r=Object.keys(t).map(i=>this._VALIDATORS[i](t[i])).reduce((i,s)=>({...i,...s}),{});Object.keys(r).length>0&&this._nextState(r)}focus(t){const r=this.toValidDate(t,null);null!=r&&!this._state.disabled&&Ly(this._state.focusDate,r)&&this._nextState({focusDate:t})}focusSelect(){_O(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(t){const r=this.toValidDate(t,this._calendar.getToday());null!=r&&!this._state.disabled&&(!this._state.firstDate||wL(this._state.firstDate,r))&&this._nextState({firstDate:r})}select(t,r={}){const i=this.toValidDate(t,null);null!=i&&!this._state.disabled&&(Ly(this._state.selectedDate,i)&&this._nextState({selectedDate:i}),r.emitEvent&&_O(i,this._state)&&this._dateSelect$.next(i))}toValidDate(t,r){const i=Pi.from(t);return void 0===r&&(r=this._calendar.getToday()),this._calendar.isValid(i)?i:r}getMonth(t){for(let r of this._state.months)if(t.month===r.number&&t.year===r.year)return r;throw new Error(`month ${t.month} of year ${t.year} not found`)}_nextState(t){const r=this._updateState(t);this._patchContexts(r),this._state=r,this._model$.next(this._state)}_patchContexts(t){const{months:r,displayMonths:i,selectedDate:s,focusDate:c,focusVisible:h,disabled:p,outsideDays:_}=t;t.months.forEach(w=>{w.weeks.forEach(S=>{S.days.forEach(N=>{c&&(N.context.focused=c.equals(N.date)&&h),N.tabindex=!p&&c&&N.date.equals(c)&&c.month===w.number?0:-1,!0===p&&(N.context.disabled=!0),void 0!==s&&(N.context.selected=null!==s&&s.equals(N.date)),w.number!==N.date.month&&(N.hidden="hidden"===_||"collapsed"===_||i>1&&N.date.after(r[0].firstDate)&&N.date.before(r[i-1].lastDate))})})})}_updateState(t){const r=Object.assign({},this._state,t);let i=r.firstDate;if(("minDate"in t||"maxDate"in t)&&(function Iz(n,e){if(e&&n&&e.before(n))throw new Error(`'maxDate' ${e} should be greater than 'minDate' ${n}`)}(r.minDate,r.maxDate),r.focusDate=mC(r.focusDate,r.minDate,r.maxDate),r.firstDate=mC(r.firstDate,r.minDate,r.maxDate),i=r.focusDate),"disabled"in t&&(r.focusVisible=!1),"selectedDate"in t&&0===this._state.months.length&&(i=r.selectedDate),"focusVisible"in t||"focusDate"in t&&(r.focusDate=mC(r.focusDate,r.minDate,r.maxDate),i=r.focusDate,0!==r.months.length&&r.focusDate&&!r.focusDate.before(r.firstDate)&&!r.focusDate.after(r.lastDate)))return r;if("firstDate"in t&&(r.firstDate=mC(r.firstDate,r.minDate,r.maxDate),i=r.firstDate),i){const c=function Nz(n,e,t,r,i){const{displayMonths:s,months:c}=t,h=c.splice(0,c.length);return Array.from({length:s},(_,w)=>{const S=Object.assign(n.getNext(e,"m",w),{day:1});if(c[w]=null,!i){const N=h.findIndex(k=>k.firstDate.equals(S));-1!==N&&(c[w]=h.splice(N,1)[0])}return S}).forEach((_,w)=>{null===c[w]&&(c[w]=function Rz(n,e,t,r,i={}){const{dayTemplateData:s,minDate:c,maxDate:h,firstDayOfWeek:p,markDisabled:_,outsideDays:w,weekdayWidth:S,weekdaysVisible:N}=t,k=n.getToday();i.firstDate=null,i.lastDate=null,i.number=e.month,i.year=e.year,i.weeks=i.weeks||[],i.weekdays=i.weekdays||[],e=function Oz(n,e,t){const r=n.getDaysPerWeek(),i=new Pi(e.year,e.month,1),s=n.getWeekday(i)%r;return n.getPrev(i,"d",(r+s-t)%r)}(n,e,p),N||(i.weekdays.length=0);for(let j=0;j<n.getWeeksPerMonth();j++){let te=i.weeks[j];te||(te=i.weeks[j]={number:0,days:[],collapsed:!0});const oe=te.days;for(let Ke=0;Ke<n.getDaysPerWeek();Ke++){0===j&&N&&(i.weekdays[Ke]=r.getWeekdayLabel(n.getWeekday(e),S));const Ze=new Pi(e.year,e.month,e.day),st=n.getNext(Ze),Qe=r.getDayAriaLabel(Ze);let ut=!!(c&&Ze.before(c)||h&&Ze.after(h));!ut&&_&&(ut=_(Ze,{month:i.number,year:i.year}));let bt=Ze.equals(k),en=s?s(Ze,{month:i.number,year:i.year}):void 0;null===i.firstDate&&Ze.month===i.number&&(i.firstDate=Ze),Ze.month===i.number&&st.month!==i.number&&(i.lastDate=Ze);let hn=oe[Ke];hn||(hn=oe[Ke]={}),hn.date=Ze,hn.context=Object.assign(hn.context||{},{$implicit:Ze,date:Ze,data:en,currentMonth:i.number,currentYear:i.year,disabled:ut,focused:!1,selected:!1,today:bt}),hn.tabindex=-1,hn.ariaLabel=Qe,hn.hidden=!1,e=st}te.number=n.getWeekNumber(oe.map(Ke=>Ke.date),p),te.collapsed="collapsed"===w&&oe[0].date.month!==i.number&&oe[oe.length-1].date.month!==i.number}return i}(n,_,t,r,h.shift()||{}))}),c}(this._calendar,i,r,this._i18n,"dayTemplateData"in t||"firstDayOfWeek"in t||"markDisabled"in t||"minDate"in t||"maxDate"in t||"disabled"in t||"outsideDays"in t||"weekdaysVisible"in t);r.months=c,r.firstDate=c[0].firstDate,r.lastDate=c[c.length-1].lastDate,"selectedDate"in t&&!_O(r.selectedDate,r)&&(r.selectedDate=null),"firstDate"in t&&(!r.focusDate||r.focusDate.before(r.firstDate)||r.focusDate.after(r.lastDate))&&(r.focusDate=i);const h=!this._state.firstDate||this._state.firstDate.year!==r.firstDate.year,p=!this._state.firstDate||this._state.firstDate.month!==r.firstDate.month;"select"===r.navigation?(("minDate"in t||"maxDate"in t||0===r.selectBoxes.years.length||h)&&(r.selectBoxes.years=function Cz(n,e,t){if(!n)return[];const r=e?Math.max(e.year,n.year-500):n.year-10,s=(t?Math.min(t.year,n.year+500):n.year+10)-r+1,c=Array(s);for(let h=0;h<s;h++)c[h]=r+h;return c}(r.firstDate,r.minDate,r.maxDate)),("minDate"in t||"maxDate"in t||0===r.selectBoxes.months.length||h)&&(r.selectBoxes.months=function Tz(n,e,t,r){if(!e)return[];let i=n.getMonths(e.year);if(t&&e.year===t.year){const s=i.findIndex(c=>c===t.month);i=i.slice(s)}if(r&&e.year===r.year){const s=i.findIndex(c=>c===r.month);i=i.slice(0,s+1)}return i}(this._calendar,r.firstDate,r.minDate,r.maxDate))):r.selectBoxes={years:[],months:[]},("arrows"===r.navigation||"select"===r.navigation)&&(p||h||"minDate"in t||"maxDate"in t||"disabled"in t)&&(r.prevDisabled=r.disabled||function Az(n,e,t){const r=Object.assign(n.getPrev(e,"m"),{day:1});return null!=t&&(r.year===t.year&&r.month<t.month||r.year<t.year&&1===t.month)}(this._calendar,r.firstDate,r.minDate),r.nextDisabled=r.disabled||function Sz(n,e,t){const r=Object.assign(n.getNext(e,"m"),{day:1});return null!=t&&r.after(t)}(this._calendar,r.lastDate,r.maxDate))}return r}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(yC),l.LFG(Qg))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();var By=(()=>(function(n){n[n.PREV=0]="PREV",n[n.NEXT=1]="NEXT"}(By||(By={})),By))();let Fz=(()=>{class n{constructor(t){this.i18n=t}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Qg))},n.\u0275cmp=l.Xpm({type:n,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(t,r){2&t&&l.ekj("bg-primary",r.selected)("text-white",r.selected)("text-muted",r.isMuted())("outside",r.isMuted())("active",r.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},standalone:!0,features:[l.jDz],attrs:EW,decls:1,vars:1,template:function(t,r){1&t&&l._uU(0),2&t&&l.Oqu(r.i18n.getDayNumerals(r.date))},styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-btn-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}\n"],encapsulation:2,changeDetection:0}),n})(),Lz=(()=>{class n{constructor(t,r){this.i18n=t,this._renderer=r,this.select=new l.vpe,this._month=-1,this._year=-1}changeMonth(t){this.select.emit(new Pi(this.date.year,_s(t),1))}changeYear(t){this.select.emit(new Pi(_s(t),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Qg),l.Y36(l.Qsj))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(t,r){if(1&t&&(l.Gf(DW,7,l.SBq),l.Gf(IW,7,l.SBq)),2&t){let i;l.iGM(i=l.CRH())&&(r.monthSelect=i.first),l.iGM(i=l.CRH())&&(r.yearSelect=i.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},standalone:!0,features:[l.jDz],decls:6,vars:4,consts:function(){let e,t,r,i;return e=$localize`:@@ngb.datepicker.select-month:Select month`,t=$localize`:@@ngb.datepicker.select-month:Select month`,r=$localize`:@@ngb.datepicker.select-year:Select year`,i=$localize`:@@ngb.datepicker.select-year:Select year`,[["aria-label",e,"title",t,1,"form-select",3,"disabled","change"],["month",""],[3,"value",4,"ngFor","ngForOf"],["aria-label",r,"title",i,1,"form-select",3,"disabled","change"],["year",""],[3,"value"]]},template:function(t,r){1&t&&(l.TgZ(0,"select",0,1),l.NdJ("change",function(s){return r.changeMonth(s.target.value)}),l.YNc(2,TW,2,3,"option",2),l.qZA(),l.TgZ(3,"select",3,4),l.NdJ("change",function(s){return r.changeYear(s.target.value)}),l.YNc(5,CW,2,2,"option",2),l.qZA()),2&t&&(l.Q6J("disabled",r.disabled),l.xp6(2),l.Q6J("ngForOf",r.months),l.xp6(1),l.Q6J("disabled",r.disabled),l.xp6(2),l.Q6J("ngForOf",r.years))},dependencies:[xn],styles:["ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}\n"],encapsulation:2,changeDetection:0}),n})(),Bz=(()=>{class n{constructor(t){this.i18n=t,this.navigation=By,this.months=[],this.navigate=new l.vpe,this.select=new l.vpe}onClickPrev(t){t.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(t){t.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Qg))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},standalone:!0,features:[l.jDz],decls:8,vars:4,consts:function(){let e,t,r,i;return e=$localize`:@@ngb.datepicker.previous-month:Previous month`,t=$localize`:@@ngb.datepicker.previous-month:Previous month`,r=$localize`:@@ngb.datepicker.next-month:Next month`,i=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow"],["type","button","aria-label",e,"title",t,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],["type","button","aria-label",r,"title",i,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]]},template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"button",1),l.NdJ("click",function(s){return r.onClickPrev(s)}),l._UZ(2,"span",2),l.qZA()(),l.YNc(3,SW,1,4,"ngb-datepicker-navigation-select",3),l.YNc(4,OW,1,1,null,4),l.TgZ(5,"div",5)(6,"button",6),l.NdJ("click",function(s){return r.onClickNext(s)}),l._UZ(7,"span",2),l.qZA()()),2&t&&(l.xp6(1),l.Q6J("disabled",r.prevDisabled),l.xp6(2),l.Q6J("ngIf",r.showSelect),l.xp6(1),l.Q6J("ngIf",!r.showSelect),l.xp6(2),l.Q6J("disabled",r.nextDisabled))},dependencies:[Qn,xn,Lz],styles:["ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{justify-content:flex-end}.ngb-dp-arrow.right .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}\n"],encapsulation:2,changeDetection:0}),n})();var Rn=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(Rn||(Rn={})),Rn))();let Uz=(()=>{class n{processKey(t,r){const{state:i,calendar:s}=r;switch(t.which){case Rn.PageUp:r.focusDate(s.getPrev(i.focusedDate,t.shiftKey?"y":"m",1));break;case Rn.PageDown:r.focusDate(s.getNext(i.focusedDate,t.shiftKey?"y":"m",1));break;case Rn.End:r.focusDate(t.shiftKey?i.maxDate:i.lastDate);break;case Rn.Home:r.focusDate(t.shiftKey?i.minDate:i.firstDate);break;case Rn.ArrowLeft:r.focusDate(s.getPrev(i.focusedDate,"d",1));break;case Rn.ArrowUp:r.focusDate(s.getPrev(i.focusedDate,"d",s.getDaysPerWeek()));break;case Rn.ArrowRight:r.focusDate(s.getNext(i.focusedDate,"d",1));break;case Rn.ArrowDown:r.focusDate(s.getNext(i.focusedDate,"d",s.getDaysPerWeek()));break;case Rn.Enter:case Rn.Space:r.focusSelect();break;default:return}t.preventDefault(),t.stopPropagation()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vO=(()=>{class n{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays=ze.Short}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Vz(){return new Gz}()},providedIn:"root"}),n})(),Gz=(()=>{class n extends bO{fromModel(t){return t&&Ur(t.year)&&Ur(t.month)&&Ur(t.day)?{year:t.year,month:t.month,day:t.day}:null}toModel(t){return t&&Ur(t.year)&&Ur(t.month)&&Ur(t.day)?{year:t.year,month:t.month,day:t.day}:null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),DL=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["ng-template","ngbDatepickerContent",""]],standalone:!0}),n})(),wO=(()=>{class n{constructor(t,r,i,s){this.i18n=t,this.datepicker=r,this._keyboardService=i,this._service=s}set month(t){this.viewModel=this._service.getMonth(t)}onKeyDown(t){this._keyboardService.processKey(t,this.datepicker)}doSelect(t){!t.context.disabled&&!t.hidden&&this.datepicker.onDateSelect(t.date)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Qg),l.Y36((0,l.Gpc)(()=>vC)),l.Y36(Uz),l.Y36(yO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(t,r){1&t&&l.NdJ("keydown",function(s){return r.onKeyDown(s)})},inputs:{month:"month"},standalone:!0,features:[l.jDz],decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek small",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){1&t&&(l.YNc(0,kW,3,2,"div",0),l.YNc(1,VW,1,1,"ng-template",1)),2&t&&(l.Q6J("ngIf",r.viewModel.weekdays.length>0),l.xp6(1),l.Q6J("ngForOf",r.viewModel.weeks))},dependencies:[Qn,xn,Wr],styles:['ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-light)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}\n'],encapsulation:2}),n})(),vC=(()=>{class n{constructor(t,r,i,s,c,h,p,_){this._service=t,this._calendar=r,this.i18n=i,this._elementRef=h,this._ngbDateAdapter=p,this._ngZone=_,this._controlValue=null,this._destroyed$=new Hn.x,this._publicState={},this.navigate=new l.vpe,this.dateSelect=new l.vpe,this.onChange=w=>{},this.onTouched=()=>{},["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekNumbers","startDate","weekdays"].forEach(w=>this[w]=s[w]),t.dateSelect$.pipe(Xr(this._destroyed$)).subscribe(w=>{this.dateSelect.emit(w)}),t.model$.pipe(Xr(this._destroyed$)).subscribe(w=>{const S=w.firstDate,N=this.model?this.model.firstDate:null;this._publicState={maxDate:w.maxDate,minDate:w.minDate,firstDate:w.firstDate,lastDate:w.lastDate,focusedDate:w.focusDate,months:w.months.map(Ke=>Ke.firstDate)};let k=!1;if(!S.equals(N)&&(this.navigate.emit({current:N?{year:N.year,month:N.month}:null,next:{year:S.year,month:S.month},preventDefault:()=>k=!0}),k&&null!==N))return void this._service.open(N);const j=w.selectedDate,te=w.focusDate,oe=this.model?this.model.focusDate:null;this.model=w,Ly(j,this._controlValue)&&(this._controlValue=j,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(j))),Ly(te,oe)&&oe&&w.focusVisible&&this.focus(),c.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}focusDate(t){this._service.focus(Pi.from(t))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe(fr(1)).subscribe(()=>{const t=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');t&&t.focus()})}navigateTo(t){this._service.open(Pi.from(t?t.day?t:{...t,day:1}:null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const t=gs(this._contentEl.nativeElement,"focusin"),r=gs(this._contentEl.nativeElement,"focusout"),{nativeElement:i}=this._elementRef;(0,UT.T)(t,r).pipe(Xn(({target:s,relatedTarget:c})=>!(sL(s,"ngb-dp-day")&&sL(c,"ngb-dp-day")&&i.contains(s)&&i.contains(c))),Xr(this._destroyed$)).subscribe(({type:s})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===s})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const t={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(r=>t[r]=this[r]),this._service.set(t),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(t){const r={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(i=>i in t).forEach(i=>r[i]=this[i]),this._service.set(r),"startDate"in t){const{currentValue:i,previousValue:s}=t.startDate;wL(s,i)&&this.navigateTo(this.startDate)}}onDateSelect(t){this._service.focus(t),this._service.select(t,{emitEvent:!0})}onNavigateDateSelect(t){this._service.open(t)}onNavigateEvent(t){switch(t){case By.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case By.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._service.set({disabled:t})}writeValue(t){this._controlValue=Pi.from(this._ngbDateAdapter.fromModel(t)),this._service.select(this._controlValue)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(yO),l.Y36(yC),l.Y36(Qg),l.Y36(vO),l.Y36(l.sBO),l.Y36(l.SBq),l.Y36(bO),l.Y36(l.R0b))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-datepicker"]],contentQueries:function(t,r,i){if(1&t&&l.Suo(i,DL,7),2&t){let s;l.iGM(s=l.CRH())&&(r.contentTemplate=s.first)}},viewQuery:function(t,r){if(1&t&&(l.Gf(GW,7),l.Gf(jW,7)),2&t){let i;l.iGM(i=l.CRH())&&(r._defaultDayTemplate=i.first),l.iGM(i=l.CRH())&&(r._contentEl=i.first)}},hostVars:2,hostBindings:function(t,r){2&t&&l.ekj("disabled",r.model.disabled)},inputs:{dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],standalone:!0,features:[l._Bn([{provide:Co,useExisting:(0,l.Gpc)(()=>n),multi:!0},yO]),l.TTD,l.jDz],decls:10,vars:5,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(t,r){if(1&t&&(l.YNc(0,HW,1,5,"ng-template",null,0,l.W1O),l.YNc(2,zW,1,1,"ng-template",null,1,l.W1O),l.TgZ(4,"div",2),l.YNc(5,qW,1,7,"ngb-datepicker-navigation",3),l.qZA(),l.TgZ(6,"div",4,5),l.YNc(8,KW,0,0,"ng-template",6),l.qZA(),l.YNc(9,ZW,0,0,"ng-template",6)),2&t){const i=l.MAs(3);l.xp6(5),l.Q6J("ngIf","none"!==r.navigation),l.xp6(1),l.ekj("ngb-dp-months",!r.contentTemplate),l.xp6(2),l.Q6J("ngTemplateOutlet",(null==r.contentTemplate?null:r.contentTemplate.templateRef)||i),l.xp6(1),l.Q6J("ngTemplateOutlet",r.footerTemplate)}},dependencies:[Qn,xn,Wr,Fz,wO,Bz],styles:["ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-light)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}\n"],encapsulation:2,changeDetection:0}),n})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const CL=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function SL(n){const e=Array.from(n.querySelectorAll(CL)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let VL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[vC,wO]}),n})(),TO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["",8,"navbar"]],standalone:!0}),n})(),HL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();class tm{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}let h8=(()=>{class n{constructor(t,r){this._el=t,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe(fr(1)).subscribe(()=>{ki(this._zone,this._el.nativeElement,(t,r)=>{r&&Fy(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return ki(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(l.R0b))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,r){2&t&&(l.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),l.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[l.jDz],decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})();class $L{close(e){}dismiss(e){}}class f8{constructor(e,t,r,i){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new Hn.x,this._dismissed=new Hn.x,this._hidden=new Hn.x,e.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,c)=>{this._resolve=s,this._reject=c}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Xr(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Xr(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function iL(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(r=>{!1!==r&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():_t(void 0);e.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),QT(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var dw=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(dw||(dw={})),dw))();let p8=(()=>{class n{constructor(t,r,i){this._document=t,this._elRef=r,this._zone=i,this._closed$=new Hn.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new l.vpe,this.shown=new Hn.x,this.hidden=new Hn.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":ky(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(fr(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,r={animation:this.animation,runningTransition:"stop"},c=QT(ki(this._zone,t,()=>t.classList.remove("show"),r),ki(this._zone,this._dialogEl.nativeElement,()=>{},r));return c.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),c}_show(){const t={animation:this.animation,runningTransition:"continue"};QT(ki(this._zone,this._elRef.nativeElement,(s,c)=>{c&&Fy(s),s.classList.add("show")},t),ki(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{gs(t,"keydown").pipe(Xr(this._closed$),Xn(i=>i.which===Rn.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(dw.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;gs(this._dialogEl.nativeElement,"mousedown").pipe(Xr(this._closed$),(0,ai.b)(()=>r=!1),hr(()=>gs(t,"mouseup").pipe(Xr(this._closed$),fr(1))),Xn(({target:i})=>t===i)).subscribe(()=>{r=!0}),gs(t,"click").pipe(Xr(this._closed$)).subscribe(({target:i})=>{t===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(dw.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const r=t.querySelector("[ngbAutofocus]"),i=SL(t)[0];(r||i||t).focus()}}_restoreFocus(){const t=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&t.contains(r)?r:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&ki(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ce),l.Y36(l.SBq),l.Y36(l.R0b))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,r){if(1&t&&l.Gf(YW,7),2&t){let i;l.iGM(i=l.CRH())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,r){2&t&&(l.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),l.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),l.ekj("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[l.jDz],ngContentSelectors:fC,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,r){1&t&&(l.F$t(),l.TgZ(0,"div",0,1)(2,"div",2),l.Hsn(3),l.qZA()()),2&t&&l.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),g8=(()=>{class n{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,i=r.style,{overflow:s,paddingRight:c}=i;if(t>0){const h=parseFloat(window.getComputedStyle(r).paddingRight);i.paddingRight=`${h+t}px`}return i.overflow="hidden",()=>{t>0&&(i.paddingRight=c),i.overflow=s}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ce))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),m8=(()=>{class n{constructor(t,r,i,s,c,h,p){this._applicationRef=t,this._injector=r,this._environmentInjector=i,this._document=s,this._scrollBar=c,this._rendererFactory=h,this._ngZone=p,this._activeWindowCmptHasChanged=new Hn.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new l.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const _=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,r=!1)=>{n.runOutsideAngular(()=>{const i=gs(e,"focusin").pipe(Xr(t),(0,C.U)(s=>s.target));gs(e,"keydown").pipe(Xr(t),Xn(s=>s.which===Rn.Tab),XT(i)).subscribe(([s,c])=>{const[h,p]=SL(e);(c===h||c===e)&&s.shiftKey&&(p.focus(),s.preventDefault()),c===p&&!s.shiftKey&&(h.focus(),s.preventDefault())}),r&&gs(e,"click").pipe(Xr(t),XT(i),(0,C.U)(s=>s[1])).subscribe(s=>s.focus())})})(this._ngZone,_.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(_.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,r,i){const s=i.container instanceof HTMLElement?i.container:Kg(i.container)?this._document.querySelector(i.container):this._document.body,c=this._rendererFactory.createRenderer(null,null);if(!s)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const h=new $L,p=(t=i.injector||t).get(l.lqb,null)||this._environmentInjector,_=this._getContentRef(t,p,r,h,i);let w=!1!==i.backdrop?this._attachBackdrop(s):void 0,S=this._attachWindowComponent(s,_.nodes),N=new f8(S,_,w,i.beforeDismiss);return this._registerModalRef(N),this._registerWindowCmpt(S),N.hidden.pipe(fr(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(c.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),h.close=k=>{N.close(k)},h.dismiss=k=>{N.dismiss(k)},this._applyWindowOptions(S.instance,i),1===this._modalRefs.length&&c.addClass(this._document.body,"modal-open"),w&&w.instance&&(this._applyBackdropOptions(w.instance,i),w.changeDetectorRef.detectChanges()),S.changeDetectorRef.detectChanges(),N}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(r=>r.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let r=(0,l.LMc)(h8,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_attachWindowComponent(t,r){let i=(0,l.LMc)(p8,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_applyWindowOptions(t,r){this._windowAttributes.forEach(i=>{Kg(r[i])&&(t[i]=r[i])})}_applyBackdropOptions(t,r){this._backdropAttributes.forEach(i=>{Kg(r[i])&&(t[i]=r[i])})}_getContentRef(t,r,i,s,c){return i?i instanceof l.Rgc?this._createFromTemplateRef(i,s):ky(i)?this._createFromString(i):this._createFromComponent(t,r,i,s,c):new tm([])}_createFromTemplateRef(t,r){const s=t.createEmbeddedView({$implicit:r,close(c){r.close(c)},dismiss(c){r.dismiss(c)}});return this._applicationRef.attachView(s),new tm([s.rootNodes],s)}_createFromString(t){const r=this._document.createTextNode(`${t}`);return new tm([[r]])}_createFromComponent(t,r,i,s,c){const h=l.zs3.create({providers:[{provide:$L,useValue:s}],parent:t}),p=(0,l.LMc)(i,{environmentInjector:r,elementInjector:h}),_=p.location.nativeElement;return c.scrollable&&_.classList.add("component-host-scrollable"),this._applicationRef.attachView(p.hostView),new tm([[_]],p.hostView,p)}_setAriaHidden(t){const r=t.parentElement;r&&t!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==t&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,r)=>{t?r.setAttribute("aria-hidden",t):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const r=()=>{const i=this._modalRefs.indexOf(t);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(r,r)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const r=this._windowCmpts.indexOf(t);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.z2F),l.LFG(l.zs3),l.LFG(l.lqb),l.LFG(ce),l.LFG(g8),l.LFG(l.FYo),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_8=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Zg))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),y8=(()=>{class n{constructor(t,r,i){this._injector=t,this._modalStack=r,this._config=i}open(t,r={}){const i={...this._config,animation:this._config.animation,...r};return this._modalStack.open(this._injector,t,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.zs3),l.LFG(m8),l.LFG(_8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),WL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[y8]}),n})();const I8=({classList:n})=>(n.remove("show"),()=>n.remove("active")),T8=(n,e)=>{e&&Fy(n),n.classList.add("show")};let CO=(()=>{class n{constructor(t){this.elRef=t}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(t,r){2&t&&(l.Ikx("id",r.item.panelDomId),l.uIk("role",r.role?r.role:r.nav.roles?"tabpanel":void 0)("aria-labelledby",r.item.domId),l.ekj("fade",r.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"},standalone:!0}),n})(),KL=(()=>{class n{constructor(t,r){this._cd=t,this._ngZone=r,this._activePane=null}isPanelTransitioning(t){return this._activePane?.item===t}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe(Xr(this.nav.destroy$),_u(this._activePane?.item||null),Vc(),function e$(n){return Xn((e,t)=>n<=t)}(1)).subscribe(t=>{const r={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?ki(this._ngZone,this._activePane.elRef.nativeElement,I8,r).subscribe(()=>{const i=this._activePane?.item;this._activePane=this._getPaneForItem(t),this._cd.markForCheck(),this._activePane&&(this._activePane.elRef.nativeElement.classList.add("active"),ki(this._ngZone,this._activePane.elRef.nativeElement,T8,r).subscribe(()=>{t&&(t.shown.emit(),this.nav.shown.emit(t.id))})),i&&(i.hidden.emit(),this.nav.hidden.emit(i.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.elRef.nativeElement.classList.add("show"),this._activePane?.elRef.nativeElement.classList.add("active")}_getPaneForItem(t){return this._panes&&this._panes.find(r=>r.item===t)||null}_getActivePane(){return this._panes&&this._panes.find(t=>t.item.active)||null}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.sBO),l.Y36(l.R0b))},n.\u0275cmp=l.Xpm({type:n,selectors:[["","ngbNavOutlet",""]],viewQuery:function(t,r){if(1&t&&l.Gf(CO,5),2&t){let i;l.iGM(i=l.CRH())&&(r._panes=i)}},hostVars:2,hostBindings:function(t,r){2&t&&l.ekj("tab-content",!0)},inputs:{paneRole:"paneRole",nav:["ngbNavOutlet","nav"]},standalone:!0,features:[l.jDz],attrs:JW,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["ngbNavPane","",3,"item","nav","role",4,"ngIf"],["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){1&t&&l.YNc(0,t6,1,1,"ng-template",0),2&t&&l.Q6J("ngForOf",r.nav.items)},dependencies:[CO,xn,Qn,Wr],encapsulation:2,changeDetection:0}),n})(),ZL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[KL]}),n})(),C8=(()=>{class n{constructor(){this.disabled=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.ellipses=!0,this.maxSize=0,this.pageSize=10,this.rotate=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),YL=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["ng-template","ngbPaginationEllipsis",""]],standalone:!0}),n})(),JL=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["ng-template","ngbPaginationFirst",""]],standalone:!0}),n})(),QL=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["ng-template","ngbPaginationLast",""]],standalone:!0}),n})(),XL=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["ng-template","ngbPaginationNext",""]],standalone:!0}),n})(),e2=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["ng-template","ngbPaginationNumber",""]],standalone:!0}),n})(),t2=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["ng-template","ngbPaginationPrevious",""]],standalone:!0}),n})(),n2=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["ng-template","ngbPaginationPages",""]],standalone:!0}),n})(),r2=(()=>{class n{constructor(t){this.pageCount=0,this.pages=[],this.page=1,this.pageChange=new l.vpe(!0),this.disabled=t.disabled,this.boundaryLinks=t.boundaryLinks,this.directionLinks=t.directionLinks,this.ellipses=t.ellipses,this.maxSize=t.maxSize,this.pageSize=t.pageSize,this.rotate=t.rotate,this.size=t.size}hasPrevious(){return this.page>1}hasNext(){return this.page<this.pageCount}nextDisabled(){return!this.hasNext()||this.disabled}previousDisabled(){return!this.hasPrevious()||this.disabled}selectPage(t){this._updatePages(t)}ngOnChanges(t){this._updatePages(this.page)}isEllipsis(t){return-1===t}_applyEllipses(t,r){this.ellipses&&(t>0&&(t>2?this.pages.unshift(-1):2===t&&this.pages.unshift(2),this.pages.unshift(1)),r<this.pageCount&&(r<this.pageCount-2?this.pages.push(-1):r===this.pageCount-2&&this.pages.push(this.pageCount-1),this.pages.push(this.pageCount)))}_applyRotation(){let t=0,r=this.pageCount,i=Math.floor(this.maxSize/2);return this.page<=i?r=this.maxSize:this.pageCount-this.page<i?t=this.pageCount-this.maxSize:(t=this.page-i-1,r=this.page+(this.maxSize%2==0?i-1:i)),[t,r]}_applyPagination(){let r=(Math.ceil(this.page/this.maxSize)-1)*this.maxSize;return[r,r+this.maxSize]}_setPageInRange(t){const r=this.page;this.page=pC(t,this.pageCount,1),this.page!==r&&ei(this.collectionSize)&&this.pageChange.emit(this.page)}_updatePages(t){this.pageCount=Math.ceil(this.collectionSize/this.pageSize),ei(this.pageCount)||(this.pageCount=0),this.pages.length=0;for(let r=1;r<=this.pageCount;r++)this.pages.push(r);if(this._setPageInRange(t),this.maxSize>0&&this.pageCount>this.maxSize){let r=0,i=this.pageCount;[r,i]=this.rotate?this._applyRotation():this._applyPagination(),this.pages=this.pages.slice(r,i),this._applyEllipses(r,i)}}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(C8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-pagination"]],contentQueries:function(t,r,i){if(1&t&&(l.Suo(i,YL,5),l.Suo(i,JL,5),l.Suo(i,QL,5),l.Suo(i,XL,5),l.Suo(i,e2,5),l.Suo(i,t2,5),l.Suo(i,n2,5)),2&t){let s;l.iGM(s=l.CRH())&&(r.tplEllipsis=s.first),l.iGM(s=l.CRH())&&(r.tplFirst=s.first),l.iGM(s=l.CRH())&&(r.tplLast=s.first),l.iGM(s=l.CRH())&&(r.tplNext=s.first),l.iGM(s=l.CRH())&&(r.tplNumber=s.first),l.iGM(s=l.CRH())&&(r.tplPrevious=s.first),l.iGM(s=l.CRH())&&(r.tplPages=s.first)}},hostAttrs:["role","navigation"],inputs:{disabled:"disabled",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",ellipses:"ellipses",rotate:"rotate",collectionSize:"collectionSize",maxSize:"maxSize",page:"page",pageSize:"pageSize",size:"size"},outputs:{pageChange:"pageChange"},standalone:!0,features:[l.TTD,l.jDz],decls:20,vars:12,consts:function(){let e,t,r,i,s,c,h,p;return e=$localize`:@@ngb.pagination.first:««`,t=$localize`:@@ngb.pagination.previous:«`,r=$localize`:@@ngb.pagination.next:»`,i=$localize`:@@ngb.pagination.last:»»`,s=$localize`:@@ngb.pagination.first-aria:First`,c=$localize`:@@ngb.pagination.previous-aria:Previous`,h=$localize`:@@ngb.pagination.next-aria:Next`,p=$localize`:@@ngb.pagination.last-aria:Last`,[["first",""],["previous",""],["next",""],["last",""],["ellipsis",""],["defaultNumber",""],["defaultPages",""],["class","page-item",3,"disabled",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true"],e,t,r,i,["class","visually-hidden",4,"ngIf"],[1,"visually-hidden"],["class","page-item",3,"active","disabled",4,"ngFor","ngForOf"],[1,"page-item"],["class","page-link","tabindex","-1","aria-disabled","true",4,"ngIf"],["class","page-link","href","",3,"click",4,"ngIf"],["tabindex","-1","aria-disabled","true",1,"page-link"],["href","",1,"page-link",3,"click"],["aria-label",s,"href","",1,"page-link",3,"click"],["aria-label",c,"href","",1,"page-link",3,"click"],["aria-label",h,"href","",1,"page-link",3,"click"],["aria-label",p,"href","",1,"page-link",3,"click"]]},template:function(t,r){if(1&t&&(l.YNc(0,n6,2,0,"ng-template",null,0,l.W1O),l.YNc(2,r6,2,0,"ng-template",null,1,l.W1O),l.YNc(4,i6,2,0,"ng-template",null,2,l.W1O),l.YNc(6,s6,2,0,"ng-template",null,3,l.W1O),l.YNc(8,o6,1,0,"ng-template",null,4,l.W1O),l.YNc(10,l6,2,2,"ng-template",null,5,l.W1O),l.YNc(12,m6,1,1,"ng-template",null,6,l.W1O),l.TgZ(14,"ul"),l.YNc(15,y6,3,9,"li",7),l.YNc(16,w6,3,8,"li",7),l.YNc(17,E6,0,0,"ng-template",8),l.YNc(18,I6,3,9,"li",7),l.YNc(19,C6,3,9,"li",7),l.qZA()),2&t){const i=l.MAs(13);l.xp6(14),l.Tol("pagination"+(r.size?" pagination-"+r.size:"")),l.xp6(1),l.Q6J("ngIf",r.boundaryLinks),l.xp6(1),l.Q6J("ngIf",r.directionLinks),l.xp6(1),l.Q6J("ngTemplateOutlet",(null==r.tplPages?null:r.tplPages.templateRef)||i)("ngTemplateOutletContext",l.kEZ(8,S6,r.page,r.pages,r.disabled)),l.xp6(1),l.Q6J("ngIf",r.directionLinks),l.xp6(1),l.Q6J("ngIf",r.boundaryLinks)}},dependencies:[Qn,xn,Wr],encapsulation:2,changeDetection:0}),n})(),i2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[r2]}),n})(),o2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),M8=(()=>{class n{constructor(){this.max=100,this.animated=!1,this.ariaLabel="progress bar",this.striped=!1,this.showValue=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),x8=(()=>{class n{constructor(t){this.value=0,this.max=t.max,this.animated=t.animated,this.ariaLabel=t.ariaLabel,this.striped=t.striped,this.textType=t.textType,this.type=t.type,this.showValue=t.showValue,this.height=t.height}set max(t){this._max=!ei(t)||t<=0?100:t}get max(){return this._max}getValue(){return pC(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(M8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-progressbar"]],hostAttrs:["role","progressbar","aria-valuemin","0",1,"progress"],hostVars:5,hostBindings:function(t,r){2&t&&(l.uIk("aria-valuenow",r.getValue())("aria-valuemax",r.max)("aria-label",r.ariaLabel),l.Udp("height",r.height))},inputs:{max:"max",animated:"animated",ariaLabel:"ariaLabel",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},standalone:!0,features:[l.jDz],ngContentSelectors:fC,decls:3,vars:11,consts:function(){let e;return e=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[4,"ngIf"],e]},template:function(t,r){1&t&&(l.F$t(),l.TgZ(0,"div"),l.YNc(1,R6,3,3,"span",0),l.Hsn(2),l.qZA()),2&t&&(l.MT6("progress-bar",r.type?r.textType?" bg-"+r.type:" text-bg-"+r.type:"","",r.textType?" text-"+r.textType:"",""),l.Udp("width",r.getPercentValue(),"%"),l.ekj("progress-bar-animated",r.animated)("progress-bar-striped",r.striped),l.xp6(1),l.Q6J("ngIf",r.showValue))},dependencies:[Qn,kf],encapsulation:2,changeDetection:0}),n})(),a2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[x8]}),n})(),k8=(()=>{class n{constructor(){this.max=10,this.readonly=!1,this.resettable=!1,this.tabindex=0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),P8=(()=>{class n{constructor(t,r){this._changeDetectorRef=r,this.contexts=[],this.disabled=!1,this.hover=new l.vpe,this.leave=new l.vpe,this.rateChange=new l.vpe(!0),this.onChange=i=>{},this.onTouched=()=>{},this.max=t.max,this.readonly=t.readonly,this.tabindex=t.tabindex}ariaValueText(t,r){return`${t} out of ${r}`}isInteractive(){return!this.readonly&&!this.disabled}enter(t){this.isInteractive()&&this._updateState(t),this.hover.emit(t)}handleBlur(){this.onTouched()}handleClick(t){this.isInteractive()&&this.update(this.resettable&&this.rate===t?0:t)}handleKeyDown(t){switch(t.which){case Rn.ArrowDown:case Rn.ArrowLeft:this.update(this.rate-1);break;case Rn.ArrowUp:case Rn.ArrowRight:this.update(this.rate+1);break;case Rn.Home:this.update(0);break;case Rn.End:this.update(this.max);break;default:return}t.preventDefault()}ngOnChanges(t){t.rate&&this.update(this.rate),t.max&&this._updateMax()}ngOnInit(){this._setupContexts(),this._updateState(this.rate)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(t){this.disabled=t}update(t,r=!0){const i=pC(t,this.max,0);this.isInteractive()&&this.rate!==i&&(this.rate=i,this.rateChange.emit(this.rate)),r&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(t){this.update(t,!1),this._changeDetectorRef.markForCheck()}_updateState(t){this.nextRate=t,this.contexts.forEach((r,i)=>r.fill=Math.round(100*pC(t-i,1,0)))}_updateMax(){this.max>0&&(this._setupContexts(),this.update(this.rate))}_setupContexts(){this.contexts=Array.from({length:this.max},(t,r)=>({fill:0,index:r}))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(k8),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-rating"]],contentQueries:function(t,r,i){if(1&t&&l.Suo(i,l.Rgc,5),2&t){let s;l.iGM(s=l.CRH())&&(r.starTemplateFromContent=s.first)}},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(t,r){1&t&&l.NdJ("blur",function(){return r.handleBlur()})("keydown",function(s){return r.handleKeyDown(s)})("mouseleave",function(){return r.reset()}),2&t&&(l.Ikx("tabindex",r.disabled?-1:r.tabindex),l.uIk("aria-valuemax",r.max)("aria-valuenow",r.nextRate)("aria-valuetext",r.ariaValueText(r.nextRate,r.max))("aria-disabled",!!r.readonly||null))},inputs:{max:"max",rate:"rate",readonly:"readonly",resettable:"resettable",starTemplate:"starTemplate",tabindex:"tabindex",ariaValueText:"ariaValueText"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},standalone:!0,features:[l._Bn([{provide:Co,useExisting:(0,l.Gpc)(()=>n),multi:!0}]),l.TTD,l.jDz],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"visually-hidden"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){1&t&&(l.YNc(0,O6,1,1,"ng-template",null,0,l.W1O),l.YNc(2,x6,4,5,"ng-template",1)),2&t&&(l.xp6(2),l.Q6J("ngForOf",r.contexts))},dependencies:[xn,Wr],encapsulation:2,changeDetection:0}),n})(),l2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[P8]}),n})();class u2{constructor(e,t,r){this.hour=_s(e),this.minute=_s(t),this.second=_s(r)}changeHour(e=1){this.updateHour((isNaN(this.hour)?0:this.hour)+e)}updateHour(e){this.hour=ei(e)?(e<0?24+e:e)%24:NaN}changeMinute(e=1){this.updateMinute((isNaN(this.minute)?0:this.minute)+e)}updateMinute(e){ei(e)?(this.minute=e%60<0?60+e%60:e%60,this.changeHour(Math.floor(e/60))):this.minute=NaN}changeSecond(e=1){this.updateSecond((isNaN(this.second)?0:this.second)+e)}updateSecond(e){ei(e)?(this.second=e<0?60+e%60:e%60,this.changeMinute(Math.floor(e/60))):this.second=NaN}isValid(e=!0){return ei(this.hour)&&ei(this.minute)&&(!e||ei(this.second))}toString(){return`${this.hour||0}:${this.minute||0}:${this.second||0}`}}let F8=(()=>{class n{constructor(){this.meridian=!1,this.spinners=!0,this.seconds=!1,this.hourStep=1,this.minuteStep=1,this.secondStep=1,this.disabled=!1,this.readonlyInputs=!1,this.size="medium"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),c2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function L8(){return new B8}()},providedIn:"root"}),n})(),B8=(()=>{class n extends c2{fromModel(t){return t&&Ur(t.hour)&&Ur(t.minute)?{hour:t.hour,minute:t.minute,second:Ur(t.second)?t.second:null}:null}toModel(t){return t&&Ur(t.hour)&&Ur(t.minute)?{hour:t.hour,minute:t.minute,second:Ur(t.second)?t.second:null}:null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),d2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function U8(n){return new V8(n)}(l.LFG(l.soG)),r},providedIn:"root"}),n})(),V8=(()=>{class n extends d2{constructor(t){super(),this._periods=Te(t,nt.Standalone,ze.Narrow)}getMorningPeriod(){return this._periods[0]}getAfternoonPeriod(){return this._periods[1]}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.soG))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const G8=/[^0-9]/g;let j8=(()=>{class n{constructor(t,r,i,s){this._config=t,this._ngbTimeAdapter=r,this._cd=i,this.i18n=s,this.onChange=c=>{},this.onTouched=()=>{},this.meridian=t.meridian,this.spinners=t.spinners,this.seconds=t.seconds,this.hourStep=t.hourStep,this.minuteStep=t.minuteStep,this.secondStep=t.secondStep,this.disabled=t.disabled,this.readonlyInputs=t.readonlyInputs,this.size=t.size}set hourStep(t){this._hourStep=Ur(t)?t:this._config.hourStep}get hourStep(){return this._hourStep}set minuteStep(t){this._minuteStep=Ur(t)?t:this._config.minuteStep}get minuteStep(){return this._minuteStep}set secondStep(t){this._secondStep=Ur(t)?t:this._config.secondStep}get secondStep(){return this._secondStep}writeValue(t){const r=this._ngbTimeAdapter.fromModel(t);this.model=r?new u2(r.hour,r.minute,r.second):new u2,!this.seconds&&(!r||!ei(r.second))&&(this.model.second=0),this._cd.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}changeHour(t){this.model?.changeHour(t),this.propagateModelChange()}changeMinute(t){this.model?.changeMinute(t),this.propagateModelChange()}changeSecond(t){this.model?.changeSecond(t),this.propagateModelChange()}updateHour(t){const r=!!this.model&&this.model.hour>=12,i=_s(t);this.model?.updateHour(this.meridian&&(r&&i<12||!r&&12===i)?i+12:i),this.propagateModelChange()}updateMinute(t){this.model?.updateMinute(_s(t)),this.propagateModelChange()}updateSecond(t){this.model?.updateSecond(_s(t)),this.propagateModelChange()}toggleMeridian(){this.meridian&&this.changeHour(12)}formatInput(t){t.value=t.value.replace(G8,"")}formatHour(t){return ei(t)?Py(this.meridian?t%12==0?12:t%12:t%24):Py(NaN)}formatMinSec(t){return Py(ei(t)?t:NaN)}handleBlur(){this.onTouched()}get isSmallSize(){return"small"===this.size}get isLargeSize(){return"large"===this.size}ngOnChanges(t){t.seconds&&!this.seconds&&this.model&&!ei(this.model.second)&&(this.model.second=0,this.propagateModelChange(!1))}propagateModelChange(t=!0){t&&this.onTouched(),this.model?.isValid(this.seconds)?this.onChange(this._ngbTimeAdapter.toModel({hour:this.model.hour,minute:this.model.minute,second:this.model.second})):this.onChange(this._ngbTimeAdapter.toModel(null))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(F8),l.Y36(c2),l.Y36(l.sBO),l.Y36(d2))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-timepicker"]],inputs:{meridian:"meridian",spinners:"spinners",seconds:"seconds",hourStep:"hourStep",minuteStep:"minuteStep",secondStep:"secondStep",readonlyInputs:"readonlyInputs",size:"size"},exportAs:["ngbTimepicker"],standalone:!0,features:[l._Bn([{provide:Co,useExisting:(0,l.Gpc)(()=>n),multi:!0}]),l.TTD,l.jDz],decls:16,vars:25,consts:function(){let e,t,r,i,s,c,h,p,_,w,S,N,k,j;return e=$localize`:@@ngb.timepicker.HH:HH`,t=$localize`:@@ngb.timepicker.hours:Hours`,r=$localize`:@@ngb.timepicker.MM:MM`,i=$localize`:@@ngb.timepicker.minutes:Minutes`,s=$localize`:@@ngb.timepicker.increment-hours:Increment hours`,c=$localize`:@@ngb.timepicker.decrement-hours:Decrement hours`,h=$localize`:@@ngb.timepicker.increment-minutes:Increment minutes`,p=$localize`:@@ngb.timepicker.decrement-minutes:Decrement minutes`,_=$localize`:@@ngb.timepicker.SS:SS`,w=$localize`:@@ngb.timepicker.seconds:Seconds`,S=$localize`:@@ngb.timepicker.increment-seconds:Increment seconds`,N=$localize`:@@ngb.timepicker.decrement-seconds:Decrement seconds`,k=$localize`:@@ngb.timepicker.PM:${"\ufffd0\ufffd"}:INTERPOLATION:`,j=$localize`:@@ngb.timepicker.AM:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[3,"disabled"],[1,"ngb-tp"],[1,"ngb-tp-input-container","ngb-tp-hour"],["tabindex","-1","type","button","class","btn btn-link",3,"btn-sm","btn-lg","disabled","click",4,"ngIf"],["type","text","maxlength","2","inputmode","numeric","placeholder",e,"aria-label",t,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],[1,"ngb-tp-spacer"],[1,"ngb-tp-input-container","ngb-tp-minute"],["type","text","maxlength","2","inputmode","numeric","placeholder",r,"aria-label",i,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],["class","ngb-tp-spacer",4,"ngIf"],["class","ngb-tp-input-container ngb-tp-second",4,"ngIf"],["class","ngb-tp-meridian",4,"ngIf"],["tabindex","-1","type","button",1,"btn","btn-link",3,"disabled","click"],[1,"chevron","ngb-tp-chevron"],[1,"visually-hidden"],s,[1,"chevron","ngb-tp-chevron","bottom"],c,h,p,[1,"ngb-tp-input-container","ngb-tp-second"],["type","text","maxlength","2","inputmode","numeric","placeholder",_,"aria-label",w,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],S,N,[1,"ngb-tp-meridian"],["type","button",1,"btn","btn-outline-primary",3,"disabled","click"],[4,"ngIf","ngIfElse"],["am",""],k,j]},template:function(t,r){1&t&&(l.TgZ(0,"fieldset",0)(1,"div",1)(2,"div",2),l.YNc(3,k6,4,7,"button",3),l.TgZ(4,"input",4),l.NdJ("change",function(s){return r.updateHour(s.target.value)})("blur",function(){return r.handleBlur()})("input",function(s){return r.formatInput(s.target)})("keydown.ArrowUp",function(s){return r.changeHour(r.hourStep),s.preventDefault()})("keydown.ArrowDown",function(s){return r.changeHour(-r.hourStep),s.preventDefault()}),l.qZA(),l.YNc(5,P6,4,7,"button",3),l.qZA(),l.TgZ(6,"div",5),l._uU(7,":"),l.qZA(),l.TgZ(8,"div",6),l.YNc(9,F6,4,7,"button",3),l.TgZ(10,"input",7),l.NdJ("change",function(s){return r.updateMinute(s.target.value)})("blur",function(){return r.handleBlur()})("input",function(s){return r.formatInput(s.target)})("keydown.ArrowUp",function(s){return r.changeMinute(r.minuteStep),s.preventDefault()})("keydown.ArrowDown",function(s){return r.changeMinute(-r.minuteStep),s.preventDefault()}),l.qZA(),l.YNc(11,L6,4,7,"button",3),l.qZA(),l.YNc(12,B6,2,0,"div",8),l.YNc(13,G6,4,9,"div",9),l.YNc(14,j6,1,0,"div",8),l.YNc(15,W6,5,9,"div",10),l.qZA()()),2&t&&(l.ekj("disabled",r.disabled),l.Q6J("disabled",r.disabled),l.xp6(3),l.Q6J("ngIf",r.spinners),l.xp6(1),l.ekj("form-control-sm",r.isSmallSize)("form-control-lg",r.isLargeSize),l.Q6J("value",r.formatHour(null==r.model?null:r.model.hour))("readOnly",r.readonlyInputs)("disabled",r.disabled),l.xp6(1),l.Q6J("ngIf",r.spinners),l.xp6(4),l.Q6J("ngIf",r.spinners),l.xp6(1),l.ekj("form-control-sm",r.isSmallSize)("form-control-lg",r.isLargeSize),l.Q6J("value",r.formatMinSec(null==r.model?null:r.model.minute))("readOnly",r.readonlyInputs)("disabled",r.disabled),l.xp6(1),l.Q6J("ngIf",r.spinners),l.xp6(1),l.Q6J("ngIf",r.seconds),l.xp6(1),l.Q6J("ngIf",r.seconds),l.xp6(1),l.Q6J("ngIf",r.meridian),l.xp6(1),l.Q6J("ngIf",r.meridian))},dependencies:[Qn],styles:['ngb-timepicker{font-size:1rem}.ngb-tp{display:flex;align-items:center}.ngb-tp-input-container{width:4em}.ngb-tp-chevron:before{border-style:solid;border-width:.29em .29em 0 0;content:"";display:inline-block;height:.69em;left:.05em;position:relative;top:.15em;transform:rotate(-45deg);vertical-align:middle;width:.69em}.ngb-tp-chevron.bottom:before{top:-.3em;transform:rotate(135deg)}.ngb-tp-input{text-align:center}.ngb-tp-hour,.ngb-tp-minute,.ngb-tp-second,.ngb-tp-meridian{display:flex;flex-direction:column;align-items:center;justify-content:space-around}.ngb-tp-spacer{width:1em;text-align:center}\n'],encapsulation:2}),n})(),h2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[j8]}),n})();const H8=(n,e)=>{const{classList:t}=n;if(e)return t.add("fade"),Fy(n),t.add("show","showing"),()=>{t.remove("showing")};t.add("show")},$8=({classList:n})=>(n.add("showing"),()=>{n.remove("show","showing")});let W8=(()=>{class n{constructor(t){this._ngbConfig=t,this.autohide=!0,this.delay=5e3,this.ariaLive="polite"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Zg))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),z8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","ngbToastHeader",""]],standalone:!0}),n})(),q8=(()=>{class n{constructor(t,r,i,s){this.ariaLive=t,this._zone=i,this._element=s,this.contentHeaderTpl=null,this.shown=new l.vpe,this.hidden=new l.vpe,null==this.ariaLive&&(this.ariaLive=r.ariaLive),this.delay=r.delay,this.autohide=r.autohide,this.animation=r.animation}ngAfterContentInit(){this._zone.onStable.asObservable().pipe(fr(1)).subscribe(()=>{this._init(),this.show()})}ngOnChanges(t){"autohide"in t&&(this._clearTimeout(),this._init())}hide(){this._clearTimeout();const t=ki(this._zone,this._element.nativeElement,$8,{animation:this.animation,runningTransition:"stop"});return t.subscribe(()=>{this.hidden.emit()}),t}show(){const t=ki(this._zone,this._element.nativeElement,H8,{animation:this.animation,runningTransition:"continue"});return t.subscribe(()=>{this.shown.emit()}),t}_init(){this.autohide&&!this._timeoutID&&(this._timeoutID=setTimeout(()=>this.hide(),this.delay))}_clearTimeout(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}}return n.\u0275fac=function(t){return new(t||n)(l.$8M("aria-live"),l.Y36(W8),l.Y36(l.R0b),l.Y36(l.SBq))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-toast"]],contentQueries:function(t,r,i){if(1&t&&l.Suo(i,z8,7,l.Rgc),2&t){let s;l.iGM(s=l.CRH())&&(r.contentHeaderTpl=s.first)}},hostAttrs:["role","alert","aria-atomic","true",1,"toast"],hostVars:3,hostBindings:function(t,r){2&t&&(l.uIk("aria-live",r.ariaLive),l.ekj("fade",r.animation))},inputs:{animation:"animation",delay:"delay",autohide:"autohide",header:"header"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbToast"],standalone:!0,features:[l.TTD,l.jDz],ngContentSelectors:fC,decls:5,vars:1,consts:function(){let e;return e=$localize`:@@ngb.toast.close-aria:Close`,[["headerTpl",""],[3,"ngIf"],[1,"toast-body"],[1,"me-auto"],[1,"toast-header"],[3,"ngTemplateOutlet"],["type","button","aria-label",e,1,"btn-close",3,"click"]]},template:function(t,r){1&t&&(l.F$t(),l.YNc(0,z6,2,1,"ng-template",null,0,l.W1O),l.YNc(2,K6,3,1,"ng-template",1),l.TgZ(3,"div",2),l.Hsn(4),l.qZA()),2&t&&(l.xp6(2),l.Q6J("ngIf",r.contentHeaderTpl||r.header))},dependencies:[Qn,Wr],styles:["ngb-toast{display:block}ngb-toast .toast-header .close{margin-left:auto;margin-bottom:.25rem}\n"],encapsulation:2}),n})(),f2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[q8]}),n})(),p2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),K8=(()=>{class n{constructor(){this.highlightClass="ngb-highlight",this.accentSensitive=!0}ngOnChanges(t){!this.accentSensitive&&!String.prototype.normalize&&(console.warn("The `accentSensitive` input in `ngb-highlight` cannot be set to `false` in a browser that does not implement the `String.normalize` function. You will have to include a polyfill in your application to use this feature in the current browser."),this.accentSensitive=!0);const r=rL(this.result),i=Array.isArray(this.term)?this.term:[this.term],s=_=>this.accentSensitive?_:oL(_),c=i.map(_=>function ez(n){return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(s(rL(_)))).filter(_=>_),h=this.accentSensitive?r:oL(r),p=c.length?h.split(new RegExp(`(${c.join("|")})`,"gmi")):[r];if(this.accentSensitive)this.parts=p;else{let _=0;this.parts=p.map(w=>r.substring(_,_+=w.length))}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-highlight"]],inputs:{highlightClass:"highlightClass",result:"result",term:"term",accentSensitive:"accentSensitive"},standalone:!0,features:[l.TTD,l.jDz],decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],[3,"class",4,"ngIf","ngIfElse"],["even",""]],template:function(t,r){1&t&&l.YNc(0,J6,3,2,"ng-template",0),2&t&&l.Q6J("ngForOf",r.parts)},dependencies:[Qn,xn],styles:[".ngb-highlight{font-weight:700}\n"],encapsulation:2,changeDetection:0}),n})();new l.OlP("live announcer delay",{providedIn:"root",factory:function Z8(){return 100}});let g2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[K8]}),n})(),m2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const Y8=[mL,_L,vL,bL,VL,HL,WL,ZL,m2,i2,o2,a2,l2,h2,f2,p2,g2];let J8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Y8,mL,_L,vL,bL,VL,HL,WL,ZL,m2,i2,o2,a2,l2,h2,f2,p2,g2]}),n})();function Q8(n,e){if(1&n&&(l.TgZ(0,"div",19)(1,"div",20)(2,"div",21),l._UZ(3,"img",22),l.TgZ(4,"div",23)(5,"h1"),l._uU(6,"Hola: "),l.TgZ(7,"strong"),l._uU(8),l.qZA()(),l.TgZ(9,"p"),l._uU(10,"ID de usuario: "),l.TgZ(11,"strong"),l._uU(12),l.qZA()(),l.TgZ(13,"p"),l._uU(14,"Email: "),l.TgZ(15,"strong"),l._uU(16),l.qZA()(),l.TgZ(17,"p"),l._uU(18,"\xbfEmail verificado?: "),l.TgZ(19,"strong"),l._uU(20),l.qZA()()()()()()),2&n){const t=e.ngIf;l.xp6(3),l.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.jpg",l.LSH),l.s9C("alt",t.displayName),l.xp6(5),l.Oqu(t.displayName?t.displayName:"User"),l.xp6(4),l.Oqu(t.uid),l.xp6(4),l.Oqu(t.email),l.xp6(4),l.Oqu(1==t.emailVerified?"S\xed":"No")}}let X8=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Hg))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-dashboard"]],decls:23,vars:1,consts:[[1,"navbar","navbar-dark","bg-dark","shadow","d-flex","flex-column"],[1,"navbar-brand"],[1,"fa-solid","fa-school"],[1,"container-fluid"],["id","dashboard-left-col",1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column","list-group","mt-3"],["aria-current","true",1,"nav-item","list-group-item","active"],[1,"nav-link","active","text-white"],[1,"fas","fa-user"],[1,"nav-item","list-group-item",2,"cursor","pointer"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",2,"max-width","150px","max-height","150px",3,"src","alt"],[1,"media-body"]],template:function(t,r){1&t&&(l.TgZ(0,"nav",0)(1,"a",1)(2,"i",2),l._uU(3," Estudia Joven"),l.qZA()()(),l.TgZ(4,"div",3)(5,"div",4)(6,"nav",5)(7,"div",6)(8,"ul",7)(9,"li",8)(10,"a",9),l._UZ(11,"i",10),l._uU(12," Mi perfil "),l.qZA()(),l.TgZ(13,"li",11)(14,"a",12),l.NdJ("click",function(){return r.authService.SignOut()}),l._UZ(15,"i",13),l._uU(16," Log out "),l.qZA()()()()(),l.TgZ(17,"main",14)(18,"div",15)(19,"div",16)(20,"h1",17),l._uU(21,"Mi Perfil"),l.qZA()(),l.YNc(22,Q8,21,6,"div",18),l.qZA()()()()),2&t&&(l.xp6(22),l.Q6J("ngIf",r.authService.userData))},dependencies:[Qn,TO],styles:["#dashboard-left-col[_ngcontent-%COMP%]{height:92.5vh}"]}),n})(),e4=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Hg))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=l.EpF();l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),l._uU(4,"Reset Password"),l.qZA(),l.TgZ(5,"p",3),l._uU(6,"Please enter your email address to request a password reset."),l.qZA(),l.TgZ(7,"div",4),l._UZ(8,"input",5,6),l.qZA(),l.TgZ(10,"div",4)(11,"input",7),l.NdJ("click",function(){l.CHM(i);const c=l.MAs(9);return l.KtG(r.authService.ForgotPassword(c.value))}),l.qZA()()(),l.TgZ(12,"div",8)(13,"span"),l._uU(14,"Go back to ? "),l.TgZ(15,"span",9),l._uU(16,"Log In"),l.qZA()()()()()}},dependencies:[Uc]}),n})();function t4(n,e){if(1&n&&(l.TgZ(0,"div",4)(1,"p",9),l._uU(2,"We have sent a confirmation email to "),l.TgZ(3,"strong"),l._uU(4),l.qZA(),l._uU(5,"."),l.qZA(),l.TgZ(6,"p",9),l._uU(7,"Please check your email and click on the link to verfiy your email address."),l.qZA()()),2&n){const t=e.ngIf;l.xp6(4),l.Oqu(t.email)}}const n4=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:BH},{path:"register-user",component:UH},{path:"dashboard",component:X8,canActivate:[(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Hg),l.LFG(os))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"forgot-password",component:e4},{path:"verify-email-address",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Hg))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),l._uU(4,"Thank You for Registering"),l.qZA(),l.YNc(5,t4,8,1,"div",3),l.TgZ(6,"div",4)(7,"button",5),l.NdJ("click",function(){return r.authService.SendVerificationMail()}),l._UZ(8,"i",6),l._uU(9," Resend Verification Email "),l.qZA()()(),l.TgZ(10,"div",7)(11,"span"),l._uU(12,"Go back to?"),l.TgZ(13,"span",8),l._uU(14," Sign in"),l.qZA()()()()()),2&t&&(l.xp6(5),l.Q6J("ngIf",r.authService.userData))},dependencies:[Qn,Uc]}),n})()}];let r4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[$E.forRoot(n4),$E]}),n})(),i4=(()=>{class n{constructor(){this.title="estudiajoven"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&l._UZ(0,"router-outlet")},dependencies:[jm]}),n})();const _2="firebasestorage.googleapis.com",y2="storageBucket";class ti extends P.ZR{constructor(e,t){super(SO(e),`Firebase Storage: ${t} (${SO(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ti.prototype)}_codeEquals(e){return SO(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function SO(n){return"storage/"+n}function AO(){return new ti("unknown","An unknown error occurred, please check the error payload for server response.")}function v2(){return new ti("canceled","User canceled the upload/download.")}function b2(){return new ti("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Gy(n){return new ti("invalid-argument",n)}function w2(){return new ti("app-deleted","The Firebase app was deleted.")}function E2(n){return new ti("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fw(n,e){return new ti("invalid-format","String does not match format '"+n+"': "+e)}function pw(n){throw new ti("internal-error","Internal error: "+n)}class ks{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ks.makeFromUrl(e,t)}catch{return new ks(e,"")}if(""===r.path)return r;throw function g4(n){return new ti("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function _(Qe){Qe.path_=decodeURIComponent(Qe.path)}const S=t.replace(/[.]/g,"\\."),st=[{regex:h,indices:{bucket:1,path:3},postModify:function s(Qe){"/"===Qe.path.charAt(Qe.path.length-1)&&(Qe.path_=Qe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_},{regex:new RegExp(`^https?://${t===_2?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_}];for(let Qe=0;Qe<st.length;Qe++){const ut=st[Qe],bt=ut.regex.exec(e);if(bt){let hn=bt[ut.indices.path];hn||(hn=""),r=new ks(bt[ut.indices.bucket],hn),ut.postModify(r);break}}if(null==r)throw function p4(n){return new ti("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class v4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function SC(n){return"string"==typeof n||n instanceof String}function D2(n){return NO()&&n instanceof Blob}function NO(){return typeof Blob<"u"}function RO(n,e,t,r){if(r<e)throw Gy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Gy(`Invalid value for '${n}'. Expected ${t} or less.`)}function Cd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function I2(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var wf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(wf||(wf={})),wf))();class T4{constructor(e,t,r,i,s,c,h,p,_,w,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=p,this.timeout_=_,this.progressCallback_=w,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,k)=>{this.resolve_=N,this.reject_=k,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,c=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());!function E4(n){return void 0!==n}(p)?s():s(p)}catch(p){c(p)}else if(null!==h){const p=AO();p.serverResponse=h.getErrorText(),c(this.errorCallback_?this.errorCallback_(h,p):p)}else c(i.canceled?this.appDelete_?w2():v2():function f4(){return new ti("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new AC(!1,null,!0)):this.backoffId_=function b4(n,e,t){let r=1,i=null,s=null,c=!1,h=0;function p(){return 2===h}let _=!1;function w(...oe){_||(_=!0,e.apply(null,oe))}function S(oe){i=setTimeout(()=>{i=null,n(k,p())},oe)}function N(){s&&clearTimeout(s)}function k(oe,...Ke){if(_)return void N();if(oe)return N(),void w.call(null,oe,...Ke);if(p()||c)return N(),void w.call(null,oe,...Ke);let st;r<64&&(r*=2),1===h?(h=2,st=0):st=1e3*(r+Math.random()),S(st)}let j=!1;function te(oe){j||(j=!0,N(),!_&&(null!==i?(oe||(h=2),clearTimeout(i),S(0)):oe||(h=1)))}return S(0),s=setTimeout(()=>{c=!0,te(!0)},t),te}((r,i)=>{if(i)return void r(!1,new AC(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const c=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const h=s.getErrorCode()===wf.NO_ERROR,p=s.getStatus();if(!h||this.isRetryStatusCode_(p)){const w=s.getErrorCode()===wf.ABORT;return void r(!1,new AC(!1,null,w))}const _=-1!==this.successCodes_.indexOf(p);r(!0,new AC(_,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function w4(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),s=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||s}}class AC{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function M4(...n){const e=function O4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(NO())return new Blob(n);throw new ti("unsupported-environment","This browser doesn't seem to support creating Blobs")}const na={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class OO{constructor(e,t){this.data=e,this.contentType=t||null}}function MO(n,e){switch(n){case na.RAW:return new OO(T2(e));case na.BASE64:case na.BASE64URL:return new OO(C2(n,e));case na.DATA_URL:return new OO(function F4(n){const e=new S2(n);return e.base64?C2(na.BASE64,e.rest):function P4(n){let e;try{e=decodeURIComponent(n)}catch{throw fw(na.DATA_URL,"Malformed data URL.")}return T2(e)}(e.rest)}(e),function L4(n){return new S2(n).contentType}(e))}throw AO()}function T2(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function C2(n,e){switch(n){case na.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw fw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case na.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw fw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function k4(n){return atob(n)}(e)}catch{throw fw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class S2{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw fw(na.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function B4(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ku{constructor(e,t){let r=0,i="";D2(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(D2(this.data_)){const i=function x4(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Ku(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ku(r,!0)}}static getBlob(...e){if(NO()){const t=e.map(r=>r instanceof Ku?r.data_:r);return new Ku(M4.apply(null,t))}{const t=e.map(c=>SC(c)?MO(na.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(c=>{for(let h=0;h<c.length;h++)i[s++]=c[h]}),new Ku(i,!0)}}uploadData(){return this.data_}}function xO(n){let e;try{e=JSON.parse(n)}catch{return null}return function I4(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function A2(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function G4(n,e){return e}class to{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||G4}}let NC=null;function gw(){if(NC)return NC;const n=[];n.push(new to("bucket")),n.push(new to("generation")),n.push(new to("metageneration")),n.push(new to("name","fullPath",!0));const t=new to("name");t.xform=function e(s,c){return function j4(n){return!SC(n)||n.length<2?n:A2(n)}(c)},n.push(t);const i=new to("size");return i.xform=function r(s,c){return void 0!==c?Number(c):c},n.push(i),n.push(new to("timeCreated")),n.push(new to("updated")),n.push(new to("md5Hash",null,!0)),n.push(new to("cacheControl",null,!0)),n.push(new to("contentDisposition",null,!0)),n.push(new to("contentEncoding",null,!0)),n.push(new to("contentLanguage",null,!0)),n.push(new to("contentType",null,!0)),n.push(new to("metadata","customMetadata",!0)),NC=n,NC}function N2(n,e,t){const r=xO(e);return null===r?null:function $4(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const c=t[s];r[c.local]=c.xform(r,e[c.server])}return function H4(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new ks(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function kO(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const R2="prefixes",O2="items";class Zu{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Yu(n){if(!n)throw AO()}function RC(n,e){return function t(r,i){const s=N2(n,i,e);return Yu(null!==s),s}}function jy(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function d4(){return new ti("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function c4(){return new ti("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function u4(n){return new ti("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function h4(n){return new ti("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function mw(n){const e=jy(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function l4(n){return new ti("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function M2(n,e,t){const i=Cd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Zu(i,"GET",RC(n,t),c);return h.errorHandler=mw(e),h}function Y4(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const h=Cd(e.bucketOnlyServerUrl(),n.host,n._protocol),_=n.maxOperationRetryTime,w=new Zu(h,"GET",function K4(n,e){return function t(r,i){const s=function q4(n,e,t){const r=xO(t);return null===r?null:function z4(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[R2])for(const i of t[R2]){const s=i.replace(/\/$/,""),c=n._makeStorageReference(new ks(e,s));r.prefixes.push(c)}if(t[O2])for(const i of t[O2]){const s=n._makeStorageReference(new ks(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return Yu(null!==s),s}}(n,e.bucket),_);return w.urlParams=s,w.errorHandler=jy(e),w}function k2(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function eq(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class OC{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function PO(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Yu(!1)}return Yu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const iq={STATE_CHANGED:"state_changed"},no={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function FO(n){switch(n){case"running":case"pausing":case"canceling":return no.RUNNING;case"paused":return no.PAUSED;case"success":return no.SUCCESS;case"canceled":return no.CANCELED;default:return no.ERROR}}class sq{constructor(e,t,r){if(function D4(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Hy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let L2=null;class oq{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=wf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=wf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=wf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw pw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw pw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw pw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw pw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw pw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class aq extends oq{initXhr(){this.xhr_.responseType="text"}}function Ul(){return L2?L2():new aq}class B2{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=gw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function tq(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),c=k2(e,r,i),h={name:c.fullPath},p=Cd(s,n.host,n._protocol),w={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},S=kO(c,t),j=new Zu(p,"POST",function k(te){let oe;PO(te);try{oe=te.getResponseHeader("X-Goog-Upload-URL")}catch{Yu(!1)}return Yu(SC(oe)),oe},n.maxUploadRetryTime);return j.urlParams=h,j.headers=w,j.body=S,j.errorHandler=jy(e),j}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ul,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function nq(n,e,t,r){const p=new Zu(t,"POST",function s(_){const w=PO(_,["active","final"]);let S=null;try{S=_.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Yu(!1)}S||Yu(!1);const N=Number(S);return Yu(!isNaN(N)),new OC(N,r.size(),"final"===w)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=jy(e),p}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Ul,t,r);this._request=s,s.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new OC(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let c;try{c=function rq(n,e,t,r,i,s,c,h){const p=new OC(0,0);if(c?(p.current=c.current,p.total=c.total):(p.current=0,p.total=r.size()),r.size()!==p.total)throw function _4(){return new ti("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const _=p.total-p.current;let w=_;i>0&&(w=Math.min(w,i));const S=p.current,j={"X-Goog-Upload-Command":w===_?"upload, finalize":"upload","X-Goog-Upload-Offset":`${p.current}`},te=r.slice(S,S+w);if(null===te)throw b2();const st=new Zu(t,"POST",function oe(Qe,ut){const bt=PO(Qe,["active","final"]),en=p.current+w,hn=r.size();let Gr;return Gr="final"===bt?RC(e,s)(Qe,ut):null,new OC(en,hn,"final"===bt,Gr)},e.maxUploadRetryTime);return st.headers=j,st.body=te.uploadData(),st.progressCallback=h||null,st.errorHandler=jy(n),st}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const h=this._ref.storage._makeRequest(c,Ul,i,s);this._request=h,h.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=M2(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Ul,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function P2(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},p=function h(){let st="";for(let Qe=0;Qe<2;Qe++)st+=Math.random().toString().slice(2);return st}();c["Content-Type"]="multipart/related; boundary="+p;const _=k2(e,r,i),w=kO(_,t),k=Ku.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+w+"\r\n--"+p+"\r\nContent-Type: "+_.contentType+"\r\n\r\n",r,"\r\n--"+p+"--");if(null===k)throw b2();const j={name:_.fullPath},te=Cd(s,n.host,n._protocol),Ke=n.maxUploadRetryTime,Ze=new Zu(te,"POST",RC(n,t),Ke);return Ze.urlParams=j,Ze.headers=c,Ze.body=k.uploadData(),Ze.errorHandler=jy(e),Ze}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ul,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=v2(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=FO(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new sq(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(FO(this._state)){case no.SUCCESS:Hy(this._resolve.bind(null,this.snapshot))();break;case no.CANCELED:case no.ERROR:Hy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(FO(this._state)){case no.RUNNING:case no.PAUSED:e.next&&Hy(e.next.bind(e,this.snapshot))();break;case no.SUCCESS:e.complete&&Hy(e.complete.bind(e))();break;default:e.error&&Hy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class nm{constructor(e,t){this._service=e,this._location=t instanceof ks?t:ks.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new nm(e,t)}get root(){const e=new ks(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return A2(this._location.path)}get storage(){return this._service}get parent(){const e=function U4(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ks(this._location.bucket,e);return new nm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw E2(e)}}function V2(n,e,t){return LO.apply(this,arguments)}function LO(){return LO=(0,De.Z)(function*(n,e,t){const i=yield G2(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield V2(n,e,i.nextPageToken))}),LO.apply(this,arguments)}function G2(n,e){null!=e&&"number"==typeof e.maxResults&&RO("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Y4(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Ul)}function vq(n){n._throwIfRoot("getDownloadURL");const e=function J4(n,e,t){const i=Cd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Zu(i,"GET",function Z4(n,e){return function t(r,i){const s=N2(n,i,e);return Yu(null!==s),function W4(n,e,t,r){const i=xO(e);if(null===i||!SC(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const c=encodeURIComponent;return s.split(",").map(_=>{const S=n.fullPath;return Cd("/b/"+c(n.bucket)+"/o/"+c(S),t,r)+I2({alt:"media",token:_})})[0]}(s,i,n.host,n._protocol)}}(n,t),c);return h.errorHandler=mw(e),h}(n.storage,n._location,gw());return n.storage.makeRequestWithTokens(e,Ul).then(t=>{if(null===t)throw function y4(){return new ti("no-download-url","The given file does not have any download URLs.")}();return t})}function j2(n,e){const t=function V4(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ks(n._location.bucket,t);return new nm(n.storage,r)}function H2(n,e){if(n instanceof BO){const t=n;if(null==t._bucket)throw function m4(){return new ti("no-default-bucket","No default bucket found. Did you set the '"+y2+"' property when initializing the app?")}();const r=new nm(t,t._bucket);return null!=e?H2(r,e):r}return void 0!==e?j2(n,e):n}function Dq(n,e){if(e&&function wq(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof BO)return function Eq(n,e){return new nm(n,e)}(n,e);throw Gy("To use ref(service, url), the first argument must be a Storage instance.")}return H2(n,e)}function $2(n,e){const t=e?.[y2];return null==t?null:ks.makeFromBucketSpec(t,n)}class BO{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=_2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ks.makeFromBucketSpec(i,this._host):$2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ks.makeFromBucketSpec(this._url,e):$2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){RO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){RO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,De.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,De.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new nm(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new v4(w2());{const s=function R4(n,e,t,r,i,s){const c=I2(n.urlParams),h=n.url+c,p=Object.assign({},n.headers);return function A4(n,e){e&&(n["X-Firebase-GMPID"]=e)}(p,e),function C4(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(p,t),function S4(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(p,s),function N4(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(p,r),new T4(h,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){var r=this;return(0,De.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const W2="@firebase/storage";function K2(n,e){return Dq(n=(0,P.m9)(n),e)}function kq(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new BO(t,r,i,e,ui.SDK_VERSION)}!function Pq(){(0,ui._registerComponent)(new Cs.wA("storage",kq,"PUBLIC").setMultipleInstances(!0)),(0,ui.registerVersion)(W2,"0.9.9",""),(0,ui.registerVersion)(W2,"0.9.9","esm2017")}();class MC{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Z2{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new MC(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new MC(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?c=>t(new MC(c,this,this._ref)):{next:t.next?c=>t.next(new MC(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class Y2{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Sd(e,this._service))}get items(){return this._delegate.items.map(e=>new Sd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Sd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Mq(n,e){return j2(n,e)}(this._delegate,e);return new Sd(t,this.storage)}get root(){return new Sd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Sd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Z2(function Tq(n,e,t){return function pq(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new B2(n,new Ku(e),t)}(n=(0,P.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=na.RAW,r){this._throwIfRoot("putString");const i=MO(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new Z2(new B2(this._delegate,new Ku(i.data,!0),s),this)}listAll(){return function Nq(n){return function mq(n){const e={prefixes:[],items:[]};return V2(n,e).then(()=>e)}(n=(0,P.m9)(n))}(this._delegate).then(e=>new Y2(e,this.storage))}list(e){return function Aq(n,e){return G2(n=(0,P.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Y2(t,this.storage))}getMetadata(){return function Cq(n){return function _q(n){n._throwIfRoot("getMetadata");const e=M2(n.storage,n._location,gw());return n.storage.makeRequestWithTokens(e,Ul)}(n=(0,P.m9)(n))}(this._delegate)}updateMetadata(e){return function Sq(n,e){return function yq(n,e){n._throwIfRoot("updateMetadata");const t=function Q4(n,e,t,r){const s=Cd(e.fullServerUrl(),n.host,n._protocol),h=kO(t,r),_=n.maxOperationRetryTime,w=new Zu(s,"PATCH",RC(n,r),_);return w.headers={"Content-Type":"application/json; charset=utf-8"},w.body=h,w.errorHandler=mw(e),w}(n.storage,n._location,e,gw());return n.storage.makeRequestWithTokens(t,Ul)}(n=(0,P.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function Rq(n){return vq(n=(0,P.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Oq(n){return function bq(n){n._throwIfRoot("deleteObject");const e=function X4(n,e){const r=Cd(e.fullServerUrl(),n.host,n._protocol),h=new Zu(r,"DELETE",function c(p,_){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=mw(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ul)}(n=(0,P.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw E2(e)}}class J2{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Q2(e))throw Gy("ref() expected a child path but got a URL, use refFromURL instead.");return new Sd(K2(this._delegate,e),this)}refFromURL(e){if(!Q2(e))throw Gy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ks.makeFromUrl(e,this._delegate.host)}catch{throw Gy("refFromUrl() expected a valid full URL but got an invalid one.")}return new Sd(K2(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function xq(n,e,t,r={}){!function Iq(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,P.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function Q2(n){return/^[A-Za-z]+:\/\//.test(n)}function Uq(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new J2(t,r)}function X2(n){const e=function Gq(n){return new Kn.y(e=>{const t=c=>e.next(c);t(n.snapshot);const s=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){s()}}).pipe(function s4(n,e=vh.z){return(0,Ln.e)((t,r)=>{let i=null,s=null,c=null;const h=()=>{if(i){i.unsubscribe(),i=null;const _=s;s=null,r.next(_)}};function p(){const _=c+n,w=e.now();if(w<_)return i=this.schedule(void 0,_-w),void r.add(i);h()}t.subscribe((0,we.x)(r,_=>{s=_,c=e.now(),i||(i=e.schedule(p,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{s=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,C.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function xC(n){return{getDownloadURL:()=>_t(void 0).pipe(Cn.fc,hr(()=>n.getDownloadURL()),Cn.iC),getMetadata:()=>_t(void 0).pipe(Cn.fc,hr(()=>n.getMetadata()),Cn.iC),delete:()=>(0,Qt.D)(n.delete()),child:e=>xC(n.child(e)),updateMetadata:e=>(0,Qt.D)(n.updateMetadata(e)),put:(e,t)=>X2(n.put(e,t)),putString:(e,t,r)=>X2(n.putString(e,t,r)),list:e=>(0,Qt.D)(n.list(e)),listAll:()=>(0,Qt.D)(n.listAll())}}!function Vq(n){const e={TaskState:no,TaskEvent:iq,StringFormat:na,Storage:J2,Reference:Sd};n.INTERNAL.registerComponent(new Cs.wA("storage-compat",Uq,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(Jv.Z);const jq=new l.OlP("angularfire2.storageBucket"),Hq=new l.OlP("angularfire2.storage.maxUploadRetryTime"),$q=new l.OlP("angularfire2.storage.maxOperationRetryTime"),Wq=new l.OlP("angularfire2.storage.use-emulator");let zq=(()=>{class n{constructor(t,r,i,s,c,h,p,_,w,S){const N=(0,Fr.on)(t,c,r);this.storage=(0,Fr.cc)(`${N.name}.storage.${i}`,"AngularFireStorage",N.name,()=>{const k=c.runOutsideAngular(()=>N.storage(i||void 0)),j=w;return j&&k.useEmulator(...j),p&&k.setMaxUploadRetryTime(p),_&&k.setMaxOperationRetryTime(_),k},[p,_])}ref(t){return xC(this.storage.ref(t))}refFromURL(t){return xC(this.storage.refFromURL(t))}upload(t,r,i){return xC(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Fr.Dh),l.LFG(Fr.xv,8),l.LFG(jq,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Cn.HU),l.LFG(Hq,8),l.LFG($q,8),l.LFG(Wq,8),l.LFG(Kb,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),qq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),Kq=(()=>{class n{constructor(){ZT.Z.registerVersion("angularfire",Cn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[zq],imports:[qq]}),n})();const eB="@firebase/database";let UO="";function nB(n){UO=n}class Yq{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,P.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,P.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Jq{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,P.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const rB=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Yq(e)}}catch{}return new Jq},rm=rB("localStorage"),VO=rB("sessionStorage"),$y=new Zs.Yd("@firebase/database"),iB=function(){let n=1;return function(){return n++}}(),sB=function(n){const e=(0,P.dS)(n),t=new P.gQ;t.update(e);const r=t.digest();return P.US.encodeByteArray(r)},_w=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=_w.apply(null,r):e+="object"==typeof r?(0,P.Pz)(r):r,e+=" "}return e};let im=null,oB=!0;const aB=function(n,e){(0,P.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?($y.logLevel=Zs.in.VERBOSE,im=$y.log.bind($y),e&&VO.set("logging_enabled",!0)):"function"==typeof n?im=n:(im=null,VO.remove("logging_enabled"))},es=function(...n){if(!0===oB&&(oB=!1,null===im&&!0===VO.get("logging_enabled")&&aB(!0)),im){const e=_w.apply(null,n);im(e)}},yw=function(n){return function(...e){es(n,...e)}},GO=function(...n){const e="FIREBASE INTERNAL ERROR: "+_w(...n);$y.error(e)},Ju=function(...n){const e=`FIREBASE FATAL ERROR: ${_w(...n)}`;throw $y.error(e),new Error(e)},Ps=function(...n){const e="FIREBASE WARNING: "+_w(...n);$y.warn(e)},kC=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ad="[MIN_NAME]",Qu="[MAX_NAME]",sm=function(n,e){if(n===e)return 0;if(n===Ad||e===Qu)return-1;if(e===Ad||n===Qu)return 1;{const t=PC(n),r=PC(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},e5=function(n,e){return n===e?0:n<e?-1:1},vw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,P.Pz)(e))},jO=function(n){if("object"!=typeof n||null===n)return(0,P.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,P.Pz)(e[r]),t+=":",t+=jO(n[e[r]]);return t+="}",t},lB=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ts(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const uB=function(n){(0,P.hu)(!kC(n),"Invalid JSON number");const r=1023;let i,s,c,h,p;0===n?(s=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=h+r,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,c=Math.round(n/Math.pow(2,-1074))));const _=[];for(p=52;p;p-=1)_.push(c%2?1:0),c=Math.floor(c/2);for(p=11;p;p-=1)_.push(s%2?1:0),s=Math.floor(s/2);_.push(i?1:0),_.reverse();const w=_.join("");let S="";for(p=0;p<64;p+=8){let N=parseInt(w.substr(p,8),2).toString(16);1===N.length&&(N="0"+N),S+=N}return S.toLowerCase()},i5=new RegExp("^-?(0*)\\d{1,10}$"),cB=-2147483648,HO=2147483647,PC=function(n){if(i5.test(n)){const e=Number(n);if(e>=cB&&e<=HO)return e}return null},Wy=function(n){try{n()}catch(e){setTimeout(()=>{throw Ps("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},s5=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},bw=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class o5{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ps(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class a5{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(es("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ps(e)}}let ww=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const gB=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,yB="websocket",vB="long_polling";class WO{constructor(e,t,r,i,s=!1,c="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=rm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&rm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function bB(n,e,t){let r;if((0,P.hu)("string"==typeof e,"typeof type must == string"),(0,P.hu)("object"==typeof t,"typeof params must == object"),e===yB)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==vB)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function l5(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ts(t,(s,c)=>{i.push(s+"="+c)}),r+i.join("&")}class u5{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,P.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,P.p$)(this.counters_)}}const zO={},qO={};function KO(n){const e=n.toString();return zO[e]||(zO[e]=new u5),zO[e]}class d5{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Wy(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ef{constructor(e,t,r,i,s,c,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=yw(e),this.stats_=KO(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),bB(t,vB,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new d5(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,P.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ZO((...s)=>{const[c,h,p,_,w]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=p;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&gB.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ef.forceAllow_=!0}static forceDisallow(){Ef.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!Ef.forceAllow_&&(Ef.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,P.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,P.h$)(t),i=lB(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,P.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class ZO{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=iB(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=ZO.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){es("frame writing exception"),h.stack&&es(h.stack),es(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||es("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,P.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{es("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let LC=null;typeof MozWebSocket<"u"?LC=MozWebSocket:typeof WebSocket<"u"&&(LC=WebSocket);let zy=(()=>{class n{constructor(t,r,i,s,c,h,p){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=yw(this.connId),this.stats_=KO(r),this.connURL=n.connectionURL_(r,h,p,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,c){const h={v:"5"};return!(0,P.Yr)()&&typeof location<"u"&&location.hostname&&gB.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),s&&(h.ac=s),c&&(h.p=c),bB(t,yB,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,rm.set("previous_websocket_failure",!0);try{let i;if((0,P.Yr)()){i={headers:{"User-Agent":`Firebase/5/${UO}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,h=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new LC(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==LC&&!n.forceDisallow_}static previouslyFailed(){return rm.isInMemoryStorage||!0===rm.get("previous_websocket_failure")}markConnectionHealthy(){rm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,P.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,P.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=lB(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),SB=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Ef,zy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=zy&&zy.isAvailable();let i=r&&!zy.previouslyFailed();if(t.webSocketOnly&&(r||Ps("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[zy];else{const s=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class kB{constructor(e,t,r,i,s,c,h,p,_,w){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=p,this.onKill_=_,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=yw("c:"+this.id+":"),this.transportManager_=new SB(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=bw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=vw("t",e),r=vw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=vw("t",e),r=vw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=vw("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?GO("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):GO("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ps("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),bw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):bw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(rm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class PB{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class FB{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,P.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,P.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class BC extends FB{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new BC}getInitialEvent(e){return(0,P.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const LB=32,BB=768;class Wn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Un(){return new Wn("")}function gn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Df(n){return n.pieces_.length-n.pieceNum_}function ur(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Wn(n.pieces_,e)}function JO(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Ew(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function UB(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Wn(e,0)}function Rr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Wn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Wn(t,0)}function mn(n){return n.pieceNum_>=n.pieces_.length}function ro(n,e){const t=gn(n),r=gn(e);if(null===t)return e;if(t===r)return ro(ur(n),ur(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function x5(n,e){const t=Ew(n,0),r=Ew(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=sm(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function QO(n,e){if(Df(n)!==Df(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function xa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Df(n)>Df(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class k5{constructor(e,t){this.errorPrefix_=t,this.parts_=Ew(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,P.ug)(this.parts_[r]);VB(this)}}function VB(n){if(n.byteLength_>BB)throw new Error(n.errorPrefix_+"has a key path longer than "+BB+" bytes ("+n.byteLength_+").");if(n.parts_.length>LB)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+LB+") or object contains a cycle "+om(n))}function om(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class XO extends FB{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new XO}getInitialEvent(e){return(0,P.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Dw=1e3;let VC,am=(()=>{class n extends PB{constructor(t,r,i,s,c,h,p,_){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=_,this.id=n.nextPersistentConnectionId_++,this.log_=yw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Dw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");XO.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&BC.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,c={r:s,a:t,b:r};this.log_((0,P.Pz)(c)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new P.BH,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const p=h.d;"ok"===h.s?r.resolve(p):r.reject(p)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,p=>{const _=p.d,w=p.s;n.warnOnListenWarnings_(_,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",p),"ok"!==w&&this.removeListen_(i,s),t.onComplete&&t.onComplete(w,_))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,P.r3)(t,"w")){const i=(0,P.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Ps(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,P.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,P.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const c=s.s,h=s.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const c={p:t};s&&(c.q=i,c.t=s),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,c){this.initConnection_();const h={p:r,d:i};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,P.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):GO("Unrecognized action received from server: "+(0,P.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Dw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Dw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Dw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,De.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let p=!1,_=null;const w=function(){_?_.close():(p=!0,s())};t.realtime_={close:w,sendRequest:function(k){(0,P.hu)(_,"sendRequest call when we're not connected not allowed."),_.sendRequest(k)}};const N=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[k,j]=yield Promise.all([t.authTokenProvider_.getToken(N),t.appCheckTokenProvider_.getToken(N)]);p?es("getToken() completed but was canceled"):(es("getToken() completed. Creating connection."),t.authToken_=k&&k.accessToken,t.appCheckToken_=j&&j.token,_=new kB(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,te=>{Ps(te+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(k){t.log_("Failed to get token: "+k),p||(t.repoInfo_.nodeAdmin&&Ps(k),w())}}})()}interrupt(t){es("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){es("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Dw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>jO(c)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Wn(t).toString();let s;if(this.listens.has(i)){const c=this.listens.get(i);s=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){es("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){es("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,P.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+UO.replace(/\./g,"-")]=1,(0,P.uI)()?t["framework.cordova"]=1:(0,P.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=BC.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class yn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new yn(e,t)}}class UC{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new yn(Ad,e),i=new yn(Ad,t);return 0!==this.compare(r,i)}minPost(){return yn.MIN}}class HB extends UC{static get __EMPTY_NODE(){return VC}static set __EMPTY_NODE(e){VC=e}compare(e,t){return sm(e.name,t.name)}isDefinedOn(e){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return yn.MIN}maxPost(){return new yn(Qu,VC)}makePost(e,t){return(0,P.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new yn(e,VC)}toString(){return".key"}}const Xu=new HB;class GC{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let tM,Vl=(()=>{class n{constructor(t,r,i,s,c){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??So.EMPTY_NODE,this.right=c??So.EMPTY_NODE}copy(t,r,i,s,c){return new n(t??this.key,r??this.value,i??this.color,s??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const c=i(t,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===c?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return So.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return So.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class So{constructor(e,t=So.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new So(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Vl.BLACK,null,null))}remove(e){return new So(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Vl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new GC(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new GC(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new GC(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new GC(this.root_,null,this.comparator_,!0,e)}}function j5(n,e){return sm(n.name,e.name)}function eM(n,e){return sm(n,e)}So.EMPTY_NODE=new class G5{copy(e,t,r,i,s){return this}insert(e,t,r){return new Vl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const $B=function(n){return"number"==typeof n?"number:"+uB(n):"string:"+n},WB=function(n){if(n.isLeafNode()){const e=n.val();(0,P.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,P.r3)(e,".sv"),"Priority must be a string or number.")}else(0,P.hu)(n===tM||n.isEmpty(),"priority of unexpected type.");(0,P.hu)(n===tM||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let zB,qB,KB,qy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),WB(this.priorityNode_)}static set __childrenNodeConstructor(t){zB=t}static get __childrenNodeConstructor(){return zB}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return mn(t)?this:".priority"===gn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=gn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,P.hu)(".priority"!==i||1===Df(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ur(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+$B(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?uB(this.value_):this.value_,this.lazyHash_=sB(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,P.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,P.hu)(s>=0,"Unknown leaf type: "+r),(0,P.hu)(c>=0,"Unknown leaf type: "+i),s===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const mr=new class z5 extends UC{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?sm(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return yn.MIN}maxPost(){return new yn(Qu,new qy("[PRIORITY-POST]",KB))}makePost(e,t){const r=qB(e);return new yn(t,new qy("[PRIORITY-POST]",r))}toString(){return".priority"}},q5=Math.log(2);class K5{constructor(e){this.count=parseInt(Math.log(e+1)/q5,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const jC=function(n,e,t,r){n.sort(e);const i=function(p,_){const w=_-p;let S,N;if(0===w)return null;if(1===w)return S=n[p],N=t?t(S):S,new Vl(N,S.node,Vl.BLACK,null,null);{const k=parseInt(w/2,10)+p,j=i(p,k),te=i(k+1,_);return S=n[k],N=t?t(S):S,new Vl(N,S.node,Vl.BLACK,j,te)}},h=function(p){let _=null,w=null,S=n.length;const N=function(j,te){const oe=S-j,Ke=S;S-=j;const Ze=i(oe+1,Ke),st=n[oe],Qe=t?t(st):st;k(new Vl(Qe,st.node,te,null,Ze))},k=function(j){_?(_.left=j,_=j):(w=j,_=j)};for(let j=0;j<p.count;++j){const te=p.nextBitIsOne(),oe=Math.pow(2,p.count-(j+1));te?N(oe,Vl.BLACK):(N(oe,Vl.BLACK),N(oe,Vl.RED))}return w}(new K5(n.length));return new So(r||e,h)};let nM;const Ky={};class Nd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,P.hu)(Ky&&mr,"ChildrenNode.ts has not been loaded"),nM=nM||new Nd({".priority":Ky},{".priority":mr}),nM}get(e){const t=(0,P.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof So?t:null}hasIndex(e){return(0,P.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,P.hu)(e!==Xu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(yn.Wrap);let h,c=s.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=s.getNext();h=i?jC(r,e.getCompare()):Ky;const p=e.toString(),_=Object.assign({},this.indexSet_);_[p]=e;const w=Object.assign({},this.indexes_);return w[p]=h,new Nd(w,_)}addToIndexes(e,t){const r=(0,P.UI)(this.indexes_,(i,s)=>{const c=(0,P.DV)(this.indexSet_,s);if((0,P.hu)(c,"Missing index implementation for "+s),i===Ky){if(c.isDefinedOn(e.node)){const h=[],p=t.getIterator(yn.Wrap);let _=p.getNext();for(;_;)_.name!==e.name&&h.push(_),_=p.getNext();return h.push(e),jC(h,c.getCompare())}return Ky}{const h=t.get(e.name);let p=i;return h&&(p=p.remove(new yn(e.name,h))),p.insert(e,e.node)}});return new Nd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,P.UI)(this.indexes_,i=>{if(i===Ky)return i;{const s=t.get(e.name);return s?i.remove(new yn(e.name,s)):i}});return new Nd(r,this.indexSet_)}}let Iw,on=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&WB(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Iw||(Iw=new n(new So(eM),null,Nd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Iw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Iw:r}}getChild(t){const r=gn(t);return null===r?this:this.getImmediateChild(r).getChild(ur(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,P.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new yn(t,r);let s,c;r.isEmpty()?(s=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const h=s.isEmpty()?Iw:this.priorityNode_;return new n(s,h,c)}}updateChild(t,r){const i=gn(t);if(null===i)return r;{(0,P.hu)(".priority"!==gn(t)||1===Df(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(ur(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,c=!0;if(this.forEachChild(mr,(h,p)=>{r[h]=p.val(t),i++,c&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):c=!1}),!t&&c&&s<2*i){const h=[];for(const p in r)h[p]=r[p];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+$B(this.getPriority().val())+":"),this.forEachChild(mr,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":sB(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const c=s.getPredecessorKey(new yn(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new yn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new yn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,yn.Wrap);let c=s.peek();for(;null!=c&&r.compare(c,t)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,yn.Wrap);let c=s.peek();for(;null!=c&&r.compare(c,t)>0;)s.getNext(),c=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Tw?-1:0}withIndex(t){if(t===Xu||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Xu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(mr),s=r.getIterator(mr);let c=i.getNext(),h=s.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=s.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(t){return t===Xu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Tw=new class Z5 extends on{constructor(){super(new So(eM),on.EMPTY_NODE,Nd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return on.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(yn,{MIN:{value:new yn(Ad,on.EMPTY_NODE)},MAX:{value:new yn(Qu,Tw)}}),HB.__EMPTY_NODE=on.EMPTY_NODE,qy.__childrenNodeConstructor=on,function H5(n){tM=n}(Tw),function W5(n){KB=n}(Tw);const Y5=!0;function Vr(n,e=null){if(null===n)return on.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,P.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new qy(n,Vr(e));if(n instanceof Array||!Y5){let t=on.EMPTY_NODE;return ts(n,(r,i)=>{if((0,P.r3)(n,r)&&"."!==r.substring(0,1)){const s=Vr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Vr(e))}{const t=[];let r=!1;if(ts(n,(c,h)=>{if("."!==c.substring(0,1)){const p=Vr(h);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new yn(c,p)))}}),0===t.length)return on.EMPTY_NODE;const s=jC(t,j5,c=>c.name,eM);if(r){const c=jC(t,mr.getCompare());return new on(s,Vr(e),new Nd({".priority":c},{".priority":mr}))}return new on(s,Vr(e),Nd.Default)}}!function $5(n){qB=n}(Vr);class rM extends UC{constructor(e){super(),this.indexPath_=e,(0,P.hu)(!mn(e)&&".priority"!==gn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?sm(e.name,t.name):s}makePost(e,t){const r=Vr(e),i=on.EMPTY_NODE.updateChild(this.indexPath_,r);return new yn(t,i)}maxPost(){const e=on.EMPTY_NODE.updateChild(this.indexPath_,Tw);return new yn(Qu,e)}toString(){return Ew(this.indexPath_,0).join("/")}}const iM=new class J5 extends UC{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?sm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return yn.MIN}maxPost(){return yn.MAX}makePost(e,t){const r=Vr(e);return new yn(t,r)}toString(){return".value"}},Zy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Q5=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Zy.charAt(t%64),t=Math.floor(t/64);(0,P.hu)(0===t,"Cannot push at time == 0");let c=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=Zy.charAt(e[i]);return(0,P.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),JB=function(n){if(n===""+HO)return"-";const e=PC(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Qu;const s=Zy.charAt(Zy.indexOf(t[r])+1);return t[r]=s,t.slice(0,r+1).join("")},QB=function(n){if(n===""+cB)return Ad;const e=PC(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+HO:(delete t[t.length-1],t.join("")):(t[t.length-1]=Zy.charAt(Zy.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function XB(n){return{type:"value",snapshotNode:n}}function Yy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Cw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Sw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class oM{constructor(e){this.index_=e}updateChild(e,t,r,i,s,c){(0,P.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(Cw(t,h)):(0,P.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(Yy(t,r)):c.trackChildChange(Sw(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(mr,(i,s)=>{t.hasChild(i)||r.trackChildChange(Cw(i,s))}),t.isLeafNode()||t.forEachChild(mr,(i,s)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(s)||r.trackChildChange(Sw(i,s,c))}else r.trackChildChange(Yy(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?on.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Aw{constructor(e){this.indexedFilter_=new oM(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Aw.getStartPost_(e),this.endPost_=Aw.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,s,c){return this.matches(new yn(t,r))||(r=on.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=on.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(on.EMPTY_NODE);const s=this;return t.forEachChild(mr,(c,h)=>{s.matches(new yn(c,h))||(i=i.updateImmediateChild(c,on.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class eK{constructor(e){this.rangedFilter_=new Aw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,s,c){return this.rangedFilter_.matches(new yn(t,r))||(r=on.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,c):this.fullLimitUpdateChild_(e,t,r,s,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=on.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=on.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){const h=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!p)break;i=i.updateImmediateChild(h.name,h.node),c++}}else{let s,c,h,p;if(i=t.withIndex(this.index_),i=i.updatePriority(on.EMPTY_NODE),this.reverse_){p=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();h=(N,k)=>S(k,N)}else p=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let _=0,w=!1;for(;p.hasNext();){const S=p.getNext();!w&&h(s,S)<=0&&(w=!0),w&&_<this.limit_&&h(S,c)<=0?_++:i=i.updateImmediateChild(S.name,on.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let c;if(this.reverse_){const S=this.index_.getCompare();c=(N,k)=>S(k,N)}else c=this.index_.getCompare();const h=e;(0,P.hu)(h.numChildren()===this.limit_,"");const p=new yn(t,r),_=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),w=this.rangedFilter_.matches(p);if(h.hasChild(t)){const S=h.getImmediateChild(t);let N=i.getChildAfterChild(this.index_,_,this.reverse_);for(;null!=N&&(N.name===t||h.hasChild(N.name));)N=i.getChildAfterChild(this.index_,N,this.reverse_);const k=null==N?1:c(N,p);if(w&&!r.isEmpty()&&k>=0)return s?.trackChildChange(Sw(t,r,S)),h.updateImmediateChild(t,r);{s?.trackChildChange(Cw(t,S));const te=h.updateImmediateChild(t,on.EMPTY_NODE);return null!=N&&this.rangedFilter_.matches(N)?(s?.trackChildChange(Yy(N.name,N.node)),te.updateImmediateChild(N.name,N.node)):te}}return r.isEmpty()?e:w&&c(_,p)>=0?(null!=s&&(s.trackChildChange(Cw(_.name,_.node)),s.trackChildChange(Yy(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(_.name,on.EMPTY_NODE)):e}}class HC{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=mr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ad}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Qu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===mr}copy(){const e=new HC;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function aM(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function lM(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function $C(n,e){const t=n.copy();return t.index_=e,t}function eU(n){const e={};if(n.isDefault())return e;let t;return n.index_===mr?t="$priority":n.index_===iM?t="$value":n.index_===Xu?t="$key":((0,P.hu)(n.index_ instanceof rM,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,P.Pz)(t),n.startSet_&&(e.startAt=(0,P.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,P.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,P.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,P.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function tU(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==mr&&(e.i=n.index_.toString()),e}class WC extends PB{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=yw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,P.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const c=WC.getListenId_(e,r),h={};this.listens_[c]=h;const p=eU(e._queryParams);this.restRequest_(s+".json",p,(_,w)=>{let S=w;if(404===_&&(S=null,_=null),null===_&&this.onDataUpdate_(s,S,!1,r),(0,P.DV)(this.listens_,c)===h){let N;N=_?401===_?"permission_denied":"rest_error:"+_:"ok",i(N,null)}})}unlisten(e,t){const r=WC.getListenId_(e,t);delete this.listens_[r]}get(e){const t=eU(e._queryParams),r=e._path.toString(),i=new P.BH;return this.restRequest_(r+".json",t,(s,c)=>{let h=c;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,P.xO)(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,P.cI)(h.responseText)}catch{Ps("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,p)}else 401!==h.status&&404!==h.status&&Ps("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class oK{constructor(){this.rootNode_=on.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function zC(){return{value:null,children:new Map}}function Jy(n,e,t){if(mn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=gn(e);n.children.has(r)||n.children.set(r,zC()),Jy(n.children.get(r),e=ur(e),t)}}function uM(n,e){if(mn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(mr,(r,i)=>{Jy(n,new Wn(r),i)}),uM(n,e)}}if(n.children.size>0){const t=gn(e);return e=ur(e),n.children.has(t)&&uM(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function cM(n,e,t){null!==n.value?t(e,n.value):function aK(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{cM(i,new Wn(e.toString()+"/"+r),t)})}class lK{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ts(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class dK{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new lK(e);const r=1e4+2e4*Math.random();bw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ts(e,(i,s)=>{s>0&&(0,P.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),bw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ka=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ka||(ka={})),ka))();function fM(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class qC{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ka.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(mn(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Wn(e));return new qC(Un(),t,this.revert)}}return(0,P.hu)(gn(this.path)===e,"operationForChild called for unrelated child."),new qC(ur(this.path),this.affectedTree,this.revert)}}class Nw{constructor(e,t){this.source=e,this.path=t,this.type=ka.LISTEN_COMPLETE}operationForChild(e){return mn(this.path)?new Nw(this.source,Un()):new Nw(this.source,ur(this.path))}}class lm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ka.OVERWRITE}operationForChild(e){return mn(this.path)?new lm(this.source,Un(),this.snap.getImmediateChild(e)):new lm(this.source,ur(this.path),this.snap)}}class Qy{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ka.MERGE}operationForChild(e){if(mn(this.path)){const t=this.children.subtree(new Wn(e));return t.isEmpty()?null:t.value?new lm(this.source,Un(),t.value):new Qy(this.source,Un(),t)}return(0,P.hu)(gn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Qy(this.source,ur(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class If{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(mn(e))return this.isFullyInitialized()&&!this.filtered_;const t=gn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class hK{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Rw(n,e,t,r,i,s){const c=r.filter(h=>h.type===t);c.sort((h,p)=>function gK(n,e,t){if(null==e.childName||null==t.childName)throw(0,P.g5)("Should only compare child_ events.");const r=new yn(e.childName,e.snapshotNode),i=new yn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,p)),c.forEach(h=>{const p=function pK(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,s);i.forEach(_=>{_.respondsTo(h.type)&&e.push(_.createEvent(p,n.query_))})})}function KC(n,e){return{eventCache:n,serverCache:e}}function Ow(n,e,t,r){return KC(new If(e,t,r),n.serverCache)}function rU(n,e,t,r){return KC(n.eventCache,new If(e,t,r))}function ZC(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function um(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let pM;class _r{constructor(e,t=(()=>(pM||(pM=new So(e5)),pM))()){this.value=e,this.children=t}static fromObject(e){let t=new _r(null);return ts(e,(r,i)=>{t=t.set(new Wn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Un(),value:this.value};if(mn(e))return null;{const r=gn(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(ur(e),t);return null!=s?{path:Rr(new Wn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(mn(e))return this;{const t=gn(e),r=this.children.get(t);return null!==r?r.subtree(ur(e)):new _r(null)}}set(e,t){if(mn(e))return new _r(t,this.children);{const r=gn(e),s=(this.children.get(r)||new _r(null)).set(ur(e),t),c=this.children.insert(r,s);return new _r(this.value,c)}}remove(e){if(mn(e))return this.children.isEmpty()?new _r(null):new _r(null,this.children);{const t=gn(e),r=this.children.get(t);if(r){const i=r.remove(ur(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new _r(null):new _r(this.value,s)}return this}}get(e){if(mn(e))return this.value;{const t=gn(e),r=this.children.get(t);return r?r.get(ur(e)):null}}setTree(e,t){if(mn(e))return t;{const r=gn(e),s=(this.children.get(r)||new _r(null)).setTree(ur(e),t);let c;return c=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new _r(this.value,c)}}fold(e){return this.fold_(Un(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Rr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Un(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(mn(e))return null;{const s=gn(e),c=this.children.get(s);return c?c.findOnPath_(ur(e),Rr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Un(),t)}foreachOnPath_(e,t,r){if(mn(e))return this;{this.value&&r(t,this.value);const i=gn(e),s=this.children.get(i);return s?s.foreachOnPath_(ur(e),Rr(t,i),r):new _r(null)}}foreach(e){this.foreach_(Un(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Rr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Gl{constructor(e){this.writeTree_=e}static empty(){return new Gl(new _r(null))}}function Mw(n,e,t){if(mn(e))return new Gl(new _r(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const c=ro(i,e);return s=s.updateChild(c,t),new Gl(n.writeTree_.set(i,s))}{const i=new _r(t),s=n.writeTree_.setTree(e,i);return new Gl(s)}}}function gM(n,e,t){let r=n;return ts(t,(i,s)=>{r=Mw(r,Rr(e,i),s)}),r}function iU(n,e){if(mn(e))return Gl.empty();{const t=n.writeTree_.setTree(e,new _r(null));return new Gl(t)}}function mM(n,e){return null!=cm(n,e)}function cm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ro(t.path,e)):null}function sU(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(mr,(r,i)=>{e.push(new yn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new yn(r,i.value))}),e}function Tf(n,e){if(mn(e))return n;{const t=cm(n,e);return new Gl(null!=t?new _r(t):n.writeTree_.subtree(e))}}function _M(n){return n.writeTree_.isEmpty()}function Xy(n,e){return oU(Un(),n.writeTree_,e)}function oU(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,P.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=oU(Rr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Rr(n,".priority"),r)),t}}function YC(n,e){return dU(e,n)}function wK(n,e){if(n.snap)return xa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&xa(Rr(n.path,t),e))return!0;return!1}function DK(n){return n.visible}function aU(n,e,t){let r=Gl.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const c=s.path;let h;if(s.snap)xa(t,c)?(h=ro(t,c),r=Mw(r,h,s.snap)):xa(c,t)&&(h=ro(c,t),r=Mw(r,Un(),s.snap.getChild(h)));else{if(!s.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(xa(t,c))h=ro(t,c),r=gM(r,h,s.children);else if(xa(c,t))if(h=ro(c,t),mn(h))r=gM(r,Un(),s.children);else{const p=(0,P.DV)(s.children,gn(h));if(p){const _=p.getChild(ur(h));r=Mw(r,Un(),_)}}}}}return r}function lU(n,e,t,r,i){if(r||i){const s=Tf(n.visibleWrites,e);return!i&&_M(s)?t:i||null!=t||mM(s,Un())?Xy(aU(n.allWrites,function(_){return(_.visible||i)&&(!r||!~r.indexOf(_.writeId))&&(xa(_.path,e)||xa(e,_.path))},e),t||on.EMPTY_NODE):null}{const s=cm(n.visibleWrites,e);if(null!=s)return s;{const c=Tf(n.visibleWrites,e);return _M(c)?t:null!=t||mM(c,Un())?Xy(c,t||on.EMPTY_NODE):null}}}function JC(n,e,t,r){return lU(n.writeTree,n.treePath,e,t,r)}function yM(n,e){return function IK(n,e,t){let r=on.EMPTY_NODE;const i=cm(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(mr,(s,c)=>{r=r.updateImmediateChild(s,c)}),r;if(t){const s=Tf(n.visibleWrites,e);return t.forEachChild(mr,(c,h)=>{const p=Xy(Tf(s,new Wn(c)),h);r=r.updateImmediateChild(c,p)}),sU(s).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return sU(Tf(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function uU(n,e,t,r){return function TK(n,e,t,r,i){(0,P.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Rr(e,t);if(mM(n.visibleWrites,s))return null;{const c=Tf(n.visibleWrites,s);return _M(c)?i.getChild(t):Xy(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function QC(n,e){return function SK(n,e){return cm(n.visibleWrites,e)}(n.writeTree,Rr(n.treePath,e))}function vM(n,e,t){return function CK(n,e,t,r){const i=Rr(e,t),s=cm(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?Xy(Tf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function cU(n,e){return dU(Rr(n.treePath,e),n.writeTree)}function dU(n,e){return{treePath:n,writeTree:e}}class OK{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,P.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,Sw(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,Cw(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,Yy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,P.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Sw(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const hU=new class MK{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class bM{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new If(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return vM(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:um(this.viewCache_),s=function RK(n,e,t,r,i,s){return function AK(n,e,t,r,i,s,c){let h;const p=Tf(n.visibleWrites,e),_=cm(p,Un());if(null!=_)h=_;else{if(null==t)return[];h=Xy(p,t)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const w=[],S=c.getCompare(),N=s?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let k=N.getNext();for(;k&&w.length<i;)0!==S(k,r)&&w.push(k),k=N.getNext();return w}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function fU(n,e,t,r,i,s){const c=e.eventCache;if(null!=QC(r,t))return e;{let h,p;if(mn(t))if((0,P.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const _=um(e),S=yM(r,_ instanceof on?_:on.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,s)}else{const _=JC(r,um(e));h=n.filter.updateFullNode(e.eventCache.getNode(),_,s)}else{const _=gn(t);if(".priority"===_){(0,P.hu)(1===Df(t),"Can't have a priority with additional path components");const w=c.getNode();p=e.serverCache.getNode();const S=uU(r,t,w,p);h=null!=S?n.filter.updatePriority(w,S):c.getNode()}else{const w=ur(t);let S;if(c.isCompleteForChild(_)){p=e.serverCache.getNode();const N=uU(r,t,c.getNode(),p);S=null!=N?c.getNode().getImmediateChild(_).updateChild(w,N):c.getNode().getImmediateChild(_)}else S=vM(r,_,e.serverCache);h=null!=S?n.filter.updateChild(c.getNode(),_,S,w,i,s):c.getNode()}}return Ow(e,h,c.isFullyInitialized()||mn(t),n.filter.filtersNodes())}}function XC(n,e,t,r,i,s,c,h){const p=e.serverCache;let _;const w=c?n.filter:n.filter.getIndexedFilter();if(mn(t))_=w.updateFullNode(p.getNode(),r,null);else if(w.filtersNodes()&&!p.isFiltered()){const k=p.getNode().updateChild(t,r);_=w.updateFullNode(p.getNode(),k,null)}else{const k=gn(t);if(!p.isCompleteForPath(t)&&Df(t)>1)return e;const j=ur(t),oe=p.getNode().getImmediateChild(k).updateChild(j,r);_=".priority"===k?w.updatePriority(p.getNode(),oe):w.updateChild(p.getNode(),k,oe,j,hU,null)}const S=rU(e,_,p.isFullyInitialized()||mn(t),w.filtersNodes());return fU(n,S,t,i,new bM(i,S,s),h)}function wM(n,e,t,r,i,s,c){const h=e.eventCache;let p,_;const w=new bM(i,e,s);if(mn(t))_=n.filter.updateFullNode(e.eventCache.getNode(),r,c),p=Ow(e,_,!0,n.filter.filtersNodes());else{const S=gn(t);if(".priority"===S)_=n.filter.updatePriority(e.eventCache.getNode(),r),p=Ow(e,_,h.isFullyInitialized(),h.isFiltered());else{const N=ur(t),k=h.getNode().getImmediateChild(S);let j;if(mn(N))j=r;else{const te=w.getCompleteChild(S);j=null!=te?".priority"===JO(N)&&te.getChild(UB(N)).isEmpty()?te:te.updateChild(N,r):on.EMPTY_NODE}p=k.equals(j)?e:Ow(e,n.filter.updateChild(h.getNode(),S,j,N,w,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function pU(n,e){return n.eventCache.isCompleteForChild(e)}function gU(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function EM(n,e,t,r,i,s,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let _,p=e;_=mn(t)?r:new _r(null).setTree(t,r);const w=e.serverCache.getNode();return _.children.inorderTraversal((S,N)=>{if(w.hasChild(S)){const j=gU(0,e.serverCache.getNode().getImmediateChild(S),N);p=XC(n,p,new Wn(S),j,i,s,c,h)}}),_.children.inorderTraversal((S,N)=>{const k=!e.serverCache.isCompleteForChild(S)&&void 0===N.value;if(!w.hasChild(S)&&!k){const te=gU(0,e.serverCache.getNode().getImmediateChild(S),N);p=XC(n,p,new Wn(S),te,i,s,c,h)}}),p}class GK{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new oM(r.getIndex()),s=function tK(n){return n.loadsAllData()?new oM(n.getIndex()):n.hasLimit()?new eK(n):new Aw(n)}(r);this.processor_=function xK(n){return{filter:n}}(s);const c=t.serverCache,h=t.eventCache,p=i.updateFullNode(on.EMPTY_NODE,c.getNode(),null),_=s.updateFullNode(on.EMPTY_NODE,h.getNode(),null),w=new If(p,c.isFullyInitialized(),i.filtersNodes()),S=new If(_,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=KC(S,w),this.eventGenerator_=new hK(this.query_)}get query(){return this.query_}}function $K(n,e){const t=um(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!mn(e)&&!t.getImmediateChild(gn(e)).isEmpty())?t.getChild(e):null}function mU(n){return 0===n.eventRegistrations_.length}function _U(n,e,t){const r=[];if(t){(0,P.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const c=s.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const c=n.eventRegistrations_[s];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function yU(n,e,t,r){e.type===ka.MERGE&&null!==e.source.queryId&&((0,P.hu)(um(n.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(ZC(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function PK(n,e,t,r,i){const s=new OK;let c,h;if(t.type===ka.OVERWRITE){const _=t;_.source.fromUser?c=wM(n,e,_.path,_.snap,r,i,s):((0,P.hu)(_.source.fromServer,"Unknown source."),h=_.source.tagged||e.serverCache.isFiltered()&&!mn(_.path),c=XC(n,e,_.path,_.snap,r,i,h,s))}else if(t.type===ka.MERGE){const _=t;_.source.fromUser?c=function LK(n,e,t,r,i,s,c){let h=e;return r.foreach((p,_)=>{const w=Rr(t,p);pU(e,gn(w))&&(h=wM(n,h,w,_,i,s,c))}),r.foreach((p,_)=>{const w=Rr(t,p);pU(e,gn(w))||(h=wM(n,h,w,_,i,s,c))}),h}(n,e,_.path,_.children,r,i,s):((0,P.hu)(_.source.fromServer,"Unknown source."),h=_.source.tagged||e.serverCache.isFiltered(),c=EM(n,e,_.path,_.children,r,i,h,s))}else if(t.type===ka.ACK_USER_WRITE){const _=t;c=_.revert?function VK(n,e,t,r,i,s){let c;if(null!=QC(r,t))return e;{const h=new bM(r,e,i),p=e.eventCache.getNode();let _;if(mn(t)||".priority"===gn(t)){let w;if(e.serverCache.isFullyInitialized())w=JC(r,um(e));else{const S=e.serverCache.getNode();(0,P.hu)(S instanceof on,"serverChildren would be complete if leaf node"),w=yM(r,S)}_=n.filter.updateFullNode(p,w,s)}else{const w=gn(t);let S=vM(r,w,e.serverCache);null==S&&e.serverCache.isCompleteForChild(w)&&(S=p.getImmediateChild(w)),_=null!=S?n.filter.updateChild(p,w,S,ur(t),h,s):e.eventCache.getNode().hasChild(w)?n.filter.updateChild(p,w,on.EMPTY_NODE,ur(t),h,s):p,_.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=JC(r,um(e)),c.isLeafNode()&&(_=n.filter.updateFullNode(_,c,s)))}return c=e.serverCache.isFullyInitialized()||null!=QC(r,Un()),Ow(e,_,c,n.filter.filtersNodes())}}(n,e,_.path,r,i,s):function BK(n,e,t,r,i,s,c){if(null!=QC(i,t))return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(mn(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return XC(n,e,t,p.getNode().getChild(t),i,s,h,c);if(mn(t)){let _=new _r(null);return p.getNode().forEachChild(Xu,(w,S)=>{_=_.set(new Wn(w),S)}),EM(n,e,t,_,i,s,h,c)}return e}{let _=new _r(null);return r.foreach((w,S)=>{const N=Rr(t,w);p.isCompleteForPath(N)&&(_=_.set(w,p.getNode().getChild(N)))}),EM(n,e,t,_,i,s,h,c)}}(n,e,_.path,_.affectedTree,r,i,s)}else{if(t.type!==ka.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+t.type);c=function UK(n,e,t,r,i){const s=e.serverCache;return fU(n,rU(e,s.getNode(),s.isFullyInitialized()||mn(t),s.isFiltered()),t,r,hU,i)}(n,e,t.path,r,s)}const p=s.getChanges();return function FK(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=ZC(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(XB(ZC(e)))}}(e,c,p),{viewCache:c,changes:p}}(n.processor_,i,e,t,r);return function kK(n,e){(0,P.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,P.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,vU(n,s.changes,s.viewCache.eventCache.getNode(),null)}function vU(n,e,t,r){return function fK(n,e,t,r){const i=[],s=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function X5(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),Rw(n,i,"child_removed",e,r,t),Rw(n,i,"child_added",e,r,t),Rw(n,i,"child_moved",s,r,t),Rw(n,i,"child_changed",e,r,t),Rw(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let eS,nS;class bU{constructor(){this.views=new Map}}function DM(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,P.hu)(null!=s,"SyncTree gave us an op for an invalid query."),yU(s,e,t,r)}{let s=[];for(const c of n.views.values())s=s.concat(yU(c,e,t,r));return s}}function IM(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let h=JC(t,i?r:null),p=!1;h?p=!0:r instanceof on?(h=yM(t,r),p=!1):(h=on.EMPTY_NODE,p=!1);const _=KC(new If(h,p,!1),new If(r,i,!1));return new GK(e,_)}return c}function wU(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Cf(n,e){let t=null;for(const r of n.views.values())t=t||$K(r,e);return t}function EU(n,e){return e._queryParams.loadsAllData()?tS(n):n.views.get(e._queryIdentifier)}function DU(n,e){return null!=EU(n,e)}function Sf(n){return null!=tS(n)}function tS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let eZ=1;class IU{constructor(e){this.listenProvider_=e,this.syncPointTree_=new _r(null),this.pendingWriteTree_=function NK(){return{visibleWrites:Gl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function TM(n,e,t,r,i){return function _K(n,e,t,r,i){(0,P.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Mw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?ev(n,new lm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Af(n,e,t=!1){const r=function vK(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function bK(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,P.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&wK(h,r.path)?i=!1:xa(r.path,h.path)&&(s=!0)),c--}return!!i&&(s?(function EK(n){n.visibleWrites=aU(n.allWrites,DK,Un()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=iU(n.visibleWrites,r.path):ts(r.children,p=>{n.visibleWrites=iU(n.visibleWrites,Rr(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let s=new _r(null);return null!=r.snap?s=s.set(Un(),!0):ts(r.children,c=>{s=s.set(new Wn(c),!0)}),ev(n,new qC(r.path,s,t))}return[]}function xw(n,e,t){return ev(n,new lm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function rS(n,e,t,r){const i=e._path,s=n.syncPointTree_.get(i);let c=[];if(s&&("default"===e._queryIdentifier||DU(s,e))){const h=function JK(n,e,t,r){const i=e._queryIdentifier,s=[];let c=[];const h=Sf(n);if("default"===i)for(const[p,_]of n.views.entries())c=c.concat(_U(_,t,r)),mU(_)&&(n.views.delete(p),_.query._queryParams.loadsAllData()||s.push(_.query));else{const p=n.views.get(i);p&&(c=c.concat(_U(p,t,r)),mU(p)&&(n.views.delete(i),p.query._queryParams.loadsAllData()||s.push(p.query)))}return h&&!Sf(n)&&s.push(new(function KK(){return(0,P.hu)(eS,"Reference.ts has not been loaded"),eS}())(e._repo,e._path)),{removed:s,events:c}}(s,e,t,r);(function ZK(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const p=h.removed;c=h.events;const _=-1!==p.findIndex(S=>S._queryParams.loadsAllData()),w=n.syncPointTree_.findOnPath(i,(S,N)=>Sf(N));if(_&&!w){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const N=function lZ(n){return n.fold((e,t,r)=>{if(t&&Sf(t))return[tS(t)];{let i=[];return t&&(i=wU(t)),ts(r,(s,c)=>{i=i.concat(c)}),i}})}(S);for(let k=0;k<N.length;++k){const j=N[k],te=j.query,oe=RU(n,j);n.listenProvider_.startListening(Pw(te),kw(n,te),oe.hashFn,oe.onComplete)}}}!w&&p.length>0&&!r&&(_?n.listenProvider_.stopListening(Pw(e),null):p.forEach(S=>{const N=n.queryToTagMap.get(sS(S));n.listenProvider_.stopListening(Pw(S),N)})),function uZ(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=sS(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,p)}return c}function TU(n,e,t,r){const i=CM(n,r);if(null!=i){const s=SM(i),c=s.path,h=s.queryId,p=ro(c,e);return AM(n,c,new lm(fM(h),p,t))}return[]}function CU(n,e){const t=n._path;let r=null,i=!1;e.syncPointTree_.foreachOnPath(t,(_,w)=>{const S=ro(_,t);r=r||Cf(w,S),i=i||Sf(w)});let c,s=e.syncPointTree_.get(t);s?(i=i||Sf(s),r=r||Cf(s,Un())):(s=new bU,e.syncPointTree_=e.syncPointTree_.set(t,s)),null!=r?c=!0:(c=!1,r=on.EMPTY_NODE,e.syncPointTree_.subtree(t).foreachChild((w,S)=>{const N=Cf(S,Un());N&&(r=r.updateImmediateChild(w,N))}));const h=DU(s,n);if(!h&&!n._queryParams.loadsAllData()){const _=sS(n);(0,P.hu)(!e.queryToTagMap.has(_),"View does not exist, but we have a tag");const w=function cZ(){return eZ++}();e.queryToTagMap.set(_,w),e.tagToQueryMap.set(w,_)}return{syncPoint:s,writesCache:YC(e.pendingWriteTree_,t),serverCache:r,serverCacheComplete:c,foundAncestorDefaultView:i,viewAlreadyExists:h}}function SU(n,e,t){const{syncPoint:r,serverCache:i,writesCache:s,serverCacheComplete:c,viewAlreadyExists:h,foundAncestorDefaultView:p}=CU(e,n);let _=function YK(n,e,t,r,i,s){const c=IM(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function WK(n,e){n.eventRegistrations_.push(e)}(c,t),function zK(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(mr,(s,c)=>{r.push(Yy(s,c))}),t.isFullyInitialized()&&r.push(XB(t.getNode())),vU(n,r,t.getNode(),e)}(c,t)}(r,e,t,s,i,c);if(!h&&!p){const w=EU(r,e);_=_.concat(function dZ(n,e,t){const r=e._path,i=kw(n,e),s=RU(n,t),c=n.listenProvider_.startListening(Pw(e),i,s.hashFn,s.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,P.hu)(!Sf(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((_,w,S)=>{if(!mn(_)&&w&&Sf(w))return[tS(w).query];{let N=[];return w&&(N=N.concat(wU(w).map(k=>k.query))),ts(S,(k,j)=>{N=N.concat(j)}),N}});for(let _=0;_<p.length;++_){const w=p[_];n.listenProvider_.stopListening(Pw(w),kw(n,w))}}return c}(n,e,w))}return _}function iS(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(c,h)=>{const _=Cf(h,ro(c,e));if(_)return _});return lU(i,e,s,t,!0)}function ev(n,e){return AU(e,n.syncPointTree_,null,YC(n.pendingWriteTree_,Un()))}function AU(n,e,t,r){if(mn(n.path))return NU(n,e,t,r);{const i=e.get(Un());null==t&&null!=i&&(t=Cf(i,Un()));let s=[];const c=gn(n.path),h=n.operationForChild(c),p=e.children.get(c);if(p&&h){const _=t?t.getImmediateChild(c):null,w=cU(r,c);s=s.concat(AU(h,p,_,w))}return i&&(s=s.concat(DM(i,n,r,t))),s}}function NU(n,e,t,r){const i=e.get(Un());null==t&&null!=i&&(t=Cf(i,Un()));let s=[];return e.children.inorderTraversal((c,h)=>{const p=t?t.getImmediateChild(c):null,_=cU(r,c),w=n.operationForChild(c);w&&(s=s.concat(NU(w,h,p,_)))}),i&&(s=s.concat(DM(i,n,r,t))),s}function RU(n,e){const t=e.query,r=kw(n,t);return{hashFn:()=>(function jK(n){return n.viewCache_.serverCache.getNode()}(e)||on.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function iZ(n,e,t){const r=CM(n,t);if(r){const i=SM(r),s=i.path,c=i.queryId,h=ro(s,e);return AM(n,s,new Nw(fM(c),h))}return[]}(n,t._path,r):function rZ(n,e){return ev(n,new Nw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function r5(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return rS(n,t,null,s)}}}}function kw(n,e){const t=sS(e);return n.queryToTagMap.get(t)}function sS(n){return n._path.toString()+"$"+n._queryIdentifier}function CM(n,e){return n.tagToQueryMap.get(e)}function SM(n){const e=n.indexOf("$");return(0,P.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Wn(n.substr(0,e))}}function AM(n,e,t){const r=n.syncPointTree_.get(e);return(0,P.hu)(r,"Missing sync point for query tag that we're tracking"),DM(r,t,YC(n.pendingWriteTree_,e),null)}function Pw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function XK(){return(0,P.hu)(nS,"Reference.ts has not been loaded"),nS}())(n._repo,n._path):n}class NM{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new NM(t)}node(){return this.node_}}class RM{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Rr(this.path_,e);return new RM(this.syncTree_,t)}node(){return iS(this.syncTree_,this.path_)}}const hZ=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},OU=function(n,e,t){return n&&"object"==typeof n?((0,P.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?fZ(n[".sv"],e,t):"object"==typeof n[".sv"]?pZ(n[".sv"],e):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},fZ=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,P.hu)(!1,"Unexpected server value: "+n)},pZ=function(n,e,t){n.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,P.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,P.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},MU=function(n,e,t,r){return MM(e,new RM(t,n),r)},OM=function(n,e,t){return MM(n,new NM(e),t)};function MM(n,e,t){const r=n.getPriority().val(),i=OU(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const c=n,h=OU(c.getValue(),e,t);return h!==c.getValue()||i!==c.getPriority().val()?new qy(h,Vr(i)):n}{const c=n;return s=c,i!==c.getPriority().val()&&(s=s.updatePriority(new qy(i))),c.forEachChild(mr,(h,p)=>{const _=MM(p,e.getImmediateChild(h),t);_!==p&&(s=s.updateImmediateChild(h,_))}),s}}class xM{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function oS(n,e){let t=e instanceof Wn?e:new Wn(e),r=n,i=gn(t);for(;null!==i;){const s=(0,P.DV)(r.node.children,i)||{children:{},childCount:0};r=new xM(i,r,s),t=ur(t),i=gn(t)}return r}function dm(n){return n.node.value}function kM(n,e){n.node.value=e,PM(n)}function xU(n){return n.node.childCount>0}function aS(n,e){ts(n.node.children,(t,r)=>{e(new xM(t,n,r))})}function kU(n,e,t,r){t&&!r&&e(n),aS(n,i=>{kU(i,e,!0,r)}),t&&r&&e(n)}function Fw(n){return new Wn(null===n.parent?n.name:Fw(n.parent)+"/"+n.name)}function PM(n){null!==n.parent&&function _Z(n,e,t){const r=function gZ(n){return void 0===dm(n)&&!xU(n)}(t),i=(0,P.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,PM(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,PM(n))}(n.parent,n.name,n)}const yZ=/[\[\].#$\/\u0000-\u001F\u007F]/,vZ=/[\[\].#$\u0000-\u001F\u007F]/,FM=10485760,lS=function(n){return"string"==typeof n&&0!==n.length&&!yZ.test(n)},PU=function(n){return"string"==typeof n&&0!==n.length&&!vZ.test(n)},Lw=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!kC(n)||n&&"object"==typeof n&&(0,P.r3)(n,".sv")},ec=function(n,e,t,r){r&&void 0===e||Bw((0,P.gK)(n,"value"),e,t)},Bw=function(n,e,t){const r=t instanceof Wn?new k5(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+om(r));if("function"==typeof e)throw new Error(n+"contains a function "+om(r)+" with contents = "+e.toString());if(kC(e))throw new Error(n+"contains "+e.toString()+" "+om(r));if("string"==typeof e&&e.length>FM/3&&(0,P.ug)(e)>FM)throw new Error(n+"contains a string greater than "+FM+" utf8 bytes "+om(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(ts(e,(c,h)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!lS(c)))throw new Error(n+" contains an invalid key ("+c+") "+om(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function P5(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,P.ug)(e),VB(n)})(r,c),Bw(n,h,r),function F5(n){const e=n.parts_.pop();n.byteLength_-=(0,P.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+om(r)+" in addition to actual children.")}},FU=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,P.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];ts(e,(c,h)=>{const p=new Wn(c);if(Bw(i,h,Rr(t,p)),".priority"===JO(p)&&!Lw(h))throw new Error(i+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=Ew(r);for(let c=0;c<s.length;c++)if((".priority"!==s[c]||c!==s.length-1)&&!lS(s[c]))throw new Error(n+"contains an invalid key ("+s[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(x5);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&xa(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},LM=function(n,e,t){if(!t||void 0!==e){if(kC(e))throw new Error((0,P.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Lw(e))throw new Error((0,P.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Uw=function(n,e,t,r){if(!(r&&void 0===t||lS(t)))throw new Error((0,P.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Vw=function(n,e,t,r){if(!(r&&void 0===t||PU(t)))throw new Error((0,P.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},EZ=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Vw(n,e,t,r)},Pa=function(n,e){if(".info"===gn(e))throw new Error(n+" failed = Can't modify data under /.info/")},LU=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!lS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),PU(n)}(t))throw new Error((0,P.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class DZ{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function uS(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!QO(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function BU(n,e,t){uS(n,t),UU(n,r=>QO(r,e))}function Fa(n,e,t){uS(n,t),UU(n,r=>xa(r,e)||xa(e,r))}function UU(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(IZ(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function IZ(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();im&&es("event: "+t.toString()),Wy(r)}}}const VU="repo_interrupt",TZ=25;class CZ{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new DZ,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zC(),this.transactionQueueTree_=new xM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function GU(n){const t=n.infoData_.getNode(new Wn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Gw(n){return hZ({timestamp:GU(n)})}function jU(n,e,t,r,i){n.dataUpdateCount++;const s=new Wn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const p=(0,P.UI)(t,_=>Vr(_));c=function oZ(n,e,t,r){const i=CM(n,r);if(i){const s=SM(i),c=s.path,h=s.queryId,p=ro(c,e),_=_r.fromObject(t);return AM(n,c,new Qy(fM(h),p,_))}return[]}(n.serverSyncTree_,s,p,i)}else{const p=Vr(t);c=TU(n.serverSyncTree_,s,p,i)}else if(r){const p=(0,P.UI)(t,_=>Vr(_));c=function nZ(n,e,t){const r=_r.fromObject(t);return ev(n,new Qy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,p)}else{const p=Vr(t);c=xw(n.serverSyncTree_,s,p)}let h=s;c.length>0&&(h=tv(n,s)),Fa(n.eventQueue_,h,c)}function HU(n,e){BM(n,"connected",e),!1===e&&function OZ(n){hm(n,"onDisconnectEvents");const e=Gw(n),t=zC();cM(n.onDisconnect_,Un(),(i,s)=>{const c=MU(i,s,n.serverSyncTree_,e);Jy(t,i,c)});let r=[];cM(t,Un(),(i,s)=>{r=r.concat(xw(n.serverSyncTree_,i,s));const c=jM(n,i);tv(n,c)}),n.onDisconnect_=zC(),Fa(n.eventQueue_,Un(),r)}(n)}function BM(n,e,t){const r=new Wn("/.info/"+e),i=Vr(t);n.infoData_.updateSnapshot(r,i);const s=xw(n.infoSyncTree_,r,i);Fa(n.eventQueue_,r,s)}function cS(n){return n.nextWriteId_++}function NZ(n,e){const t=function aZ(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(_,w)=>{const S=ro(_,t);r=r||Cf(w,S)});let i=n.syncPointTree_.get(t);i?r=r||Cf(i,Un()):(i=new bU,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,c=s?new If(r,!0,!1):null;return function HK(n){return ZC(n.viewCache_)}(IM(i,e,YC(n.pendingWriteTree_,e._path),s?c.getNode():on.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Vr(r).withIndex(e._queryParams.getIndex());if(e._queryParams.loadsAllData())xw(n.serverSyncTree_,e._path,i);else{const c=function sZ(n,e){const{syncPoint:t,serverCache:r,writesCache:i,serverCacheComplete:s}=CU(e,n),c=IM(t,e,i,r,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,c),e._queryParams.loadsAllData()?null:kw(n,e)}(n.serverSyncTree_,e);TU(n.serverSyncTree_,e._path,i,c)}return rS(n.serverSyncTree_,e,null).length>0&&hm(n,"unexpected cancel events in repoGetValue"),i},r=>(hm(n,"get for query "+(0,P.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}function UM(n,e,t,r,i){hm(n,"set",{path:e.toString(),value:t,priority:r});const s=Gw(n),c=Vr(t,r),h=iS(n.serverSyncTree_,e),p=OM(c,h,s),_=cS(n),w=TM(n.serverSyncTree_,e,p,_,!0);uS(n.eventQueue_,w),n.server_.put(e.toString(),c.val(!0),(N,k)=>{const j="ok"===N;j||Ps("set at "+e+" failed: "+N);const te=Af(n.serverSyncTree_,_,!j);Fa(n.eventQueue_,e,te),Nf(0,i,N,k)});const S=jM(n,e);tv(n,S),Fa(n.eventQueue_,S,[])}function MZ(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&uM(n.onDisconnect_,e),Nf(0,t,r,i)})}function $U(n,e,t,r){const i=Vr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,c)=>{"ok"===s&&Jy(n.onDisconnect_,e,i),Nf(0,r,s,c)})}function VM(n,e,t){let r;r=".info"===gn(e._path)?rS(n.infoSyncTree_,e,t):rS(n.serverSyncTree_,e,t),BU(n.eventQueue_,e._path,r)}function WU(n){n.persistentConnection_&&n.persistentConnection_.interrupt(VU)}function hm(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),es(t,...e)}function Nf(n,e,t,r){e&&Wy(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const c=new Error(s);c.code=i,e(c)}})}function GM(n,e,t){return iS(n.serverSyncTree_,e,t)||on.EMPTY_NODE}function dS(n,e=n.transactionQueueTree_){if(e||hS(n,e),dm(e)){const t=qU(n,e);(0,P.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function BZ(n,e,t){const r=t.map(_=>_.currentWriteId),i=GM(n,e,r);let s=i;const c=i.hash();for(let _=0;_<t.length;_++){const w=t[_];(0,P.hu)(0===w.status,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const S=ro(e,w.path);s=s.updateChild(S,w.currentOutputSnapshotRaw)}const h=s.val(!0),p=e;n.server_.put(p.toString(),h,_=>{hm(n,"transaction put response",{path:p.toString(),status:_});let w=[];if("ok"===_){const S=[];for(let N=0;N<t.length;N++)t[N].status=2,w=w.concat(Af(n.serverSyncTree_,t[N].currentWriteId)),t[N].onComplete&&S.push(()=>t[N].onComplete(null,!0,t[N].currentOutputSnapshotResolved)),t[N].unwatcher();hS(n,oS(n.transactionQueueTree_,e)),dS(n,n.transactionQueueTree_),Fa(n.eventQueue_,e,w);for(let N=0;N<S.length;N++)Wy(S[N])}else{if("datastale"===_)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{Ps("transaction at "+p.toString()+" failed: "+_);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=_}tv(n,e)}},c)}(n,Fw(e),t)}else xU(e)&&aS(e,t=>{dS(n,t)})}function tv(n,e){const t=zU(n,e),r=Fw(t);return function UZ(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],_=ro(t,p.path);let S,w=!1;if((0,P.hu)(null!==_,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)w=!0,S=p.abortReason,i=i.concat(Af(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=TZ)w=!0,S="maxretry",i=i.concat(Af(n.serverSyncTree_,p.currentWriteId,!0));else{const N=GM(n,p.path,c);p.currentInputSnapshot=N;const k=e[h].update(N.val());if(void 0!==k){Bw("transaction failed: Data returned ",k,p.path);let j=Vr(k);"object"==typeof k&&null!=k&&(0,P.r3)(k,".priority")||(j=j.updatePriority(N.getPriority()));const oe=p.currentWriteId,Ke=Gw(n),Ze=OM(j,N,Ke);p.currentOutputSnapshotRaw=j,p.currentOutputSnapshotResolved=Ze,p.currentWriteId=cS(n),c.splice(c.indexOf(oe),1),i=i.concat(TM(n.serverSyncTree_,p.path,Ze,p.currentWriteId,p.applyLocally)),i=i.concat(Af(n.serverSyncTree_,oe,!0))}else w=!0,S="nodata",i=i.concat(Af(n.serverSyncTree_,p.currentWriteId,!0))}Fa(n.eventQueue_,t,i),i=[],w&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}hS(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Wy(r[h]);dS(n,n.transactionQueueTree_)}(n,qU(n,t),r),r}function zU(n,e){let t,r=n.transactionQueueTree_;for(t=gn(e);null!==t&&void 0===dm(r);)r=oS(r,t),t=gn(e=ur(e));return r}function qU(n,e){const t=[];return KU(n,e,t),t.sort((r,i)=>r.order-i.order),t}function KU(n,e,t){const r=dm(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);aS(e,i=>{KU(n,i,t)})}function hS(n,e){const t=dm(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,kM(e,t.length>0?t:void 0)}aS(e,r=>{hS(n,r)})}function jM(n,e){const t=Fw(zU(n,e)),r=oS(n.transactionQueueTree_,e);return function mZ(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{HM(n,i)}),HM(n,r),kU(r,i=>{HM(n,i)}),t}function HM(n,e){const t=dm(e);if(t){const r=[];let i=[],s=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,P.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,t[c].status=3,t[c].abortReason="set"):((0,P.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(Af(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?kM(e,void 0):t.length=s+1,Fa(n.eventQueue_,Fw(e),i);for(let c=0;c<r.length;c++)Wy(r[c])}}const $M=function(n,e){const t=jZ(n),r=t.namespace;return"firebase.com"===t.domain&&Ju(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ju("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ps("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new WO(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Wn(t.pathString)}},jZ=function(n){let e="",t="",r="",i="",s="",c=!0,h="https",p=443;if("string"==typeof n){let _=n.indexOf("//");_>=0&&(h=n.substring(0,_-1),n=n.substring(_+2));let w=n.indexOf("/");-1===w&&(w=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(w,S)),w<S&&(i=function VZ(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(w,S)));const N=function GZ(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ps(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));_=e.indexOf(":"),_>=0?(c="https"===h||"wss"===h,p=parseInt(e.substring(_+1),10)):_=e.length;const k=e.slice(0,_);if("localhost"===k.toLowerCase())t="localhost";else if(k.split(".").length<=2)t=k;else{const j=e.indexOf(".");r=e.substring(0,j).toLowerCase(),t=e.substring(j+1),s=r}"ns"in N&&(s=N.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:s}};class ZU{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Pz)(this.snapshot.exportVal())}}class YU{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class JU{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class QU{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new P.BH;return MZ(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Pa("OnDisconnect.remove",this._path);const e=new P.BH;return $U(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Pa("OnDisconnect.set",this._path),ec("OnDisconnect.set",e,this._path,!1);const t=new P.BH;return $U(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Pa("OnDisconnect.setWithPriority",this._path),ec("OnDisconnect.setWithPriority",e,this._path,!1),LM("OnDisconnect.setWithPriority",t,!1);const r=new P.BH;return function xZ(n,e,t,r,i){const s=Vr(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(c,h)=>{"ok"===c&&Jy(n.onDisconnect_,e,s),Nf(0,i,c,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Pa("OnDisconnect.update",this._path),FU("OnDisconnect.update",e,this._path,!1);const t=new P.BH;return function kZ(n,e,t,r){if((0,P.xb)(t))return es("onDisconnect().update() called with empty data.  Don't do anything."),void Nf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&ts(t,(c,h)=>{const p=Vr(h);Jy(n.onDisconnect_,Rr(e,c),p)}),Nf(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Ao{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return mn(this._path)?null:JO(this._path)}get ref(){return new La(this._repo,this._path)}get _queryIdentifier(){const e=tU(this._queryParams),t=jO(e);return"{}"===t?"default":t}get _queryObject(){return tU(this._queryParams)}isEqual(e){if(!((e=(0,P.m9)(e))instanceof Ao))return!1;const t=this._repo===e._repo,r=QO(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function M5(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function fS(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Rf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Xu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Ad)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Qu)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===mr){if(null!=e&&!Lw(e)||null!=t&&!Lw(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(n.getIndex()instanceof rM||n.getIndex()===iM,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function pS(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class La extends Ao{constructor(e,t){super(e,t,new HC,!1)}get parent(){const e=UB(this._path);return null===e?null:new La(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class fm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Wn(e),r=pm(this.ref,e);return new fm(this._node.getChild(t),r,mr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new fm(i,pm(this.ref,r),mr)))}hasChild(e){const t=new Wn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function XU(n,e){return(n=(0,P.m9)(n))._checkNotDeleted("ref"),void 0!==e?pm(n._root,e):n._root}function eV(n,e){(n=(0,P.m9)(n))._checkNotDeleted("refFromURL");const t=$M(e,n._repo.repoInfo_.nodeAdmin);LU("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Ju("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),XU(n,t.path.toString())}function pm(n,e){return null===gn((n=(0,P.m9)(n))._path)?EZ("child","path",e,!1):Vw("child","path",e,!1),new La(n._repo,Rr(n._path,e))}function WM(n,e){n=(0,P.m9)(n),Pa("set",n._path),ec("set",e,n._path,!1);const t=new P.BH;return UM(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function qZ(n,e){FU("update",e,n._path,!1);const t=new P.BH;return function RZ(n,e,t,r){hm(n,"update",{path:e.toString(),value:t});let i=!0;const s=Gw(n),c={};if(ts(t,(h,p)=>{i=!1,c[h]=MU(Rr(e,h),Vr(p),n.serverSyncTree_,s)}),i)es("update() called with empty data.  Don't do anything."),Nf(0,r,"ok",void 0);else{const h=cS(n),p=function tZ(n,e,t,r){!function yK(n,e,t,r){(0,P.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=gM(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=_r.fromObject(t);return ev(n,new Qy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,h);uS(n.eventQueue_,p),n.server_.merge(e.toString(),t,(_,w)=>{const S="ok"===_;S||Ps("update at "+e+" failed: "+_);const N=Af(n.serverSyncTree_,h,!S),k=N.length>0?tv(n,e):e;Fa(n.eventQueue_,k,N),Nf(0,r,_,w)}),ts(t,_=>{const w=jM(n,Rr(e,_));tv(n,w)}),Fa(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}class gS{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new ZU("value",this,new fm(e.snapshotNode,new La(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new YU(this,e,t):null}matches(e){return e instanceof gS&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class mS{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new YU(this,e,t):null}createEvent(e,t){(0,P.hu)(null!=e.childName,"Child events should have a childName.");const r=pm(new La(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new ZU(e.type,this,new fm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof mS&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function jw(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const p=t,_=(w,S)=>{VM(n._repo,n,h),p(w,S)};_.userCallback=t.userCallback,_.context=t.context,t=_}const c=new JU(t,s||void 0),h="value"===e?new gS(c):new mS(e,c);return function PZ(n,e,t){let r;r=".info"===gn(e._path)?SU(n.infoSyncTree_,e,t):SU(n.serverSyncTree_,e,t),BU(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>VM(n._repo,n,h)}function zM(n,e,t,r){return jw(n,"value",e,t,r)}function tV(n,e,t,r){return jw(n,"child_added",e,t,r)}function nV(n,e,t,r){return jw(n,"child_changed",e,t,r)}function rV(n,e,t,r){return jw(n,"child_moved",e,t,r)}function iV(n,e,t,r){return jw(n,"child_removed",e,t,r)}function sV(n,e,t){let r=null;const i=t?new JU(t):null;"value"===e?r=new gS(i):e&&(r=new mS(e,i)),VM(n._repo,n,r)}class jl{}class oV extends jl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ec("endAt",this._value,e._path,!0);const t=lM(e._queryParams,this._value,this._key);if(pS(t),Rf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ao(e._repo,e._path,t,e._orderByCalled)}}class YZ extends jl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ec("endBefore",this._value,e._path,!1);const t=function sK(n,e,t){let r,i;return n.index_===Xu?("string"==typeof e&&(e=QB(e)),i=lM(n,e,t)):(r=null==t?Ad:QB(t),i=lM(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(pS(t),Rf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ao(e._repo,e._path,t,e._orderByCalled)}}class aV extends jl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ec("startAt",this._value,e._path,!0);const t=aM(e._queryParams,this._value,this._key);if(pS(t),Rf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ao(e._repo,e._path,t,e._orderByCalled)}}class XZ extends jl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ec("startAfter",this._value,e._path,!1);const t=function iK(n,e,t){let r;if(n.index_===Xu)"string"==typeof e&&(e=JB(e)),r=aM(n,e,t);else{let i;i=null==t?Qu:JB(t),r=aM(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(pS(t),Rf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ao(e._repo,e._path,t,e._orderByCalled)}}class tY extends jl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ao(e._repo,e._path,function nK(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class rY extends jl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ao(e._repo,e._path,function rK(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class sY extends jl{constructor(e){super(),this._path=e}_apply(e){fS(e,"orderByChild");const t=new Wn(this._path);if(mn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new rM(t),i=$C(e._queryParams,r);return Rf(i),new Ao(e._repo,e._path,i,!0)}}class aY extends jl{_apply(e){fS(e,"orderByKey");const t=$C(e._queryParams,Xu);return Rf(t),new Ao(e._repo,e._path,t,!0)}}class uY extends jl{_apply(e){fS(e,"orderByPriority");const t=$C(e._queryParams,mr);return Rf(t),new Ao(e._repo,e._path,t,!0)}}class dY extends jl{_apply(e){fS(e,"orderByValue");const t=$C(e._queryParams,iM);return Rf(t),new Ao(e._repo,e._path,t,!0)}}class fY extends jl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(ec("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new oV(this._value,this._key)._apply(new aV(this._value,this._key)._apply(e))}}function Hl(n,...e){let t=(0,P.m9)(n);for(const r of e)t=r._apply(t);return t}(function qK(n){(0,P.hu)(!eS,"__referenceConstructor has already been defined"),eS=n})(La),function QK(n){(0,P.hu)(!nS,"__referenceConstructor has already been defined"),nS=n}(La);const gY="FIREBASE_DATABASE_EMULATOR_HOST",qM={};let lV=!1;function uV(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Ju("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),es("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,_,c=$M(s,i),h=c.repoInfo;typeof process<"u"&&process.env&&(_=process.env[gY]),_?(p=!0,s=`http://${_}?ns=${h.namespace}`,c=$M(s,i),h=c.repoInfo):p=!c.repoInfo.secure;const w=i&&p?new ww(ww.OWNER):new a5(n.name,n.options,e);LU("Invalid Firebase Database URL",c),mn(c.path)||Ju("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function yY(n,e,t,r){let i=qM[e.name];i||(i={},qM[e.name]=i);let s=i[n.toURLString()];return s&&Ju("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new CZ(n,lV,t,r),i[n.toURLString()]=s,s}(h,n,w,new o5(n.name,t));return new bY(S,n)}class bY{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function SZ(n,e,t){if(n.stats_=KO(n.repoInfo_),n.forceRestClient_||s5())n.server_=new WC(n.repoInfo_,(r,i,s,c)=>{jU(n,r,i,s,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>HU(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new am(n.repoInfo_,e,(r,i,s,c)=>{jU(n,r,i,s,c)},r=>{HU(n,r)},r=>{!function AZ(n,e){ts(e,(t,r)=>{BM(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function c5(n,e){const t=n.toString();return qO[t]||(qO[t]=e()),qO[t]}(n.repoInfo_,()=>new dK(n.stats_,n.server_)),n.infoData_=new oK,n.infoSyncTree_=new IU({startListening:(r,i,s,c)=>{let h=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(h=xw(n.infoSyncTree_,r._path,p),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),BM(n,"connected",!1),n.serverSyncTree_=new IU({startListening:(r,i,s,c)=>(n.server_.listen(r,s,i,(h,p)=>{const _=c(h,p);Fa(n.eventQueue_,r._path,_)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new La(this._repo,Un())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function _Y(n,e){const t=qM[e];(!t||t[n.key]!==n)&&Ju(`Database ${e}(${n.repoInfo_}) has already been deleted.`),WU(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ju("Cannot call "+e+" on a deleted database.")}}function cV(){SB.IS_TRANSPORT_INITIALIZED&&Ps("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function wY(){cV(),Ef.forceDisallow()}function EY(){cV(),zy.forceDisallow(),Ef.forceAllow()}function CY(n,e){aB(n,e)}const AY={".sv":"timestamp"};class OY{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}am.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},am.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function SY(n){nB(ui.SDK_VERSION),(0,ui._registerComponent)(new Cs.wA("database",(e,{instanceIdentifier:t})=>uV(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ui.registerVersion)(eB,"0.13.3",n),(0,ui.registerVersion)(eB,"0.13.3","esm2017")}();const PY=new Zs.Yd("@firebase/database-compat"),dV=function(n){PY.warn("FIREBASE WARNING: "+n)};class BY{constructor(e){this._delegate=e}cancel(e){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,dV("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class UY{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Of{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Vw("DataSnapshot.child","path",e,!1),new Of(this._database,this._delegate.child(e))}hasChild(e){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Vw("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Of(this._database,t)))}hasChildren(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new ra(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ys{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",t,!1);const c=ys.getCancelAndContextArgs_("Query.on",r,i),h=(_,w)=>{t.call(c.context,new Of(this.database,_),w)};h.userCallback=t,h.context=c.context;const p=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(e){case"value":return zM(this._delegate,h,p),t;case"child_added":return tV(this._delegate,h,p),t;case"child_removed":return iV(this._delegate,h,p),t;case"child_changed":return nV(this._delegate,h,p),t;case"child_moved":return rV(this._delegate,h,p),t;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,P.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,P.Wj)("Query.off","callback",t,!0),(0,P.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,sV(this._delegate,e,i)}else sV(this._delegate,e)}get(){return function KZ(n){return NZ((n=(0,P.m9)(n))._repo,n).then(e=>new fm(e,new La(n._repo,n._path),n._queryParams.getIndex()))}(this._delegate).then(e=>new Of(this.database,e))}once(e,t,r,i){(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",t,!0);const s=ys.getCancelAndContextArgs_("Query.once",r,i),c=new P.BH,h=(_,w)=>{const S=new Of(this.database,_);t&&t.call(s.context,S,w),c.resolve(S)};h.userCallback=t,h.context=s.context;const p=_=>{s.cancel&&s.cancel.call(s.context,_),c.reject(_)};switch(e){case"value":zM(this._delegate,h,p,{onlyOnce:!0});break;case"child_added":tV(this._delegate,h,p,{onlyOnce:!0});break;case"child_removed":iV(this._delegate,h,p,{onlyOnce:!0});break;case"child_changed":nV(this._delegate,h,p,{onlyOnce:!0});break;case"child_moved":rV(this._delegate,h,p,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new ys(this.database,Hl(this._delegate,function nY(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new tY(n)}(e)))}limitToLast(e){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new ys(this.database,Hl(this._delegate,function iY(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new rY(n)}(e)))}orderByChild(e){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new ys(this.database,Hl(this._delegate,function oY(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Vw("orderByChild","path",n,!1),new sY(n)}(e)))}orderByKey(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new ys(this.database,Hl(this._delegate,function lY(){return new aY}()))}orderByPriority(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new ys(this.database,Hl(this._delegate,function cY(){return new uY}()))}orderByValue(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new ys(this.database,Hl(this._delegate,function hY(){return new dY}()))}startAt(e=null,t){return(0,P.Dv)("Query.startAt",0,2,arguments.length),new ys(this.database,Hl(this._delegate,function QZ(n=null,e){return Uw("startAt","key",e,!0),new aV(n,e)}(e,t)))}startAfter(e=null,t){return(0,P.Dv)("Query.startAfter",0,2,arguments.length),new ys(this.database,Hl(this._delegate,function eY(n,e){return Uw("startAfter","key",e,!0),new XZ(n,e)}(e,t)))}endAt(e=null,t){return(0,P.Dv)("Query.endAt",0,2,arguments.length),new ys(this.database,Hl(this._delegate,function ZZ(n,e){return Uw("endAt","key",e,!0),new oV(n,e)}(e,t)))}endBefore(e=null,t){return(0,P.Dv)("Query.endBefore",0,2,arguments.length),new ys(this.database,Hl(this._delegate,function JZ(n,e){return Uw("endBefore","key",e,!0),new YZ(n,e)}(e,t)))}equalTo(e,t){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new ys(this.database,Hl(this._delegate,function pY(n,e){return Uw("equalTo","key",e,!0),new fY(n,e)}(e,t)))}toString(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ys))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,P.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,P.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,P.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new ra(this.database,new La(this._delegate._repo,this._delegate._path))}}class ra extends ys{constructor(e,t){super(e,new Ao(t._repo,t._path,new HC,!1)),this.database=e,this._delegate=t}getKey(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ra(this.database,pm(this._delegate,e))}getParent(){(0,P.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ra(this.database,e):null}getRoot(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new ra(this.database,this._delegate.root)}set(e,t){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",t,!0);const r=WM(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,dV("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Pa("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",t,!0);const r=qZ(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function zZ(n,e,t){if(Pa("setWithPriority",n._path),ec("setWithPriority",e,n._path,!1),LM("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new P.BH;return UM(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",e,!0);const t=function $Z(n){return Pa("remove",n._path),WM(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,P.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,P.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function MY(n,e,t){var r;if(n=(0,P.m9)(n),Pa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new P.BH,h=zM(n,()=>{});return function LZ(n,e,t,r,i,s){hm(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:iB(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=GM(n,e,void 0);c.currentInputSnapshot=h;const p=c.update(h.val());if(void 0===p)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Bw("transaction failed: Data returned ",p,c.path),c.status=0;const _=oS(n.transactionQueueTree_,e),w=dm(_)||[];let S;w.push(c),kM(_,w),"object"==typeof p&&null!==p&&(0,P.r3)(p,".priority")?(S=(0,P.DV)(p,".priority"),(0,P.hu)(Lw(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(iS(n.serverSyncTree_,e)||on.EMPTY_NODE).getPriority().val();const N=Gw(n),k=Vr(p,S),j=OM(k,h,N);c.currentOutputSnapshotRaw=k,c.currentOutputSnapshotResolved=j,c.currentWriteId=cS(n);const te=TM(n.serverSyncTree_,e,j,c.currentWriteId,c.applyLocally);Fa(n.eventQueue_,e,te),dS(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,_,w)=>{let S=null;p?s.reject(p):(S=new fm(w,new La(n._repo,n._path),mr),s.resolve(new OY(_,S)))},h,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new UY(s.committed,new Of(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",t,!0);const r=function WZ(n,e){n=(0,P.m9)(n),Pa("setPriority",n._path),LM("setPriority",e,!1);const t=new P.BH;return UM(n._repo,Rr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",t,!0);const r=function HZ(n,e){n=(0,P.m9)(n),Pa("push",n._path),ec("push",e,n._path,!0);const t=GU(n._repo),r=Q5(t),i=pm(n,r),s=pm(n,r);let c;return c=null!=e?WM(s,e).then(()=>s):Promise.resolve(s),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new ra(this.database,c));t&&i.then(()=>t(null),c=>t(c));const s=new ra(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return Pa("Reference.onDisconnect",this._delegate._path),new BY(new QU(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Hw{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:wY,forceLongPolling:EY}}useEmulator(e,t,r={}){!function DY(n,e,t,r={}){(n=(0,P.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ju("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ju('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new ww(ww.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,P.Sg)(r.mockUserToken,n.app.options.projectId);s=new ww(c)}!function mY(n,e,t,r){n.repoInfo_=new WO(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,P.Dv)("database.ref",0,1,arguments.length),e instanceof ra){const t=eV(this._delegate,e.toString());return new ra(this,t)}{const t=XU(this._delegate,e);return new ra(this,t)}}refFromURL(e){(0,P.Dv)("database.refFromURL",1,1,arguments.length);const r=eV(this._delegate,e);return new ra(this,r)}goOffline(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),function IY(n){(n=(0,P.m9)(n))._checkNotDeleted("goOffline"),WU(n._repo)}(this._delegate)}goOnline(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),function TY(n){(n=(0,P.m9)(n))._checkNotDeleted("goOnline"),function FZ(n){n.persistentConnection_&&n.persistentConnection_.resume(VU)}(n._repo)}(this._delegate)}}Hw.ServerValue={TIMESTAMP:function NY(){return AY}(),increment:n=>function RY(n){return{".sv":{increment:n}}}(n)};var GY=Object.freeze({__proto__:null,initStandalone:function VY({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){nB(t);const c=new Cs.zt("auth-internal",new Cs.H0("database-standalone"));return c.setComponent(new Cs.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Hw(uV(n,c,void 0,e,s),n),namespace:i}}});const jY=Hw.ServerValue;function hV(n){return null==n}function fV(n){return"function"==typeof n.set}function pV(n,e){return fV(e)?e:n.ref(e)}function gV(n,e){if(function $Y(n){return"string"==typeof n}(n))return e.stringCase();if(fV(n))return e.firebaseCase();if(function WY(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function $w(n,e,t="on",r=vh.z){return new Kn.y(i=>{let s=null;return s=n[t](e,(c,h)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,C.U)(i=>{const{snapshot:s,prevKey:c}=i;let h=null;return s.exists()&&(h=s.key),{type:e,payload:s,prevKey:c,key:h}}),(0,Qk.B)())}function mV(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function KY(n,e){const{payload:t,prevKey:r,key:i}=e,s=mV(n,i),c=function qY(n,e){if(hV(e))return 0;{const t=mV(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(p=>{const _={payload:p,type:"value",prevKey:h,key:p.key};return h=p.key,n=[...n,_],!1})}return n;case"child_added":if(s>-1){const h=n[s-1];(h&&h.key||null)!==r&&(n=n.filter(p=>p.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(s>-1){const h=n.splice(s,1)[0];return(n=n.slice()).splice(c,0,h),n}return n;default:return n}}function _V(n){return(hV(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function yV(n,e,t){return function zY(n,e,t){return $w(n,"value","once",t).pipe(hr(r=>{const i=[_t(r)];return e.forEach(s=>i.push($w(n,s,"on",t))),(0,UT.T)(...i).pipe(bu(KY,[]))}),Vc())}(n,e=_V(e),t)}function vV(n,e,t){const r=(e=_V(e)).map(i=>$w(n,i,"on",t));return(0,UT.T)(...r)}function bV(n,e){return function(r,i){return gV(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function QY(n){return function(t){return t?gV(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function wV(n,e){return function(){return $w(n,"value","on",e)}}!function HY(n){n.INTERNAL.registerComponent(new Cs.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Hw(i,r)},"PUBLIC").setServiceProps({Reference:ra,Query:ys,Database:Hw,DataSnapshot:Of,enableLogging:CY,INTERNAL:GY,ServerValue:jY}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.3")}(Jv.Z);const t7=new l.OlP("angularfire2.realtimeDatabaseURL"),n7=new l.OlP("angularfire2.database.use-emulator");let r7=(()=>{class n{constructor(t,r,i,s,c,h,p,_,w,S,N,k,j,te,oe){this.schedulers=h;const Ke=p,Ze=(0,Fr.on)(t,c,r);_&&NR(Ze,c,w,N,k,j,S,te),this.database=(0,Fr.cc)(`${Ze.name}.database.${i}`,"AngularFireDatabase",Ze.name,()=>{const st=c.runOutsideAngular(()=>Ze.database(i||void 0));return Ke&&st.useEmulator(...Ke),st},[Ke])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>pV(this.database,t));let s=i;return r&&(s=r(i)),function XY(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:bV(r,"update"),set:bV(r,"set"),push:i=>r.push(i),remove:QY(r),snapshotChanges:i=>yV(n,i,t).pipe(Cn.iC),stateChanges:i=>vV(n,i,t).pipe(Cn.iC),auditTrail:i=>function ZY(n,e,t){return function JY(n,e,t){return function YY(n,e){return $w(n,"value","on",e).pipe((0,C.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(XT(e),(0,C.U)(([i,s])=>{const c=i.lastKeyToLoad,h=s.map(p=>p.key);return{actions:s,lastKeyToLoad:c,loadedKeys:h}}),function Zq(n){return(0,Ln.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,we.x)(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,C.U)(i=>i.actions))}(n,vV(n,e).pipe(bu((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(Cn.iC),valueChanges:(i,s)=>yV(n,i,t).pipe((0,C.U)(h=>h.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),Cn.iC)}}(s,this)}object(t){return function e7(n,e){return{query:n,snapshotChanges:()=>wV(n,e.schedulers.outsideAngular)().pipe(Cn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>wV(n,e.schedulers.outsideAngular)().pipe(Cn.iC,(0,C.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>pV(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Fr.Dh),l.LFG(Fr.xv,8),l.LFG(t7,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Cn.HU),l.LFG(n7,8),l.LFG(Zb,8),l.LFG(DR,8),l.LFG(IR,8),l.LFG(TR,8),l.LFG(CR,8),l.LFG(SR,8),l.LFG(AR,8),l.LFG(Kb,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),i7=(()=>{class n{constructor(){ZT.Z.registerVersion("angularfire",Cn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[r7]}),n})();const s7_firebase={apiKey:"AIzaSyAhp4-7kYwkti3OHjCeQQDmrxZ9rBcqrek",authDomain:"estudia-joven.firebaseapp.com",projectId:"estudia-joven",storageBucket:"estudia-joven.appspot.com",messagingSenderId:"656092966131",appId:"1:656092966131:web:819dcb9cc9310dfa5e9b86"};let o7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[i4]}),n.\u0275inj=l.cJS({providers:[Hg],imports:[al,Fr.hO.initializeApp(s7_firebase),NH,LH,Kq,i7,r4,J8]}),n})();qd().bootstrapModule(o7).catch(n=>console.error(n))},5867:(Et,Me,L)=>{L.d(Me,{C6:()=>l.getApps,Mq:()=>l.getApp});var l=L(9681);(0,l.registerVersion)("firebase","9.9.1","app")},127:(Et,Me,L)=>{L.d(Me,{Z:()=>l.Z});var l=L(3942);l.Z.registerVersion("firebase","9.9.1","app-compat")},5881:(Et,Me,L)=>{L.r(Me);var l=L(5861),G=L(3942),x=L(6457),ae=L(2090),Ie=(L(9681),L(1877),L(4859));function me(){return window}const be=2e3;function H(){return H=(0,l.Z)(function*(re,K,W){var Se;const{BuildInfo:je}=me();(0,x.aq)(K.sessionId,"AuthEvent did not contain a session ID");const Vt=yield function Le(re){return Oe.apply(this,arguments)}(K.sessionId),qt={};return(0,x.ar)()?qt.ibi=je.packageName:(0,x.as)()?qt.apn=je.packageName:(0,x.at)(re,"operation-not-supported-in-this-environment"),je.displayName&&(qt.appDisplayName=je.displayName),qt.sessionId=Vt,(0,x.au)(re,W,K.type,void 0,null!==(Se=K.eventId)&&void 0!==Se?Se:void 0,qt)}),H.apply(this,arguments)}function Ye(){return(Ye=(0,l.Z)(function*(re){const{BuildInfo:K}=me(),W={};(0,x.ar)()?W.iosBundleId=K.packageName:(0,x.as)()?W.androidPackageName=K.packageName:(0,x.at)(re,"operation-not-supported-in-this-environment"),yield(0,x.av)(re,W)})).apply(this,arguments)}function yt(){return(yt=(0,l.Z)(function*(re,K,W){const{cordova:Se}=me();let je=()=>{};try{yield new Promise((Vt,qt)=>{let dn=null;function An(){var an;Vt();const Bi=null===(an=Se.plugins.browsertab)||void 0===an?void 0:an.close;"function"==typeof Bi&&Bi(),"function"==typeof W?.close&&W.close()}function nr(){dn||(dn=window.setTimeout(()=>{qt((0,x.aw)(re,"redirect-cancelled-by-user"))},be))}function ni(){"visible"===document?.visibilityState&&nr()}K.addPassiveListener(An),document.addEventListener("resume",nr,!1),(0,x.as)()&&document.addEventListener("visibilitychange",ni,!1),je=()=>{K.removePassiveListener(An),document.removeEventListener("resume",nr,!1),document.removeEventListener("visibilitychange",ni,!1),dn&&window.clearTimeout(dn)}})}finally{je()}})).apply(this,arguments)}function Oe(){return(Oe=(0,l.Z)(function*(re){const K=function He(re){if((0,x.aq)(/[0-9a-zA-Z]+/.test(re),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(re);const K=new ArrayBuffer(re.length),W=new Uint8Array(K);for(let Se=0;Se<re.length;Se++)W[Se]=re.charCodeAt(Se);return W}(re),W=yield crypto.subtle.digest("SHA-256",K);return Array.from(new Uint8Array(W)).map(je=>je.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Ve=20;class ke extends x.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(K=>{this.resolveInialized=K})}addPassiveListener(K){this.passiveListeners.add(K)}removePassiveListener(K){this.passiveListeners.delete(K)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(K){return this.resolveInialized(),this.passiveListeners.forEach(W=>W(K)),super.onEvent(K)}initialized(){var K=this;return(0,l.Z)(function*(){yield K.initPromise})()}}function ie(re){return pe.apply(this,arguments)}function pe(){return(pe=(0,l.Z)(function*(re){const K=yield ze()._get(kt(re));return K&&(yield ze()._remove(kt(re))),K})).apply(this,arguments)}function nt(){const re=[],K="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let W=0;W<Ve;W++){const Se=Math.floor(Math.random()*K.length);re.push(K.charAt(Se))}return re.join("")}function ze(){return(0,x.ay)(x.b)}function kt(re){return(0,x.az)("authEvent",re.config.apiKey,re.name)}function ve(re){if(!re?.includes("?"))return{};const[K,...W]=re.split("?");return(0,ae.zd)(W.join("?"))}const qe=class Ue{constructor(){this._redirectPersistence=x.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=x.aB,this._overrideRedirectResult=x.aC}_initialize(K){var W=this;return(0,l.Z)(function*(){const Se=K._key();let je=W.eventManagers.get(Se);return je||(je=new ke(K),W.eventManagers.set(Se,je),W.attachCallbackListeners(K,je)),je})()}_openPopup(K){(0,x.at)(K,"operation-not-supported-in-this-environment")}_openRedirect(K,W,Se,je){var Vt=this;return(0,l.Z)(function*(){!function Ee(re){var K,W,Se,je,Vt,qt,dn,An,nr,ni;const an=me();(0,x.ax)("function"==typeof(null===(K=an?.universalLinks)||void 0===K?void 0:K.subscribe),re,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,x.ax)(typeof(null===(W=an?.BuildInfo)||void 0===W?void 0:W.packageName)<"u",re,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,x.ax)("function"==typeof(null===(Vt=null===(je=null===(Se=an?.cordova)||void 0===Se?void 0:Se.plugins)||void 0===je?void 0:je.browsertab)||void 0===Vt?void 0:Vt.openUrl),re,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,x.ax)("function"==typeof(null===(An=null===(dn=null===(qt=an?.cordova)||void 0===qt?void 0:qt.plugins)||void 0===dn?void 0:dn.browsertab)||void 0===An?void 0:An.isAvailable),re,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,x.ax)("function"==typeof(null===(ni=null===(nr=an?.cordova)||void 0===nr?void 0:nr.InAppBrowser)||void 0===ni?void 0:ni.open),re,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(K);const qt=yield Vt._initialize(K);yield qt.initialized(),qt.resetRedirect(),(0,x.aD)(),yield Vt._originValidation(K);const dn=function Pe(re,K,W=null){return{type:K,eventId:W,urlResponse:null,sessionId:nt(),postBody:null,tenantId:re.tenantId,error:(0,x.aw)(re,"no-auth-event")}}(K,Se,je);yield function et(re,K){return ze()._set(kt(re),K)}(K,dn);const An=yield function z(re,K,W){return H.apply(this,arguments)}(K,dn,W),nr=yield function Be(re){const{cordova:K}=me();return new Promise(W=>{K.plugins.browsertab.isAvailable(Se=>{let je=null;Se?K.plugins.browsertab.openUrl(re):je=K.InAppBrowser.open(re,(0,x.ap)()?"_blank":"_system","location=yes"),W(je)})})}(An);return function Xe(re,K,W){return yt.apply(this,arguments)}(K,qt,nr)})()}_isIframeWebStorageSupported(K,W){throw new Error("Method not implemented.")}_originValidation(K){const W=K._key();return this.originValidationPromises[W]||(this.originValidationPromises[W]=function ee(re){return Ye.apply(this,arguments)}(K)),this.originValidationPromises[W]}attachCallbackListeners(K,W){const{universalLinks:Se,handleOpenURL:je,BuildInfo:Vt}=me(),qt=setTimeout((0,l.Z)(function*(){yield ie(K),W.onEvent(We())}),500),dn=function(){var ni=(0,l.Z)(function*(an){clearTimeout(qt);const Bi=yield ie(K);let tc=null;Bi&&an?.url&&(tc=function Ce(re,K){var W,Se;const je=function he(re){const K=ve(re),W=K.link?decodeURIComponent(K.link):void 0,Se=ve(W).link,je=K.deep_link_id?decodeURIComponent(K.deep_link_id):void 0;return ve(je).link||je||Se||W||re}(K);if(je.includes("/__/auth/callback")){const Vt=ve(je),qt=Vt.firebaseError?function lt(re){try{return JSON.parse(re)}catch{return null}}(decodeURIComponent(Vt.firebaseError)):null,dn=null===(Se=null===(W=qt?.code)||void 0===W?void 0:W.split("auth/"))||void 0===Se?void 0:Se[1],An=dn?(0,x.aw)(dn):null;return An?{type:re.type,eventId:re.eventId,tenantId:re.tenantId,error:An,urlResponse:null,sessionId:null,postBody:null}:{type:re.type,eventId:re.eventId,tenantId:re.tenantId,sessionId:re.sessionId,urlResponse:je,postBody:null}}return null}(Bi,an.url)),W.onEvent(tc||We())});return function(Bi){return ni.apply(this,arguments)}}();typeof Se<"u"&&"function"==typeof Se.subscribe&&Se.subscribe(null,dn);const An=je,nr=`${Vt.packageName.toLowerCase()}://`;me().handleOpenURL=function(){var ni=(0,l.Z)(function*(an){if(an.toLowerCase().startsWith(nr)&&dn({url:an}),"function"==typeof An)try{An(an)}catch(Bi){console.error(Bi)}});return function(an){return ni.apply(this,arguments)}}()}};function We(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,x.aw)("no-auth-event")}}const Rt=1e3;function At(){var re;return(null===(re=self?.location)||void 0===re?void 0:re.protocol)||null}function ln(re=(0,ae.z$)()){return!("file:"!==At()&&"ionic:"!==At()&&"capacitor:"!==At()||!re.toLowerCase().match(/iphone|ipad|ipod|android/))}function yr(){try{const re=self.localStorage,K=x.aI();if(re)return re.setItem(K,"1"),re.removeItem(K),!function cr(re=(0,ae.z$)()){return function On(){return(0,ae.w1)()&&11===document?.documentMode}()||function un(re=(0,ae.z$)()){return/Edge\/\d+/.test(re)}(re)}()||(0,ae.hl)()}catch{return Li()&&(0,ae.hl)()}return!1}function Li(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function zn(){return(function pt(){return"http:"===At()||"https:"===At()}()||(0,ae.ru)()||ln())&&!function Jn(){return(0,ae.b$)()||(0,ae.UG)()}()&&yr()&&!Li()}function se(){return ln()&&typeof document<"u"}function de(){return(de=(0,l.Z)(function*(){return!!se()&&new Promise(re=>{const K=setTimeout(()=>{re(!1)},Rt);document.addEventListener("deviceready",()=>{clearTimeout(K),re(!0)})})})).apply(this,arguments)}const _e={LOCAL:"local",NONE:"none",SESSION:"session"},it=x.ax,cn="persistence";function Ut(re){return vn.apply(this,arguments)}function vn(){return(vn=(0,l.Z)(function*(re){yield re._initializationPromise;const K=wt(),W=x.az(cn,re.config.apiKey,re.name);K&&K.setItem(W,re._getPersistence())})).apply(this,arguments)}function wt(){var re;try{return(null===(re=function Re(){return typeof window<"u"?window:null}())||void 0===re?void 0:re.sessionStorage)||null}catch{return null}}const xt=x.ax;class Mn{constructor(){this.browserResolver=x.ay(x.k),this.cordovaResolver=x.ay(qe),this.underlyingResolver=null,this._redirectPersistence=x.a,this._completeRedirectFn=x.aB,this._overrideRedirectResult=x.aC}_initialize(K){var W=this;return(0,l.Z)(function*(){return yield W.selectUnderlyingResolver(),W.assertedUnderlyingResolver._initialize(K)})()}_openPopup(K,W,Se,je){var Vt=this;return(0,l.Z)(function*(){return yield Vt.selectUnderlyingResolver(),Vt.assertedUnderlyingResolver._openPopup(K,W,Se,je)})()}_openRedirect(K,W,Se,je){var Vt=this;return(0,l.Z)(function*(){return yield Vt.selectUnderlyingResolver(),Vt.assertedUnderlyingResolver._openRedirect(K,W,Se,je)})()}_isIframeWebStorageSupported(K,W){this.assertedUnderlyingResolver._isIframeWebStorageSupported(K,W)}_originValidation(K){return this.assertedUnderlyingResolver._originValidation(K)}get _shouldInitProactively(){return se()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return xt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var K=this;return(0,l.Z)(function*(){if(K.underlyingResolver)return;const W=yield function ne(){return de.apply(this,arguments)}();K.underlyingResolver=W?K.cordovaResolver:K.browserResolver})()}}function bn(re){return re.unwrap()}function fn(re){return fi(re)}function fi(re){const{_tokenResponse:K}=re instanceof ae.ZR?re.customData:re;if(!K)return null;if(!(re instanceof ae.ZR)&&"temporaryProof"in K&&"phoneNumber"in K)return x.P.credentialFromResult(re);const W=K.providerId;if(!W||W===x.o.PASSWORD)return null;let Se;switch(W){case x.o.GOOGLE:Se=x.Q;break;case x.o.FACEBOOK:Se=x.N;break;case x.o.GITHUB:Se=x.T;break;case x.o.TWITTER:Se=x.W;break;default:const{oauthIdToken:je,oauthAccessToken:Vt,oauthTokenSecret:qt,pendingToken:dn,nonce:An}=K;return Vt||qt||je||dn?dn?W.startsWith("saml.")?x.aL._create(W,dn):x.J._fromParams({providerId:W,signInMethod:W,pendingToken:dn,idToken:je,accessToken:Vt}):new x.U(W).credential({idToken:je,accessToken:Vt,rawNonce:An}):null}return re instanceof ae.ZR?Se.credentialFromError(re):Se.credentialFromResult(re)}function zt(re,K){return K.catch(W=>{throw W instanceof ae.ZR&&function Gn(re,K){var W,Se;const je=null===(W=K.customData)||void 0===W?void 0:W._tokenResponse;if("auth/multi-factor-auth-required"===(null===(Se=K)||void 0===Se?void 0:Se.code))K.resolver=new Q(re,x.an(re,K));else if(je){const Vt=fi(K),qt=K;Vt&&(qt.credential=Vt,qt.tenantId=je.tenantId||void 0,qt.email=je.email||void 0,qt.phoneNumber=je.phoneNumber||void 0)}}(re,W),W}).then(W=>{const je=W.user;return{operationType:W.operationType,credential:fn(W),additionalUserInfo:x.al(W),user:$.getOrCreate(je)}})}function pi(re,K){return tn.apply(this,arguments)}function tn(){return(tn=(0,l.Z)(function*(re,K){const W=yield K;return{verificationId:W.verificationId,confirm:Se=>zt(re,W.confirm(Se))}})).apply(this,arguments)}class Q{constructor(K,W){this.resolver=W,this.auth=function Vn(re){return re.wrapped()}(K)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(K){return zt(bn(this.auth),this.resolver.resolveSignIn(K))}}class ${constructor(K){this._delegate=K,this.multiFactor=x.ao(K)}static getOrCreate(K){return $.USER_MAP.has(K)||$.USER_MAP.set(K,new $(K)),$.USER_MAP.get(K)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(K){return this._delegate.getIdTokenResult(K)}getIdToken(K){return this._delegate.getIdToken(K)}linkAndRetrieveDataWithCredential(K){return this.linkWithCredential(K)}linkWithCredential(K){var W=this;return(0,l.Z)(function*(){return zt(W.auth,x.Z(W._delegate,K))})()}linkWithPhoneNumber(K,W){var Se=this;return(0,l.Z)(function*(){return pi(Se.auth,x.l(Se._delegate,K,W))})()}linkWithPopup(K){var W=this;return(0,l.Z)(function*(){return zt(W.auth,x.d(W._delegate,K,Mn))})()}linkWithRedirect(K){var W=this;return(0,l.Z)(function*(){return yield Ut(x.aE(W.auth)),x.g(W._delegate,K,Mn)})()}reauthenticateAndRetrieveDataWithCredential(K){return this.reauthenticateWithCredential(K)}reauthenticateWithCredential(K){var W=this;return(0,l.Z)(function*(){return zt(W.auth,x._(W._delegate,K))})()}reauthenticateWithPhoneNumber(K,W){return pi(this.auth,x.r(this._delegate,K,W))}reauthenticateWithPopup(K){return zt(this.auth,x.e(this._delegate,K,Mn))}reauthenticateWithRedirect(K){var W=this;return(0,l.Z)(function*(){return yield Ut(x.aE(W.auth)),x.h(W._delegate,K,Mn)})()}sendEmailVerification(K){return x.ab(this._delegate,K)}unlink(K){var W=this;return(0,l.Z)(function*(){return yield x.ak(W._delegate,K),W})()}updateEmail(K){return x.ag(this._delegate,K)}updatePassword(K){return x.ah(this._delegate,K)}updatePhoneNumber(K){return x.u(this._delegate,K)}updateProfile(K){return x.af(this._delegate,K)}verifyBeforeUpdateEmail(K,W){return x.ac(this._delegate,K,W)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}$.USER_MAP=new WeakMap;const U=x.ax;let q=(()=>{class re{constructor(W,Se){if(this.app=W,Se.isInitialized())return this._delegate=Se.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:je}=W.options;U(je,"invalid-api-key",{appName:W.name}),U(je,"invalid-api-key",{appName:W.name});const Vt=typeof window<"u"?Mn:void 0;this._delegate=Se.initialize({options:{persistence:Fe(je,W.name),popupRedirectResolver:Vt}}),this._delegate._updateErrorMap(x.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?$.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(W){this._delegate.languageCode=W}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(W){this._delegate.tenantId=W}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(W,Se){x.G(this._delegate,W,Se)}applyActionCode(W){return x.a2(this._delegate,W)}checkActionCode(W){return x.a3(this._delegate,W)}confirmPasswordReset(W,Se){return x.a1(this._delegate,W,Se)}createUserWithEmailAndPassword(W,Se){var je=this;return(0,l.Z)(function*(){return zt(je._delegate,x.a5(je._delegate,W,Se))})()}fetchProvidersForEmail(W){return this.fetchSignInMethodsForEmail(W)}fetchSignInMethodsForEmail(W){return x.aa(this._delegate,W)}isSignInWithEmailLink(W){return x.a8(this._delegate,W)}getRedirectResult(){var W=this;return(0,l.Z)(function*(){U(zn(),W._delegate,"operation-not-supported-in-this-environment");const Se=yield x.j(W._delegate,Mn);return Se?zt(W._delegate,Promise.resolve(Se)):{credential:null,user:null}})()}addFrameworkForLogging(W){!function ft(re,K){(0,x.aE)(re)._logFramework(K)}(this._delegate,W)}onAuthStateChanged(W,Se,je){const{next:Vt,error:qt,complete:dn}=Z(W,Se,je);return this._delegate.onAuthStateChanged(Vt,qt,dn)}onIdTokenChanged(W,Se,je){const{next:Vt,error:qt,complete:dn}=Z(W,Se,je);return this._delegate.onIdTokenChanged(Vt,qt,dn)}sendSignInLinkToEmail(W,Se){return x.a7(this._delegate,W,Se)}sendPasswordResetEmail(W,Se){return x.a0(this._delegate,W,Se||void 0)}setPersistence(W){var Se=this;return(0,l.Z)(function*(){let je;switch(function Ft(re,K){it(Object.values(_e).includes(K),re,"invalid-persistence-type"),(0,ae.b$)()?it(K!==_e.SESSION,re,"unsupported-persistence-type"):(0,ae.UG)()?it(K===_e.NONE,re,"unsupported-persistence-type"):Li()?it(K===_e.NONE||K===_e.LOCAL&&(0,ae.hl)(),re,"unsupported-persistence-type"):it(K===_e.NONE||yr(),re,"unsupported-persistence-type")}(Se._delegate,W),W){case _e.SESSION:je=x.a;break;case _e.LOCAL:je=(yield x.ay(x.i)._isAvailable())?x.i:x.b;break;case _e.NONE:je=x.L;break;default:return x.at("argument-error",{appName:Se._delegate.name})}return Se._delegate.setPersistence(je)})()}signInAndRetrieveDataWithCredential(W){return this.signInWithCredential(W)}signInAnonymously(){return zt(this._delegate,x.X(this._delegate))}signInWithCredential(W){return zt(this._delegate,x.Y(this._delegate,W))}signInWithCustomToken(W){return zt(this._delegate,x.$(this._delegate,W))}signInWithEmailAndPassword(W,Se){return zt(this._delegate,x.a6(this._delegate,W,Se))}signInWithEmailLink(W,Se){return zt(this._delegate,x.a9(this._delegate,W,Se))}signInWithPhoneNumber(W,Se){return pi(this._delegate,x.s(this._delegate,W,Se))}signInWithPopup(W){var Se=this;return(0,l.Z)(function*(){return U(zn(),Se._delegate,"operation-not-supported-in-this-environment"),zt(Se._delegate,x.c(Se._delegate,W,Mn))})()}signInWithRedirect(W){var Se=this;return(0,l.Z)(function*(){return U(zn(),Se._delegate,"operation-not-supported-in-this-environment"),yield Ut(Se._delegate),x.f(Se._delegate,W,Mn)})()}updateCurrentUser(W){return this._delegate.updateCurrentUser(W)}verifyPasswordResetCode(W){return x.a4(this._delegate,W)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return re.Persistence=_e,re})();function Z(re,K,W){let Se=re;"function"!=typeof re&&({next:Se,error:K,complete:W}=re);const je=Se;return{next:qt=>je(qt&&$.getOrCreate(qt)),error:K,complete:W}}function Fe(re,K){const W=function Mt(re,K){const W=wt();if(!W)return[];const Se=x.az(cn,re,K);switch(W.getItem(Se)){case _e.NONE:return[x.L];case _e.LOCAL:return[x.i,x.a];case _e.SESSION:return[x.a];default:return[]}}(re,K);if(typeof self<"u"&&!W.includes(x.i)&&W.push(x.i),typeof window<"u")for(const Se of[x.b,x.a])W.includes(Se)||W.push(Se);return W.includes(x.L)||W.push(x.L),W}class rt{constructor(){this.providerId="phone",this._delegate=new x.P(bn(G.Z.auth()))}static credential(K,W){return x.P.credential(K,W)}verifyPhoneNumber(K,W){return this._delegate.verifyPhoneNumber(K,W)}unwrap(){return this._delegate}}rt.PHONE_SIGN_IN_METHOD=x.P.PHONE_SIGN_IN_METHOD,rt.PROVIDER_ID=x.P.PROVIDER_ID;const Ot=x.ax;class Dn{constructor(K,W,Se=G.Z.app()){var je;Ot(null===(je=Se.options)||void 0===je?void 0:je.apiKey,"invalid-api-key",{appName:Se.name}),this._delegate=new x.R(K,W,Se.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Dr(re){re.INTERNAL.registerComponent(new Ie.wA("auth-compat",K=>{const W=K.getProvider("app-compat").getImmediate(),Se=K.getProvider("auth");return new q(W,Se)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:x.A.EMAIL_SIGNIN,PASSWORD_RESET:x.A.PASSWORD_RESET,RECOVER_EMAIL:x.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:x.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:x.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:x.A.VERIFY_EMAIL}},EmailAuthProvider:x.M,FacebookAuthProvider:x.N,GithubAuthProvider:x.T,GoogleAuthProvider:x.Q,OAuthProvider:x.U,SAMLAuthProvider:x.V,PhoneAuthProvider:rt,PhoneMultiFactorGenerator:x.m,RecaptchaVerifier:Dn,TwitterAuthProvider:x.W,Auth:q,AuthCredential:x.H,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),re.registerVersion("@firebase/auth-compat","0.2.18")}(G.Z)},9751:(Et,Me,L)=>{L.d(Me,{y:()=>me});var l=L(930),G=L(727),x=L(8822),ae=L(9635),ue=L(2416),ce=L(576),Ie=L(2806);let me=(()=>{class ee{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const Xe=new ee;return Xe.source=this,Xe.operator=Be,Xe}subscribe(Be,Xe,yt){const Ee=function H(ee){return ee&&ee instanceof l.Lv||function z(ee){return ee&&(0,ce.m)(ee.next)&&(0,ce.m)(ee.error)&&(0,ce.m)(ee.complete)}(ee)&&(0,G.Nn)(ee)}(Be)?Be:new l.Hp(Be,Xe,yt);return(0,Ie.x)(()=>{const{operator:Le,source:Oe}=this;Ee.add(Le?Le.call(Ee,Oe):Oe?this._subscribe(Ee):this._trySubscribe(Ee))}),Ee}_trySubscribe(Be){try{return this._subscribe(Be)}catch(Xe){Be.error(Xe)}}forEach(Be,Xe){return new(Xe=be(Xe))((yt,Ee)=>{const Le=new l.Hp({next:Oe=>{try{Be(Oe)}catch(He){Ee(He),Le.unsubscribe()}},error:Ee,complete:yt});this.subscribe(Le)})}_subscribe(Be){var Xe;return null===(Xe=this.source)||void 0===Xe?void 0:Xe.subscribe(Be)}[x.L](){return this}pipe(...Be){return(0,ae.U)(Be)(this)}toPromise(Be){return new(Be=be(Be))((Xe,yt)=>{let Ee;this.subscribe(Le=>Ee=Le,Le=>yt(Le),()=>Xe(Ee))})}}return ee.create=Ye=>new ee(Ye),ee})();function be(ee){var Ye;return null!==(Ye=ee??ue.v.Promise)&&void 0!==Ye?Ye:Promise}},7579:(Et,Me,L)=>{L.d(Me,{x:()=>Ie});var l=L(9751),G=L(727);const ae=(0,L(3888).d)(be=>function(){be(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=L(8737),ce=L(2806);let Ie=(()=>{class be extends l.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const ee=new me(this,this);return ee.operator=H,ee}_throwIfClosed(){if(this.closed)throw new ae}next(H){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(H)}})}error(H){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:ee}=this;for(;ee.length;)ee.shift().error(H)}})}complete(){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:ee,isStopped:Ye,observers:Be}=this;return ee||Ye?G.Lc:(this.currentObservers=null,Be.push(H),new G.w0(()=>{this.currentObservers=null,(0,ue.P)(Be,H)}))}_checkFinalizedStatuses(H){const{hasError:ee,thrownError:Ye,isStopped:Be}=this;ee?H.error(Ye):Be&&H.complete()}asObservable(){const H=new l.y;return H.source=this,H}}return be.create=(z,H)=>new me(z,H),be})();class me extends Ie{constructor(z,H){super(),this.destination=z,this.source=H}next(z){var H,ee;null===(ee=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===ee||ee.call(H,z)}error(z){var H,ee;null===(ee=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===ee||ee.call(H,z)}complete(){var z,H;null===(H=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===H||H.call(z)}_subscribe(z){var H,ee;return null!==(ee=null===(H=this.source)||void 0===H?void 0:H.subscribe(z))&&void 0!==ee?ee:G.Lc}}},930:(Et,Me,L)=>{L.d(Me,{Hp:()=>yt,Lv:()=>ee});var l=L(576),G=L(727),x=L(2416),ae=L(7849),ue=L(5032);const ce=be("C",void 0,void 0);function be(Ve,ke,Pe){return{kind:Ve,value:ke,error:Pe}}var z=L(3410),H=L(2806);class ee extends G.w0{constructor(ke){super(),this.isStopped=!1,ke?(this.destination=ke,(0,G.Nn)(ke)&&ke.add(this)):this.destination=He}static create(ke,Pe,et){return new yt(ke,Pe,et)}next(ke){this.isStopped?Oe(function me(Ve){return be("N",Ve,void 0)}(ke),this):this._next(ke)}error(ke){this.isStopped?Oe(function Ie(Ve){return be("E",void 0,Ve)}(ke),this):(this.isStopped=!0,this._error(ke))}complete(){this.isStopped?Oe(ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ke){this.destination.next(ke)}_error(ke){try{this.destination.error(ke)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ye=Function.prototype.bind;function Be(Ve,ke){return Ye.call(Ve,ke)}class Xe{constructor(ke){this.partialObserver=ke}next(ke){const{partialObserver:Pe}=this;if(Pe.next)try{Pe.next(ke)}catch(et){Ee(et)}}error(ke){const{partialObserver:Pe}=this;if(Pe.error)try{Pe.error(ke)}catch(et){Ee(et)}else Ee(ke)}complete(){const{partialObserver:ke}=this;if(ke.complete)try{ke.complete()}catch(Pe){Ee(Pe)}}}class yt extends ee{constructor(ke,Pe,et){let ie;if(super(),(0,l.m)(ke)||!ke)ie={next:ke??void 0,error:Pe??void 0,complete:et??void 0};else{let pe;this&&x.v.useDeprecatedNextContext?(pe=Object.create(ke),pe.unsubscribe=()=>this.unsubscribe(),ie={next:ke.next&&Be(ke.next,pe),error:ke.error&&Be(ke.error,pe),complete:ke.complete&&Be(ke.complete,pe)}):ie=ke}this.destination=new Xe(ie)}}function Ee(Ve){x.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Ve):(0,ae.h)(Ve)}function Oe(Ve,ke){const{onStoppedNotification:Pe}=x.v;Pe&&z.z.setTimeout(()=>Pe(Ve,ke))}const He={closed:!0,next:ue.Z,error:function Le(Ve){throw Ve},complete:ue.Z}},727:(Et,Me,L)=>{L.d(Me,{Lc:()=>ce,w0:()=>ue,Nn:()=>Ie});var l=L(576);const x=(0,L(3888).d)(be=>function(H){be(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((ee,Ye)=>`${Ye+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ae=L(8737);class ue{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Be of H)Be.remove(this);else H.remove(this);const{initialTeardown:ee}=this;if((0,l.m)(ee))try{ee()}catch(Be){z=Be instanceof x?Be.errors:[Be]}const{_finalizers:Ye}=this;if(Ye){this._finalizers=null;for(const Be of Ye)try{me(Be)}catch(Xe){z=z??[],Xe instanceof x?z=[...z,...Xe.errors]:z.push(Xe)}}if(z)throw new x(z)}}add(z){var H;if(z&&z!==this)if(this.closed)me(z);else{if(z instanceof ue){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(z)}}_hasParent(z){const{_parentage:H}=this;return H===z||Array.isArray(H)&&H.includes(z)}_addParent(z){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(z),H):H?[H,z]:z}_removeParent(z){const{_parentage:H}=this;H===z?this._parentage=null:Array.isArray(H)&&(0,ae.P)(H,z)}remove(z){const{_finalizers:H}=this;H&&(0,ae.P)(H,z),z instanceof ue&&z._removeParent(this)}}ue.EMPTY=(()=>{const be=new ue;return be.closed=!0,be})();const ce=ue.EMPTY;function Ie(be){return be instanceof ue||be&&"closed"in be&&(0,l.m)(be.remove)&&(0,l.m)(be.add)&&(0,l.m)(be.unsubscribe)}function me(be){(0,l.m)(be)?be():be.unsubscribe()}},2416:(Et,Me,L)=>{L.d(Me,{v:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Et,Me,L)=>{L.d(Me,{E:()=>G});const G=new(L(9751).y)(ue=>ue.complete())},8996:(Et,Me,L)=>{L.d(Me,{D:()=>ke});var l=L(8421),G=L(5363),x=L(9468),ce=L(9751),me=L(2202),be=L(576),z=L(9672);function ee(Pe,et){if(!Pe)throw new Error("Iterable cannot be null");return new ce.y(ie=>{(0,z.f)(ie,et,()=>{const pe=Pe[Symbol.asyncIterator]();(0,z.f)(ie,et,()=>{pe.next().then(Ce=>{Ce.done?ie.complete():ie.next(Ce.value)})},0,!0)})})}var Ye=L(3670),Be=L(8239),Xe=L(1144),yt=L(6495),Ee=L(2206),Le=L(4532),Oe=L(3260);function ke(Pe,et){return et?function Ve(Pe,et){if(null!=Pe){if((0,Ye.c)(Pe))return function ae(Pe,et){return(0,l.Xf)(Pe).pipe((0,x.R)(et),(0,G.Q)(et))}(Pe,et);if((0,Xe.z)(Pe))return function Ie(Pe,et){return new ce.y(ie=>{let pe=0;return et.schedule(function(){pe===Pe.length?ie.complete():(ie.next(Pe[pe++]),ie.closed||this.schedule())})})}(Pe,et);if((0,Be.t)(Pe))return function ue(Pe,et){return(0,l.Xf)(Pe).pipe((0,x.R)(et),(0,G.Q)(et))}(Pe,et);if((0,Ee.D)(Pe))return ee(Pe,et);if((0,yt.T)(Pe))return function H(Pe,et){return new ce.y(ie=>{let pe;return(0,z.f)(ie,et,()=>{pe=Pe[me.h](),(0,z.f)(ie,et,()=>{let Ce,nt;try{({value:Ce,done:nt}=pe.next())}catch(ze){return void ie.error(ze)}nt?ie.complete():ie.next(Ce)},0,!0)}),()=>(0,be.m)(pe?.return)&&pe.return()})}(Pe,et);if((0,Oe.L)(Pe))return function He(Pe,et){return ee((0,Oe.Q)(Pe),et)}(Pe,et)}throw(0,Le.z)(Pe)}(Pe,et):(0,l.Xf)(Pe)}},8421:(Et,Me,L)=>{L.d(Me,{Xf:()=>Ye});var l=L(655),G=L(1144),x=L(8239),ae=L(9751),ue=L(3670),ce=L(2206),Ie=L(4532),me=L(6495),be=L(3260),z=L(576),H=L(7849),ee=L(8822);function Ye(Ve){if(Ve instanceof ae.y)return Ve;if(null!=Ve){if((0,ue.c)(Ve))return function Be(Ve){return new ae.y(ke=>{const Pe=Ve[ee.L]();if((0,z.m)(Pe.subscribe))return Pe.subscribe(ke);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ve);if((0,G.z)(Ve))return function Xe(Ve){return new ae.y(ke=>{for(let Pe=0;Pe<Ve.length&&!ke.closed;Pe++)ke.next(Ve[Pe]);ke.complete()})}(Ve);if((0,x.t)(Ve))return function yt(Ve){return new ae.y(ke=>{Ve.then(Pe=>{ke.closed||(ke.next(Pe),ke.complete())},Pe=>ke.error(Pe)).then(null,H.h)})}(Ve);if((0,ce.D)(Ve))return Le(Ve);if((0,me.T)(Ve))return function Ee(Ve){return new ae.y(ke=>{for(const Pe of Ve)if(ke.next(Pe),ke.closed)return;ke.complete()})}(Ve);if((0,be.L)(Ve))return function Oe(Ve){return Le((0,be.Q)(Ve))}(Ve)}throw(0,Ie.z)(Ve)}function Le(Ve){return new ae.y(ke=>{(function He(Ve,ke){var Pe,et,ie,pe;return(0,l.mG)(this,void 0,void 0,function*(){try{for(Pe=(0,l.KL)(Ve);!(et=yield Pe.next()).done;)if(ke.next(et.value),ke.closed)return}catch(Ce){ie={error:Ce}}finally{try{et&&!et.done&&(pe=Pe.return)&&(yield pe.call(Pe))}finally{if(ie)throw ie.error}}ke.complete()})})(Ve,ke).catch(Pe=>ke.error(Pe))})}},6451:(Et,Me,L)=>{L.d(Me,{T:()=>ce});var l=L(8189),G=L(8421),x=L(515),ae=L(3269),ue=L(8996);function ce(...Ie){const me=(0,ae.yG)(Ie),be=(0,ae._6)(Ie,1/0),z=Ie;return z.length?1===z.length?(0,G.Xf)(z[0]):(0,l.J)(be)((0,ue.D)(z,me)):x.E}},5403:(Et,Me,L)=>{L.d(Me,{x:()=>G});var l=L(930);function G(ae,ue,ce,Ie,me){return new x(ae,ue,ce,Ie,me)}class x extends l.Lv{constructor(ue,ce,Ie,me,be,z){super(ue),this.onFinalize=be,this.shouldUnsubscribe=z,this._next=ce?function(H){try{ce(H)}catch(ee){ue.error(ee)}}:super._next,this._error=me?function(H){try{me(H)}catch(ee){ue.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=Ie?function(){try{Ie()}catch(H){ue.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ce}=this;super.unsubscribe(),!ce&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},4004:(Et,Me,L)=>{L.d(Me,{U:()=>x});var l=L(4482),G=L(5403);function x(ae,ue){return(0,l.e)((ce,Ie)=>{let me=0;ce.subscribe((0,G.x)(Ie,be=>{Ie.next(ae.call(ue,be,me++))}))})}},8189:(Et,Me,L)=>{L.d(Me,{J:()=>x});var l=L(5577),G=L(4671);function x(ae=1/0){return(0,l.z)(G.y,ae)}},5577:(Et,Me,L)=>{L.d(Me,{z:()=>me});var l=L(4004),G=L(8421),x=L(4482),ae=L(9672),ue=L(5403),Ie=L(576);function me(be,z,H=1/0){return(0,Ie.m)(z)?me((ee,Ye)=>(0,l.U)((Be,Xe)=>z(ee,Be,Ye,Xe))((0,G.Xf)(be(ee,Ye))),H):("number"==typeof z&&(H=z),(0,x.e)((ee,Ye)=>function ce(be,z,H,ee,Ye,Be,Xe,yt){const Ee=[];let Le=0,Oe=0,He=!1;const Ve=()=>{He&&!Ee.length&&!Le&&z.complete()},ke=et=>Le<ee?Pe(et):Ee.push(et),Pe=et=>{Be&&z.next(et),Le++;let ie=!1;(0,G.Xf)(H(et,Oe++)).subscribe((0,ue.x)(z,pe=>{Ye?.(pe),Be?ke(pe):z.next(pe)},()=>{ie=!0},void 0,()=>{if(ie)try{for(Le--;Ee.length&&Le<ee;){const pe=Ee.shift();Xe?(0,ae.f)(z,Xe,()=>Pe(pe)):Pe(pe)}Ve()}catch(pe){z.error(pe)}}))};return be.subscribe((0,ue.x)(z,ke,()=>{He=!0,Ve()})),()=>{yt?.()}}(ee,Ye,be,H)))}},5363:(Et,Me,L)=>{L.d(Me,{Q:()=>ae});var l=L(9672),G=L(4482),x=L(5403);function ae(ue,ce=0){return(0,G.e)((Ie,me)=>{Ie.subscribe((0,x.x)(me,be=>(0,l.f)(me,ue,()=>me.next(be),ce),()=>(0,l.f)(me,ue,()=>me.complete(),ce),be=>(0,l.f)(me,ue,()=>me.error(be),ce)))})}},3099:(Et,Me,L)=>{L.d(Me,{B:()=>ue});var l=L(8421),G=L(7579),x=L(930),ae=L(4482);function ue(Ie={}){const{connector:me=(()=>new G.x),resetOnError:be=!0,resetOnComplete:z=!0,resetOnRefCountZero:H=!0}=Ie;return ee=>{let Ye,Be,Xe,yt=0,Ee=!1,Le=!1;const Oe=()=>{Be?.unsubscribe(),Be=void 0},He=()=>{Oe(),Ye=Xe=void 0,Ee=Le=!1},Ve=()=>{const ke=Ye;He(),ke?.unsubscribe()};return(0,ae.e)((ke,Pe)=>{yt++,!Le&&!Ee&&Oe();const et=Xe=Xe??me();Pe.add(()=>{yt--,0===yt&&!Le&&!Ee&&(Be=ce(Ve,H))}),et.subscribe(Pe),!Ye&&yt>0&&(Ye=new x.Hp({next:ie=>et.next(ie),error:ie=>{Le=!0,Oe(),Be=ce(He,be,ie),et.error(ie)},complete:()=>{Ee=!0,Oe(),Be=ce(He,z),et.complete()}}),(0,l.Xf)(ke).subscribe(Ye))})(ee)}}function ce(Ie,me,...be){if(!0===me)return void Ie();if(!1===me)return;const z=new x.Hp({next:()=>{z.unsubscribe(),Ie()}});return(0,l.Xf)(me(...be)).subscribe(z)}},9468:(Et,Me,L)=>{L.d(Me,{R:()=>G});var l=L(4482);function G(x,ae=0){return(0,l.e)((ue,ce)=>{ce.add(x.schedule(()=>ue.subscribe(ce),ae))})}},8505:(Et,Me,L)=>{L.d(Me,{b:()=>ue});var l=L(576),G=L(4482),x=L(5403),ae=L(4671);function ue(ce,Ie,me){const be=(0,l.m)(ce)||Ie||me?{next:ce,error:Ie,complete:me}:ce;return be?(0,G.e)((z,H)=>{var ee;null===(ee=be.subscribe)||void 0===ee||ee.call(be);let Ye=!0;z.subscribe((0,x.x)(H,Be=>{var Xe;null===(Xe=be.next)||void 0===Xe||Xe.call(be,Be),H.next(Be)},()=>{var Be;Ye=!1,null===(Be=be.complete)||void 0===Be||Be.call(be),H.complete()},Be=>{var Xe;Ye=!1,null===(Xe=be.error)||void 0===Xe||Xe.call(be,Be),H.error(Be)},()=>{var Be,Xe;Ye&&(null===(Be=be.unsubscribe)||void 0===Be||Be.call(be)),null===(Xe=be.finalize)||void 0===Xe||Xe.call(be)}))}):ae.y}},4408:(Et,Me,L)=>{L.d(Me,{o:()=>ue});var l=L(727);class G extends l.w0{constructor(Ie,me){super()}schedule(Ie,me=0){return this}}const x={setInterval(ce,Ie,...me){const{delegate:be}=x;return be?.setInterval?be.setInterval(ce,Ie,...me):setInterval(ce,Ie,...me)},clearInterval(ce){const{delegate:Ie}=x;return(Ie?.clearInterval||clearInterval)(ce)},delegate:void 0};var ae=L(8737);class ue extends G{constructor(Ie,me){super(Ie,me),this.scheduler=Ie,this.work=me,this.pending=!1}schedule(Ie,me=0){var be;if(this.closed)return this;this.state=Ie;const z=this.id,H=this.scheduler;return null!=z&&(this.id=this.recycleAsyncId(H,z,me)),this.pending=!0,this.delay=me,this.id=null!==(be=this.id)&&void 0!==be?be:this.requestAsyncId(H,this.id,me),this}requestAsyncId(Ie,me,be=0){return x.setInterval(Ie.flush.bind(Ie,this),be)}recycleAsyncId(Ie,me,be=0){if(null!=be&&this.delay===be&&!1===this.pending)return me;null!=me&&x.clearInterval(me)}execute(Ie,me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const be=this._execute(Ie,me);if(be)return be;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ie,me){let z,be=!1;try{this.work(Ie)}catch(H){be=!0,z=H||new Error("Scheduled action threw falsy error")}if(be)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:Ie,scheduler:me}=this,{actions:be}=me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(be,this),null!=Ie&&(this.id=this.recycleAsyncId(me,Ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(Et,Me,L)=>{L.d(Me,{v:()=>x});var l=L(6063);class G{constructor(ue,ce=G.now){this.schedulerActionCtor=ue,this.now=ce}schedule(ue,ce=0,Ie){return new this.schedulerActionCtor(this,ue).schedule(Ie,ce)}}G.now=l.l.now;class x extends G{constructor(ue,ce=G.now){super(ue,ce),this.actions=[],this._active=!1}flush(ue){const{actions:ce}=this;if(this._active)return void ce.push(ue);let Ie;this._active=!0;do{if(Ie=ue.execute(ue.state,ue.delay))break}while(ue=ce.shift());if(this._active=!1,Ie){for(;ue=ce.shift();)ue.unsubscribe();throw Ie}}}},4986:(Et,Me,L)=>{L.d(Me,{P:()=>ae,z:()=>x});var l=L(4408);const x=new(L(7565).v)(l.o),ae=x},6063:(Et,Me,L)=>{L.d(Me,{l:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},3410:(Et,Me,L)=>{L.d(Me,{z:()=>l});const l={setTimeout(G,x,...ae){const{delegate:ue}=l;return ue?.setTimeout?ue.setTimeout(G,x,...ae):setTimeout(G,x,...ae)},clearTimeout(G){const{delegate:x}=l;return(x?.clearTimeout||clearTimeout)(G)},delegate:void 0}},2202:(Et,Me,L)=>{L.d(Me,{h:()=>G});const G=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Et,Me,L)=>{L.d(Me,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(Et,Me,L)=>{L.d(Me,{_6:()=>ce,jO:()=>ae,yG:()=>ue});var l=L(576),G=L(3532);function x(Ie){return Ie[Ie.length-1]}function ae(Ie){return(0,l.m)(x(Ie))?Ie.pop():void 0}function ue(Ie){return(0,G.K)(x(Ie))?Ie.pop():void 0}function ce(Ie,me){return"number"==typeof x(Ie)?Ie.pop():me}},8737:(Et,Me,L)=>{function l(G,x){if(G){const ae=G.indexOf(x);0<=ae&&G.splice(ae,1)}}L.d(Me,{P:()=>l})},3888:(Et,Me,L)=>{function l(G){const ae=G(ue=>{Error.call(ue),ue.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}L.d(Me,{d:()=>l})},2806:(Et,Me,L)=>{L.d(Me,{O:()=>ae,x:()=>x});var l=L(2416);let G=null;function x(ue){if(l.v.useDeprecatedSynchronousErrorHandling){const ce=!G;if(ce&&(G={errorThrown:!1,error:null}),ue(),ce){const{errorThrown:Ie,error:me}=G;if(G=null,Ie)throw me}}else ue()}function ae(ue){l.v.useDeprecatedSynchronousErrorHandling&&G&&(G.errorThrown=!0,G.error=ue)}},9672:(Et,Me,L)=>{function l(G,x,ae,ue=0,ce=!1){const Ie=x.schedule(function(){ae(),ce?G.add(this.schedule(null,ue)):this.unsubscribe()},ue);if(G.add(Ie),!ce)return Ie}L.d(Me,{f:()=>l})},4671:(Et,Me,L)=>{function l(G){return G}L.d(Me,{y:()=>l})},1144:(Et,Me,L)=>{L.d(Me,{z:()=>l});const l=G=>G&&"number"==typeof G.length&&"function"!=typeof G},2206:(Et,Me,L)=>{L.d(Me,{D:()=>G});var l=L(576);function G(x){return Symbol.asyncIterator&&(0,l.m)(x?.[Symbol.asyncIterator])}},576:(Et,Me,L)=>{function l(G){return"function"==typeof G}L.d(Me,{m:()=>l})},3670:(Et,Me,L)=>{L.d(Me,{c:()=>x});var l=L(8822),G=L(576);function x(ae){return(0,G.m)(ae[l.L])}},6495:(Et,Me,L)=>{L.d(Me,{T:()=>x});var l=L(2202),G=L(576);function x(ae){return(0,G.m)(ae?.[l.h])}},8239:(Et,Me,L)=>{L.d(Me,{t:()=>G});var l=L(576);function G(x){return(0,l.m)(x?.then)}},3260:(Et,Me,L)=>{L.d(Me,{L:()=>ae,Q:()=>x});var l=L(655),G=L(576);function x(ue){return(0,l.FC)(this,arguments,function*(){const Ie=ue.getReader();try{for(;;){const{value:me,done:be}=yield(0,l.qq)(Ie.read());if(be)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(me)}}finally{Ie.releaseLock()}})}function ae(ue){return(0,G.m)(ue?.getReader)}},3532:(Et,Me,L)=>{L.d(Me,{K:()=>G});var l=L(576);function G(x){return x&&(0,l.m)(x.schedule)}},4482:(Et,Me,L)=>{L.d(Me,{A:()=>G,e:()=>x});var l=L(576);function G(ae){return(0,l.m)(ae?.lift)}function x(ae){return ue=>{if(G(ue))return ue.lift(function(ce){try{return ae(ce,this)}catch(Ie){this.error(Ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Et,Me,L)=>{function l(){}L.d(Me,{Z:()=>l})},9635:(Et,Me,L)=>{L.d(Me,{U:()=>x,z:()=>G});var l=L(4671);function G(...ae){return x(ae)}function x(ae){return 0===ae.length?l.y:1===ae.length?ae[0]:function(ce){return ae.reduce((Ie,me)=>me(Ie),ce)}}},7849:(Et,Me,L)=>{L.d(Me,{h:()=>x});var l=L(2416),G=L(3410);function x(ae){G.z.setTimeout(()=>{const{onUnhandledError:ue}=l.v;if(!ue)throw ae;ue(ae)})}},4532:(Et,Me,L)=>{function l(G){return new TypeError(`You provided ${null!==G&&"object"==typeof G?"an invalid object":`'${G}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Me,{z:()=>l})},655:(Et,Me,L)=>{function ae(he,ve){var Te={};for(var Ue in he)Object.prototype.hasOwnProperty.call(he,Ue)&&ve.indexOf(Ue)<0&&(Te[Ue]=he[Ue]);if(null!=he&&"function"==typeof Object.getOwnPropertySymbols){var qe=0;for(Ue=Object.getOwnPropertySymbols(he);qe<Ue.length;qe++)ve.indexOf(Ue[qe])<0&&Object.prototype.propertyIsEnumerable.call(he,Ue[qe])&&(Te[Ue[qe]]=he[Ue[qe]])}return Te}function ee(he,ve,Te,Ue){return new(Te||(Te=Promise))(function(We,ft){function ct(At){try{Rt(Ue.next(At))}catch(pt){ft(pt)}}function En(At){try{Rt(Ue.throw(At))}catch(pt){ft(pt)}}function Rt(At){At.done?We(At.value):function qe(We){return We instanceof Te?We:new Te(function(ft){ft(We)})}(At.value).then(ct,En)}Rt((Ue=Ue.apply(he,ve||[])).next())})}function Ve(he){return this instanceof Ve?(this.v=he,this):new Ve(he)}function ke(he,ve,Te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var qe,Ue=Te.apply(he,ve||[]),We=[];return qe={},ft("next"),ft("throw"),ft("return"),qe[Symbol.asyncIterator]=function(){return this},qe;function ft(ln){Ue[ln]&&(qe[ln]=function(Jn){return new Promise(function(On,un){We.push([ln,Jn,On,un])>1||ct(ln,Jn)})})}function ct(ln,Jn){try{!function En(ln){ln.value instanceof Ve?Promise.resolve(ln.value.v).then(Rt,At):pt(We[0][2],ln)}(Ue[ln](Jn))}catch(On){pt(We[0][3],On)}}function Rt(ln){ct("next",ln)}function At(ln){ct("throw",ln)}function pt(ln,Jn){ln(Jn),We.shift(),We.length&&ct(We[0][0],We[0][1])}}function et(he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Te,ve=he[Symbol.asyncIterator];return ve?ve.call(he):(he=function yt(he){var ve="function"==typeof Symbol&&Symbol.iterator,Te=ve&&he[ve],Ue=0;if(Te)return Te.call(he);if(he&&"number"==typeof he.length)return{next:function(){return he&&Ue>=he.length&&(he=void 0),{value:he&&he[Ue++],done:!he}}};throw new TypeError(ve?"Object is not iterable.":"Symbol.iterator is not defined.")}(he),Te={},Ue("next"),Ue("throw"),Ue("return"),Te[Symbol.asyncIterator]=function(){return this},Te);function Ue(We){Te[We]=he[We]&&function(ft){return new Promise(function(ct,En){!function qe(We,ft,ct,En){Promise.resolve(En).then(function(Rt){We({value:Rt,done:ct})},ft)}(ct,En,(ft=he[We](ft)).done,ft.value)})}}}L.d(Me,{FC:()=>ke,KL:()=>et,_T:()=>ae,mG:()=>ee,qq:()=>Ve})},4650:(Et,Me,L)=>{L.d(Me,{$8M:()=>ma,$WT:()=>Ii,$Z:()=>WE,AFp:()=>jI,ALo:()=>Q0,AaK:()=>me,BQk:()=>Rh,CHM:()=>Fd,CRH:()=>rb,CZH:()=>ry,CqO:()=>g_,D6c:()=>bT,EJc:()=>mb,EpF:()=>Oh,F$t:()=>Qp,F4k:()=>_D,FYo:()=>CE,FiY:()=>T,Gf:()=>RI,GfV:()=>SE,Gpc:()=>H,Hsn:()=>kh,Ikx:()=>M0,JOm:()=>Wi,KtG:()=>pc,LFG:()=>U,LMc:()=>yy,LSH:()=>Ip,Lbi:()=>OA,Lck:()=>sA,MAs:()=>Sh,MGl:()=>Ph,MMx:()=>qh,MT6:()=>ag,NdJ:()=>Mh,OlP:()=>Fn,Oqu:()=>T_,P3R:()=>Ov,PXZ:()=>Ng,Q6J:()=>Ah,QGY:()=>p_,Qsj:()=>JS,QtT:()=>P_,R0b:()=>Ys,RDi:()=>RS,Rgc:()=>Sl,SBq:()=>_l,SDv:()=>ld,Sil:()=>Vu,Suo:()=>cs,TTD:()=>Oo,TgZ:()=>Zp,Tol:()=>OD,Udp:()=>eg,VKq:()=>bI,W1O:()=>MI,WLB:()=>G_,X6Q:()=>FA,XFs:()=>_e,Xpm:()=>Bi,Xts:()=>Tu,Y36:()=>_h,YKP:()=>Yn,YNc:()=>Qi,Yjl:()=>rc,Yz7:()=>pt,Z0I:()=>un,ZZ4:()=>my,_Bn:()=>wi,_UZ:()=>qc,_Vd:()=>Su,_c5:()=>yT,_uU:()=>sg,aQg:()=>Pb,c2e:()=>WI,cJS:()=>Jn,cg1:()=>Fu,dDg:()=>kA,dqk:()=>Mt,eFA:()=>ps,eJc:()=>X_,ekj:()=>I_,eoX:()=>nT,f3M:()=>Z,g9A:()=>$I,h0i:()=>ud,hGG:()=>vT,hij:()=>Io,iGM:()=>Al,ifc:()=>W,ip1:()=>GI,jDz:()=>q0,kEZ:()=>j_,kL8:()=>O_,lG2:()=>Rd,lcZ:()=>TI,lqb:()=>Pc,lri:()=>bb,n5z:()=>ol,oAB:()=>ql,oxw:()=>xh,pQV:()=>Tl,q4F:()=>Vv,qLn:()=>Np,qOj:()=>$p,qZA:()=>Yp,rWj:()=>tT,s9C:()=>wl,sBO:()=>lT,s_b:()=>md,soG:()=>iy,tb:()=>oy,tp0:()=>O,uIk:()=>Th,vHH:()=>Ee,vpe:()=>us,wAp:()=>vt,xp6:()=>FE,ynx:()=>Nh,z2F:()=>Ml,zSh:()=>Pv,zW0:()=>u_,zs3:()=>gh});var l=L(7579),G=L(727),x=L(9751),ae=L(6451),ue=L(3099);function ce(o){for(let a in o)if(o[a]===ce)return a;throw Error("Could not find renamed property on target object.")}function Ie(o,a){for(const u in a)a.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=a[u])}function me(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(me).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function be(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const z=ce({__forward_ref__:ce});function H(o){return o.__forward_ref__=H,o.toString=function(){return me(this())},o}function ee(o){return Ye(o)?o():o}function Ye(o){return"function"==typeof o&&o.hasOwnProperty(z)&&o.__forward_ref__===H}function Be(o){return o&&!!o.\u0275providers}const yt="https://g.co/ng/security#xss";class Ee extends Error{constructor(a,u){super(Le(a,u)),this.code=a}}function Le(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}function Oe(o){return"string"==typeof o?o:null==o?"":String(o)}function et(o,a){throw new Ee(-201,!1)}function ct(o,a,u,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${u} ${d} ${a} <=Actual]`))}function pt(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Jn(o){return{providers:o.providers||[],imports:o.imports||[]}}function On(o){return cr(o,se)||cr(o,de)}function un(o){return null!==On(o)}function cr(o,a){return o.hasOwnProperty(a)?o[a]:null}function zn(o){return o&&(o.hasOwnProperty(ne)||o.hasOwnProperty(Re))?o[ne]:null}const se=ce({\u0275prov:ce}),ne=ce({\u0275inj:ce}),de=ce({ngInjectableDef:ce}),Re=ce({ngInjectorDef:ce});var _e=(()=>((_e=_e||{})[_e.Default=0]="Default",_e[_e.Host=1]="Host",_e[_e.Self=2]="Self",_e[_e.SkipSelf=4]="SkipSelf",_e[_e.Optional=8]="Optional",_e))();let it;function Ft(o){const a=it;return it=o,a}function Ut(o,a,u){const d=On(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:u&_e.Optional?null:void 0!==a?a:void et(me(o))}const Mt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),bn={},Vn="__NG_DI_FLAG__",fn="ngTempTokenPath",Gn="ngTokenPath",fi=/\n/gm,zt="\u0275",pi="__source";let tn;function Q(o){const a=tn;return tn=o,a}function $(o,a=_e.Default){if(void 0===tn)throw new Ee(-203,!1);return null===tn?Ut(o,void 0,a):tn.get(o,a&_e.Optional?null:void 0,a)}function U(o,a=_e.Default){return(function cn(){return it}()||$)(ee(o),a)}function Z(o,a=_e.Default){return U(o,Fe(a))}function Fe(o){return typeof o>"u"||"number"==typeof o?o:0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)}function rt(o){const a=[];for(let u=0;u<o.length;u++){const d=ee(o[u]);if(Array.isArray(d)){if(0===d.length)throw new Ee(900,!1);let f,g=_e.Default;for(let v=0;v<d.length;v++){const E=d[v],I=Dn(E);"number"==typeof I?-1===I?f=E.token:g|=I:f=E}a.push(U(f,g))}else a.push(U(d))}return a}function Ot(o,a){return o[Vn]=a,o.prototype[Vn]=a,o}function Dn(o){return o[Vn]}function re(o){return{toString:o}.toString()}var K=(()=>((K=K||{})[K.OnPush=0]="OnPush",K[K.Default=1]="Default",K))(),W=(()=>{return(o=W||(W={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",W;var o})();const Se={},je=[],Vt=ce({\u0275cmp:ce}),qt=ce({\u0275dir:ce}),dn=ce({\u0275pipe:ce}),An=ce({\u0275mod:ce}),nr=ce({\u0275fac:ce}),ni=ce({__NG_ELEMENT_ID__:ce});let an=0;function Bi(o){return re(()=>{const a=$r(o),u={...a,decls:o.decls,vars:o.vars,template:o.template,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,onPush:o.changeDetection===K.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&o.dependencies||null,getStandaloneInjector:null,data:o.data||{},encapsulation:o.encapsulation||W.Emulated,id:"c"+an++,styles:o.styles||je,_:null,schemas:o.schemas||null,tView:null};ic(u);const d=o.dependencies;return u.directiveDefs=so(d,!1),u.pipeDefs=so(d,!0),u})}function zl(o){return _n(o)||dr(o)}function nc(o){return null!==o}function ql(o){return re(()=>({type:o.type,bootstrap:o.bootstrap||je,declarations:o.declarations||je,imports:o.imports||je,exports:o.exports||je,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function Ba(o,a){if(null==o)return Se;const u={};for(const d in o)if(o.hasOwnProperty(d)){let f=o[d],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),u[f]=d,a&&(a[f]=g)}return u}function Rd(o){return re(()=>{const a=$r(o);return ic(a),a})}function rc(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function _n(o){return o[Vt]||null}function dr(o){return o[qt]||null}function Hr(o){return o[dn]||null}function Ii(o){const a=_n(o)||dr(o)||Hr(o);return null!==a&&a.standalone}function gi(o,a){const u=o[An]||null;if(!u&&!0===a)throw new Error(`Type ${me(o)} does not have '\u0275mod' property.`);return u}function $r(o){const a={};return{type:o.type,providersResolver:null,factory:null,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:a,exportAs:o.exportAs||null,standalone:!0===o.standalone,selectors:o.selectors||je,viewQuery:o.viewQuery||null,features:o.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ba(o.inputs,a),outputs:Ba(o.outputs)}}function ic(o){o.features?.forEach(a=>a(o))}function so(o,a){if(!o)return null;const u=a?Hr:zl;return()=>("function"==typeof o?o():o).map(d=>u(d)).filter(nc)}const vs=0,gt=1,Jt=2,Pn=3,mi=4,Fs=5,xn=6,Ls=7,rr=8,Qn=9,sc=10,Kt=11,Kl=12,oo=13,Ua=14,No=15,ri=16,ao=17,bs=18,Ir=19,Wr=20,xf=21,$t=22,Va=1,Od=2,Bs=7,ws=8,lo=9,ii=10;function si(o){return Array.isArray(o)&&"object"==typeof o[Va]}function Or(o){return Array.isArray(o)&&!0===o[Va]}function oc(o){return 0!=(4&o.flags)}function Zl(o){return o.componentOffset>-1}function Es(o){return 1==(1&o.flags)}function Ds(o){return!!o.template}function Ga(o){return 0!=(256&o[Jt])}function Vi(o,a){return o.hasOwnProperty(nr)?o[nr]:null}class Jl{constructor(a,u,d){this.previousValue=a,this.currentValue=u,this.firstChange=d}isFirstChange(){return this.firstChange}}function Oo(){return Ha}function Ha(o){return o.type.prototype.ngOnChanges&&(o.setInput=$a),Mo}function Mo(){const o=Xl(this),a=o?.current;if(a){const u=o.previous;if(u===Se)o.previous=a;else for(let d in a)u[d]=a[d];o.current=null,this.ngOnChanges(a)}}function $a(o,a,u,d){const f=this.declaredInputs[u],g=Xl(o)||function lc(o,a){return o[Ql]=a}(o,{previous:Se,current:null}),v=g.current||(g.current={}),E=g.previous,I=E[f];v[f]=new Jl(I&&I.currentValue,a,E===Se),o[d]=a}Oo.ngInherit=!0;const Ql="__ngSimpleChanges__";function Xl(o){return o[Ql]||null}const Tn=function(o,a,u){};function ir(o){for(;Array.isArray(o);)o=o[vs];return o}function co(o,a){return ir(a[o])}function Mr(o,a){return ir(a[o.index])}function za(o,a){return o.data[a]}function ns(o,a){return o[a]}function xr(o,a){const u=a[o];return si(u)?u:u[vs]}function tu(o){return 64==(64&o[Jt])}function Vs(o,a){return null==a?null:o[a]}function ua(o){o[bs]=0}function hc(o,a){o[Fs]+=a;let u=o,d=o[Pn];for(;null!==d&&(1===a&&1===u[Fs]||-1===a&&0===u[Fs]);)d[Fs]+=a,u=d,d=d[Pn]}const Bt={lFrame:iv(null),bindingsEnabled:!0};function iu(){return Bt.bindingsEnabled}function Ge(){return Bt.lFrame.lView}function pn(){return Bt.lFrame.tView}function Fd(o){return Bt.lFrame.contextLView=o,o[rr]}function pc(o){return Bt.lFrame.contextLView=null,o}function Tr(){let o=gc();for(;null!==o&&64===o.type;)o=o.parent;return o}function gc(){return Bt.lFrame.currentTNode}function ca(){const o=Bt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}function Ti(o,a){const u=Bt.lFrame;u.currentTNode=o,u.isParent=a}function Ld(){return Bt.lFrame.isParent}function da(){Bt.lFrame.isParent=!1}function or(){const o=Bt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function Ci(){return Bt.lFrame.bindingIndex}function Za(){return Bt.lFrame.bindingIndex++}function Ts(o){const a=Bt.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,u}function ou(o){Bt.lFrame.inI18n=o}function Uf(o,a){const u=Bt.lFrame;u.bindingIndex=u.bindingRootIndex=o,Ja(a)}function Ja(o){Bt.lFrame.currentDirectiveIndex=o}function Vd(){return Bt.lFrame.currentQueryIndex}function au(o){Bt.lFrame.currentQueryIndex=o}function Cm(o){const a=o[gt];return 2===a.type?a.declTNode:1===a.type?o[xn]:null}function _c(o,a,u){if(u&_e.SkipSelf){let f=a,g=o;for(;!(f=f.parent,null!==f||u&_e.Host||(f=Cm(g),null===f||(g=g[No],10&f.type))););if(null===f)return!1;a=f,o=g}const d=Bt.lFrame=rv();return d.currentTNode=a,d.lView=o,!0}function Vf(o){const a=rv(),u=o[gt];Bt.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function rv(){const o=Bt.lFrame,a=null===o?null:o.child;return null===a?iv(o):a}function iv(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Gd(){const o=Bt.lFrame;return Bt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const sv=Gd;function Gf(){const o=Gd();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function kr(){return Bt.lFrame.selectedIndex}function Gi(o){Bt.lFrame.selectedIndex=o}function jn(){const o=Bt.lFrame;return za(o.tView,o.selectedIndex)}function Qa(o,a){for(let u=a.directiveStart,d=a.directiveEnd;u<d;u++){const g=o.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:M}=g;v&&(o.contentHooks??(o.contentHooks=[])).push(-u,v),E&&((o.contentHooks??(o.contentHooks=[])).push(u,E),(o.contentCheckHooks??(o.contentCheckHooks=[])).push(u,E)),I&&(o.viewHooks??(o.viewHooks=[])).push(-u,I),A&&((o.viewHooks??(o.viewHooks=[])).push(u,A),(o.viewCheckHooks??(o.viewCheckHooks=[])).push(u,A)),null!=M&&(o.destroyHooks??(o.destroyHooks=[])).push(u,M)}}function fa(o,a,u){pa(o,a,3,u)}function xo(o,a,u,d){(3&o[Jt])===u&&pa(o,a,u,d)}function Xa(o,a){let u=o[Jt];(3&u)===a&&(u&=2047,u+=1,o[Jt]=u)}function pa(o,a,u,d){const g=d??-1,v=a.length-1;let E=0;for(let I=void 0!==d?65535&o[bs]:0;I<v;I++)if("number"==typeof a[I+1]){if(E=a[I],null!=d&&E>=d)break}else a[I]<0&&(o[bs]+=65536),(E<g||-1==g)&&($f(o,u,a,I),o[bs]=(4294901760&o[bs])+I+2),I++}function $f(o,a,u,d){const f=u[d]<0,g=u[d+1],E=o[f?-u[d]:u[d]];if(f){if(o[Jt]>>11<o[bs]>>16&&(3&o[Jt])===a){o[Jt]+=2048,Tn(4,E,g);try{g.call(E)}finally{Tn(5,E,g)}}}else{Tn(4,E,g);try{g.call(E)}finally{Tn(5,E,g)}}}const ho=-1;class Cr{constructor(a,u,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=d}}function fo(o,a,u){let d=0;for(;d<u.length;){const f=u[d];if("number"==typeof f){if(0!==f)break;d++;const g=u[d++],v=u[d++],E=u[d++];o.setAttribute(a,v,E,g)}else{const g=f,v=u[++d];po(g)?o.setProperty(a,g,v):o.setAttribute(a,g,v),d++}}return d}function ko(o){return 3===o||4===o||6===o}function po(o){return 64===o.charCodeAt(0)}function Po(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let u=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?u=f:0===u||vc(o,u,f,null,-1===u||2===u?a[++d]:null)}}return o}function vc(o,a,u,d,f){let g=0,v=o.length;if(-1===a)v=-1;else for(;g<o.length;){const E=o[g++];if("number"==typeof E){if(E===a){v=-1;break}if(E>a){v=g-1;break}}}for(;g<o.length;){const E=o[g];if("number"==typeof E)break;if(E===u){if(null===d)return void(null!==f&&(o[g+1]=f));if(d===o[g+1])return void(o[g+2]=f)}g++,null!==d&&g++,null!==f&&g++}-1!==v&&(o.splice(v,0,a),g=v+1),o.splice(g++,0,u),null!==d&&o.splice(g++,0,d),null!==f&&o.splice(g++,0,f)}function uu(o){return o!==ho}function ga(o){return 32767&o}function Fo(o,a){let u=function cu(o){return o>>16}(o),d=a;for(;u>0;)d=d[No],u--;return d}let go=!0;function Gs(o){const a=go;return go=o,a}const Lo=255,du=5;let Bo=0;const ji={};function mo(o,a){const u=bc(o,a);if(-1!==u)return u;const d=a[gt];d.firstCreatePass&&(o.injectorIndex=a.length,nl(d.data,o),nl(a,null),nl(d.blueprint,null));const f=hu(o,a),g=o.injectorIndex;if(uu(f)){const v=ga(f),E=Fo(f,a),I=E[gt].data;for(let A=0;A<8;A++)a[g+A]=E[v+A]|I[v+A]}return a[g+8]=f,g}function nl(o,a){o.push(0,0,0,0,0,0,0,0,a)}function bc(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function hu(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,d=null,f=a;for(;null!==f;){if(d=Dc(f),null===d)return ho;if(u++,f=f[No],-1!==d.injectorIndex)return d.injectorIndex|u<<16}return ho}function Uo(o,a,u){!function tl(o,a,u){let d;"string"==typeof u?d=u.charCodeAt(0)||0:u.hasOwnProperty(ni)&&(d=u[ni]),null==d&&(d=u[ni]=Bo++);const f=d&Lo;a.data[o+(f>>du)]|=1<<f}(o,a,u)}function rl(o,a,u){if(u&_e.Optional||void 0!==o)return o;et()}function zd(o,a,u,d){if(u&_e.Optional&&void 0===d&&(d=null),!(u&(_e.Self|_e.Host))){const f=o[Qn],g=Ft(void 0);try{return f?f.get(a,d,u&_e.Optional):Ut(a,d,u&_e.Optional)}finally{Ft(g)}}return rl(d,0,u)}function Hi(o,a,u,d=_e.Default,f){if(null!==o){if(1024&a[Jt]){const v=function Kd(o,a,u,d,f){let g=o,v=a;for(;null!==g&&null!==v&&1024&v[Jt]&&!(256&v[Jt]);){const E=wc(g,v,u,d|_e.Self,ji);if(E!==ji)return E;let I=g.parent;if(!I){const A=v[xf];if(A){const M=A.get(u,ji,d);if(M!==ji)return M}I=Dc(v),v=v[No]}g=I}return f}(o,a,u,d,ji);if(v!==ji)return v}const g=wc(o,a,u,d,ji);if(g!==ji)return g}return zd(a,u,d,f)}function wc(o,a,u,d,f){const g=function Ec(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(ni)?o[ni]:void 0;return"number"==typeof a?a>=0?a&Lo:Zf:a}(u);if("function"==typeof g){if(!_c(a,o,d))return d&_e.Host?rl(f,0,d):zd(a,u,d,f);try{const v=g(d);if(null!=v||d&_e.Optional)return v;et()}finally{sv()}}else if("number"==typeof g){let v=null,E=bc(o,a),I=ho,A=d&_e.Host?a[ri][xn]:null;for((-1===E||d&_e.SkipSelf)&&(I=-1===E?hu(o,a):a[E+8],I!==ho&&fu(d,!1)?(v=a[gt],E=ga(I),a=Fo(I,a)):E=-1);-1!==E;){const M=a[gt];if($i(g,E,M.data)){const B=il(E,a,u,v,d,A);if(B!==ji)return B}I=a[E+8],I!==ho&&fu(d,a[gt].data[E+8]===A)&&$i(g,E,a)?(v=M,E=ga(I),a=Fo(I,a)):E=-1}}return f}function il(o,a,u,d,f,g){const v=a[gt],E=v.data[o+8],M=Vo(E,v,u,null==d?Zl(E)&&go:d!=v&&0!=(3&E.type),f&_e.Host&&g===E);return null!==M?Go(a,v,M,E):ji}function Vo(o,a,u,d,f){const g=o.providerIndexes,v=a.data,E=1048575&g,I=o.directiveStart,M=g>>20,J=f?E+M:o.directiveEnd;for(let le=d?E:E+M;le<J;le++){const Ne=v[le];if(le<I&&u===Ne||le>=I&&Ne.type===u)return le}if(f){const le=v[I];if(le&&Ds(le)&&le.type===u)return I}return null}function Go(o,a,u,d){let f=o[u];const g=a.data;if(function Wf(o){return o instanceof Cr}(f)){const v=f;v.resolving&&function Ve(o,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Ee(-200,`Circular dependency in DI detected for ${o}${u}`)}(function He(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():Oe(o)}(g[u]));const E=Gs(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?Ft(v.injectImpl):null;_c(o,d,_e.Default);try{f=o[u]=v.factory(void 0,g,o,d),a.firstCreatePass&&u>=d.directiveStart&&function $d(o,a,u){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:g}=a.type.prototype;if(d){const v=Ha(a);(u.preOrderHooks??(u.preOrderHooks=[])).push(o,v),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(o,v)}f&&(u.preOrderHooks??(u.preOrderHooks=[])).push(0-o,f),g&&((u.preOrderHooks??(u.preOrderHooks=[])).push(o,g),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(o,g))}(u,g[u],a)}finally{null!==I&&Ft(I),Gs(E),v.resolving=!1,sv()}}return f}function $i(o,a,u){return!!(u[a+(o>>du)]&1<<o)}function fu(o,a){return!(o&_e.Self||o&_e.Host&&a)}class sl{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,d){return Hi(this._tNode,this._lView,a,Fe(d),u)}}function Zf(){return new sl(Tr(),Ge())}function ol(o){return re(()=>{const a=o.prototype.constructor,u=a[nr]||qd(a),d=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==d;){const g=f[nr]||qd(f);if(g&&g!==u)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function qd(o){return Ye(o)?()=>{const a=qd(ee(o));return a&&a()}:Vi(o)}function Dc(o){const a=o[gt],u=a.type;return 2===u?a.declTNode:1===u?o[xn]:null}function ma(o){return function Kf(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const d=u.length;let f=0;for(;f<d;){const g=u[f];if(ko(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<d&&"string"==typeof u[f];)f++;else{if(g===a)return u[f+1];f+=2}}}return null}(Tr(),o)}const ll="__parameters__";function js(o,a,u){return re(()=>{const d=function Zd(o){return function(...u){if(o){const d=o(...u);for(const f in d)this[f]=d[f]}}}(a);function f(...g){if(this instanceof f)return d.apply(this,g),this;const v=new f(...g);return E.annotation=v,E;function E(I,A,M){const B=I.hasOwnProperty(ll)?I[ll]:Object.defineProperty(I,ll,{value:[]})[ll];for(;B.length<=M;)B.push(null);return(B[M]=B[M]||[]).push(v),I}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class Fn{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=pt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function _o(o,a){o.forEach(u=>Array.isArray(u)?_o(u,a):a(u))}function Tc(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function Ho(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function _a(o,a){const u=[];for(let d=0;d<o;d++)u.push(a);return u}function Qt(o,a,u){let d=_t(o,a);return d>=0?o[1|d]=u:(d=~d,function th(o,a,u,d){let f=o.length;if(f==a)o.push(u,d);else if(1===f)o.push(d,o[0]),o[0]=u;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=u,o[a+1]=d}}(o,d,a,u)),d}function vr(o,a){const u=_t(o,a);if(u>=0)return o[1|u]}function _t(o,a){return function ar(o,a,u){let d=0,f=o.length>>u;for(;f!==d;){const g=d+(f-d>>1),v=o[g<<u];if(a===v)return g<<u;v>a?f=g:d=g+1}return~(f<<u)}(o,a,1)}const T=Ot(js("Optional"),8),O=Ot(js("SkipSelf"),4);var Wi=(()=>((Wi=Wi||{})[Wi.Important=1]="Important",Wi[Wi.DashCase=2]="DashCase",Wi))();const lv=/^>|^->|<!--|-->|--!>|<!-$/g,wu=/(<|>)/,op="\u200b$1\u200b";const zi=new Map;let km=0;const rh="__ngContext__";function Si(o,a){si(a)?(o[rh]=a[Wr],function Pm(o){zi.set(o[Wr],o)}(a)):o[rh]=a}let kn;function qi(o,a){return kn(o,a)}function zs(o){const a=o[Pn];return Or(a)?a[Pn]:a}function pl(o){return Du(o[oo])}function sh(o){return Du(o[mi])}function Du(o){for(;null!==o&&!Or(o);)o=o[mi];return o}function yo(o,a,u,d,f){if(null!=d){let g,v=!1;Or(d)?g=d:si(d)&&(v=!0,d=d[vs]);const E=ir(d);0===o&&null!==u?null==f?Yw(a,u,E):Iu(a,u,E,f||null,!0):1===o&&null!==u?Iu(a,u,E,f||null,!0):2===o?yp(a,E,v):3===o&&a.destroyNode(E),null!=g&&function wa(o,a,u,d,f){const g=u[Bs];g!==ir(u)&&yo(a,o,d,g,f);for(let E=ii;E<u.length;E++){const I=u[E];uh(I[gt],I,o,a,d,g)}}(a,o,g,u,f)}}function Nc(o,a){return o.createText(a)}function Rc(o,a,u){o.setValue(a,u)}function Fm(o,a){return o.createComment(function xm(o){return o.replace(lv,a=>a.replace(wu,op))}(a))}function dp(o,a,u){return o.createElement(a,u)}function Zw(o,a){const u=o[lo],d=u.indexOf(a),f=a[Pn];512&a[Jt]&&(a[Jt]&=-513,hc(f,-1)),u.splice(d,1)}function fp(o,a){if(o.length<=ii)return;const u=ii+a,d=o[u];if(d){const f=d[ao];null!==f&&f!==o&&Zw(f,d),a>0&&(o[u-1][mi]=d[mi]);const g=Ho(o,ii+a);!function hp(o,a){uh(o,a,a[Kt],2,null,null),a[vs]=null,a[xn]=null}(d[gt],d);const v=g[Ir];null!==v&&v.detachView(g[gt]),d[Pn]=null,d[mi]=null,d[Jt]&=-65}return d}function pp(o,a){if(!(128&a[Jt])){const u=a[Kt];u.destroyNode&&uh(o,a,u,3,null,null),function DS(o){let a=o[oo];if(!a)return uv(o[gt],o);for(;a;){let u=null;if(si(a))u=a[oo];else{const d=a[ii];d&&(u=d)}if(!u){for(;a&&!a[mi]&&a!==o;)si(a)&&uv(a[gt],a),a=a[Pn];null===a&&(a=o),si(a)&&uv(a[gt],a),u=a&&a[mi]}a=u}}(a)}}function uv(o,a){if(!(128&a[Jt])){a[Jt]&=-65,a[Jt]|=128,function cv(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let d=0;d<u.length;d+=2){const f=a[u[d]];if(!(f instanceof Cr)){const g=u[d+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const E=f[g[v]],I=g[v+1];Tn(4,E,I);try{I.call(E)}finally{Tn(5,E,I)}}else{Tn(4,f,g);try{g.call(f)}finally{Tn(5,f,g)}}}}}(o,a),function Oc(o,a){const u=o.cleanup,d=a[Ls];let f=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const v=u[g+3];v>=0?d[f=v]():d[f=-v].unsubscribe(),g+=2}else{const v=d[f=u[g+1]];u[g].call(v)}if(null!==d){for(let g=f+1;g<d.length;g++)(0,d[g])();a[Ls]=null}}(o,a),1===a[gt].type&&a[Kt].destroy();const u=a[ao];if(null!==u&&Or(a[Pn])){u!==a[Pn]&&Zw(u,a);const d=a[Ir];null!==d&&d.detachView(o)}!function li(o){zi.delete(o[Wr])}(a)}}function CS(o,a,u){return dv(o,a.parent,u)}function dv(o,a,u){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return u[vs];{const{componentOffset:f}=d;if(f>-1){const{encapsulation:g}=o.data[d.directiveStart+f];if(g===W.None||g===W.Emulated)return null}return Mr(d,u)}}function Iu(o,a,u,d,f){o.insertBefore(a,u,d,f)}function Yw(o,a,u){o.appendChild(a,u)}function ah(o,a,u,d,f){null!==d?Iu(o,a,u,d,f):Yw(o,a,u)}function _p(o,a){return o.parentNode(a)}function hv(o,a,u){return Qw(o,a,u)}function Mc(o,a,u){return 40&o.type?Mr(o,u):null}let fv,dh,vv,Bm,Qw=Mc;function pv(o,a){Qw=o,fv=a}function Lm(o,a,u,d){const f=CS(o,d,a),g=a[Kt],E=hv(d.parent||a[xn],d,a);if(null!=f)if(Array.isArray(u))for(let I=0;I<u.length;I++)ah(g,f,u[I],E,!1);else ah(g,f,u,E,!1);void 0!==fv&&fv(g,d,a,u,f)}function lh(o,a){if(null!==a){const u=a.type;if(3&u)return Mr(a,o);if(4&u)return gv(-1,o[a.index]);if(8&u){const d=a.child;if(null!==d)return lh(o,d);{const f=o[a.index];return Or(f)?gv(-1,f):ir(f)}}if(32&u)return qi(a,o)()||ir(o[a.index]);{const d=xc(o,a);return null!==d?Array.isArray(d)?d[0]:lh(zs(o[ri]),d):lh(o,a.next)}}return null}function xc(o,a){return null!==a?o[ri][xn].projection[a.projection]:null}function gv(o,a){const u=ii+o+1;if(u<a.length){const d=a[u],f=d[gt].firstChild;if(null!==f)return lh(d,f)}return a[Bs]}function yp(o,a,u){const d=_p(o,a);d&&function gp(o,a,u,d){o.removeChild(a,u,d)}(o,d,a,u)}function mv(o,a,u,d,f,g,v){for(;null!=u;){const E=d[u.index],I=u.type;if(v&&0===a&&(E&&Si(ir(E),d),u.flags|=2),32!=(32&u.flags))if(8&I)mv(o,a,u.child,d,f,g,!1),yo(a,o,f,E,g);else if(32&I){const A=qi(u,d);let M;for(;M=A();)yo(a,o,f,M,g);yo(a,o,f,E,g)}else 16&I?ch(o,a,d,u,f,g):yo(a,o,f,E,g);u=v?u.projectionNext:u.next}}function uh(o,a,u,d,f,g){mv(u,d,o.firstChild,a,f,g,!1)}function ch(o,a,u,d,f,g){const v=u[ri],I=v[xn].projection[d.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)yo(a,o,f,I[A],g);else mv(o,a,I,v[Pn],f,g,!0)}function vp(o,a,u){""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u)}function bp(o,a,u){const{mergedAttrs:d,classes:f,styles:g}=u;null!==d&&fo(o,a,d),null!==f&&vp(o,a,f),null!==g&&function kc(o,a,u){o.setAttribute(a,"style",u)}(o,a,g)}function hh(o){return function yv(){if(void 0===dh&&(dh=null,Mt.trustedTypes))try{dh=Mt.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return dh}()?.createHTML(o)||o}function RS(o){vv=o}function nE(o){return function bv(){if(void 0===Bm&&(Bm=null,Mt.trustedTypes))try{Bm=Mt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Bm}()?.createScriptURL(o)||o}class rE{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yt})`}}function Ki(o){return o instanceof rE?o.changingThisBreaksApplicationSecurity:o}function Ea(o,a){const u=function sE(o){return o instanceof rE&&o.getTypeName()||null}(o);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see ${yt})`)}return u===a}class oE{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(hh(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch{return null}}}class Iv{constructor(a){this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(a){const u=this.inertDocument.createElement("template");return u.innerHTML=hh(a),u}}const Tv=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Dp(o){return(o=String(o)).match(Tv)?o:"unsafe:"+o}function gl(o){const a={};for(const u of o.split(","))a[u]=!0;return a}function ml(...o){const a={};for(const u of o)for(const d in u)u.hasOwnProperty(d)&&(a[d]=!0);return a}const lE=gl("area,br,col,hr,img,wbr"),uE=gl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Um=gl("rp,rt"),Vm=ml(lE,ml(uE,gl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ml(Um,gl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ml(Um,uE)),Cv=gl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),jm=ml(Cv,gl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),gl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var Yr=(()=>((Yr=Yr||{})[Yr.NONE=0]="NONE",Yr[Yr.HTML=1]="HTML",Yr[Yr.STYLE=2]="STYLE",Yr[Yr.SCRIPT=3]="SCRIPT",Yr[Yr.URL=4]="URL",Yr[Yr.RESOURCE_URL=5]="RESOURCE_URL",Yr))();function Ip(o){const a=Cp();return a?a.sanitize(Yr.URL,o)||"":Ea(o,"URL")?Ki(o):Dp(Oe(o))}function qs(o){const a=Cp();if(a)return nE(a.sanitize(Yr.RESOURCE_URL,o)||"");if(Ea(o,"ResourceURL"))return nE(Ki(o));throw new Ee(904,!1)}function Ov(o,a,u){return function $S(o,a){return"src"===a&&("embed"===o||"frame"===o||"iframe"===o||"media"===o||"script"===o)||"href"===a&&("base"===o||"link"===o)?qs:Ip}(a,u)(o)}function Cp(){const o=Ge();return o&&o[Kl]}const Tu=new Fn("ENVIRONMENT_INITIALIZER"),fh=new Fn("INJECTOR",-1),fE=new Fn("INJECTOR_DEF_TYPES");class pE{get(a,u=bn){if(u===bn){const d=new Error(`NullInjectorError: No provider for ${me(a)}!`);throw d.name="NullInjectorError",d}return u}}function Sp(...o){return{\u0275providers:gE(0,o),\u0275fromNgModule:!0}}function gE(o,...a){const u=[],d=new Set;let f;return _o(a,g=>{const v=g;xv(v,u,[],d)&&(f||(f=[]),f.push(v))}),void 0!==f&&mE(f,u),u}function mE(o,a){for(let u=0;u<o.length;u++){const{providers:f}=o[u];kv(f,g=>{a.push(g)})}}function xv(o,a,u,d){if(!(o=ee(o)))return!1;let f=null,g=zn(o);const v=!g&&_n(o);if(g||v){if(v&&!v.standalone)return!1;f=o}else{const I=o.ngModule;if(g=zn(I),!g)return!1;f=I}const E=d.has(f);if(v){if(E)return!1;if(d.add(f),v.dependencies){const I="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const A of I)xv(A,a,u,d)}}else{if(!g)return!1;{if(null!=g.imports&&!E){let A;d.add(f);try{_o(g.imports,M=>{xv(M,a,u,d)&&(A||(A=[]),A.push(M))})}finally{}void 0!==A&&mE(A,a)}if(!E){const A=Vi(f)||(()=>new f);a.push({provide:f,useFactory:A,deps:je},{provide:fE,useValue:f,multi:!0},{provide:Tu,useValue:()=>U(f),multi:!0})}const I=g.providers;null==I||E||kv(I,M=>{a.push(M)})}}return f!==o&&void 0!==o.providers}function kv(o,a){for(let u of o)Be(u)&&(u=u.\u0275providers),Array.isArray(u)?kv(u,a):a(u)}const WS=ce({provide:String,useValue:ce});function _E(o){return null!==o&&"object"==typeof o&&WS in o}function Da(o){return"function"==typeof o}const Pv=new Fn("Set Injector scope."),Wm={},zS={};let Fv;function zm(){return void 0===Fv&&(Fv=new pE),Fv}class Pc{}class vE extends Pc{get destroyed(){return this._destroyed}constructor(a,u,d,f){super(),this.parent=u,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Uv(a,v=>this.processProvider(v)),this.records.set(fh,Cu(void 0,this)),f.has("environment")&&this.records.set(Pc,Cu(void 0,this));const g=this.records.get(Pv);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(fE.multi,je,_e.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const u=Q(this),d=Ft(void 0);try{return a()}finally{Q(u),Ft(d)}}get(a,u=bn,d=_e.Default){this.assertNotDestroyed(),d=Fe(d);const f=Q(this),g=Ft(void 0);try{if(!(d&_e.SkipSelf)){let E=this.records.get(a);if(void 0===E){const I=function qm(o){return"function"==typeof o||"object"==typeof o&&o instanceof Fn}(a)&&On(a);E=I&&this.injectableDefInScope(I)?Cu(Lv(a),Wm):null,this.records.set(a,E)}if(null!=E)return this.hydrate(a,E)}return(d&_e.Self?zm():this.parent).get(a,u=d&_e.Optional&&u===bn?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[fn]=v[fn]||[]).unshift(me(a)),f)throw v;return function In(o,a,u,d){const f=o[fn];throw a[pi]&&f.unshift(a[pi]),o.message=function Dr(o,a,u,d=null){o=o&&"\n"===o.charAt(0)&&o.charAt(1)==zt?o.slice(2):o;let f=me(a);if(Array.isArray(a))f=a.map(me).join(" -> ");else if("object"==typeof a){let g=[];for(let v in a)if(a.hasOwnProperty(v)){let E=a[v];g.push(v+":"+("string"==typeof E?JSON.stringify(E):me(E)))}f=`{${g.join(", ")}}`}return`${u}${d?"("+d+")":""}[${f}]: ${o.replace(fi,"\n  ")}`}("\n"+o.message,f,u,d),o[Gn]=f,o[fn]=null,o}(v,a,"R3InjectorError",this.source)}throw v}finally{Ft(g),Q(f)}}resolveInjectorInitializers(){const a=Q(this),u=Ft(void 0);try{const d=this.get(Tu.multi,je,_e.Self);for(const f of d)f()}finally{Q(a),Ft(u)}}toString(){const a=[],u=this.records;for(const d of u.keys())a.push(me(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ee(205,!1)}processProvider(a){let u=Da(a=ee(a))?a:ee(a&&a.provide);const d=function bE(o){return _E(o)?Cu(void 0,o.useValue):Cu(wE(o),Wm)}(a);if(Da(a)||!0!==a.multi)this.records.get(u);else{let f=this.records.get(u);f||(f=Cu(void 0,Wm,!0),f.factory=()=>rt(f.multi),this.records.set(u,f)),u=a,f.multi.push(a)}this.records.set(u,d)}hydrate(a,u){return u.value===Wm&&(u.value=zS,u.value=u.factory()),"object"==typeof u.value&&u.value&&function Bv(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=ee(a.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Lv(o){const a=On(o),u=null!==a?a.factory:Vi(o);if(null!==u)return u;if(o instanceof Fn)throw new Ee(204,!1);if(o instanceof Function)return function qS(o){const a=o.length;if(a>0)throw _a(a,"?"),new Ee(204,!1);const u=function yr(o){const a=o&&(o[se]||o[de]);return a?(function Li(o){if(o.hasOwnProperty("name"))return o.name;(""+o).match(/^function\s*([^\s(]+)/)}(o),a):null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new Ee(204,!1)}function wE(o,a,u){let d;if(Da(o)){const f=ee(o);return Vi(f)||Lv(f)}if(_E(o))d=()=>ee(o.useValue);else if(function $m(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...rt(o.deps||[]));else if(function yE(o){return!(!o||!o.useExisting)}(o))d=()=>U(ee(o.useExisting));else{const f=ee(o&&(o.useClass||o.provide));if(!function EE(o){return!!o.deps}(o))return Vi(f)||Lv(f);d=()=>new f(...rt(o.deps))}return d}function Cu(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function Uv(o,a){for(const u of o)Array.isArray(u)?Uv(u,a):u&&Be(u)?Uv(u.\u0275providers,a):a(u)}class KS{}class DE{}class IE{resolveComponentFactory(a){throw function ZS(o){const a=Error(`No component factory found for ${me(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let Su=(()=>{class o{}return o.NULL=new IE,o})();function Km(){return Fc(Tr(),Ge())}function Fc(o,a){return new _l(Mr(o,a))}let _l=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=Km,o})();function TE(o){return o instanceof _l?o.nativeElement:o}class CE{}let JS=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function QS(){const o=Ge(),u=xr(Tr().index,o);return(si(u)?u:o)[Kt]}(),o})(),XS=(()=>{class o{}return o.\u0275prov=pt({token:o,providedIn:"root",factory:()=>null}),o})();class SE{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Vv=new SE("15.2.7"),Gv={},jv="ngOriginalError";function Hv(o){return o[jv]}class Np{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a);this._console.error("ERROR",a),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&Hv(a);for(;u&&Hv(u);)u=Hv(u);return u||null}}function Ia(o){return o instanceof Function?o():o}function $v(o,a,u){let d=o.length;for(;;){const f=o.indexOf(a,u);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const g=a.length;if(f+g===d||o.charCodeAt(f+g)<=32)return f}u=f+1}}const Zm="ng-template";function ME(o,a,u){let d=0,f=!0;for(;d<o.length;){let g=o[d++];if("string"==typeof g&&f){const v=o[d++];if(u&&"class"===g&&-1!==$v(v.toLowerCase(),a,0))return!0}else{if(1===g){for(;d<o.length&&"string"==typeof(g=o[d++]);)if(g.toLowerCase()===a)return!0;return!1}"number"==typeof g&&(f=!1)}}return!1}function Bc(o){return 4===o.type&&o.value!==Zm}function Wv(o,a,u){return a===(4!==o.type||u?o.value:Zm)}function o1(o,a,u){let d=4;const f=o.attrs||[],g=function kE(o){for(let a=0;a<o.length;a++)if(ko(o[a]))return a;return o.length}(f);let v=!1;for(let E=0;E<a.length;E++){const I=a[E];if("number"!=typeof I){if(!v)if(4&d){if(d=2|1&d,""!==I&&!Wv(o,I,u)||""===I&&1===a.length){if(vo(d))return!1;v=!0}}else{const A=8&d?I:a[++E];if(8&d&&null!==o.attrs){if(!ME(o.attrs,A,u)){if(vo(d))return!1;v=!0}continue}const B=Ym(8&d?"class":I,f,Bc(o),u);if(-1===B){if(vo(d))return!1;v=!0;continue}if(""!==A){let J;J=B>g?"":f[B+1].toLowerCase();const le=8&d?J:null;if(le&&-1!==$v(le,A,0)||2&d&&A!==J){if(vo(d))return!1;v=!0}}}}else{if(!v&&!vo(d)&&!vo(I))return!1;if(v&&vo(I))continue;v=!1,d=I|1&d}}return vo(d)||v}function vo(o){return 0==(1&o)}function Ym(o,a,u,d){if(null===a)return-1;let f=0;if(d||!u){let g=!1;for(;f<a.length;){const v=a[f];if(v===o)return f;if(3===v||6===v)g=!0;else{if(1===v||2===v){let E=a[++f];for(;"string"==typeof E;)E=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=g?1:2}return-1}return function a1(o,a){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const d=o[u];if("number"==typeof d)return-1;if(d===a)return u;u++}return-1}(a,o)}function Rp(o,a,u=!1){for(let d=0;d<a.length;d++)if(o1(o,a[d],u))return!0;return!1}function l1(o,a){e:for(let u=0;u<a.length;u++){const d=a[u];if(o.length===d.length){for(let f=0;f<o.length;f++)if(o[f]!==d[f])continue e;return!0}}return!1}function PE(o,a){return o?":not("+a.trim()+")":a}function u1(o){let a=o[0],u=1,d=2,f="",g=!1;for(;u<o.length;){let v=o[u];if("string"==typeof v)if(2&d){const E=o[++u];f+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&d?f+="."+v:4&d&&(f+=" "+v);else""!==f&&!vo(v)&&(a+=PE(g,f),f=""),d=v,g=g||!vo(d);u++}return""!==f&&(a+=PE(g,f)),a}const nn={};function FE(o){Qm(pn(),Ge(),kr()+o,!1)}function Qm(o,a,u,d){if(!d)if(3==(3&a[Jt])){const g=o.preOrderCheckHooks;null!==g&&fa(a,g,u)}else{const g=o.preOrderHooks;null!==g&&xo(a,g,0,u)}Gi(u)}function zv(o,a=null,u=null,d){const f=p1(o,a,u,d);return f.resolveInjectorInitializers(),f}function p1(o,a=null,u=null,d,f=new Set){const g=[u||je,Sp(o)];return d=d||("object"==typeof o?void 0:me(o)),new vE(g,a||zm(),d||null,f)}let gh=(()=>{class o{static create(u,d){if(Array.isArray(u))return zv({name:""},d,u,"");{const f=u.name??"";return zv({name:f},u.parent,u.providers,f)}}}return o.THROW_IF_NOT_FOUND=bn,o.NULL=new pE,o.\u0275prov=pt({token:o,providedIn:"any",factory:()=>U(fh)}),o.__NG_ELEMENT_ID__=-1,o})();function _h(o,a=_e.Default){const u=Ge();return null===u?U(o,a):Hi(Tr(),u,ee(o),a)}function WE(){throw new Error("invalid")}function zE(o,a){const u=o.contentQueries;if(null!==u)for(let d=0;d<u.length;d+=2){const g=u[d+1];if(-1!==g){const v=o.data[g];au(u[d]),v.contentQueries(2,a[g],g)}}}function Yv(o,a,u,d,f,g,v,E,I,A,M){const B=a.blueprint.slice();return B[vs]=f,B[Jt]=76|d,(null!==M||o&&1024&o[Jt])&&(B[Jt]|=1024),ua(B),B[Pn]=B[No]=o,B[rr]=u,B[sc]=v||o&&o[sc],B[Kt]=E||o&&o[Kt],B[Kl]=I||o&&o[Kl]||null,B[Qn]=A||o&&o[Qn]||null,B[xn]=g,B[Wr]=function ap(){return km++}(),B[xf]=M,B[ri]=2==a.type?o[ri]:B,B}function yh(o,a,u,d,f){let g=o.data[a];if(null===g)g=P(o,a,u,d,f),function Ya(){return Bt.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=u,g.value=d,g.attrs=f;const v=ca();g.injectorIndex=null===v?-1:v.injectorIndex}return Ti(g,!0),g}function P(o,a,u,d,f){const g=gc(),v=Ld(),I=o.data[a]=function I1(o,a,u,d,f,g){return{type:u,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,u,a,d,f);return null===o.firstChild&&(o.firstChild=I),null!==g&&(v?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I,I.prev=g)),I}function ui(o,a,u,d){if(0===u)return-1;const f=a.length;for(let g=0;g<u;g++)a.push(d),o.blueprint.push(d),o.data.push(null);return f}function Zs(o,a,u){Vf(a);try{const d=o.viewQuery;null!==d&&Nu(1,d,u);const f=o.template;null!==f&&vh(o,a,f,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&zE(o,a),o.staticViewQueries&&Nu(2,o.viewQuery,u);const g=o.components;null!==g&&function D1(o,a){for(let u=0;u<a.length;u++)nD(o,a[u])}(a,g)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{a[Jt]&=-5,Gf()}}function Cs(o,a,u,d){const f=a[Jt];if(128!=(128&f)){Vf(a);try{ua(a),function Ka(o){return Bt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&vh(o,a,u,2,d);const v=3==(3&f);if(v){const A=o.preOrderCheckHooks;null!==A&&fa(a,A,null)}else{const A=o.preOrderHooks;null!==A&&xo(a,A,0,null),Xa(a,0)}if(function eD(o){for(let a=pl(o);null!==a;a=sh(a)){if(!a[Od])continue;const u=a[lo];for(let d=0;d<u.length;d++){const f=u[d];512&f[Jt]||hc(f[Pn],1),f[Jt]|=512}}}(a),function ls(o){for(let a=pl(o);null!==a;a=sh(a))for(let u=ii;u<a.length;u++){const d=a[u],f=d[gt];tu(d)&&Cs(f,d,f.template,d[rr])}}(a),null!==o.contentQueries&&zE(o,a),v){const A=o.contentCheckHooks;null!==A&&fa(a,A)}else{const A=o.contentHooks;null!==A&&xo(a,A,1),Xa(a,1)}!function E1(o,a){const u=o.hostBindingOpCodes;if(null!==u)try{for(let d=0;d<u.length;d++){const f=u[d];if(f<0)Gi(~f);else{const g=f,v=u[++d],E=u[++d];Uf(v,g),E(2,a[g])}}}finally{Gi(-1)}}(o,a);const E=o.components;null!==E&&function qE(o,a){for(let u=0;u<a.length;u++)tD(o,a[u])}(a,E);const I=o.viewQuery;if(null!==I&&Nu(2,I,d),v){const A=o.viewCheckHooks;null!==A&&fa(a,A)}else{const A=o.viewHooks;null!==A&&xo(a,A,2),Xa(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[Jt]&=-41,512&a[Jt]&&(a[Jt]&=-513,hc(a[Pn],-1))}finally{Gf()}}}function vh(o,a,u,d,f){const g=kr(),v=2&d;try{Gi(-1),v&&a.length>$t&&Qm(o,a,$t,!1),Tn(v?2:0,f),u(d,f)}finally{Gi(g),Tn(v?3:1,f)}}function Cn(o,a,u){if(oc(a)){const f=a.directiveEnd;for(let g=a.directiveStart;g<f;g++){const v=o.data[g];v.contentQueries&&v.contentQueries(1,u[g],g)}}}function Pp(o,a,u){iu()&&(function Ai(o,a,u,d){const f=u.directiveStart,g=u.directiveEnd;Zl(u)&&function QE(o,a,u){const d=Mr(a,o),f=KE(u),g=o[sc],v=Vp(o,Yv(o,f,null,u.onPush?32:16,d,a,g,g.createRenderer(d,u),null,null,null));o[a.index]=v}(a,u,o.data[f+u.componentOffset]),o.firstCreatePass||mo(u,a),Si(d,a);const v=u.initialInputs;for(let E=f;E<g;E++){const I=o.data[E],A=Go(a,o,E,u);Si(A,a),null!==v&&XE(0,E-f,A,I,0,v),Ds(I)&&(xr(u.index,a)[rr]=Go(a,o,E,u))}}(o,a,u,Mr(u,a)),64==(64&u.flags)&&Bp(o,a,u))}function Vc(o,a,u=Mr){const d=a.localNames;if(null!==d){let f=a.index+1;for(let g=0;g<d.length;g+=2){const v=d[g+1],E=-1===v?u(a,o):o[v];o[f++]=E}}}function KE(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=Fr(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function Fr(o,a,u,d,f,g,v,E,I,A){const M=$t+d,B=M+f,J=function gx(o,a){const u=[];for(let d=0;d<a;d++)u.push(d<o?null:nn);return u}(M,B),le="function"==typeof A?A():A;return J[gt]={type:o,blueprint:J,template:u,queries:null,viewQuery:E,declTNode:a,data:J.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:le,incompleteFirstPass:!1}}function De(o,a,u,d){const f=r_(a);null===u?f.push(d):(f.push(u),o.firstCreatePass&&t0(o).push(d,f.length-1))}function Ta(o,a,u,d){for(let f in o)if(o.hasOwnProperty(f)){u=null===u?{}:u;const g=o[f];null===d?Dt(u,a,f,g):d.hasOwnProperty(f)&&Dt(u,a,d[f],g)}return u}function Dt(o,a,u,d){o.hasOwnProperty(u)?o[u].push(a,d):o[u]=[a,d]}function Zi(o,a,u,d,f,g,v,E){const I=Mr(a,u);let M,A=a.inputs;!E&&null!=A&&(M=A[d])?(Eh(o,u,M,d,f),Zl(a)&&function Xv(o,a){const u=xr(a,o);16&u[Jt]||(u[Jt]|=32)}(u,a.index)):3&a.type&&(d=function Xt(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),f=null!=v?v(f,a.value||"",d):f,g.setProperty(I,d,f))}function Lp(o,a,u,d){if(iu()){const f=null===d?null:{"":-1},g=function Au(o,a){const u=o.directiveRegistry;let d=null,f=null;if(u)for(let g=0;g<u.length;g++){const v=u[g];if(Rp(a,v.selectors,!1))if(d||(d=[]),Ds(v))if(null!==v.findHostDirectiveDefs){const E=[];f=f||new Map,v.findHostDirectiveDefs(v,E,f),d.unshift(...E,v),e0(o,a,E.length)}else d.unshift(v),e0(o,a,0);else f=f||new Map,v.findHostDirectiveDefs?.(v,d,f),d.push(v)}return null===d?null:[d,f]}(o,u);let v,E;null===g?v=E=null:[v,E]=g,null!==v&&ZE(o,a,u,v,f,E),f&&function S1(o,a,u){if(a){const d=o.localNames=[];for(let f=0;f<a.length;f+=2){const g=u[a[f+1]];if(null==g)throw new Ee(-301,!1);d.push(a[f],g)}}}(u,d,f)}u.mergedAttrs=Po(u.mergedAttrs,u.attrs)}function ZE(o,a,u,d,f,g){for(let A=0;A<d.length;A++)Uo(mo(u,a),o,d[A].type);!function JE(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}(u,o.data.length,d.length);for(let A=0;A<d.length;A++){const M=d[A];M.providersResolver&&M.providersResolver(M)}let v=!1,E=!1,I=ui(o,a,d.length,null);for(let A=0;A<d.length;A++){const M=d[A];u.mergedAttrs=Po(u.mergedAttrs,M.hostAttrs),A1(o,u,a,I,M),YE(I,M,f),null!==M.contentQueries&&(u.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(u.flags|=64);const B=M.type.prototype;!v&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((o.preOrderHooks??(o.preOrderHooks=[])).push(u.index),v=!0),!E&&(B.ngOnChanges||B.ngDoCheck)&&((o.preOrderCheckHooks??(o.preOrderCheckHooks=[])).push(u.index),E=!0),I++}!function Qv(o,a,u){const f=a.directiveEnd,g=o.data,v=a.attrs,E=[];let I=null,A=null;for(let M=a.directiveStart;M<f;M++){const B=g[M],J=u?u.get(B):null,Ne=J?J.outputs:null;I=Ta(B.inputs,M,I,J?J.inputs:null),A=Ta(B.outputs,M,A,Ne);const tt=null===I||null===v||Bc(a)?null:as(I,M,v);E.push(tt)}null!==I&&(I.hasOwnProperty("class")&&(a.flags|=8),I.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=E,a.inputs=I,a.outputs=A}(o,u,g)}function Bp(o,a,u){const d=u.directiveStart,f=u.directiveEnd,g=u.index,v=function ha(){return Bt.lFrame.currentDirectiveIndex}();try{Gi(g);for(let E=d;E<f;E++){const I=o.data[E],A=a[E];Ja(E),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&Ni(I,A)}}finally{Gi(-1),Ja(v)}}function Ni(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function e0(o,a,u){a.componentOffset=u,(o.components??(o.components=[])).push(a.index)}function YE(o,a,u){if(u){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)u[a.exportAs[d]]=o;Ds(a)&&(u[""]=o)}}function A1(o,a,u,d,f){o.data[d]=f;const g=f.factory||(f.factory=Vi(f.type)),v=new Cr(g,Ds(f),_h);o.blueprint[d]=v,u[d]=v,function T1(o,a,u,d,f){const g=f.hostBindings;if(g){let v=o.hostBindingOpCodes;null===v&&(v=o.hostBindingOpCodes=[]);const E=~a.index;(function C1(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(v)!=E&&v.push(E),v.push(u,d,g)}}(o,a,d,ui(o,u,f.hostVars,nn),f)}function bh(o,a,u,d,f,g,v){if(null==g)o.removeAttribute(a,f,u);else{const E=null==v?Oe(g):v(g,d||"",f);o.setAttribute(a,f,E,u)}}function XE(o,a,u,d,f,g){const v=g[a];if(null!==v){const E=d.setInput;for(let I=0;I<v.length;){const A=v[I++],M=v[I++],B=v[I++];null!==E?d.setInput(u,B,A,M):u[M]=B}}}function as(o,a,u){let d=null,f=0;for(;f<u.length;){const g=u[f];if(0!==g)if(5!==g){if("number"==typeof g)break;if(o.hasOwnProperty(g)){null===d&&(d=[]);const v=o[g];for(let E=0;E<v.length;E+=2)if(v[E]===a){d.push(g,v[E+1],u[f+1]);break}}f+=2}else f+=2;else f+=4}return d}function t_(o,a,u,d){return[o,!0,!1,a,null,0,d,u,null,null]}function tD(o,a){const u=xr(a,o);if(tu(u)){const d=u[gt];48&u[Jt]?Cs(d,u,d.template,u[rr]):u[Fs]>0&&Up(u)}}function Up(o){for(let d=pl(o);null!==d;d=sh(d))for(let f=ii;f<d.length;f++){const g=d[f];if(tu(g))if(512&g[Jt]){const v=g[gt];Cs(v,g,v.template,g[rr])}else g[Fs]>0&&Up(g)}const u=o[gt].components;if(null!==u)for(let d=0;d<u.length;d++){const f=xr(u[d],o);tu(f)&&f[Fs]>0&&Up(f)}}function nD(o,a){const u=xr(a,o),d=u[gt];(function rD(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])})(d,u),Zs(d,u,u[rr])}function Vp(o,a){return o[oo]?o[Ua][mi]=a:o[oo]=a,o[Ua]=a,a}function wh(o){for(;o;){o[Jt]|=32;const a=zs(o);if(Ga(o)&&!a)return o;o=a}return null}function n_(o,a,u,d=!0){const f=a[sc];f.begin&&f.begin();try{Cs(o,a,o.template,u)}catch(v){throw d&&n0(a,v),v}finally{f.end&&f.end()}}function Nu(o,a,u){au(0),a(o,u)}function r_(o){return o[Ls]||(o[Ls]=[])}function t0(o){return o.cleanup||(o.cleanup=[])}function n0(o,a){const u=o[Qn],d=u?u.get(Np,null):null;d&&d.handleError(a)}function Eh(o,a,u,d,f){for(let g=0;g<u.length;){const v=u[g++],E=u[g++],I=a[v],A=o.data[v];null!==A.setInput?A.setInput(I,f,d,E):I[E]=f}}function Dh(o,a,u){let d=u?o.styles:null,f=u?o.classes:null,g=0;if(null!==a)for(let v=0;v<a.length;v++){const E=a[v];"number"==typeof E?g=E:1==g?f=be(f,E):2==g&&(d=be(d,E+": "+a[++v]+";"))}u?o.styles=d:o.stylesWithoutHost=d,u?o.classes=f:o.classesWithoutHost=f}function Ih(o,a,u,d,f=!1){for(;null!==u;){const g=a[u.index];if(null!==g&&d.push(ir(g)),Or(g))for(let E=ii;E<g.length;E++){const I=g[E],A=I[gt].firstChild;null!==A&&Ih(I[gt],I,A,d)}const v=u.type;if(8&v)Ih(o,a,u.child,d);else if(32&v){const E=qi(u,a);let I;for(;I=E();)d.push(I)}else if(16&v){const E=xc(a,u);if(Array.isArray(E))d.push(...E);else{const I=zs(a[ri]);Ih(I[gt],I,E,d,!0)}}u=f?u.projectionNext:u.next}return d}class Gp{get rootNodes(){const a=this._lView,u=a[gt];return Ih(u,a,u.firstChild,[])}constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[rr]}set context(a){this._lView[rr]=a}get destroyed(){return 128==(128&this._lView[Jt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[Pn];if(Or(a)){const u=a[ws],d=u?u.indexOf(this):-1;d>-1&&(fp(a,d),Ho(u,d))}this._attachedToViewContainer=!1}pp(this._lView[gt],this._lView)}onDestroy(a){De(this._lView[gt],this._lView,null,a)}markForCheck(){wh(this._cdRefInjectingView||this._lView)}detach(){this._lView[Jt]&=-65}reattach(){this._lView[Jt]|=64}detectChanges(){n_(this._lView[gt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ES(o,a){uh(o,a,a[Kt],2,null,null)}(this._lView[gt],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Ee(902,!1);this._appRef=a}}class R1 extends Gp{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;n_(a[gt],a,a[rr],!1)}checkNoChanges(){}get context(){return null}}class i_ extends Su{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=_n(a);return new Jr(u,this.ngModule)}}function r0(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}class M1{constructor(a,u){this.injector=a,this.parentInjector=u}get(a,u,d){d=Fe(d);const f=this.injector.get(a,Gv,d);return f!==Gv||u===Gv?f:this.parentInjector.get(a,u,d)}}class Jr extends DE{get inputs(){return r0(this.componentDef.inputs)}get outputs(){return r0(this.componentDef.outputs)}constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function c1(o){return o.map(u1).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}create(a,u,d,f){let g=(f=f||this.ngModule)instanceof Pc?f:f?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new M1(a,g):a,E=v.get(CE,null);if(null===E)throw new Ee(407,!1);const I=v.get(XS,null),A=E.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",B=d?function Jv(o,a,u){return o.selectRootElement(a,u===W.ShadowDom)}(A,d,this.componentDef.encapsulation):dp(A,M,function O1(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(M)),J=this.componentDef.onPush?288:272,le=Fr(0,null,null,1,0,null,null,null,null,null),Ne=Yv(null,le,null,J,null,null,E,A,I,v,null);let tt,ht;Vf(Ne);try{const Ct=this.componentDef;let Pt,$e=null;Ct.findHostDirectiveDefs?(Pt=[],$e=new Map,Ct.findHostDirectiveDefs(Ct,Pt,$e),Pt.push(Ct)):Pt=[Ct];const Ht=function Hp(o,a){const u=o[gt],d=$t;return o[d]=a,yh(u,d,2,"#host",null)}(Ne,B),tr=function x1(o,a,u,d,f,g,v,E){const I=f[gt];!function k1(o,a,u,d){for(const f of o)a.mergedAttrs=Po(a.mergedAttrs,f.hostAttrs);null!==a.mergedAttrs&&(Dh(a,a.mergedAttrs,!0),null!==u&&bp(d,u,a))}(d,o,a,v);const A=g.createRenderer(a,u),M=Yv(f,KE(u),null,u.onPush?32:16,f[o.index],o,g,A,E||null,null,null);return I.firstCreatePass&&e0(I,o,d.length-1),Vp(f,M),f[o.index]=M}(Ht,B,Ct,Pt,Ne,E,A);ht=za(le,$t),B&&function o_(o,a,u,d){if(d)fo(o,u,["ng-version",Vv.full]);else{const{attrs:f,classes:g}=function Jm(o){const a=[],u=[];let d=1,f=2;for(;d<o.length;){let g=o[d];if("string"==typeof g)2===f?""!==g&&a.push(g,o[++d]):8===f&&u.push(g);else{if(!vo(f))break;f=g}d++}return{attrs:a,classes:u}}(a.selectors[0]);f&&fo(o,u,f),g&&g.length>0&&vp(o,u,g.join(" "))}}(A,Ct,B,d),void 0!==u&&function s0(o,a,u){const d=o.projection=[];for(let f=0;f<a.length;f++){const g=u[f];d.push(null!=g?Array.from(g):null)}}(ht,this.ngContentSelectors,u),tt=function s_(o,a,u,d,f,g){const v=Tr(),E=f[gt],I=Mr(v,f);ZE(E,f,v,u,null,d);for(let M=0;M<u.length;M++)Si(Go(f,E,v.directiveStart+M,v),f);Bp(E,f,v),I&&Si(I,f);const A=Go(f,E,v.directiveStart+v.componentOffset,v);if(o[rr]=f[rr]=A,null!==g)for(const M of g)M(A,a);return Cn(E,v,o),A}(tr,Ct,Pt,$e,Ne,[o0]),Zs(le,Ne,null)}finally{Gf()}return new jp(this.componentType,tt,Fc(ht,Ne),Ne,ht)}}class jp extends KS{constructor(a,u,d,f,g){super(),this.location=d,this._rootLView=f,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new R1(f),this.componentType=a}setInput(a,u){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[a])){const g=this._rootLView;Eh(g[gt],g,f,a,u),wh(xr(this._tNode.index,g))}}get injector(){return new sl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function o0(){const o=Tr();Qa(Ge()[gt],o)}function $p(o){let a=function a_(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const d=[o];for(;a;){let f;if(Ds(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Ee(903,!1);f=a.\u0275dir}if(f){if(u){d.push(f);const v=o;v.inputs=l_(o.inputs),v.declaredInputs=l_(o.declaredInputs),v.outputs=l_(o.outputs);const E=f.hostBindings;E&&aD(o,E);const I=f.viewQuery,A=f.contentQueries;if(I&&P1(o,I),A&&oD(o,A),Ie(o.inputs,f.inputs),Ie(o.declaredInputs,f.declaredInputs),Ie(o.outputs,f.outputs),Ds(f)&&f.data.animation){const M=o.data;M.animation=(M.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let v=0;v<g.length;v++){const E=g[v];E&&E.ngInherit&&E(o),E===$p&&(u=!1)}}a=Object.getPrototypeOf(a)}!function sD(o){let a=0,u=null;for(let d=o.length-1;d>=0;d--){const f=o[d];f.hostVars=a+=f.hostVars,f.hostAttrs=Po(f.hostAttrs,u=Po(u,f.hostAttrs))}}(d)}function l_(o){return o===Se?{}:o===je?[]:o}function P1(o,a){const u=o.viewQuery;o.viewQuery=u?(d,f)=>{a(d,f),u(d,f)}:a}function oD(o,a){const u=o.contentQueries;o.contentQueries=u?(d,f,g)=>{a(d,f,g),u(d,f,g)}:a}function aD(o,a){const u=o.hostBindings;o.hostBindings=u?(d,f)=>{a(d,f),u(d,f)}:a}function u_(o){return a=>{a.findHostDirectiveDefs=c_,a.hostDirectives=(Array.isArray(o)?o:o()).map(u=>"function"==typeof u?{directive:ee(u),inputs:Se,outputs:Se}:{directive:ee(u.directive),inputs:d_(u.inputs),outputs:d_(u.outputs)})}}function c_(o,a,u){if(null!==o.hostDirectives)for(const d of o.hostDirectives){const f=dr(d.directive);vi(f.declaredInputs,d.inputs),c_(f,a,u),u.set(f,d),a.push(f)}}function d_(o){if(void 0===o||0===o.length)return Se;const a={};for(let u=0;u<o.length;u+=2)a[o[u]]=o[u+1];return a}function vi(o,a){for(const u in a)a.hasOwnProperty(u)&&(o[a[u]]=o[u])}function h_(o){return!!l0(o)&&(Array.isArray(o)||!(o instanceof Map)&&Symbol.iterator in o)}function l0(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function wo(o,a,u){return o[a]=u}function Ji(o,a,u){return!Object.is(o[a],u)&&(o[a]=u,!0)}function vl(o,a,u,d){const f=Ji(o,a,u);return Ji(o,a+1,d)||f}function Th(o,a,u,d){const f=Ge();return Ji(f,Za(),a)&&(pn(),function bo(o,a,u,d,f,g){const v=Mr(o,a);bh(a[Kt],v,g,o.value,u,d,f)}(jn(),f,o,a,u,d)),Th}function Ou(o,a,u,d){return Ji(o,Za(),u)?a+Oe(u)+d:nn}function Qi(o,a,u,d,f,g,v,E){const I=Ge(),A=pn(),M=o+$t,B=A.firstCreatePass?function gD(o,a,u,d,f,g,v,E,I){const A=a.consts,M=yh(a,o,4,v||null,Vs(A,E));Lp(a,u,M,Vs(A,I)),Qa(a,M);const B=M.tView=Fr(2,M,d,f,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,A);return null!==a.queries&&(a.queries.template(a,M),B.queries=a.queries.embeddedTView(M)),M}(M,A,I,a,u,d,f,g,v):A.data[M];Ti(B,!1);const J=I[Kt].createComment("");Lm(A,I,J,B),Si(J,I),Vp(I,I[M]=t_(J,I,J,B)),Es(B)&&Pp(A,I,B),null!=v&&Vc(I,B,E)}function Sh(o){return ns(function Bd(){return Bt.lFrame.contextLView}(),$t+o)}function Ah(o,a,u){const d=Ge();return Ji(d,Za(),a)&&Zi(pn(),jn(),d,o,a,d[Kt],u,!1),Ah}function f_(o,a,u,d,f){const v=f?"class":"style";Eh(o,u,a.inputs[v],v,d)}function Zp(o,a,u,d){const f=Ge(),g=pn(),v=$t+o,E=f[Kt],I=g.firstCreatePass?function d0(o,a,u,d,f,g){const v=a.consts,I=yh(a,o,2,d,Vs(v,f));return Lp(a,u,I,Vs(v,g)),null!==I.attrs&&Dh(I,I.attrs,!1),null!==I.mergedAttrs&&Dh(I,I.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,I),I}(v,g,f,a,u,d):g.data[v],A=f[v]=dp(E,a,function Hd(){return Bt.lFrame.currentNamespace}()),M=Es(I);return Ti(I,!0),bp(E,A,I),32!=(32&I.flags)&&Lm(g,f,A,I),0===function Ff(){return Bt.lFrame.elementDepthCount}()&&Si(A,f),function qa(){Bt.lFrame.elementDepthCount++}(),M&&(Pp(g,f,I),Cn(g,I,f)),null!==d&&Vc(f,I),Zp}function Yp(){let o=Tr();Ld()?da():(o=o.parent,Ti(o,!1));const a=o;!function Lf(){Bt.lFrame.elementDepthCount--}();const u=pn();return u.firstCreatePass&&(Qa(u,o),oc(o)&&u.queries.elementEnd(o)),null!=a.classesWithoutHost&&function el(o){return 0!=(8&o.flags)}(a)&&f_(u,a,Ge(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function lu(o){return 0!=(16&o.flags)}(a)&&f_(u,a,Ge(),a.stylesWithoutHost,!1),Yp}function qc(o,a,u,d){return Zp(o,a,u,d),Yp(),qc}function Nh(o,a,u){const d=Ge(),f=pn(),g=o+$t,v=f.firstCreatePass?function h0(o,a,u,d,f){const g=a.consts,v=Vs(g,d),E=yh(a,o,8,"ng-container",v);return null!==v&&Dh(E,v,!0),Lp(a,u,E,Vs(g,f)),null!==a.queries&&a.queries.elementStart(a,E),E}(g,f,d,a,u):f.data[g];Ti(v,!0);const E=d[g]=d[Kt].createComment("");return Lm(f,d,E,v),Si(E,d),Es(v)&&(Pp(f,d,v),Cn(f,v,d)),null!=u&&Vc(d,v),Nh}function Rh(){let o=Tr();const a=pn();return Ld()?da():(o=o.parent,Ti(o,!1)),a.firstCreatePass&&(Qa(a,o),oc(o)&&a.queries.elementEnd(o)),Rh}function Oh(){return Ge()}function p_(o){return!!o&&"function"==typeof o.then}function _D(o){return!!o&&"function"==typeof o.subscribe}const g_=_D;function Mh(o,a,u,d){const f=Ge(),g=pn(),v=Tr();return function f0(o,a,u,d,f,g,v){const E=Es(d),A=o.firstCreatePass&&t0(o),M=a[rr],B=r_(a);let J=!0;if(3&d.type||v){const tt=Mr(d,a),ht=v?v(tt):tt,Ct=B.length,Pt=v?Ht=>v(ir(Ht[d.index])):d.index;let $e=null;if(!v&&E&&($e=function yD(o,a,u,d){const f=o.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const v=f[g];if(v===u&&f[g+1]===d){const E=a[Ls],I=f[g+2];return E.length>I?E[I]:null}"string"==typeof v&&(g+=2)}return null}(o,a,f,d.index)),null!==$e)($e.__ngLastListenerFn__||$e).__ngNextListenerFn__=g,$e.__ngLastListenerFn__=g,J=!1;else{g=vD(d,a,M,g,!1);const Ht=u.listen(ht,f,g);B.push(g,Ht),A&&A.push(f,Pt,Ct,Ct+1)}}else g=vD(d,a,M,g,!1);const le=d.outputs;let Ne;if(J&&null!==le&&(Ne=le[f])){const tt=Ne.length;if(tt)for(let ht=0;ht<tt;ht+=2){const tr=a[Ne[ht]][Ne[ht+1]].subscribe(g),gr=B.length;B.push(g,tr),A&&A.push(f,d.index,gr,-(gr+1))}}}(g,f,f[Kt],v,o,a,d),Mh}function p0(o,a,u,d){try{return Tn(6,a,u),!1!==u(d)}catch(f){return n0(o,f),!1}finally{Tn(7,a,u)}}function vD(o,a,u,d,f){return function g(v){if(v===Function)return d;wh(o.componentOffset>-1?xr(o.index,a):a);let I=p0(a,u,d,v),A=g.__ngNextListenerFn__;for(;A;)I=p0(a,u,A,v)&&I,A=A.__ngNextListenerFn__;return f&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function xh(o=1){return function jd(o){return(Bt.lFrame.contextLView=function Sm(o,a){for(;o>0;)a=a[No],o--;return a}(o,Bt.lFrame.contextLView))[rr]}(o)}function bD(o,a){let u=null;const d=function xE(o){const a=o.attrs;if(null!=a){const u=a.indexOf(5);if(!(1&u))return a[u+1]}return null}(o);for(let f=0;f<a.length;f++){const g=a[f];if("*"!==g){if(null===d?Rp(o,g,!0):l1(d,g))return f}else u=f}return u}function Qp(o){const a=Ge()[ri][xn];if(!a.projection){const d=a.projection=_a(o?o.length:1,null),f=d.slice();let g=a.child;for(;null!==g;){const v=o?bD(g,o):0;null!==v&&(f[v]?f[v].projectionNext=g:d[v]=g,f[v]=g),g=g.next}}}function kh(o,a=0,u){const d=Ge(),f=pn(),g=yh(f,$t+o,16,null,u||null);null===g.projection&&(g.projection=a),da(),32!=(32&g.flags)&&function Xw(o,a,u){ch(a[Kt],0,a,u,CS(o,u,a),hv(u.parent||a[xn],u,a))}(f,d,g)}function wl(o,a,u){return Ph(o,"",a,"",u),wl}function Ph(o,a,u,d,f){const g=Ge(),v=Ou(g,a,u,d);return v!==nn&&Zi(pn(),jn(),g,o,v,g[Kt],f,!1),Ph}function Do(o,a){return o<<17|a<<2}function qo(o){return o>>17&32767}function w_(o){return 2|o}function Bn(o){return(131068&o)>>2}function Fh(o,a){return-131069&o|a<<2}function m0(o){return 1|o}function ID(o,a,u,d,f){const g=o[u+1],v=null===a;let E=d?qo(g):Bn(g),I=!1;for(;0!==E&&(!1===I||v);){const M=o[E+1];G1(o[E],a)&&(I=!0,o[E+1]=d?m0(M):w_(M)),E=d?qo(M):Bn(M)}I&&(o[u+1]=d?w_(g):m0(g))}function G1(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&_t(o,a)>=0}const ci={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function TD(o){return o.substring(ci.key,ci.keyEnd)}function _0(o,a){const u=ci.textEnd;return u===a?-1:(a=ci.keyEnd=function j1(o,a,u){for(;a<u&&o.charCodeAt(a)>32;)a++;return a}(o,ci.key=a,u),Lh(o,a,u))}function Lh(o,a,u){for(;a<u&&o.charCodeAt(a)<=32;)a++;return a}function eg(o,a,u){return Zo(o,a,u,!1),eg}function I_(o,a){return Zo(o,a,null,!0),I_}function OD(o){Ss(Qt,Sa,o,!0)}function Sa(o,a){for(let u=function Pu(o){return function Zc(o){ci.key=0,ci.keyEnd=0,ci.value=0,ci.valueEnd=0,ci.textEnd=o.length}(o),_0(o,Lh(o,0,ci.textEnd))}(a);u>=0;u=_0(a,u))Qt(o,TD(a),!0)}function Zo(o,a,u,d){const f=Ge(),g=pn(),v=Ts(2);g.firstUpdatePass&&tg(g,o,v,d),a!==nn&&Ji(f,v,a)&&PD(g,g.data[kr()],f,f[Kt],o,f[v+1]=function LD(o,a){return null==o||""===o||("string"==typeof a?o+=a:"object"==typeof o&&(o=me(Ki(o)))),o}(a,u),d,v)}function Ss(o,a,u,d){const f=pn(),g=Ts(2);f.firstUpdatePass&&tg(f,null,g,d);const v=Ge();if(u!==nn&&Ji(v,g,u)){const E=f.data[kr()];if(D0(E,d)&&!Bh(f,g)){let I=d?E.classesWithoutHost:E.stylesWithoutHost;null!==I&&(u=be(I,u||"")),f_(f,E,v,u,d)}else!function H1(o,a,u,d,f,g,v,E){f===nn&&(f=je);let I=0,A=0,M=0<f.length?f[0]:null,B=0<g.length?g[0]:null;for(;null!==M||null!==B;){const J=I<f.length?f[I+1]:void 0,le=A<g.length?g[A+1]:void 0;let tt,Ne=null;M===B?(I+=2,A+=2,J!==le&&(Ne=B,tt=le)):null===B||null!==M&&M<B?(I+=2,Ne=M):(A+=2,Ne=B,tt=le),null!==Ne&&PD(o,a,u,d,Ne,tt,v,E),M=I<f.length?f[I]:null,B=A<g.length?g[A]:null}}(f,E,v,v[Kt],v[g+1],v[g+1]=function xD(o,a,u){if(null==u||""===u)return je;const d=[],f=Ki(u);if(Array.isArray(f))for(let g=0;g<f.length;g++)o(d,f[g],!0);else if("object"==typeof f)for(const g in f)f.hasOwnProperty(g)&&o(d,g,f[g]);else"string"==typeof f&&a(d,f);return d}(o,a,u),d,g)}}function Bh(o,a){return a>=o.expandoStartIndex}function tg(o,a,u,d){const f=o.data;if(null===f[u+1]){const g=f[kr()],v=Bh(o,u);D0(g,d)&&null===a&&!v&&(a=!1),a=function w0(o,a,u,d){const f=function Ud(o){const a=Bt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let g=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(u=pr(u=E0(null,o,a,u,d),a.attrs,d),g=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==f)if(u=E0(f,o,a,u,d),null===g){let I=function MD(o,a,u){const d=u?a.classBindings:a.styleBindings;if(0!==Bn(d))return o[qo(d)]}(o,a,d);void 0!==I&&Array.isArray(I)&&(I=E0(null,o,a,I[1],d),I=pr(I,a.attrs,d),function ng(o,a,u,d){o[qo(u?a.classBindings:a.styleBindings)]=d}(o,a,d,I))}else g=function rg(o,a,u){let d;const f=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<f;g++)d=pr(d,o[g].hostAttrs,u);return pr(d,a.attrs,u)}(o,a,d)}return void 0!==g&&(d?a.residualClasses=g:a.residualStyles=g),u}(f,g,a,d),function V1(o,a,u,d,f,g){let v=g?a.classBindings:a.styleBindings,E=qo(v),I=Bn(v);o[d]=u;let M,A=!1;if(Array.isArray(u)?(M=u[1],(null===M||_t(u,M)>0)&&(A=!0)):M=u,f)if(0!==I){const J=qo(o[E+1]);o[d+1]=Do(J,E),0!==J&&(o[J+1]=Fh(o[J+1],d)),o[E+1]=function b_(o,a){return 131071&o|a<<17}(o[E+1],d)}else o[d+1]=Do(E,0),0!==E&&(o[E+1]=Fh(o[E+1],d)),E=d;else o[d+1]=Do(I,0),0===E?E=d:o[I+1]=Fh(o[I+1],d),I=d;A&&(o[d+1]=w_(o[d+1])),ID(o,M,d,!0),ID(o,M,d,!1),function DD(o,a,u,d,f){const g=f?o.residualClasses:o.residualStyles;null!=g&&"string"==typeof a&&_t(g,a)>=0&&(u[d+1]=m0(u[d+1]))}(a,M,o,d,g),v=Do(E,I),g?a.classBindings=v:a.styleBindings=v}(f,g,a,u,v,d)}}function E0(o,a,u,d,f){let g=null;const v=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<v&&(g=a[E],d=pr(d,g.hostAttrs,f),g!==o);)E++;return null!==o&&(u.directiveStylingLast=E),d}function pr(o,a,u){const d=u?1:2;let f=-1;if(null!==a)for(let g=0;g<a.length;g++){const v=a[g];"number"==typeof v?f=v:f===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Qt(o,v,!!u||a[++g]))}return void 0===o?null:o}function PD(o,a,u,d,f,g,v,E){if(!(3&a.type))return;const I=o.data,A=I[E+1],M=function U1(o){return 1==(1&o)}(A)?FD(I,a,u,f,Bn(A),v):void 0;ig(M)||(ig(g)||function v_(o){return 2==(2&o)}(A)&&(g=FD(I,null,u,f,E,v)),function _v(o,a,u,d,f){if(a)f?o.addClass(u,d):o.removeClass(u,d);else{let g=-1===d.indexOf("-")?void 0:Wi.DashCase;null==f?o.removeStyle(u,d,g):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),g|=Wi.Important),o.setStyle(u,d,f,g))}}(d,v,co(kr(),u),f,g))}function FD(o,a,u,d,f,g){const v=null===a;let E;for(;f>0;){const I=o[f],A=Array.isArray(I),M=A?I[1]:I,B=null===M;let J=u[f+1];J===nn&&(J=B?je:void 0);let le=B?vr(J,d):M===d?J:void 0;if(A&&!ig(le)&&(le=vr(I,d)),ig(le)&&(E=le,v))return E;const Ne=o[f+1];f=v?qo(Ne):Bn(Ne)}if(null!==a){let I=g?a.residualClasses:a.residualStyles;null!=I&&(E=vr(I,d))}return E}function ig(o){return void 0!==o}function D0(o,a){return 0!=(o.flags&(a?8:16))}function sg(o,a=""){const u=Ge(),d=pn(),f=o+$t,g=d.firstCreatePass?yh(d,f,1,a,null):d.data[f],v=u[f]=Nc(u[Kt],a);Lm(d,u,v,g),Ti(g,!1)}function T_(o){return Io("",o,""),T_}function Io(o,a,u){const d=Ge(),f=Ou(d,o,a,u);return f!==nn&&function zo(o,a,u){const d=co(a,o);Rc(o[Kt],d,u)}(d,kr(),f),Io}function ag(o,a,u,d,f){Ss(Qt,Sa,function jc(o,a,u,d,f,g){const E=vl(o,Ci(),u,f);return Ts(2),E?a+Oe(u)+d+Oe(f)+g:nn}(Ge(),o,a,u,d,f),!0)}function M0(o,a,u){const d=Ge();return Ji(d,Za(),a)&&Zi(pn(),jn(),d,o,a,d[Kt],u,!0),M0}const Qc=void 0;var W1=["en",[["a","p"],["AM","PM"],Qc],[["AM","PM"],Qc,Qc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qc,"{1} 'at' {0}",Qc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function R_(o){const u=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===d?1:5}];let Xc={};function Fu(o){const a=function cg(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=QD(a);if(u)return u;const d=a.split("-")[0];if(u=QD(d),u)return u;if("en"===d)return W1;throw new Ee(701,!1)}function O_(o){return Fu(o)[vt.PluralCase]}function QD(o){return o in Xc||(Xc[o]=Mt.ng&&Mt.ng.common&&Mt.ng.common.locales&&Mt.ng.common.locales[o]),Xc[o]}var vt=(()=>((vt=vt||{})[vt.LocaleId=0]="LocaleId",vt[vt.DayPeriodsFormat=1]="DayPeriodsFormat",vt[vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",vt[vt.DaysFormat=3]="DaysFormat",vt[vt.DaysStandalone=4]="DaysStandalone",vt[vt.MonthsFormat=5]="MonthsFormat",vt[vt.MonthsStandalone=6]="MonthsStandalone",vt[vt.Eras=7]="Eras",vt[vt.FirstDayOfWeek=8]="FirstDayOfWeek",vt[vt.WeekendRange=9]="WeekendRange",vt[vt.DateFormat=10]="DateFormat",vt[vt.TimeFormat=11]="TimeFormat",vt[vt.DateTimeFormat=12]="DateTimeFormat",vt[vt.NumberSymbols=13]="NumberSymbols",vt[vt.NumberFormats=14]="NumberFormats",vt[vt.CurrencyCode=15]="CurrencyCode",vt[vt.CurrencySymbol=16]="CurrencySymbol",vt[vt.CurrencyName=17]="CurrencyName",vt[vt.Currencies=18]="Currencies",vt[vt.Directionality=19]="Directionality",vt[vt.PluralCase=20]="PluralCase",vt[vt.ExtraData=21]="ExtraData",vt))();const k0=["zero","one","two","few","many"],Lt="en-US",dt={marker:"element"},ye={marker:"ICU"};var Ae=(()=>((Ae=Ae||{})[Ae.SHIFT=2]="SHIFT",Ae[Ae.APPEND_EAGERLY=1]="APPEND_EAGERLY",Ae[Ae.COMMENT=2]="COMMENT",Ae))();let P0=Lt;function XD(o){(function ft(o,a){null==o&&ct(a,o,null,"!=")})(o,"Expected localeId to be defined"),"string"==typeof o&&(P0=o.toLowerCase().replace(/_/g,"-"))}function eI(o,a,u){const d=a.insertBeforeIndex,f=Array.isArray(d)?d[0]:d;return null===f?Mc(o,0,u):ir(u[f])}function tI(o,a,u,d,f){const g=a.insertBeforeIndex;if(Array.isArray(g)){let v=d,E=null;if(3&a.type||(E=v,v=f),null!==v&&-1===a.componentOffset)for(let I=1;I<g.length;I++)Iu(o,v,u[g[I]],E,!1)}}function nI(o,a){if(o.push(a),o.length>1)for(let u=o.length-2;u>=0;u--){const d=o[u];F0(d)||K1(d,a)&&null===vx(d)&&Z1(d,a.index)}}function F0(o){return!(64&o.type)}function K1(o,a){return F0(a)||o.index>a.index}function vx(o){const a=o.insertBeforeIndex;return Array.isArray(a)?a[0]:a}function Z1(o,a){const u=o.insertBeforeIndex;Array.isArray(u)?u[0]=a:(pv(eI,tI),o.insertBeforeIndex=a)}function Vh(o,a){const u=o.data[a];return null===u||"string"==typeof u?null:u.hasOwnProperty("currentCaseLViewIndex")?u:u.value}function rI(o,a,u){const d=P(o,u,64,null,null);return nI(a,d),d}function Zn(o,a){const u=a[o.currentCaseLViewIndex];return null===u?u:u<0?~u:u}function jt(o){return o>>>17}function jh(o){return(131070&o)>>>1}let lr=0,at=0;function dg(o,a,u,d){const f=u[Kt];let v,g=null;for(let E=0;E<a.length;E++){const I=a[E];if("string"==typeof I){const A=a[++E];null===u[A]&&(u[A]=Nc(f,I))}else if("number"==typeof I)switch(1&I){case 0:const A=jt(I);let M,B;if(null===g&&(g=A,v=_p(f,d)),A===g?(M=d,B=v):(M=null,B=ir(u[A])),null!==B){const tt=jh(I);Iu(f,B,u[tt],M,!1);const Ct=Vh(o,tt);if(null!==Ct&&"object"==typeof Ct){const Pt=Zn(Ct,u);null!==Pt&&dg(o,Ct.create[Pt],u,u[Ct.anchorIdx])}}break;case 1:const le=a[++E],Ne=a[++E];bh(f,co(I>>>1,u),null,null,le,Ne,null)}else switch(I){case ye:const A=a[++E],M=a[++E];null===u[M]&&Si(u[M]=Fm(f,A),u);break;case dt:const B=a[++E],J=a[++E];null===u[J]&&Si(u[J]=dp(f,B,null),u)}}}function Hh(o,a,u,d,f){for(let g=0;g<u.length;g++){const v=u[g],E=u[++g];if(v&f){let I="";for(let A=g+1;A<=g+E;A++){const M=u[A];if("string"==typeof M)I+=M;else if("number"==typeof M)if(M<0)I+=Oe(a[d-M]);else{const B=M>>>2;switch(3&M){case 1:const J=u[++A],le=u[++A],Ne=o.data[B];"string"==typeof Ne?bh(a[Kt],a[B],null,Ne,J,I,le):Zi(o,Ne,a,J,I,a[Kt],le,!1);break;case 0:const tt=a[B];null!==tt&&Rc(a[Kt],tt,I);break;case 2:iI(o,Vh(o,B),a,I);break;case 3:B0(o,Vh(o,B),d,a)}}}}else{const I=u[g+1];if(I>0&&3==(3&I)){const M=Vh(o,I>>>2);a[M.currentCaseLViewIndex]<0&&B0(o,M,d,a)}}g+=E}}function B0(o,a,u,d){let f=d[a.currentCaseLViewIndex];if(null!==f){let g=lr;f<0&&(f=d[a.currentCaseLViewIndex]=~f,g=-1),Hh(o,d,a.update[f],u,g)}}function iI(o,a,u,d){const f=function U0(o,a){let u=o.cases.indexOf(a);if(-1===u)switch(o.type){case 1:{const d=function Tt(o,a){const u=O_(a)(parseInt(o,10)),d=k0[u];return void 0!==d?d:"other"}(a,function q1(){return P0}());u=o.cases.indexOf(d),-1===u&&"other"!==d&&(u=o.cases.indexOf("other"));break}case 0:u=o.cases.indexOf("other")}return-1===u?null:u}(a,d);if(Zn(a,u)!==f&&(Ns(o,a,u),u[a.currentCaseLViewIndex]=null===f?null:~f,null!==f)){const v=u[a.anchorIdx];v&&dg(o,a.create[f],u,v)}}function Ns(o,a,u){let d=Zn(a,u);if(null!==d){const f=a.remove[d];for(let g=0;g<f.length;g++){const v=f[g];if(v>0){const E=co(v,u);null!==E&&yp(u[Kt],E)}else Ns(o,Vh(o,~v),u)}}}function sI(){const o=[];let u,d,a=-1;function g(E,I){a=0;const A=Zn(E,I);d=null!==A?E.remove[A]:je}function v(){if(a<d.length){const E=d[a++];return E>0?u[E]:(o.push(a,d),g(u[gt].data[~E],u),v())}return 0===o.length?null:(d=o.pop(),a=o.pop(),v())}return function f(E,I){for(u=I;o.length;)o.pop();return g(E.value,I),v}}const Rs=/\ufffd(\d+):?\d*\ufffd/gi,fg=/\ufffd(\d+)\ufffd/,El=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,pg="\ufffd",rd=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,aI=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,V0=/\uE500/g;function G0(o,a,u,d,f,g,v){const E=ui(o,d,1,null);let I=E<<Ae.SHIFT,A=ca();a===A&&(A=null),null===A&&(I|=Ae.APPEND_EAGERLY),v&&(I|=Ae.COMMENT,function ba(o){void 0===kn&&(kn=o())}(sI)),f.push(I,null===g?"":g);const M=P(o,E,v?32:1,null===g?"":g,null);nI(u,M);const B=M.index;return Ti(M,!1),null!==A&&a!==A&&function Gh(o,a){let u=o.insertBeforeIndex;null===u?(pv(eI,tI),u=o.insertBeforeIndex=[null,a]):(function ze(o,a,u){o!=a&&ct(u,o,a,"==")}(Array.isArray(u),!0,"Expecting array here"),u.push(a))}(A,B),M}function id(o,a,u,d,f,g,v){const E=v.match(Rs),I=G0(o,a,u,g,d,E?null:v,!1);E&&er(f,v,I.index,null,0,null)}function er(o,a,u,d,f,g){const v=o.length,E=v+1;o.push(null,null);const I=v+2,A=a.split(Rs);let M=0;for(let B=0;B<A.length;B++){const J=A[B];if(1&B){const le=f+parseInt(J,10);o.push(-1-le),M|=bi(le)}else""!==J&&o.push(J)}return o.push(u<<2|(d?1:0)),d&&o.push(d,g),o[v]=M,o[E]=o.length-I,M}function bi(o){return 1<<Math.min(o,31)}function j0(o){let a,g,u="",d=0,f=!1;for(;null!==(a=rd.exec(o));)f?a[0]===`${pg}/*${g}${pg}`&&(d=a.index,f=!1):(u+=o.substring(d,a.index+a[0].length),g=a[1],f=!0);return u+=o.slice(d),u}function Ms(o,a,u,d,f,g){let v=0;const E={type:f.type,currentCaseLViewIndex:ui(o,a,1,null),anchorIdx:g,cases:[],create:[],remove:[],update:[]};(function H0(o,a,u){o.push(bi(a.mainBinding),2,-1-a.mainBinding,u<<2|2)})(u,f,g),function sn(o,a,u){const d=o.data[a];null===d?o.data[a]=u:d.value=u}(o,g,E);const I=f.values;for(let A=0;A<I.length;A++){const M=I[A],B=[];for(let J=0;J<M.length;J++){const le=M[J];if("string"!=typeof le){const Ne=B.push(le)-1;M[J]=`\x3c!--\ufffd${Ne}\ufffd--\x3e`}}v=tA(o,E,a,u,d,f.cases[A],M.join(""),B)|v}v&&function uI(o,a,u){o.push(a,1,u<<2|3)}(u,v,g)}function eA(o){const a=[],u=[];let d=1,f=0;const g=Lr(o=o.replace(El,function(v,E,I){return d="select"===I?0:1,f=parseInt(E.slice(1),10),""}));for(let v=0;v<g.length;){let E=g[v++].trim();1===d&&(E=E.replace(/\s*(?:=)?(\w+)\s*/,"$1")),E.length&&a.push(E);const I=Lr(g[v++]);a.length>u.length&&u.push(I)}return{type:d,mainBinding:f,cases:a,values:u}}function Lr(o){if(!o)return[];let a=0;const u=[],d=[],f=/[{}]/g;let g;for(f.lastIndex=0;g=f.exec(o);){const E=g.index;if("}"==g[0]){if(u.pop(),0==u.length){const I=o.substring(a,E);El.test(I)?d.push(eA(I)):d.push(I),a=E+1}}else{if(0==u.length){const I=o.substring(a,E);d.push(I),a=E+1}u.push("{")}}const v=o.substring(a);return d.push(v),d}function tA(o,a,u,d,f,g,v,E){const I=[],A=[],M=[];a.cases.push(g),a.create.push(I),a.remove.push(A),a.update.push(M);const J=function Ep(o){const a=new Iv(o);return function aE(){try{return!!(new window.DOMParser).parseFromString(hh(""),"text/html")}catch{return!1}}()?new oE(a):a}(function eE(){return void 0!==vv?vv:typeof document<"u"?document:void 0}()).getInertBodyElement(v),le=function dE(o){return"content"in o&&function Rv(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}(J)||J;return le?Dl(o,a,u,d,I,A,M,le,f,E,0):0}function Dl(o,a,u,d,f,g,v,E,I,A,M){let B=0,J=E.firstChild;for(;J;){const le=ui(o,u,1,null);switch(J.nodeType){case Node.ELEMENT_NODE:const Ne=J,tt=Ne.tagName.toLowerCase();if(Vm.hasOwnProperty(tt)){od(f,dt,tt,I,le),o.data[le]=tt;const $e=Ne.attributes;for(let Ht=0;Ht<$e.length;Ht++){const tr=$e.item(Ht),gr=tr.name.toLowerCase();tr.value.match(Rs)?jm.hasOwnProperty(gr)&&er(v,tr.value,le,tr.name,0,Cv[gr]?Dp:null):nA(f,le,tr)}B=Dl(o,a,u,d,f,g,v,J,le,A,M+1)|B,br(g,le,M)}break;case Node.TEXT_NODE:const ht=J.textContent||"",Ct=ht.match(Rs);od(f,null,Ct?"":ht,I,le),br(g,le,M),Ct&&(B=er(v,ht,le,null,0,null)|B);break;case Node.COMMENT_NODE:const Pt=fg.exec(J.textContent||"");if(Pt){const Ht=A[parseInt(Pt[1],10)];od(f,ye,"",I,le),Ms(o,u,d,I,Ht,le),sd(g,le,M)}}J=J.nextSibling}return B}function br(o,a,u){0===u&&o.push(a)}function sd(o,a,u){0===u&&(o.push(~a),o.push(a))}function od(o,a,u,d,f){null!==a&&o.push(a),o.push(u,f,function Y1(o,a,u){return o|a<<17|u<<1}(0,d,f))}function nA(o,a,u){o.push(a<<1|1,u.name,u.value)}function Il(o,a,u=-1){const d=pn(),f=Ge(),g=$t+o,v=Vs(d.consts,a),E=ca();d.firstCreatePass&&function Os(o,a,u,d,f,g){const v=ca(),E=[],I=[],A=[[]];f=function $h(o,a){if(function $n(o){return-1===o}(a))return j0(o);{const u=o.indexOf(`:${a}${pg}`)+2+a.toString().length,d=o.search(new RegExp(`${pg}\\/\\*\\d+:${a}${pg}`));return j0(o.substring(u,d))}}(f,g);const M=function X1(o){return o.replace(V0," ")}(f).split(aI);for(let B=0;B<M.length;B++){let J=M[B];if(1&B){const le=47===J.charCodeAt(0),tt=(J.charCodeAt(le?1:0),$t+Number.parseInt(J.substring(le?2:1)));if(le)A.shift(),Ti(ca(),!1);else{const ht=rI(o,A[0],tt);A.unshift([]),Ti(ht,!0)}}else{const le=Lr(J);for(let Ne=0;Ne<le.length;Ne++){let tt=le[Ne];if(1&Ne){const ht=tt;if("object"!=typeof ht)throw new Error(`Unable to parse ICU expression in "${f}" message.`);Ms(o,u,I,a,ht,G0(o,v,A[0],u,E,"",!0).index)}else""!==tt&&id(o,v,A[0],E,I,u,tt)}}}o.data[d]={create:E,update:I}}(d,null===E?0:E.index,f,g,v,u);const I=d.data[g],M=dv(d,E===f[xn]?null:E,f);(function td(o,a,u,d){const f=o[Kt];for(let g=0;g<a.length;g++){const v=a[g++],E=a[g],A=(v&Ae.APPEND_EAGERLY)===Ae.APPEND_EAGERLY,M=v>>>Ae.SHIFT;let B=o[M];null===B&&(B=o[M]=(v&Ae.COMMENT)===Ae.COMMENT?f.createComment(E):Nc(f,E)),A&&null!==u&&Iu(f,u,B,d,!1)}})(f,I.create,M,E&&8&E.type?f[E.index]:null),ou(!0)}function ld(o,a,u){Il(o,a,u),function $0(){ou(!1)}()}function Tl(o){return function M_(o){o&&(lr|=1<<Math.min(at,31)),at++}(Ji(Ge(),Za(),o)),Tl}function P_(o){!function L0(o,a,u){if(at>0){const d=o.data[u];Hh(o,a,Array.isArray(d)?d:d.update,Ci()-at-1,lr)}lr=0,at=0}(pn(),Ge(),o+$t)}function F_(o,a,u,d,f){if(o=ee(o),Array.isArray(o))for(let g=0;g<o.length;g++)F_(o[g],a,u,d,f);else{const g=pn(),v=Ge();let E=Da(o)?o:ee(o.provide),I=wE(o);const A=Tr(),M=1048575&A.providerIndexes,B=A.directiveStart,J=A.providerIndexes>>20;if(Da(o)||!o.multi){const le=new Cr(I,f,_h),Ne=L_(E,a,f?M:M+J,B);-1===Ne?(Uo(mo(A,v),g,E),Wh(g,o,a.length),a.push(E),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),u.push(le),v.push(le)):(u[Ne]=le,v[Ne]=le)}else{const le=L_(E,a,M+J,B),Ne=L_(E,a,M,M+J),ht=Ne>=0&&u[Ne];if(f&&!ht||!f&&!(le>=0&&u[le])){Uo(mo(A,v),g,E);const Ct=function hI(o,a,u,d,f){const g=new Cr(o,u,_h);return g.multi=[],g.index=a,g.componentProviders=0,zh(g,f,d&&!u),g}(f?iA:rA,u.length,f,d,I);!f&&ht&&(u[Ne].providerFactory=Ct),Wh(g,o,a.length,0),a.push(E),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),u.push(Ct),v.push(Ct)}else Wh(g,o,le>-1?le:Ne,zh(u[f?Ne:le],I,!f&&d));!f&&d&&ht&&u[Ne].componentProviders++}}}function Wh(o,a,u,d){const f=Da(a),g=function ph(o){return!!o.useClass}(a);if(f||g){const I=(g?ee(a.useClass):a).prototype.ngOnDestroy;if(I){const A=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const M=A.indexOf(u);-1===M?A.push(u,[d,I]):A[M+1].push(d,I)}else A.push(u,I)}}}function zh(o,a,u){return u&&o.componentProviders++,o.multi.push(a)-1}function L_(o,a,u,d){for(let f=u;f<d;f++)if(a[f]===o)return f;return-1}function rA(o,a,u,d){return B_(this.multi,[])}function iA(o,a,u,d){const f=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=Go(u,u[gt],this.providerFactory.index,d);g=E.slice(0,v),B_(f,g);for(let I=v;I<E.length;I++)g.push(E[I])}else g=[],B_(f,g);return g}function B_(o,a){for(let u=0;u<o.length;u++)a.push((0,o[u])());return a}function wi(o,a=[]){return u=>{u.providersResolver=(d,f)=>function dI(o,a,u){const d=pn();if(d.firstCreatePass){const f=Ds(o);F_(u,d.data,d.blueprint,f,!0),F_(a,d.data,d.blueprint,f,!1)}}(d,f?f(o):o,a)}}class ud{}class Yn{}function sA(o,a){return new Bu(o,a??null)}class Bu extends ud{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new i_(this);const d=gi(a);this._bootstrapComponents=Ia(d.bootstrap),this._r3Injector=p1(a,u,[{provide:ud,useValue:this},{provide:Su,useValue:this.componentFactoryResolver}],me(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class z0 extends Yn{constructor(a){super(),this.moduleType=a}create(a){return new Bu(this.moduleType,a)}}class vg extends ud{constructor(a,u,d){super(),this.componentFactoryResolver=new i_(this),this.instance=null;const f=new vE([...a,{provide:ud,useValue:this},{provide:Su,useValue:this.componentFactoryResolver}],u||zm(),d,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function qh(o,a,u=null){return new vg(o,a,u).injector}let U_=(()=>{class o{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const d=gE(0,u.type),f=d.length>0?qh([d],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,f)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=pt({token:o,providedIn:"environment",factory:()=>new o(U(Pc))}),o})();function q0(o){o.getStandaloneInjector=a=>a.get(U_).getOrCreateStandaloneInjector(o)}function bI(o,a,u,d){return H_(Ge(),or(),o,a,u,d)}function G_(o,a,u,d,f){return function Z0(o,a,u,d,f,g,v){const E=a+u;return vl(o,E,f,g)?wo(o,E+2,v?d.call(v,f,g):d(f,g)):hd(o,E+2)}(Ge(),or(),o,a,u,d,f)}function j_(o,a,u,d,f,g){return function Y0(o,a,u,d,f,g,v,E){const I=a+u;return function zp(o,a,u,d,f){const g=vl(o,a,u,d);return Ji(o,a+2,f)||g}(o,I,f,g,v)?wo(o,I+3,E?d.call(E,f,g,v):d(f,g,v)):hd(o,I+3)}(Ge(),or(),o,a,u,d,f,g)}function hd(o,a){const u=o[a];return u===nn?void 0:u}function H_(o,a,u,d,f,g){const v=a+u;return Ji(o,v,f)?wo(o,v+1,g?d.call(g,f):d(f)):hd(o,v+1)}function Q0(o,a){const u=pn();let d;const f=o+$t;u.firstCreatePass?(d=function II(o,a){if(a)for(let u=a.length-1;u>=0;u--){const d=a[u];if(o===d.name)return d}}(a,u.pipeRegistry),u.data[f]=d,d.onDestroy&&(u.destroyHooks??(u.destroyHooks=[])).push(f,d.onDestroy)):d=u.data[f];const g=d.factory||(d.factory=Vi(d.type)),v=Ft(_h);try{const E=Gs(!1),I=g();return Gs(E),function mD(o,a,u,d){u>=o.data.length&&(o.data[u]=null,o.blueprint[u]=null),a[u]=d}(u,Ge(),f,I),I}finally{Ft(v)}}function TI(o,a,u){const d=o+$t,f=Ge(),g=ns(f,d);return function Jh(o,a){return o[gt].data[a].pure}(f,d)?H_(f,or(),a,g.transform,u,g):g.transform(u)}function $_(o){return a=>{setTimeout(o,void 0,a)}}const us=class pd extends l.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,d){let f=a,g=u||(()=>null),v=d;if(a&&"object"==typeof a){const I=a;f=I.next?.bind(I),g=I.error?.bind(I),v=I.complete?.bind(I)}this.__isAsync&&(g=$_(g),f&&(f=$_(f)),v&&(v=$_(v)));const E=super.subscribe({next:f,error:g,complete:v});return a instanceof G.w0&&a.add(E),E}};function SI(){return this._results[Symbol.iterator]()}class W_{get changes(){return this._changes||(this._changes=new us)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=W_.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=SI)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const d=this;d.dirty=!1;const f=function _i(o){return o.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function gu(o,a,u){if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++){let f=o[d],g=a[d];if(u&&(f=u(f),g=u(g)),g!==f)return!1}return!0}(d._results,f,u))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Sl=(()=>{class o{}return o.__NG_ELEMENT_ID__=wr,o})();const fA=Sl,pA=class extends fA{constructor(a,u,d){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=d}createEmbeddedView(a,u){const d=this._declarationTContainer.tView,f=Yv(this._declarationLView,d,a,16,null,d.declTNode,null,null,null,null,u||null);f[ao]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[Ir];return null!==v&&(f[Ir]=v.createEmbeddedView(d)),Zs(d,f,a),new Gp(f)}};function wr(){return gd(Tr(),Ge())}function gd(o,a){return 4&o.type?new pA(a,o,Fc(o,a)):null}let md=(()=>{class o{}return o.__NG_ELEMENT_ID__=AI,o})();function AI(){return _d(Tr(),Ge())}const gA=md,Qh=class extends gA{constructor(a,u,d){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=d}get element(){return Fc(this._hostTNode,this._hostLView)}get injector(){return new sl(this._hostTNode,this._hostLView)}get parentInjector(){const a=hu(this._hostTNode,this._hostLView);if(uu(a)){const u=Fo(a,this._hostLView),d=ga(a);return new sl(u[gt].data[d+8],u)}return new sl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=NI(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-ii}createEmbeddedView(a,u,d){let f,g;"number"==typeof d?f=d:null!=d&&(f=d.index,g=d.injector);const v=a.createEmbeddedView(u||{},g);return this.insert(v,f),v}createComponent(a,u,d,f,g){const v=a&&!function jo(o){return"function"==typeof o}(a);let E;if(v)E=u;else{const B=u||{};E=B.index,d=B.injector,f=B.projectableNodes,g=B.environmentInjector||B.ngModuleRef}const I=v?a:new Jr(_n(a)),A=d||this.parentInjector;if(!g&&null==I.ngModule){const J=(v?A:this.parentInjector).get(Pc,null);J&&(g=J)}const M=I.create(A,f,void 0,g);return this.insert(M.hostView,E),M}insert(a,u){const d=a._lView,f=d[gt];if(function nu(o){return Or(o[Pn])}(d)){const M=this.indexOf(a);if(-1!==M)this.detach(M);else{const B=d[Pn],J=new Qh(B,B[xn],B[Pn]);J.detach(J.indexOf(a))}}const g=this._adjustIndex(u),v=this._lContainer;!function IS(o,a,u,d){const f=ii+d,g=u.length;d>0&&(u[f-1][mi]=a),d<g-ii?(a[mi]=u[f],Tc(u,ii+d,a)):(u.push(a),a[mi]=null),a[Pn]=u;const v=a[ao];null!==v&&u!==v&&function TS(o,a){const u=o[lo];a[ri]!==a[Pn][Pn][ri]&&(o[Od]=!0),null===u?o[lo]=[a]:u.push(a)}(v,a);const E=a[Ir];null!==E&&E.insertView(o),a[Jt]|=64}(f,d,v,g);const E=gv(g,v),I=d[Kt],A=_p(I,v[Bs]);return null!==A&&function oh(o,a,u,d,f,g){d[vs]=f,d[xn]=a,uh(o,d,u,1,f,g)}(f,v[xn],I,d,A,E),a.attachToViewContainerRef(),Tc(z_(v),g,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=NI(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),d=fp(this._lContainer,u);d&&(Ho(z_(this._lContainer),u),pp(d[gt],d))}detach(a){const u=this._adjustIndex(a,-1),d=fp(this._lContainer,u);return d&&null!=Ho(z_(this._lContainer),u)?new Gp(d):null}_adjustIndex(a,u=0){return a??this.length+u}};function NI(o){return o[ws]}function z_(o){return o[ws]||(o[ws]=[])}function _d(o,a){let u;const d=a[o.index];if(Or(d))u=d;else{let f;if(8&o.type)f=ir(d);else{const g=a[Kt];f=g.createComment("");const v=Mr(o,a);Iu(g,_p(g,v),f,function Jw(o,a){return o.nextSibling(a)}(g,v),!1)}a[o.index]=u=t_(d,a,f,o),Vp(a,u)}return new Qh(u,o,a)}class Yo{constructor(a){this.queryList=a,this.matches=null}clone(){return new Yo(this.queryList)}setDirty(){this.queryList.setDirty()}}class q_{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const d=null!==a.contentQueries?a.contentQueries[0]:u.length,f=[];for(let g=0;g<d;g++){const v=u.getByIndex(g);f.push(this.queries[v.indexInDeclarationView].clone())}return new q_(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==Xh(a,u).matches&&this.queries[u].setDirty()}}class eb{constructor(a,u,d=null){this.predicate=a,this.flags=u,this.read=d}}class K_{constructor(a=[]){this.queries=a}elementStart(a,u){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let d=0;d<this.length;d++){const f=null!==u?u.length:0,g=this.getByIndex(d).embeddedTView(a,f);g&&(g.indexInDeclarationView=d,null!==u?u.push(g):u=[g])}return null!==u?new K_(u):null}template(a,u){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Uu{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new Uu(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==u;)d=d.parent;return u===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const g=d[f];this.matchTNodeWithReadOption(a,u,tb(u,g)),this.matchTNodeWithReadOption(a,u,Vo(u,a,g,!1,!1))}else d===Sl?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,Vo(u,a,d,!1,!1))}matchTNodeWithReadOption(a,u,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===_l||f===md||f===Sl&&4&u.type)this.addMatch(u.index,-2);else{const g=Vo(u,a,f,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,d)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function tb(o,a){const u=o.localNames;if(null!==u)for(let d=0;d<u.length;d+=2)if(u[d]===a)return u[d+1];return null}function Qr(o,a,u,d){return-1===u?function mA(o,a){return 11&o.type?Fc(o,a):4&o.type?gd(o,a):null}(a,o):-2===u?function Sn(o,a,u){return u===_l?Fc(a,o):u===Sl?gd(a,o):u===md?_d(a,o):void 0}(o,a,d):Go(o,o[gt],u,a)}function nb(o,a,u,d){const f=a[Ir].queries[d];if(null===f.matches){const g=o.data,v=u.matches,E=[];for(let I=0;I<v.length;I+=2){const A=v[I];E.push(A<0?null:Qr(a,g[A],v[I+1],u.metadata.read))}f.matches=E}return f.matches}function Z_(o,a,u,d){const f=o.queries.getByIndex(u),g=f.matches;if(null!==g){const v=nb(o,a,f,u);for(let E=0;E<g.length;E+=2){const I=g[E];if(I>0)d.push(v[E/2]);else{const A=g[E+1],M=a[-I];for(let B=ii;B<M.length;B++){const J=M[B];J[ao]===J[Pn]&&Z_(J[gt],J,A,d)}if(null!==M[lo]){const B=M[lo];for(let J=0;J<B.length;J++){const le=B[J];Z_(le[gt],le,A,d)}}}}}return d}function Al(o){const a=Ge(),u=pn(),d=Vd();au(d+1);const f=Xh(u,d);if(o.dirty&&function eu(o){return 4==(4&o[Jt])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const g=f.crossesNgTemplate?Z_(u,a,d,[]):nb(u,a,f,d);o.reset(g,TE),o.notifyOnChanges()}return!0}return!1}function RI(o,a,u){const d=pn();d.firstCreatePass&&(Jo(d,new eb(o,a,u),-1),2==(2&a)&&(d.staticViewQueries=!0)),ib(d,Ge(),a)}function cs(o,a,u,d){const f=pn();if(f.firstCreatePass){const g=Tr();Jo(f,new eb(a,u,d),g.index),function OI(o,a){const u=o.contentQueries||(o.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,a)}(f,o),2==(2&u)&&(f.staticContentQueries=!0)}ib(f,Ge(),u)}function rb(){return function wg(o,a){return o[Ir].queries[a].queryList}(Ge(),Vd())}function ib(o,a,u){const d=new W_(4==(4&u));De(o,a,d,d.destroy),null===a[Ir]&&(a[Ir]=new q_),a[Ir].queries.push(new Yo(d))}function Jo(o,a,u){null===o.queries&&(o.queries=new K_),o.queries.track(new Uu(a,u))}function Xh(o,a){return o.queries.getByIndex(a)}function MI(o,a){return gd(o,a)}function X_(o){return!!gi(o)}function ny(...o){}const GI=new Fn("Application Initializer");let ry=(()=>{class o{constructor(u){this.appInits=u,this.resolve=ny,this.reject=ny,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(p_(g))u.push(g);else if(g_(g)){const v=new Promise((E,I)=>{g.subscribe({complete:E,error:I})});u.push(v)}}Promise.all(u).then(()=>{d()}).catch(f=>{this.reject(f)}),0===u.length&&d(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(U(GI,8))},o.\u0275prov=pt({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const jI=new Fn("AppId",{providedIn:"root",factory:function HI(){return`${gb()}${gb()}${gb()}`}});function gb(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const $I=new Fn("Platform Initializer"),OA=new Fn("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let WI=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=pt({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const iy=new Fn("LocaleId",{providedIn:"root",factory:()=>Z(iy,_e.Optional|_e.SkipSelf)||function zI(){return typeof $localize<"u"&&$localize.locale||Lt}()}),mb=new Fn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class _b{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let Vu=(()=>{class o{compileModuleSync(u){return new z0(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const d=this.compileModuleSync(u),g=Ia(gi(u).declarations).reduce((v,E)=>{const I=_n(E);return I&&v.push(new Jr(I)),v},[]);return new _b(d,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=pt({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Sg=(()=>Promise.resolve(0))();function sy(o){typeof Zone>"u"?Sg.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Ys{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new us(!1),this.onMicrotaskEmpty=new us(!1),this.onStable=new us(!1),this.onError=new us(!1),typeof Zone>"u")throw new Ee(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&u,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function yb(){let o=Mt.requestAnimationFrame,a=Mt.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function eT(o){const a=()=>{!function XI(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Mt,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,sf(o),o.isCheckStableRunning=!0,vb(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),sf(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,d,f,g,v,E)=>{try{return af(o),u.invokeTask(f,g,v,E)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||o.shouldCoalesceRunChangeDetection)&&a(),ju(o)}},onInvoke:(u,d,f,g,v,E,I)=>{try{return af(o),u.invoke(f,g,v,E,I)}finally{o.shouldCoalesceRunChangeDetection&&a(),ju(o)}},onHasTask:(u,d,f,g)=>{u.hasTask(f,g),d===f&&("microTask"==g.change?(o._hasPendingMicrotasks=g.microTask,sf(o),vb(o)):"macroTask"==g.change&&(o.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,d,f,g)=>(u.handleError(f,g),o.runOutsideAngular(()=>o.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ys.isInAngularZone())throw new Ee(909,!1)}static assertNotInAngularZone(){if(Ys.isInAngularZone())throw new Ee(909,!1)}run(a,u,d){return this._inner.run(a,u,d)}runTask(a,u,d,f){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+f,a,QI,ny,ny);try{return g.runTask(v,u,d)}finally{g.cancelTask(v)}}runGuarded(a,u,d){return this._inner.runGuarded(a,u,d)}runOutsideAngular(a){return this._outer.run(a)}}const QI={};function vb(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function sf(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function af(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function ju(o){o._nesting--,vb(o)}class xA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new us,this.onMicrotaskEmpty=new us,this.onStable=new us,this.onError=new us}run(a,u,d){return a.apply(u,d)}runGuarded(a,u,d){return a.apply(u,d)}runOutsideAngular(a){return a()}runTask(a,u,d,f){return a.apply(u,d)}}const bb=new Fn(""),tT=new Fn("");let Nl,kA=(()=>{class o{constructor(u,d,f){this._ngZone=u,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Nl||(function Ag(o){Nl=o}(f),f.addToWindow(d)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ys.assertNotInAngularZone(),sy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())sy(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(u)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,d,f){let g=-1;d&&d>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),u(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:f})}whenStable(u,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,d,f){return[]}}return o.\u0275fac=function(u){return new(u||o)(U(Ys),U(nT),U(tT))},o.\u0275prov=pt({token:o,factory:o.\u0275fac}),o})(),nT=(()=>{class o{constructor(){this._applications=new Map}registerApplication(u,d){this._applications.set(u,d)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,d=!0){return Nl?.findTestabilityInTree(this,u,d)??null}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=pt({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const fs=!1;let Rl=null;const rT=new Fn("AllowMultipleToken"),wb=new Fn("PlatformDestroyListeners"),oy=new Fn("appBootstrapListener");class Ng{constructor(a,u){this.name=a,this.token=u}}function ps(o,a,u=[]){const d=`Platform: ${a}`,f=new Fn(d);return(g=[])=>{let v=uy();if(!v||v.injector.get(rT,!1)){const E=[...u,...g,{provide:f,useValue:!0}];o?o(E):function ly(o){if(Rl&&!Rl.get(rT,!1))throw new Ee(400,!1);Rl=o;const a=o.get(Ol);(function Eb(o){const a=o.get($I,null);a&&a.forEach(u=>u())})(o)}(function Og(o=[],a){return gh.create({name:a,providers:[{provide:Pv,useValue:"platform"},{provide:wb,useValue:new Set([()=>Rl=null])},...o]})}(E,d))}return function sT(o){const a=uy();if(!a)throw new Ee(401,!1);return a}()}}function uy(){return Rl?.get(Ol)??null}let Ol=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,d){const f=function Ib(o,a){let u;return u="noop"===o?new xA:("zone.js"===o?void 0:o)||new Ys(a),u}(d?.ngZone,function wd(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(d)),g=[{provide:Ys,useValue:f}];return f.run(()=>{const v=gh.create({providers:g,parent:this.injector,name:u.moduleType.name}),E=u.create(v),I=E.injector.get(Np,null);if(!I)throw new Ee(402,!1);return f.runOutsideAngular(()=>{const A=f.onError.subscribe({next:M=>{I.handleError(M)}});E.onDestroy(()=>{Mg(this._modules,E),A.unsubscribe()})}),function Hu(o,a,u){try{const d=u();return p_(d)?d.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>o.handleError(d)),d}}(I,f,()=>{const A=E.injector.get(ry);return A.runInitializers(),A.donePromise.then(()=>(XD(E.injector.get(iy,Lt)||Lt),this._moduleDoBootstrap(E),E))})})}bootstrapModule(u,d=[]){const f=oT({},d);return function ay(o,a,u){const d=new z0(u);return Promise.resolve(d)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(u){const d=u.injector.get(Ml);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new Ee(-403,!1);u.instance.ngDoBootstrap(d)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ee(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const u=this._injector.get(wb,null);u&&(u.forEach(d=>d()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(U(gh))},o.\u0275prov=pt({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function oT(o,a){return Array.isArray(a)?a.reduce(oT,o):{...o,...a}}let Ml=(()=>{class o{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,d,f){this._zone=u,this._injector=d,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new x.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),v=new x.y(E=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{Ys.assertNotInAngularZone(),sy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{Ys.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{I.unsubscribe(),A.unsubscribe()}});this.isStable=(0,ae.T)(g,v.pipe((0,ue.B)()))}bootstrap(u,d){const f=u instanceof DE;if(!this._injector.get(ry).done){!f&&Ii(u);throw new Ee(405,fs)}let v;v=f?u:this._injector.get(Su).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const E=function iT(o){return o.isBoundToModule}(v)?void 0:this._injector.get(ud),A=v.create(gh.NULL,[],d||v.selector,E),M=A.location.nativeElement,B=A.injector.get(bb,null);return B?.registerApplication(M),A.onDestroy(()=>{this.detachView(A.hostView),Mg(this.components,A),B?.unregisterApplication(M)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new Ee(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const d=u;this._views.push(d),d.attachToAppRef(this)}detachView(u){const d=u;Mg(this._views,d),d.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const d=this._injector.get(oy,[]);d.push(...this._bootstrapListeners),d.forEach(f=>f(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Mg(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Ee(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(u){return new(u||o)(U(Ys),U(Pc),U(Np))},o.\u0275prov=pt({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Mg(o,a){const u=o.indexOf(a);u>-1&&o.splice(u,1)}function FA(){return!1}let lT=(()=>{class o{}return o.__NG_ELEMENT_ID__=LA,o})();function LA(o){return function uT(o,a,u){if(Zl(o)&&!u){const d=xr(o.index,a);return new Gp(d,d)}return 47&o.type?new Gp(a[ri],a):null}(Tr(),Ge(),16==(16&o))}class py{constructor(){}supports(a){return h_(a)}create(a){return new gy(a)}}const kg=(o,a)=>a;class gy{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||kg}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,d=this._removalsHead,f=0,g=null;for(;u||d;){const v=!d||u&&u.currentIndex<pT(d,f,g)?u:d,E=pT(v,f,g),I=v.currentIndex;if(v===d)f--,d=d._nextRemoved;else if(u=u._next,null==v.previousIndex)f++;else{g||(g=[]);const A=E-f,M=I-f;if(A!=M){for(let J=0;J<A;J++){const le=J<g.length?g[J]:g[J]=0,Ne=le+J;M<=Ne&&Ne<A&&(g[J]=le+1)}g[v.previousIndex]=M-A}}E!==I&&a(v,E,I)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!h_(a))throw new Ee(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,g,v,u=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let E=0;E<this.length;E++)g=a[E],v=this._trackByFn(E,g),null!==u&&Object.is(u.trackById,v)?(d&&(u=this._verifyReinsertion(u,g,v,E)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,v,E),d=!0),u=u._next}else f=0,function cD(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[Symbol.iterator]();let d;for(;!(d=u.next()).done;)a(d.value)}}(a,E=>{v=this._trackByFn(f,E),null!==u&&Object.is(u.trackById,v)?(d&&(u=this._verifyReinsertion(u,E,v,f)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,v,f),d=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,d,f){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,g,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,g,f)):a=this._addAfter(new Nb(u,d),g,f),a}_verifyReinsertion(a,u,d,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==g?a=this._reinsertAfter(g,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,g=a._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(a,u,d),this._addToMoves(a,d),a}_moveAfter(a,u,d){return this._unlink(a),this._insertAfter(a,u,d),this._addToMoves(a,d),a}_addAfter(a,u,d){return this._insertAfter(a,u,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,d){const f=null===u?this._itHead:u._next;return a._next=f,a._prev=u,null===f?this._itTail=a:f._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new Ob),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,d=a._next;return null===u?this._itHead=d:u._next=d,null===d?this._itTail=u:d._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ob),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Nb{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Rb{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===u||u<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const u=a._prevDup,d=a._nextDup;return null===u?this._head=d:u._nextDup=d,null===d?this._tail=u:d._prevDup=u,null===this._head}}class Ob{constructor(){this.map=new Map}put(a){const u=a.trackById;let d=this.map.get(u);d||(d=new Rb,this.map.set(u,d)),d.add(a)}get(a,u){const f=this.map.get(a);return f?f.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function pT(o,a,u){const d=o.previousIndex;if(null===d)return d;let f=0;return u&&d<u.length&&(f=u[d]),d+a+f}class Mb{constructor(){}supports(a){return a instanceof Map||l0(a)}create(){return new gT}}class gT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||l0(a)))throw new Ee(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,d),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(f,d);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let d=u;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const d=a._prev;return u._next=a,u._prev=d,a._prev=u,d&&(d._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,u);const g=f._prev,v=f._next;return g&&(g._next=v),v&&(v._prev=g),f._next=null,f._prev=null,f}const d=new xb(a);return this._records.set(a,d),d.currentValue=u,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(d=>u(a[d],d))}}class xb{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function mT(){return new my([new py])}let my=(()=>{class o{constructor(u){this.factories=u}static create(u,d){if(null!=d){const f=d.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:d=>o.create(u,d||mT()),deps:[[o,new O,new T]]}}find(u){const d=this.factories.find(f=>f.supports(u));if(null!=d)return d;throw new Ee(901,!1)}}return o.\u0275prov=pt({token:o,providedIn:"root",factory:mT}),o})();function kb(){return new Pb([new Mb])}let Pb=(()=>{class o{constructor(u){this.factories=u}static create(u,d){if(d){const f=d.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:d=>o.create(u,d||kb()),deps:[[o,new O,new T]]}}find(u){const d=this.factories.find(f=>f.supports(u));if(d)return d;throw new Ee(901,!1)}}return o.\u0275prov=pt({token:o,providedIn:"root",factory:kb}),o})();const yT=ps(null,"core",[]);let vT=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(U(Ml))},o.\u0275mod=ql({type:o}),o.\u0275inj=Jn({}),o})();function bT(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}function yy(o,a){const u=_n(o),d=a.elementInjector||zm();return new Jr(u).create(d,a.projectableNodes,a.hostElement,a.environmentInjector)}},1321:()=>{const Et=":";class ft extends Error{constructor(ne){super(`No translation found for ${ln(ne)}.`),this.parsedMessage=ne,this.type="MissingTranslationError"}}const yr=function(se,...ne){if(yr.translate){const Re=yr.translate(se,ne);se=Re[0],ne=Re[1]}let de=zn(se[0],se.raw[0]);for(let Re=1;Re<se.length;Re++)de+=ne[Re-1]+zn(se[Re],se.raw[Re]);return de},Li=":";function zn(se,ne){return ne.charAt(0)===Li?se.substring(function We(se,ne){for(let de=1,Re=1;de<se.length;de++,Re++)if("\\"===ne[Re])Re++;else if(se[de]===Et)return de;throw new Error(`Unterminated $localize metadata block in "${ne}".`)}(se,ne)+1):se}(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)().$localize=yr},3942:(Et,Me,L)=>{L.d(Me,{Z:()=>Xe});var l=L(2090),G=L(4859),x=L(9681),ae=L(1877);class ue{constructor(Ee,Le){this._delegate=Ee,this.firebase=Le,(0,x._addComponent)(Ee,new G.wA("app-compat",()=>this,"PUBLIC")),this.container=Ee.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this._delegate.automaticDataCollectionEnabled=Ee}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ee=>{this._delegate.checkDestroyed(),Ee()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,x.deleteApp)(this._delegate)))}_getService(Ee,Le=x._DEFAULT_ENTRY_NAME){var Oe;this._delegate.checkDestroyed();const He=this._delegate.container.getProvider(Ee);return!He.isInitialized()&&"EXPLICIT"===(null===(Oe=He.getComponent())||void 0===Oe?void 0:Oe.instantiationMode)&&He.initialize(),He.getImmediate({identifier:Le})}_removeServiceInstance(Ee,Le=x._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ee).clearInstance(Le)}_addComponent(Ee){(0,x._addComponent)(this._delegate,Ee)}_addOrOverwriteComponent(Ee){(0,x._addOrOverwriteComponent)(this._delegate,Ee)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ie=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function be(){const yt=function me(yt){const Ee={},Le={__esModule:!0,initializeApp:function Ve(ie,pe={}){const Ce=x.initializeApp(ie,pe);if((0,l.r3)(Ee,Ce.name))return Ee[Ce.name];const nt=new yt(Ce,Le);return Ee[Ce.name]=nt,nt},app:He,registerVersion:x.registerVersion,setLogLevel:x.setLogLevel,onLog:x.onLog,apps:null,SDK_VERSION:x.SDK_VERSION,INTERNAL:{registerComponent:function Pe(ie){const pe=ie.name,Ce=pe.replace("-compat","");if(x._registerComponent(ie)&&"PUBLIC"===ie.type){const nt=(ze=He())=>{if("function"!=typeof ze[Ce])throw Ie.create("invalid-app-argument",{appName:pe});return ze[Ce]()};void 0!==ie.serviceProps&&(0,l.ZB)(nt,ie.serviceProps),Le[Ce]=nt,yt.prototype[Ce]=function(...ze){return this._getService.bind(this,pe).apply(this,ie.multipleInstances?ze:[])}}return"PUBLIC"===ie.type?Le[Ce]:null},removeApp:function Oe(ie){delete Ee[ie]},useAsService:function et(ie,pe){return"serverAuth"===pe?null:pe},modularAPIs:x}};function He(ie){if(!(0,l.r3)(Ee,ie=ie||x._DEFAULT_ENTRY_NAME))throw Ie.create("no-app",{appName:ie});return Ee[ie]}return Le.default=Le,Object.defineProperty(Le,"apps",{get:function ke(){return Object.keys(Ee).map(ie=>Ee[ie])}}),He.App=yt,Le}(ue);return yt.INTERNAL=Object.assign(Object.assign({},yt.INTERNAL),{createFirebaseNamespace:be,extendNamespace:function Ee(Le){(0,l.ZB)(yt,Le)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),yt}(),H=new ae.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const yt=self.firebase.SDK_VERSION;yt&&yt.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Xe=z;!function Be(yt){(0,x.registerVersion)("@firebase/app-compat","0.1.30",yt)}()},9681:(Et,Me,L)=>{L.r(Me),L.d(Me,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>yr,_DEFAULT_ENTRY_NAME:()=>qe,_addComponent:()=>En,_addOrOverwriteComponent:()=>Rt,_apps:()=>ft,_clearComponents:()=>Jn,_components:()=>ct,_getProvider:()=>pt,_registerComponent:()=>At,_removeServiceInstance:()=>ln,deleteApp:()=>ne,getApp:()=>zn,getApps:()=>se,initializeApp:()=>Li,onLog:()=>_e,registerVersion:()=>Re,setLogLevel:()=>it});var l=L(5861),G=L(4859),x=L(1877),ae=L(2090),ue=L(8766);class ce{constructor(q){this.container=q}getPlatformInfoString(){return this.container.getProviders().map(Z=>{if(function Ie(U){return"VERSION"===U.getComponent()?.type}(Z)){const Fe=Z.getImmediate();return`${Fe.library}/${Fe.version}`}return null}).filter(Z=>Z).join(" ")}}const me="@firebase/app",z=new x.Yd("@firebase/app"),qe="[DEFAULT]",We={[me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ft=new Map,ct=new Map;function En(U,q){try{U.container.addComponent(q)}catch(Z){z.debug(`Component ${q.name} failed to register with FirebaseApp ${U.name}`,Z)}}function Rt(U,q){U.container.addOrOverwriteComponent(q)}function At(U){const q=U.name;if(ct.has(q))return z.debug(`There were multiple attempts to register component ${q}.`),!1;ct.set(q,U);for(const Z of ft.values())En(Z,U);return!0}function pt(U,q){const Z=U.container.getProvider("heartbeat").getImmediate({optional:!0});return Z&&Z.triggerHeartbeat(),U.container.getProvider(q)}function ln(U,q,Z=qe){pt(U,q).clearInstance(Z)}function Jn(){ct.clear()}const un=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class cr{constructor(q,Z,Fe){this._isDeleted=!1,this._options=Object.assign({},q),this._config=Object.assign({},Z),this._name=Z.name,this._automaticDataCollectionEnabled=Z.automaticDataCollectionEnabled,this._container=Fe,this.container.addComponent(new G.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(q){this.checkDestroyed(),this._automaticDataCollectionEnabled=q}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(q){this._isDeleted=q}checkDestroyed(){if(this.isDeleted)throw un.create("app-deleted",{appName:this._name})}}const yr="9.9.1";function Li(U,q={}){"object"!=typeof q&&(q={name:q});const Z=Object.assign({name:qe,automaticDataCollectionEnabled:!1},q),Fe=Z.name;if("string"!=typeof Fe||!Fe)throw un.create("bad-app-name",{appName:String(Fe)});const rt=ft.get(Fe);if(rt){if((0,ae.vZ)(U,rt.options)&&(0,ae.vZ)(Z,rt.config))return rt;throw un.create("duplicate-app",{appName:Fe})}const Ot=new G.H0(Fe);for(const In of ct.values())Ot.addComponent(In);const Dn=new cr(U,Z,Ot);return ft.set(Fe,Dn),Dn}function zn(U=qe){const q=ft.get(U);if(!q)throw un.create("no-app",{appName:U});return q}function se(){return Array.from(ft.values())}function ne(U){return de.apply(this,arguments)}function de(){return(de=(0,l.Z)(function*(U){const q=U.name;ft.has(q)&&(ft.delete(q),yield Promise.all(U.container.getProviders().map(Z=>Z.delete())),U.isDeleted=!0)})).apply(this,arguments)}function Re(U,q,Z){var Fe;let rt=null!==(Fe=We[U])&&void 0!==Fe?Fe:U;Z&&(rt+=`-${Z}`);const Ot=rt.match(/\s|\//),Dn=q.match(/\s|\//);if(Ot||Dn){const In=[`Unable to register library "${rt}" with version "${q}":`];return Ot&&In.push(`library name "${rt}" contains illegal characters (whitespace or "/")`),Ot&&Dn&&In.push("and"),Dn&&In.push(`version name "${q}" contains illegal characters (whitespace or "/")`),void z.warn(In.join(" "))}At(new G.wA(`${rt}-version`,()=>({library:rt,version:q}),"VERSION"))}function _e(U,q){if(null!==U&&"function"!=typeof U)throw un.create("invalid-log-argument");(0,x.Am)(U,q)}function it(U){(0,x.Ub)(U)}const cn="firebase-heartbeat-database",Ft=1,Ut="firebase-heartbeat-store";let vn=null;function Mt(){return vn||(vn=(0,ue.X3)(cn,Ft,{upgrade:(U,q)=>{0===q&&U.createObjectStore(Ut)}}).catch(U=>{throw un.create("storage-open",{originalErrorMessage:U.message})})),vn}function xt(){return(xt=(0,l.Z)(function*(U){var q;try{return(yield Mt()).transaction(Ut).objectStore(Ut).get(Vn(U))}catch(Z){throw un.create("storage-get",{originalErrorMessage:null===(q=Z)||void 0===q?void 0:q.message})}})).apply(this,arguments)}function Mn(U,q){return bn.apply(this,arguments)}function bn(){return(bn=(0,l.Z)(function*(U,q){var Z;try{const rt=(yield Mt()).transaction(Ut,"readwrite");return yield rt.objectStore(Ut).put(q,Vn(U)),rt.done}catch(Fe){throw un.create("storage-set",{originalErrorMessage:null===(Z=Fe)||void 0===Z?void 0:Z.message})}})).apply(this,arguments)}function Vn(U){return`${U.name}!${U.options.appId}`}class fi{constructor(q){this.container=q,this._heartbeatsCache=null;const Z=this.container.getProvider("app").getImmediate();this._storage=new tn(Z),this._heartbeatsCachePromise=this._storage.read().then(Fe=>(this._heartbeatsCache=Fe,Fe))}triggerHeartbeat(){var q=this;return(0,l.Z)(function*(){const Fe=q.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),rt=zt();if(null===q._heartbeatsCache&&(q._heartbeatsCache=yield q._heartbeatsCachePromise),q._heartbeatsCache.lastSentHeartbeatDate!==rt&&!q._heartbeatsCache.heartbeats.some(Ot=>Ot.date===rt))return q._heartbeatsCache.heartbeats.push({date:rt,agent:Fe}),q._heartbeatsCache.heartbeats=q._heartbeatsCache.heartbeats.filter(Ot=>{const Dn=new Date(Ot.date).valueOf();return Date.now()-Dn<=2592e6}),q._storage.overwrite(q._heartbeatsCache)})()}getHeartbeatsHeader(){var q=this;return(0,l.Z)(function*(){if(null===q._heartbeatsCache&&(yield q._heartbeatsCachePromise),null===q._heartbeatsCache||0===q._heartbeatsCache.heartbeats.length)return"";const Z=zt(),{heartbeatsToSend:Fe,unsentEntries:rt}=function pi(U,q=1024){const Z=[];let Fe=U.slice();for(const rt of U){const Ot=Z.find(Dn=>Dn.agent===rt.agent);if(Ot){if(Ot.dates.push(rt.date),Q(Z)>q){Ot.dates.pop();break}}else if(Z.push({agent:rt.agent,dates:[rt.date]}),Q(Z)>q){Z.pop();break}Fe=Fe.slice(1)}return{heartbeatsToSend:Z,unsentEntries:Fe}}(q._heartbeatsCache.heartbeats),Ot=(0,ae.L)(JSON.stringify({version:2,heartbeats:Fe}));return q._heartbeatsCache.lastSentHeartbeatDate=Z,rt.length>0?(q._heartbeatsCache.heartbeats=rt,yield q._storage.overwrite(q._heartbeatsCache)):(q._heartbeatsCache.heartbeats=[],q._storage.overwrite(q._heartbeatsCache)),Ot})()}}function zt(){return(new Date).toISOString().substring(0,10)}class tn{constructor(q){this.app=q,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var q=this;return(0,l.Z)(function*(){return(yield q._canUseIndexedDBPromise)&&(yield function wt(U){return xt.apply(this,arguments)}(q.app))||{heartbeats:[]}})()}overwrite(q){var Z=this;return(0,l.Z)(function*(){var Fe;if(yield Z._canUseIndexedDBPromise){const Ot=yield Z.read();return Mn(Z.app,{lastSentHeartbeatDate:null!==(Fe=q.lastSentHeartbeatDate)&&void 0!==Fe?Fe:Ot.lastSentHeartbeatDate,heartbeats:q.heartbeats})}})()}add(q){var Z=this;return(0,l.Z)(function*(){var Fe;if(yield Z._canUseIndexedDBPromise){const Ot=yield Z.read();return Mn(Z.app,{lastSentHeartbeatDate:null!==(Fe=q.lastSentHeartbeatDate)&&void 0!==Fe?Fe:Ot.lastSentHeartbeatDate,heartbeats:[...Ot.heartbeats,...q.heartbeats]})}})()}}function Q(U){return(0,ae.L)(JSON.stringify({version:2,heartbeats:U})).length}!function $(U){At(new G.wA("platform-logger",q=>new ce(q),"PRIVATE")),At(new G.wA("heartbeat",q=>new fi(q),"PRIVATE")),Re(me,"0.7.29",U),Re(me,"0.7.29","esm2017"),Re("fire-js","")}("")},4859:(Et,Me,L)=>{L.d(Me,{H0:()=>me,wA:()=>x,zt:()=>ue});var l=L(5861),G=L(2090);class x{constructor(z,H,ee){this.name=z,this.instanceFactory=H,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const ae="[DEFAULT]";class ue{constructor(z,H){this.name=z,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const H=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(H)){const ee=new G.BH;if(this.instancesDeferred.set(H,ee),this.isInitialized(H)||this.shouldAutoInitialize())try{const Ye=this.getOrInitializeService({instanceIdentifier:H});Ye&&ee.resolve(Ye)}catch{}}return this.instancesDeferred.get(H).promise}getImmediate(z){var H;const ee=this.normalizeInstanceIdentifier(z?.identifier),Ye=null!==(H=z?.optional)&&void 0!==H&&H;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(Ye)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(Be){if(Ye)return null;throw Be}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function Ie(be){return"EAGER"===be.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[H,ee]of this.instancesDeferred.entries()){const Ye=this.normalizeInstanceIdentifier(H);try{const Be=this.getOrInitializeService({instanceIdentifier:Ye});ee.resolve(Be)}catch{}}}}clearInstance(z=ae){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,l.Z)(function*(){const H=Array.from(z.instances.values());yield Promise.all([...H.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...H.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=ae){return this.instances.has(z)}getOptions(z=ae){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:H={}}=z,ee=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ye=this.getOrInitializeService({instanceIdentifier:ee,options:H});for(const[Be,Xe]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(Be)&&Xe.resolve(Ye);return Ye}onInit(z,H){var ee;const Ye=this.normalizeInstanceIdentifier(H),Be=null!==(ee=this.onInitCallbacks.get(Ye))&&void 0!==ee?ee:new Set;Be.add(z),this.onInitCallbacks.set(Ye,Be);const Xe=this.instances.get(Ye);return Xe&&z(Xe,Ye),()=>{Be.delete(z)}}invokeOnInitCallbacks(z,H){const ee=this.onInitCallbacks.get(H);if(ee)for(const Ye of ee)try{Ye(z,H)}catch{}}getOrInitializeService({instanceIdentifier:z,options:H={}}){let ee=this.instances.get(z);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(be=z,be===ae?void 0:be),options:H}),this.instances.set(z,ee),this.instancesOptions.set(z,H),this.invokeOnInitCallbacks(ee,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,ee)}catch{}var be;return ee||null}normalizeInstanceIdentifier(z=ae){return this.component?this.component.multipleInstances?z:ae:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class me{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const H=this.getProvider(z.name);if(H.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);H.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const H=new ue(z,this);return this.providers.set(z,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(Et,Me,L)=>{L.d(Me,{Am:()=>be,Ub:()=>me,Yd:()=>Ie,in:()=>G});const l=[];var G=(()=>{return(z=G||(G={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",G;var z})();const x={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},ae=G.INFO,ue={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},ce=(z,H,...ee)=>{if(H<z.logLevel)return;const Ye=(new Date).toISOString(),Be=ue[H];if(!Be)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Be](`[${Ye}]  ${z.name}:`,...ee)};class Ie{constructor(H){this.name=H,this._logLevel=ae,this._logHandler=ce,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in G))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?x[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...H),this._logHandler(this,G.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...H),this._logHandler(this,G.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,G.INFO,...H),this._logHandler(this,G.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,G.WARN,...H),this._logHandler(this,G.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...H),this._logHandler(this,G.ERROR,...H)}}function me(z){l.forEach(H=>{H.setLogLevel(z)})}function be(z,H){for(const ee of l){let Ye=null;H&&H.level&&(Ye=x[H.level]),ee.userLogHandler=null===z?null:(Be,Xe,...yt)=>{const Ee=yt.map(Le=>{if(null==Le)return null;if("string"==typeof Le)return Le;if("number"==typeof Le||"boolean"==typeof Le)return Le.toString();if(Le instanceof Error)return Le.message;try{return JSON.stringify(Le)}catch{return null}}).filter(Le=>Le).join(" ");Xe>=(Ye??Be.logLevel)&&z({level:G[Xe].toLowerCase(),message:Ee,args:yt,type:Be.name})}}}},8766:(Et,Me,L)=>{L.d(Me,{Lj:()=>Ve,X3:()=>He});var l=L(5861);const G=(pe,Ce)=>Ce.some(nt=>pe instanceof nt);let x,ae;const Ie=new WeakMap,me=new WeakMap,be=new WeakMap,z=new WeakMap,H=new WeakMap;let Be={get(pe,Ce,nt){if(pe instanceof IDBTransaction){if("done"===Ce)return me.get(pe);if("objectStoreNames"===Ce)return pe.objectStoreNames||be.get(pe);if("store"===Ce)return nt.objectStoreNames[1]?void 0:nt.objectStore(nt.objectStoreNames[0])}return Le(pe[Ce])},set:(pe,Ce,nt)=>(pe[Ce]=nt,!0),has:(pe,Ce)=>pe instanceof IDBTransaction&&("done"===Ce||"store"===Ce)||Ce in pe};function Ee(pe){return"function"==typeof pe?function yt(pe){return pe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ce(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(pe)?function(...Ce){return pe.apply(Oe(this),Ce),Le(Ie.get(this))}:function(...Ce){return Le(pe.apply(Oe(this),Ce))}:function(Ce,...nt){const ze=pe.call(Oe(this),Ce,...nt);return be.set(ze,Ce.sort?Ce.sort():[Ce]),Le(ze)}}(pe):(pe instanceof IDBTransaction&&function Ye(pe){if(me.has(pe))return;const Ce=new Promise((nt,ze)=>{const kt=()=>{pe.removeEventListener("complete",lt),pe.removeEventListener("error",he),pe.removeEventListener("abort",he)},lt=()=>{nt(),kt()},he=()=>{ze(pe.error||new DOMException("AbortError","AbortError")),kt()};pe.addEventListener("complete",lt),pe.addEventListener("error",he),pe.addEventListener("abort",he)});me.set(pe,Ce)}(pe),G(pe,function ue(){return x||(x=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(pe,Be):pe)}function Le(pe){if(pe instanceof IDBRequest)return function ee(pe){const Ce=new Promise((nt,ze)=>{const kt=()=>{pe.removeEventListener("success",lt),pe.removeEventListener("error",he)},lt=()=>{nt(Le(pe.result)),kt()},he=()=>{ze(pe.error),kt()};pe.addEventListener("success",lt),pe.addEventListener("error",he)});return Ce.then(nt=>{nt instanceof IDBCursor&&Ie.set(nt,pe)}).catch(()=>{}),H.set(Ce,pe),Ce}(pe);if(z.has(pe))return z.get(pe);const Ce=Ee(pe);return Ce!==pe&&(z.set(pe,Ce),H.set(Ce,pe)),Ce}const Oe=pe=>H.get(pe);function He(pe,Ce,{blocked:nt,upgrade:ze,blocking:kt,terminated:lt}={}){const he=indexedDB.open(pe,Ce),ve=Le(he);return ze&&he.addEventListener("upgradeneeded",Te=>{ze(Le(he.result),Te.oldVersion,Te.newVersion,Le(he.transaction))}),nt&&he.addEventListener("blocked",()=>nt()),ve.then(Te=>{lt&&Te.addEventListener("close",()=>lt()),kt&&Te.addEventListener("versionchange",()=>kt())}).catch(()=>{}),ve}function Ve(pe,{blocked:Ce}={}){const nt=indexedDB.deleteDatabase(pe);return Ce&&nt.addEventListener("blocked",()=>Ce()),Le(nt).then(()=>{})}const ke=["get","getKey","getAll","getAllKeys","count"],Pe=["put","add","delete","clear"],et=new Map;function ie(pe,Ce){if(!(pe instanceof IDBDatabase)||Ce in pe||"string"!=typeof Ce)return;if(et.get(Ce))return et.get(Ce);const nt=Ce.replace(/FromIndex$/,""),ze=Ce!==nt,kt=Pe.includes(nt);if(!(nt in(ze?IDBIndex:IDBObjectStore).prototype)||!kt&&!ke.includes(nt))return;const lt=function(){var he=(0,l.Z)(function*(ve,...Te){const Ue=this.transaction(ve,kt?"readwrite":"readonly");let qe=Ue.store;return ze&&(qe=qe.index(Te.shift())),(yield Promise.all([qe[nt](...Te),kt&&Ue.done]))[0]});return function(Te){return he.apply(this,arguments)}}();return et.set(Ce,lt),lt}!function Xe(pe){Be=pe(Be)}(pe=>({...pe,get:(Ce,nt,ze)=>ie(Ce,nt)||pe.get(Ce,nt,ze),has:(Ce,nt)=>!!ie(Ce,nt)||pe.has(Ce,nt)}))},5861:(Et,Me,L)=>{function l(x,ae,ue,ce,Ie,me,be){try{var z=x[me](be),H=z.value}catch(ee){return void ue(ee)}z.done?ae(H):Promise.resolve(H).then(ce,Ie)}function G(x){return function(){var ae=this,ue=arguments;return new Promise(function(ce,Ie){var me=x.apply(ae,ue);function be(H){l(me,ce,Ie,be,z,"next",H)}function z(H){l(me,ce,Ie,be,z,"throw",H)}be(void 0)})}}L.d(Me,{Z:()=>G})}},Et=>{var Me=l=>Et(Et.s=l);Me(1321),Me(1888)}]);